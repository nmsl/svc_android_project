cscope 15 $HOME/hg/svc_mc/jni/SVC               0000617834
	@lib_svc/BL.c

35 
	~"d©a.h
"

38 
	~"svc_ty³.h
"

39 
	~"svc_d©a.h
"

40 
	~"BL.h
"

41 
	~"I_BL.h
"

42 
	~"mb_·ddšg.h
"

47 
	$PaddIP¬t
(cÚ¡ 
NAL
 *
N®
, 
REFPART
 *
RefP¬t™iÚ
, *
Lpix
, *
Cbpix
, *
C½ix
){

50 cÚ¡ 
L¡ride
 = 
N®
 -> 
ba£_Width
 + 32;

51 cÚ¡ 
C¡ride
 = 
L¡ride
 >> 1;

52 
	`m”ge
(8, 8, -
L¡ride
, &
Lpix
[L¡ride], Lpix, 
RefP¬t™iÚ
[10] . 
RefIdc
 == -2, -Lstride, -1);

53 
	`m”ge
(4, 4, -
C¡ride
, &
Cbpix
[C¡ride], Cbpix, 
RefP¬t™iÚ
[10] . 
RefIdc
 == -2, -Cstride, -1);

54 
	`m”ge
(4, 4, -
C¡ride
, &
C½ix
[C¡ride], C½ix, 
RefP¬t™iÚ
[10] . 
RefIdc
 == -2, -Cstride, -1);

57 ià(
RefP¬t™iÚ
[10] . 
RefIdc
 != -2){

58 
	`m”ge
(8, 8, 
L¡ride
, &
Lpix
[1], &Lpix[1 + Lstride], 0, Lstride, 1);

59 
	`m”ge
(4, 4, 
C¡ride
, &
Cbpix
[1], &Cbpix[1 + Cstride], 0, Cstride, 1);

60 
	`m”ge
(4, 4, 
C¡ride
, &
C½ix
[1], &Crpix[1 + Cstride], 0, Cstride, 1);

62 
	}
}

70 
	$DecodeIP¬t
(cÚ¡ 
NAL
 *
N®
, cÚ¡ 
PPS
 *
Pps
, cÚ¡ 
SPS
 *
Sps
, 
REFPART
 *
RefP¬t™iÚ
,

71 
RESIDU
 *
Ba£Residu
, cÚ¡ 
PicWidthInPix
, 
mbBa£Addr
,

72 
x
, 
y
, 
x_ba£
, 
y_ba£
, 
x_mbP¬tIdx
, 
y_mbP¬tIdx
,

73 
Ba£Y
[ ], 
Ba£Cb
[ ], 
Ba£Cr
[ ],

74 
Y
[ ], 
U
[ ], 
V
[ ],

75 
MbP»dY
[ ], 
MbP»dU
[ ], 
MbP»dV
[ ])

80 
cX
 = 8;

81 
cY
 = 8;

82 *
Y_up
 = 
Y
;

83 *
U_up
 = 
U
;

84 *
V_up
 = 
V
;

89 ià(!
	`IS_I_SVC
(
Ba£Residu
 [
mbBa£Addr
] . 
MbTy³
)){

92 
dÚe
 = 0;

93 
xdeÿl
 = 
RefP¬t™iÚ
[8] . 
RefIdc
 != -2;

94 
ydeÿl
 = 
RefP¬t™iÚ
[2] . 
RefIdc
 != -2;

97 iàĞ
RefP¬t™iÚ
[2] . 
RefIdc
 =ğ-2 && 
xdeÿl
) {

98 
mbBa£Addr
 = (è(
RefP¬t™iÚ
[2] . 
P¬tIdc
 >> 4);

99 
x_mbP¬tIdx
 = (è((
RefP¬t™iÚ
[2] . 
P¬tIdc
 & 0x0f) & 0x03);

100 
y_mbP¬tIdx
 = (è((
RefP¬t™iÚ
[2] . 
P¬tIdc
 & 0x0f) >> 2);

103 
	`G‘MbPos™iÚ
(
mbBa£Addr
, 
N®
 -> 
ba£_Width
 >> 4, &
x_ba£
, &
y_ba£
);

104 
Y_up
 += 8;

105 
U_up
 += 4;

106 
V_up
 += 4;

107 
x
 += 8;

108 
dÚe
 = 1;

112 iàĞ!
dÚe
 && 
RefP¬t™iÚ
[8] . 
RefIdc
 =ğ-2 && 
ydeÿl
) {

113 
mbBa£Addr
 = (è(
RefP¬t™iÚ
[8] . 
P¬tIdc
 >> 4);

114 
x_mbP¬tIdx
 = (è((
RefP¬t™iÚ
[8] . 
P¬tIdc
 & 0x0f) & 0x03);

115 
y_mbP¬tIdx
 = (è((
RefP¬t™iÚ
[8] . 
P¬tIdc
 & 0x0f) >> 2);

118 
	`G‘MbPos™iÚ
(
mbBa£Addr
, 
N®
 -> 
ba£_Width
 >> 4, &
x_ba£
, &
y_ba£
);

119 
Y_up
 +ğ(
PicWidthInPix
 << 3);

120 
U_up
 +ğ(
PicWidthInPix
 << 1);

121 
V_up
 +ğ(
PicWidthInPix
 << 1);

122 
y
 += 8;

123 
dÚe
 = 1;

127 iàĞ!
dÚe
 && 
xdeÿl
 && 
ydeÿl
) {

128 
mbBa£Addr
 = (è(
RefP¬t™iÚ
[10] . 
P¬tIdc
 >> 4);

129 
x_mbP¬tIdx
 = (è((
RefP¬t™iÚ
[10] . 
P¬tIdc
 & 0x0f) & 0x03);

130 
y_mbP¬tIdx
 = (è((
RefP¬t™iÚ
[10] . 
P¬tIdc
 & 0x0f) >> 2);

133 
	`G‘MbPos™iÚ
(
mbBa£Addr
, 
N®
 -> 
ba£_Width
 >> 4, &
x_ba£
, &
y_ba£
);

134 
Y_up
 +ğ8 + (
PicWidthInPix
 << 3);

135 
U_up
 +ğ4 + (
PicWidthInPix
 << 1);

136 
V_up
 +ğ4 + (
PicWidthInPix
 << 1);

137 
x
 += 8;

138 
y
 += 8;

139 
dÚe
 = 1;

145 if(!
dÚe
){

147 cÚ¡ 
LCu¼Pos
 = (((
x_ba£
 << 2è+ 
x_mbP¬tIdx
è<< 2è+ 7 + ((((
y_ba£
 << 2è+ 
y_mbP¬tIdx
è<< 2è+ 7è* (
N®
 -> 
ba£_Width
 + 32);

148 cÚ¡ 
CCu¼Pos
 = (((
x_ba£
 << 2è+ 
x_mbP¬tIdx
è<< 1è+ 3 + ((((
y_ba£
 << 2è+ 
y_mbP¬tIdx
è<< 1è+ 3è* ((
N®
 -> 
ba£_Width
 + 32) >> 1);

150 
	`PaddIP¬t
(
N®
, 
RefP¬t™iÚ
, &
Ba£Y
[
LCu¼Pos
], &
Ba£Cb
[
CCu¼Pos
], &
Ba£Cr
[CCurrPos]);

156 
	`MbIPad
(
N®
, 
Pps
, 
Sps
, 
mbBa£Addr
, 
x
, 
y
, 
x_ba£
, 
y_ba£
, 
x_mbP¬tIdx
, 
y_mbP¬tIdx
, 
Ba£Residu
, 
Ba£Y
, 
Ba£Cb
, 
Ba£Cr
, 
Y_up
, 
U_up
, 
V_up
);

159 iàĞ
RefP¬t™iÚ
[0] . 
RefIdc
 == -2) {

160 
	`cİy_2d
 (
cY
, 
cX
, 
PicWidthInPix
, 16, 
Y
, 
MbP»dY
);

161 
	`cİy_2d
 (
cY
 >> 1, 
cX
 >> 1,
PicWidthInPix
 >> 1, 8, 
U
, 
MbP»dU
);

162 
	`cİy_2d
 (
cY
 >> 1, 
cX
 >> 1,
PicWidthInPix
 >> 1, 8, 
V
, 
MbP»dV
);

165 ià(
cX
 < 16 && 
RefP¬t™iÚ
[2] . 
RefIdc
 == -2) {

166 
	`cİy_2d
 (
cY
, 16 - 
cX
,
PicWidthInPix
, 16, &
Y
[cX], &
MbP»dY
[cX]);

167 
	`cİy_2d
 (
cY
 >> 1, 8 - (
cX
 >> 1), 
PicWidthInPix
 >> 1, 8, &
U
[cX >> 1], &
MbP»dU
[cX >> 1]);

168 
	`cİy_2d
 (
cY
 >> 1, 8 - (
cX
 >> 1), 
PicWidthInPix
 >> 1, 8, &
V
[cX >> 1], &
MbP»dV
[cX >> 1]);

171 iàĞ
RefP¬t™iÚ
[8] . 
RefIdc
 == -2) {

172 
	`cİy_2d
 (16 - 
cY
, 
cX
,
PicWidthInPix
, 16, &
Y
[cY * PicWidthInPix], &
MbP»dY
[cY * 16]);

173 
	`cİy_2d
 (8 - (
cY
 >> 1), 
cX
 >> 1, 
PicWidthInPix
 >> 1, 8, &
U
[(cY >> 1è* (PicWidthInPix >> 1)], &
MbP»dU
[(cY >> 1) * 8] );

174 
	`cİy_2d
 (8 - (
cY
 >> 1), 
cX
 >> 1, 
PicWidthInPix
 >> 1, 8, &
V
[(cY >> 1è* (PicWidthInPix >> 1)], &
MbP»dV
[(cY >> 1) * 8] );

177 iàĞ
RefP¬t™iÚ
[10] . 
RefIdc
 == -2) {

178 
	`cİy_2d
 (16 - 
cY
, 16 - 
cX
, 
PicWidthInPix
, 16, &
Y
[cX + cY * PicWidthInPix], &
MbP»dY
[cX + cY * 16] );

179 
	`cİy_2d
 (8 - (
cY
 >> 1), 8 - (
cX
 >> 1), 
PicWidthInPix
 >> 1, 8, &
U
[(cX >> 1è+ (cY >> 1è* (PicWidthInPix >> 1)], &
MbP»dU
[(cX >> 1) + (cY >> 1) * 8] );

180 
	`cİy_2d
 (8 - (
cY
 >> 1), 8 - (
cX
 >> 1), 
PicWidthInPix
 >> 1, 8, &
V
[(cX >> 1è+ (cY >> 1è* (PicWidthInPix >> 1)], &
MbP»dV
[(cX >> 1) + (cY >> 1) * 8] );

182 
	}
}

190 
	$G‘NÚDŸdicSam¶e
(cÚ¡ 
Residu®P»diùiÚ
, 
RefIdc
, 
cX
, 
cY
, cÚ¡ 
PicWidthInPix


191 , *
P»d
, *
IÁ¿P»d
, *
Ba£Residu
, *
Cu¼Residu
){

194 
i
,
j
;

198 iàĞ
RefIdc
 == -2) {

199 
	`cİy_2d
 (
cY
, 
cX
, cX << 1, 
PicWidthInPix
, 
IÁ¿P»d
, 
P»d
);

200 } ià(
Residu®P»diùiÚ
){

201  
i
 = 0; i < 
cX
; i++){

202 
j
 = 0; j < 
cY
; j++){

203 
Cu¼Residu
[(
i
 * (
cX
 << 1)è+ 
j
] = Cu¼Residu[(˜* (cX << 1)è+ j] + 
Ba£Residu
[j + i * 
PicWidthInPix
];

207 
	`add_ş_2d
 (
cY
, 
cX
, cX << 1, 
PicWidthInPix
, 
Cu¼Residu
 , 
P»d
);

208 
	}
}

	@lib_svc/BL.h

35 #iâdeà
BL_H


36 
	#BL_H


	)

38 
DecodeIP¬t
(cÚ¡ 
NAL
 *
N®
, cÚ¡ 
PPS
 *
Pps
, cÚ¡ 
SPS
 *
Sps
, 
REFPART
 *
RefP¬t™iÚ
,

39 
RESIDU
 *
Ba£Residu
, cÚ¡ 
PicWidthInPix
, 
mbBa£Addr
,

40 
x
, 
y
, 
x_ba£
, 
y_ba£
, 
x_mbP¬tIdx
, 
y_mbP¬tIdx
,

41 
Ba£Y
[ ], 
Ba£Cb
[ ], 
Ba£Cr
[ ],

42 
Y
[ ], 
U
[ ], 
V
[ ],

43 
MbP»dY
[ ], 
MbP»dU
[ ], 
MbP»dV
[ ]);

46 
G‘NÚDŸdicSam¶e
(cÚ¡ 
Residu®P»diùiÚ
, 
RefIdc
, 
cX
, 
cY
, cÚ¡ 
PicWidthInPix
,

47 *
P»d
, *
IÁ¿P»d
, *
Ba£Residu
, *
Cu¼Residu
);

	@lib_svc/BL_residual.c

34 
	~"¡ršg.h
"

37 
	~"ty³.h
"

38 
	~"symbŞ.h
"

39 
	~"T¿nsfÜm.h
"

40 
	~"decode_mb_P.h
"

41 
	~"ŒªsfÜm_8x8.h
"

42 
	~"quªtiz©iÚ.h
"

47 
	~"svc_ty³.h
"

48 
	~"BL_»sidu®.h
"

49 
	~"»sidu®_4x4.h
"

50 
	~"»sidu®_8x8.h
"

51 
	~"»sidu®_chroma.h
"

52 
	~"Residu®Proûssšg.h
"

53 
	~"CÛffLev–P»diùiÚ.h
"

61 
	$Compu‹Cu¼’tResidu®
(cÚ¡ 
NAL
 *
N®
, 
RESIDU
 *
Cu¼Residu
, RESIDU *
Ba£Residu
, cÚ¡ 
PPS
 *
Pps
, cÚ¡ 
W_TABLES
 *
Quªtif
,

62 cÚ¡ 
PicWidthInPix
, *
Y
, *
U
, *
V
)

66 ià(
N®
 -> 
PicToDecode
){

68 
	`Compu‹Residu®
(
Pps
, 
Cu¼Residu
, 
PicWidthInPix
, 
Y
, 
U
, 
V
, 
Quªtif
);

70 ifĞ
Cu¼Residu
 -> 
Cbp
){

72 
	`ResÿËCu¼’tCÛff
(
Cu¼Residu
, 
Ba£Residu
, 
Pps
, 
Quªtif
, 
N®
 -> 
S·tŸlSÿÏb™y
);

75 
	}
}

83 
	$Compu‹Residu®Image
(cÚ¡ 
PPS
 *
Pps
, 
RESIDU
 *
Cu¼Residu
, cÚ¡ 
PicWidthInPix
,

84 *
Y
, *
U
, *
V
, cÚ¡ 
W_TABLES
 *
Quªtif
)

86 iàĞ
Cu¼Residu
 -> 
Cbp
){

87 iàĞ!
Cu¼Residu
 -> 
T¿nsfÜm8x8
){

88 
	`StÜeRes4x4
(
Y
, 
Cu¼Residu
, 
PicWidthInPix
, 
Quªtif
 -> 
W4x4_š‹r
);

90 
	`StÜeRes8x8
(
Y
, 
Cu¼Residu
, 
PicWidthInPix
, 
Quªtif
 -> 
W8x8_š‹r
);

93 
	`StÜeResChroma
(
U
, 
V
, 
Cu¼Residu
, 
Pps
, 
PicWidthInPix
 >> 1, 
Quªtif
);

96 
	`Re£tMbResidu
(
Y
, 
U
, 
V
, 
PicWidthInPix
);

98 
	}
}

	@lib_svc/BL_residual.h

35 #iâdeà
BL_RES_H


36 
	#BL_RES_H


	)

37 
Compu‹Cu¼’tResidu®
(cÚ¡ 
NAL
 *
N®
, 
RESIDU
 *
Cu¼Residu
, RESIDU *
Ba£Residu
, cÚ¡ 
PPS
 *
µs
, cÚ¡ 
W_TABLES
 *
Quªtif
, cÚ¡ 
PicWidthInPix
,

38 *
Y
, *
U
, *
V
);

39 
Compu‹Residu®Image
(cÚ¡ 
PPS
 *
Pps
, 
RESIDU
 *
Cu¼Residu
, cÚ¡ 
PicWidthInPix
,

40 *
Y
, *
U
, *
V
, cÚ¡ 
W_TABLES
 *
Quªtif
);

	@lib_svc/B_BL.c

35 
	~"ty³.h
"

36 
	~"symbŞ.h
"

37 
	~"ş.h
"

38 
	~"decode_mb_P.h
"

39 
	~"»sidu®_chroma.h
"

45 
	~"svc_ty³.h
"

46 
	~"BL.h
"

47 
	~"I_BL.h
"

48 
	~"B_BL.h
"

49 
	~"P_BL.h
"

50 
	~"svc_d©a.h
"

51 
	~"blk4x4.h
"

52 
	~"Mb_P_svc.h
"

53 
	~"mb_·ddšg.h
"

54 
	~"BL_»sidu®.h
"

55 
	~"fl_ÿches_svc.h
"

56 
	~"mÙiÚ_veùÜ_svc.h
"

57 
	~"svc_Ãighbourhood.h
"

58 
	~"mb_up§m¶e_f‹r.h
"

59 
	~"Residu®Proûssšg.h
"

66 
	$Decode_B_BL
(cÚ¡ 
PPS
 * 
Pps
, cÚ¡ 
SPS
 * 
Sps
, cÚ¡ 
NAL
 *
N®
, 
RESIDU
 *
Cu¼Residu
, RESIDU *
ba£_»sidu
, cÚ¡ 
STRUCT_PF
 *
ba£lše_veùÜ
,

67 cÚ¡ 
W_TABLES
 *
Quªtif
, 
LIST_MMO
 * 
ai_p¡RefPicLi¡L0
, LIST_MMO * 
ai_p¡RefPicLi¡L1
, 
x
, 
y
,

68 
x_ba£
, 
y_ba£
, 
x_mbP¬tIdx
, 
y_mbP¬tIdx
, 
PicWidthInPix
, 
REFPART
 
RefP¬t™iÚL0
[16],

69 *
»f_ÿche_l0
, *
»f_ÿche_l1
, 
mv_ÿche_l0
[][2], 
mv_ÿche_l1
[][2],

70 *
mv_l0
, *
mv_l1
, *
»f_ba£_l0
, *
»f_ba£_l1
,

71 *
DpbLuma
, *
DpbCb
, *
DpbCr
,

72 *
Y
, *
U
, *
V
, *
Residu_Luma
, *
Residu_Cb
, *
Residu_Cr
)

77 
mbBa£Addr
 = 
x_ba£
 + 
y_ba£
 * (
N®
 -> 
ba£_Width
 >> 4);

78 cÚ¡ 
PicHeightInMbs
 = (è
Sps
 -> 
pic_height_š_m­_un™s
 + 2;

80 iàĞ!
N®
 -> 
nÚ_dŸdic
){

81 
off£t_Lum
 = 16 + 16 * (
N®
 -> 
cu¼_Width
 + 32);

82 
off£t_Cb
 = 8 + 4 * (
N®
 -> 
cu¼_Width
 + 32);

84 
DpbLuma
 +ğ
off£t_Lum
;

85 
DpbCb
 +ğ
off£t_Cb
;

86 
DpbCr
 +ğ
off£t_Cb
;

88 
	`g‘_ba£_B_mv
(
mv_ÿche_l0
, 
mv_ÿche_l1
, 
»f_ÿche_l0
, 
»f_ÿche_l1
,

89 
DpbLuma
, 
DpbCb
, 
DpbCr
, 
Y
, 
U
, 
V
,

90 
x
 << 4, 
y
 << 4, 
PicWidthInPix
, 
PicHeightInMbs
 << 4, 
ai_p¡RefPicLi¡L0
,

91 
ai_p¡RefPicLi¡L1
, 
RefP¬t™iÚL0
, 
mv_l0
, 
mv_l1
, 
»f_ba£_l0
, 
»f_ba£_l1
,

92 
N®
, 
ba£lše_veùÜ
 -> 
PŒ_š‹½Ş_4x4
);

95 
	`AddResidu®
(
N®
, 
Pps
, 
Cu¼Residu
, &
ba£_»sidu
[
mbBa£Addr
], 
PicWidthInPix
, 
Quªtif
, 
Y
, 
U
, 
V
, 
Residu_Luma
, 
Residu_Cb
, 
Residu_Cr
);

97 
Y_Res
[256];

98 
U_Res
[64];

99 
V_Res
[64];

100 
MbP»dY
[32*32];

101 
MbP»dU
[256];

102 
MbP»dV
[256];

104 
cX
 = 8;

105 
cY
 = 8;

106 
off£t_Lum
 = 16 + 16 * (
N®
 -> 
cu¼_Width
 + 32);

107 
off£t_Cb
 = 8 + 4 * (
N®
 -> 
cu¼_Width
 + 32);

108 
Ba£off£tLum
 = 16 + 16 * (
N®
 -> 
ba£_Width
 + 32);

109 
Ba£Off£tCb
 = 8 + 4 * (
N®
 -> 
ba£_Width
 + 32);

113 
Úe_I
 = (
RefP¬t™iÚL0
[0] . 
RefIdc
 == -2) || (RefPartitionL0[2] . RefIdc == -2) || (RefPartitionL0[8] . RefIdc == -2) || (RefPartitionL0[10] . RefIdc == -2);

116 
	`Compu‹Residu®Image
(
Pps
, 
Cu¼Residu
, 16, 
Y_Res
, 
U_Res
, 
V_Res
, 
Quªtif
);

118 ifĞ
Úe_I
){

119 
	`DecodeIP¬t
(
N®
, 
Pps
, 
Sps
, 
RefP¬t™iÚL0
, 
ba£_»sidu
, 
PicWidthInPix
, 
mbBa£Addr
, 
x
, 
y
,

120 
x_ba£
, 
y_ba£
, 
x_mbP¬tIdx
, 
y_mbP¬tIdx
, &
DpbLuma
[
N®
 -> 
Ba£MemÜyAdd»ss
 + 
Ba£off£tLum
],

121 &
DpbCb
[(
N®
 -> 
Ba£MemÜyAdd»ss
 >> 2è+ 
Ba£Off£tCb
],

122 &
DpbCr
[(
N®
 -> 
Ba£MemÜyAdd»ss
 >> 2è+ 
Ba£Off£tCb
],

123 
Y
, 
U
, 
V
, 
MbP»dY
, 
MbP»dU
, 
MbP»dV
);

127 
DpbLuma
 +ğ
off£t_Lum
;

128 
DpbCb
 +ğ
off£t_Cb
;

129 
DpbCr
 +ğ
off£t_Cb
;

132 
	`G‘Ba£BMvNÚDŸdic
(
mv_ÿche_l0
, 
mv_ÿche_l1
, 
»f_ÿche_l0
, 
»f_ÿche_l1
,

133 
DpbLuma
, 
DpbCb
, 
DpbCr
, 
Y
, 
U
, 
V
,

134 
x
 << 4, 
y
 << 4, 
PicWidthInPix
, 
PicHeightInMbs
 << 4, 
ai_p¡RefPicLi¡L0
,

135 
ai_p¡RefPicLi¡L1
, 
RefP¬t™iÚL0
, 
»f_ba£_l0
, 
»f_ba£_l1
, 
N®
, 
ba£lše_veùÜ
 -> 
PŒ_š‹½Ş_4x4
);

139 
	`G‘NÚDŸdicSam¶e
(
Cu¼Residu
 -> 
Residu®P»diùiÚFÏg
, 
RefP¬t™iÚL0
[0] . 
RefIdc
, 8, 8, 
PicWidthInPix
, 
Y
, 
MbP»dY
, 
Residu_Luma
, 
Y_Res
);

140 
	`G‘NÚDŸdicSam¶e
(
Cu¼Residu
 -> 
Residu®P»diùiÚFÏg
, 
RefP¬t™iÚL0
[0] . 
RefIdc
, 4, 4, 
PicWidthInPix
 >> 1, 
U
, 
MbP»dU
, 
Residu_Cb
, 
U_Res
);

141 
	`G‘NÚDŸdicSam¶e
(
Cu¼Residu
 -> 
Residu®P»diùiÚFÏg
, 
RefP¬t™iÚL0
[0] . 
RefIdc
, 4, 4, 
PicWidthInPix
 >> 1, 
V
, 
MbP»dV
, 
Residu_Cr
, 
V_Res
);

144 
	`G‘NÚDŸdicSam¶e
(
Cu¼Residu
 -> 
Residu®P»diùiÚFÏg
, 
RefP¬t™iÚL0
[2] . 
RefIdc
, 8, 8, 
PicWidthInPix
, &
Y
[
cX
], &
MbP»dY
[cX], &
Residu_Luma
[cX], &
Y_Res
[cX]);

145 
	`G‘NÚDŸdicSam¶e
(
Cu¼Residu
 -> 
Residu®P»diùiÚFÏg
, 
RefP¬t™iÚL0
[2] . 
RefIdc
, 4, 4, 
PicWidthInPix
 >> 1, &
U
[
cX
 >> 1], &
MbP»dU
[cX >> 1], &
Residu_Cb
[cX >> 1], &
U_Res
[cX >> 1]);

146 
	`G‘NÚDŸdicSam¶e
(
Cu¼Residu
 -> 
Residu®P»diùiÚFÏg
, 
RefP¬t™iÚL0
[2] . 
RefIdc
, 4, 4, 
PicWidthInPix
 >> 1, &
V
[
cX
 >> 1], &
MbP»dV
[cX >> 1], &
Residu_Cr
[cX >> 1], &
V_Res
[cX >> 1]);

149 
	`G‘NÚDŸdicSam¶e
(
Cu¼Residu
 -> 
Residu®P»diùiÚFÏg
, 
RefP¬t™iÚL0
[8] . 
RefIdc
, 8, 8, 
PicWidthInPix
, &
Y
[
cY
 * PicWidthInPix], &
MbP»dY
[cY << 4], &
Residu_Luma
[cY * PicWidthInPix], &
Y_Res
[cY << 4]);

150 
	`G‘NÚDŸdicSam¶e
(
Cu¼Residu
 -> 
Residu®P»diùiÚFÏg
, 
RefP¬t™iÚL0
[8] . 
RefIdc
, 4, 4, 
PicWidthInPix
 >> 1, &
U
[(
cY
 >> 1è* (PicWidthInPix >> 1)], &
MbP»dU
[cY << 2], &
Residu_Cb
[(cY >> 1è* (PicWidthInPix >> 1)], &
U_Res
[cY << 2]);

151 
	`G‘NÚDŸdicSam¶e
(
Cu¼Residu
 -> 
Residu®P»diùiÚFÏg
, 
RefP¬t™iÚL0
[8] . 
RefIdc
, 4, 4, 
PicWidthInPix
 >> 1, &
V
[(
cY
 >> 1è* (PicWidthInPix >> 1)], &
MbP»dV
[cY << 2], &
Residu_Cr
[(cY >> 1è* (PicWidthInPix >> 1)], &
V_Res
[cY << 2]);

155 
	`G‘NÚDŸdicSam¶e
(
Cu¼Residu
 -> 
Residu®P»diùiÚFÏg
, 
RefP¬t™iÚL0
[10] . 
RefIdc
, 8, 8, 
PicWidthInPix
, &
Y
[
cX
 + 
cY
 * PicWidthInPix], &
MbP»dY
[cX + (cY << 4)], &
Residu_Luma
[cX + cY * PicWidthInPix], &
Y_Res
[cX + (cY << 4)]);

156 
	`G‘NÚDŸdicSam¶e
(
Cu¼Residu
 -> 
Residu®P»diùiÚFÏg
, 
RefP¬t™iÚL0
[10] . 
RefIdc
, 4, 4, 
PicWidthInPix
 >> 1, &
U
[(
cX
 >> 1è+ (
cY
 >> 1è* (PicWidthInPix >> 1)], &
MbP»dU
[(cX >> 1è+ (cY << 2)], &
Residu_Cb
[(cX >> 1è+ (cY >> 1è* (PicWidthInPix >> 1)], &
U_Res
[(cX >> 1) + (cY << 2)]);

157 
	`G‘NÚDŸdicSam¶e
(
Cu¼Residu
 -> 
Residu®P»diùiÚFÏg
, 
RefP¬t™iÚL0
[10] . 
RefIdc
, 4, 4, 
PicWidthInPix
 >> 1, &
V
[(
cX
 >> 1è+ (
cY
 >> 1è* (PicWidthInPix >> 1)], &
MbP»dV
[(cX >> 1è+ (cY << 2)], &
Residu_Cr
[(cX >> 1è+ (cY >> 1è* (PicWidthInPix >> 1)], &
V_Res
[(cX >> 1) + (cY << 2)]);

160 
	`upd©e_blk4x4Res
(
Y_Res
, 
Cu¼Residu
, 16);

162 
	}
}

	@lib_svc/B_BL.h

34 #iâdeà
B_BL_H


35 
	#B_BL_H


	)

38 
Decode_B_BL
(cÚ¡ 
PPS
 * 
Pps
, cÚ¡ 
SPS
 * 
Sps
, cÚ¡ 
NAL
 *
N®
, 
RESIDU
 *
»sidu
, RESIDU *
ba£_»sidu
,cÚ¡ 
STRUCT_PF
 *
ba£lše_veùÜ


39 , cÚ¡ 
W_TABLES
 *
quªtif
, 
LIST_MMO
 * 
ai_p¡RefPicLi¡L0
, LIST_MMO * 
ai_p¡RefPicLi¡L1
 , 
x
, 
y
, 
x_ba£


40 , 
y_ba£
, 
x_mbP¬tIdx
, 
y_mbP¬tIdx
, 
PicWidthInPix
, 
REFPART
 
RefP¬t™iÚL0
[16]

41 , *
»f_ÿche_l0
, *
»f_ÿche_l1
, 
mv_ÿche_l0
 [][2], 
mv_ÿche_l1
 [][2]

42 , *
mv_l0
, *
mv_l1
, *
»f_ba£_l0
, *
»f_ba£_l1
, *
DpbLuma
, *
DpbCb
, *
DpbCr


43 , 
Y
[ ], 
U
[ ], 
V
[ ], *
Residu_Luma
, *
Residu_Cb
, *
Residu_Cr
);

	@lib_svc/BackEdge.h

34 #iâdeà
BACK_EDGE_H


35 
	#BACK_EDGE_H


	)

39 
BackLeáEdge
 (cÚ¡ 
NAL
 *
N®
, 
AvaMask
, 
tmp_luma
[], 
ba£_luma
[], 
tmp_Cb
[], 
ba£_Cb
[], 
tmp_Cr
[], 
ba£_Cr
[]);

40 
BackRightEdge
 (cÚ¡ 
NAL
 *
N®
, 
AvaMask
, 
tmp_luma
[], 
ba£_luma
[], 
tmp_Cb
[], 
ba£_Cb
[], 
tmp_Cr
[], 
ba£_Cr
[]);

41 
BackTİEdge
 (cÚ¡ 
NAL
 *
N®
, 
AvaMask
, 
tmp_luma
[], 
ba£_luma
[], 
tmp_Cb
[], 
ba£_Cb
[], 
tmp_Cr
[], 
ba£_Cr
[]);

42 
BackTİLeáEdge
 (cÚ¡ 
NAL
 *
N®
, 
AvaMask
, 
tmp_luma
[], 
ba£_luma
[], 
tmp_Cb
[], 
ba£_Cb
[], 
tmp_Cr
[], 
ba£_Cr
[]);

43 
BackTİRightEdge
 (cÚ¡ 
NAL
 *
N®
, 
AvaMask
, 
tmp_luma
[], 
ba£_luma
[], 
tmp_Cb
[], 
ba£_Cb
[], 
tmp_Cr
[], 
ba£_Cr
[]);

44 
BackBÙtomEdge
 (cÚ¡ 
NAL
 *
N®
, 
AvaMask
, 
tmp_luma
[], 
ba£_luma
[], 
tmp_Cb
[], 
ba£_Cb
[], 
tmp_Cr
[], 
ba£_Cr
[]);

45 
BackBÙtomLeáEdge
 (cÚ¡ 
NAL
 *
N®
, 
AvaMask
, 
tmp_luma
[], 
ba£_luma
[], 
tmp_Cb
[], 
ba£_Cb
[], 
tmp_Cr
[], 
ba£_Cr
[]);

46 
BackBÙtomRightEdge
(cÚ¡ 
NAL
 *
N®
, 
AvaMask
, 
tmp_luma
[], 
ba£_luma
[], 
tmp_Cb
[], 
ba£_Cb
[], 
tmp_Cr
[], 
ba£_Cr
[]);

	@lib_svc/CabacBMacroblock.c

36 
	~"ty³.h
"

37 
	~"symbŞ.h
"

38 
	~"svc_d©a.h
"

39 
	~"svc_ty³.h
"

40 
	~"maš_d©a.h
"

41 
	~"vlc_ÿbac.h
"

42 
	~"ÿbac_svc.h
"

43 
	~"VlcCabacSvc.h
"

44 
	~"fl_ÿches.h
"

45 
	~"CabacBMaüoblock.h
"

46 
	~"fl_ÿches_ÿbac.h
"

56 
	$CabacBP¬tiÚnšg
 (
CABACCÚ‹xt
 *
ÿbac
, *
ÿbac_¡©e
, 
SLICE
 *
Sliû
, 
RESIDU
 *
Cu¼’tResidu
, 
DATA
 *
TabBlock
,

57 
CABAC_NEIGH
 *
Neigh
, *
SliûTabË
, 
NÚZ”oCouÁCache
 [], 
mv_ÿche_l0
[][2],

58 *
»f_ÿche_l0
, 
mv_ÿche_l1
[][2], *
»f_ÿche_l1
, cÚ¡ 
iMb_x
, cÚ¡ 
iMb_y
,

59 
DùAÎowed
, 
Dœeù8x8InãrFÏg
, *
La¡QP
, *
MbQpD–
)

62 cÚ¡ 
iCu¼MbAddr
 = 
iMb_x
 + 
iMb_y
 * 
Sliû
 -> 
mb_¡ride
;

63 
coded_block_·‰”n
;

64 
DATA
 *
Cu¼Block
 = &
TabBlock
[
iCu¼MbAddr
];

67 
	`fl_ÿches
Ğ
Sliû
, 
Cu¼’tResidu
, 1, 
NÚZ”oCouÁCache
, 
Cu¼Block
, 
SliûTabË
, 
iMb_x
, 
iMb_y
);

68 
	`fl_ÿches_ÿbac
 (
Sliû
, 
Neigh
, 
SliûTabË
, 
iCu¼MbAddr
, *
MbQpD–
, 
Cu¼’tResidu
);

70 ià(!
	`IS_BL
(
Cu¼’tResidu
 -> 
MbTy³
)){

72 iàĞ
Cu¼Block
 -> 
NumMbP¬t
 == 4 ) {

73 if(
	`SubMbBCabacSVC
(&
DùAÎowed
, 
Dœeù8x8InãrFÏg
, 
ÿbac
, 
ÿbac_¡©e
, 
Sliû
, 
Cu¼Block
, 
Cu¼’tResidu
, 
mv_ÿche_l0
, 
»f_ÿche_l0
, 
mv_ÿche_l1
, 
»f_ÿche_l1
)){

76 }ià(
Cu¼’tResidu
 -> 
MbTy³
 !ğ
B_dœeù
){

77 if(
	`MbP»dBCabacSvc
(
ÿbac
, 
ÿbac_¡©e
, 
Sliû
, 
Cu¼’tResidu
, 
Cu¼Block
, 
mv_ÿche_l0
, 
»f_ÿche_l0
, 
mv_ÿche_l1
, 
»f_ÿche_l1
)){

84 ifĞ
Sliû
 -> 
Ad­tiveResidu®P»diùiÚFÏg
 && (
	`IS_BL
Ğ
Cu¼’tResidu
 -> 
MbTy³
è|| ( !
	`IS_I
ĞCu¼’tResidu -> MbTy³è&& Cu¼’tResidu -> 
InCrİWšdow
 ))){

85 
Cu¼’tResidu
 -> 
Residu®P»diùiÚFÏg
 = 
	`CabacG‘ResP»dFÏg
(
ÿbac
, 
ÿbac_¡©e
, 
	`IS_BL
(Cu¼’tResidu -> 
MbTy³
));

87 
Cu¼’tResidu
 -> 
Residu®P»diùiÚFÏg
 = 
Sliû
 -> 
DeçuÉResidu®P»diùiÚFÏg
;

90 iàĞ
Cu¼Block
 -> 
MbP¬tP»dMode
[0] !ğ
INTRA_16x16
 ) {

91 
Cu¼’tResidu
 -> 
Cbp
 = 
	`decode_ÿbac_mb_cbp_luma
Ğ
ÿbac
, 
ÿbac_¡©e
, Cu¼’tResidu -> 
AvaMask
, 
Neigh
, 
iMb_x
, 
iMb_y
) ;

92 
Cu¼’tResidu
 -> 
Cbp
 |ğ(
	`decode_ÿbac_mb_cbp_chroma
Ğ
ÿbac
, 
ÿbac_¡©e
, 
Neigh
)) << 4 ;

94 iàĞ
DùAÎowed
 && (
Cu¼’tResidu
 -> 
Cbp
 & 15)){

95 ifĞ
	`decode_ÿbac_mb_ŒªsfÜm_size
(
ÿbac
, 
ÿbac_¡©e
, 
TabBlock
, 
Cu¼’tResidu
 -> 
AvaMask
, 
iCu¼MbAddr
, 
Sliû
 -> 
mb_¡ride
)){

96 
Cu¼’tResidu
 -> 
T¿nsfÜm8x8
 = 
Cu¼Block
 -> T¿nsfÜm8x8 = 
INTRA_8x8
;

101 
coded_block_·‰”n
 = 
Cu¼’tResidu
 -> 
Cbp
;

103 iàĞ
Cu¼’tResidu
 -> 
Cbp
 > 0 || 
Cu¼Block
 -> 
MbP¬tP»dMode
[0] =ğ
INTRA_16x16
 ) {

104 *
MbQpD–
 = 
	`decode_ÿbac_mb_dqp
Ğ
ÿbac
, 
ÿbac_¡©e
, 
Neigh
, 
Cu¼’tResidu
[- 1] . 
MbTy³
);

105 #ifdeà
TI_OPTIM


107 *
La¡QP
 = 
Cu¼’tResidu
 -> 
Qp
 = 
	`divide
(*La¡QP + *
MbQpD–
 + 52, 52) >> 8;

109 *
La¡QP
 = 
Cu¼’tResidu
 -> 
Qp
 = (*La¡QP + *
MbQpD–
 + 52) % 52;

113 
	`»sidu®_ÿbac
(
ÿbac
, 
ÿbac_¡©e
, 
Cu¼’tResidu
, 
Neigh
, 
NÚZ”oCouÁCache
, &
coded_block_·‰”n
);

114 
Cu¼’tResidu
 -> 
Cbp
 = 
coded_block_·‰”n
;

118 
	`š™_mb_sk
(
NÚZ”oCouÁCache
);

119 
Cu¼’tResidu
 -> 
Qp
 = *
La¡QP
;

122 
	}
}

	@lib_svc/CabacBMacroblock.h

35 #iâdeà
CABAC_B_MACRO_H


36 
	#CABAC_B_MACRO_H


	)

38 
CabacBP¬tiÚnšg
 (
CABACCÚ‹xt
 *
ÿbac
, *
ÿbac_¡©e
, 
SLICE
 *
Sliû
, 
RESIDU
 *
Cu¼’tResidu
, 
DATA
 *
TabBlock
,

39 
CABAC_NEIGH
 *
Neigh
, *
SliûTabË
, 
NÚZ”oCouÁCache
 [], 
mv_ÿche_l0
[][2],

40 *
»f_ÿche_l0
, 
mv_ÿche_l1
[][2], *
»f_ÿche_l1
, cÚ¡ 
iMb_x
, cÚ¡ 
iMb_y
,

41 
DùAÎowed
, 
Dœeù8x8InãrFÏg
, *
La¡QP
, *
MbQpD–
);

	@lib_svc/CabacIMacroblock.h

37 
CabacIP¬tiÚnšg
 (
CABACCÚ‹xt
 *
ÿbac
, *
ÿbac_¡©e
, 
SLICE
 *
¦iû
, cÚ¡ 
NAL
 *
N®
, 
RESIDU
 *
TabResidu
,

38 
RESIDU
 *
Ba£Residu
, 
DATA
 *
Block
, 
CABAC_NEIGH
 *
Neigh
, *
SliûTabË
,

39 
NÚZ”oCouÁCache
 [], cÚ¡ 
iMb_x
, cÚ¡ 
iMb_y
,

40 
cÚ¡¿šed_šŒa_´ed_æag
, 
DùAÎowed
, *
La¡QP
, *
MbQpD–
);

	@lib_svc/CabacIPartionning.c

34 
	~"ty³.h
"

35 
	~"symbŞ.h
"

36 
	~"svc_d©a.h
"

37 
	~"svc_ty³.h
"

38 
	~"maš_d©a.h
"

39 
	~"vlc_ÿbac.h
"

40 
	~"ÿbac_svc.h
"

41 
	~"VlcCabacSvc.h
"

42 
	~"fl_ÿches.h
"

43 
	~"fl_ÿches_svc.h
"

44 
	~"CabacIMaüoblock.h
"

45 
	~"fl_ÿches_ÿbac.h
"

46 
	~"maüoblock_·¹™iÚnšg.h
"

52 
	$CabacIP¬tiÚnšg
 (
CABACCÚ‹xt
 *
ÿbac
, *
ÿbac_¡©e
, 
SLICE
 *
¦iû
, cÚ¡ 
NAL
 *
N®
, 
RESIDU
 *
Cu¼’tResidu
,

53 
RESIDU
 *
Ba£Residu
, 
DATA
 *
TabBlock
, 
CABAC_NEIGH
 *
Neigh
, *
SliûTabË
,

54 
NÚZ”oCouÁCache
 [], cÚ¡ 
iMb_x
, cÚ¡ 
iMb_y
,

55 
cÚ¡¿šed_šŒa_´ed_æag
, 
DùAÎowed
, *
La¡QP
, *
MbQpD–
)

60 
coded_block_·‰”n
 ;

61 cÚ¡ 
iCu¼MbAddr
 = 
iMb_x
 + 
iMb_y
 * 
¦iû
 -> 
mb_¡ride
;

62 
šŒa4x4_´ed_mode_ÿche
[40];

64 
DATA
 *
MbBlock
 = &
TabBlock
[
iCu¼MbAddr
];

66 #ifdeà
ERROR_DETECTION


68 if(
	`E¼ÜsCheckIMbTy³
(
Cu¼’tResidu
 -> 
MbTy³
)){

74 iàĞ
Cu¼’tResidu
 -> 
MbTy³
 =ğ
INTRA_PCM
 ) {

75 *
±r
 = 
ÿbac
 -> 
by‹¡»am
;

76 
Pos™iÚ
 = 0;

77 ià(
ÿbac
 -> 
low
 & 0x1) {

78 
±r
 -ğ
CABAC_BITS
 >> 3;

80 
	`P¬£IPCM
(
±r
, &
Pos™iÚ
, 
Cu¼’tResidu
, 
NÚZ”oCouÁCache
);

81 
	`š™_ÿbac_decod”
(
ÿbac
, &
±r
[384], ()(ÿbaø-> 
by‹¡»am_’d
 -…tr));

82 
Cu¼’tResidu
 -> 
Cbp
 = 0x1ef;

83 *
MbQpD–
 = 0;

86 
	`fl_ÿches_svc
(
¦iû
, 
Cu¼’tResidu
, 
Ba£Residu
, 1, 
NÚZ”oCouÁCache
, 
SliûTabË
,

87 
MbBlock
, 
šŒa4x4_´ed_mode_ÿche
, 
iMb_x
, 
iMb_y
, 
cÚ¡¿šed_šŒa_´ed_æag
, 
N®
 -> 
TCÛffP»diùiÚ
);

88 
	`fl_ÿches_ÿbac
 (
¦iû
, 
Neigh
, 
SliûTabË
, 
iCu¼MbAddr
, *
MbQpD–
, 
Cu¼’tResidu
 );

91 iàĞ
DùAÎowed
 && 
Cu¼’tResidu
 -> 
MbTy³
 =ğ
INTRA_4x4
 &&

92 
	`decode_ÿbac_mb_ŒªsfÜm_size
(
ÿbac
, 
ÿbac_¡©e
, 
TabBlock
, 
Cu¼’tResidu
 -> 
AvaMask
, 
iCu¼MbAddr
, 
¦iû
 -> 
mb_¡ride
)){

93 
Cu¼’tResidu
 -> 
MbTy³
 = Cu¼’tResidu -> 
T¿nsfÜm8x8
 = 
MbBlock
 -> T¿nsfÜm8x8 = MbBlock -> 
MbP¬tP»dMode
 [0] = 
INTRA_8x8
;

97 iàĞ
MbBlock
 -> 
MbP¬tP»dMode
 [0] =ğ
INTRA_4x4
){

98 
	`mb_´ed_šŒa_ÿbac
(
ÿbac
, 
ÿbac_¡©e
, 
Cu¼’tResidu
 -> 
IÁ¿16x16DCLev–
, 
šŒa4x4_´ed_mode_ÿche
);

99 
Cu¼’tResidu
 -> 
IÁ¿ChromaP»dMode
 = 
	`decode_ÿbac_mb_chroma_´e_mode
Ğ
ÿbac
, 
ÿbac_¡©e
, Cu¼’tResidu -> 
AvaMask
, 
Neigh
);

100 }ià(
MbBlock
 -> 
T¿nsfÜm8x8
){

101 
	`mb_´ed_šŒa_8x8_ÿbac
(
ÿbac
, 
ÿbac_¡©e
, 
Cu¼’tResidu
 -> 
IÁ¿16x16DCLev–
, 
šŒa4x4_´ed_mode_ÿche
);

102 
Cu¼’tResidu
 -> 
IÁ¿ChromaP»dMode
 = 
	`decode_ÿbac_mb_chroma_´e_mode
Ğ
ÿbac
, 
ÿbac_¡©e
, Cu¼’tResidu -> 
AvaMask
, 
Neigh
);

103 }iàĞ
Cu¼’tResidu
 -> 
MbTy³
 !ğ
I_BL
){

104 
Cu¼’tResidu
 -> 
IÁ¿ChromaP»dMode
 = 
	`decode_ÿbac_mb_chroma_´e_mode
Ğ
ÿbac
, 
ÿbac_¡©e
, Cu¼’tResidu -> 
AvaMask
, 
Neigh
);

107 #ifdeà
ERROR_DETECTION


109 if(
	`E¼ÜsCheckIÁ¿ChromaP»dMode
(&
Cu¼’tResidu
 -> 
IÁ¿ChromaP»dMode
)){

115 iàĞ
MbBlock
 -> 
MbP¬tP»dMode
[0] !ğ
INTRA_16x16
) {

116 
Cu¼’tResidu
 -> 
Cbp
 = 
	`decode_ÿbac_mb_cbp_luma
(
ÿbac
, 
ÿbac_¡©e
, Cu¼’tResidu -> 
AvaMask
, 
Neigh
, 
iMb_x
, 
iMb_y
) ;

117 
Cu¼’tResidu
 -> 
Cbp
 |ğ(
	`decode_ÿbac_mb_cbp_chroma
(
ÿbac
, 
ÿbac_¡©e
, 
Neigh
)) << 4;

120 
coded_block_·‰”n
 = 
Cu¼’tResidu
 -> 
Cbp
;

122 iàĞ
Cu¼’tResidu
 -> 
Cbp
 > 0 || 
MbBlock
 -> 
MbP¬tP»dMode
[0] =ğ
INTRA_16x16
 ) {

123 ià(
Cu¼’tResidu
 -> 
Cbp
 & 0x0à&& 
DùAÎowed
 && Cu¼’tResidu -> 
MbTy³
 == 26 &&

124 
	`decode_ÿbac_mb_ŒªsfÜm_size
(
ÿbac
, 
ÿbac_¡©e
, 
TabBlock
, 
Cu¼’tResidu
 -> 
AvaMask
, 
iCu¼MbAddr
, 
¦iû
 -> 
mb_¡ride
)){

125 
Cu¼’tResidu
 -> 
T¿nsfÜm8x8
 = 
MbBlock
 -> T¿nsfÜm8x8 = MbBlock -> 
MbP¬tP»dMode
 [0] = 
INTRA_8x8
;

127 *
MbQpD–
 = 
	`decode_ÿbac_mb_dqp
Ğ
ÿbac
, 
ÿbac_¡©e
, 
Neigh
, 
Cu¼’tResidu
[- 1] . 
MbTy³
);

128 #ifdeà
TI_OPTIM


130 *
La¡QP
 = 
Cu¼’tResidu
 -> 
Qp
 = 
	`divide
(*
Ï¡_QP
 + *
MbQpD–
 + 52, 52) >> 8;

132 *
La¡QP
 = 
Cu¼’tResidu
 -> 
Qp
 = (*La¡QP + *
MbQpD–
 + 52) % 52;

136 
	`»sidu®_ÿbac
(
ÿbac
, 
ÿbac_¡©e
, 
Cu¼’tResidu
, 
Neigh
, 
NÚZ”oCouÁCache
, &
coded_block_·‰”n
);

137 
Cu¼’tResidu
 -> 
Cbp
 = 
coded_block_·‰”n
;

140 
	`š™_mb_sk
(
NÚZ”oCouÁCache
);

141 
Cu¼’tResidu
 -> 
Qp
 = *
La¡QP
;

145 
	}
}

	@lib_svc/CabacPMacroblock.c

34 
	~"ty³.h
"

35 
	~"symbŞ.h
"

36 
	~"svc_d©a.h
"

37 
	~"svc_ty³.h
"

38 
	~"maš_d©a.h
"

39 
	~"vlc_ÿbac.h
"

40 
	~"ÿbac_svc.h
"

41 
	~"VlcCabacSvc.h
"

42 
	~"fl_ÿches.h
"

43 
	~"CabacPMaüoblock.h
"

44 
	~"fl_ÿches_ÿbac.h
"

51 
	$CabacPP¬tiÚnšg
 (
CABACCÚ‹xt
 *
ÿbac
, *
ÿbac_¡©e
, 
SLICE
 *
Sliû
, 
RESIDU
 *
Cu¼’tResidu
, 
DATA
 *
TabBlock
,

52 
CABAC_NEIGH
 *
Neigh
, *
SliûTabË
, *
NÚZ”oCouÁCache
, 
mv_ÿche_l0
[][2],

53 *
»f_ÿche_l0
, cÚ¡ 
iMb_x
, cÚ¡ 
iMb_y
, 
DùAÎowed
, *
La¡QP
, *
MbQpD–
)

58 cÚ¡ 
iCu¼MbAddr
 = 
iMb_x
 + 
iMb_y
 * 
Sliû
 -> 
mb_¡ride
;

59 
coded_block_·‰”n
;

60 
DATA
 *
Cu¼Block
 = &
TabBlock
[
iCu¼MbAddr
];

63 
	`fl_ÿches
Ğ
Sliû
, 
Cu¼’tResidu
, 1, 
NÚZ”oCouÁCache
, 
Cu¼Block
, 
SliûTabË
, 
iMb_x
, 
iMb_y
);

64 
	`fl_ÿches_ÿbac
 (
Sliû
, 
Neigh
, 
SliûTabË
, 
iCu¼MbAddr
, *
MbQpD–
, 
Cu¼’tResidu
);

66 ià(!
	`IS_BL
(
Cu¼’tResidu
 -> 
MbTy³
)){

68 iàĞ
Cu¼Block
 -> 
NumMbP¬t
 == 4 ) {

69 if(
	`SubMbPCabacSVC
(&
DùAÎowed
, 
ÿbac
, 
ÿbac_¡©e
, 
Sliû
, 
Cu¼Block
, 
Cu¼’tResidu
, 
mv_ÿche_l0
, 
»f_ÿche_l0
)){

73 if(
	`MbP»dPCabacSvc
(
ÿbac
, 
ÿbac_¡©e
, 
Sliû
, 
Cu¼’tResidu
, 
Cu¼Block
, 
mv_ÿche_l0
, 
»f_ÿche_l0
)){

80 ifĞ
Sliû
 -> 
Ad­tiveResidu®P»diùiÚFÏg
 && (
	`IS_BL
Ğ
Cu¼’tResidu
 -> 
MbTy³
è|| ( !
	`IS_I
ĞCu¼’tResidu -> MbTy³è&& Cu¼’tResidu -> 
InCrİWšdow
 ))){

81 
Cu¼’tResidu
 -> 
Residu®P»diùiÚFÏg
 = 
	`CabacG‘ResP»dFÏg
(
ÿbac
, 
ÿbac_¡©e
, 
	`IS_BL
ĞCu¼’tResidu -> 
MbTy³
));

83 
Cu¼’tResidu
 -> 
Residu®P»diùiÚFÏg
 = 
Sliû
 -> 
DeçuÉResidu®P»diùiÚFÏg
;

86 iàĞ
Cu¼Block
 -> 
MbP¬tP»dMode
[0] !ğ
INTRA_16x16
 ) {

87 
Cu¼’tResidu
 -> 
Cbp
 = 
	`decode_ÿbac_mb_cbp_luma
Ğ
ÿbac
, 
ÿbac_¡©e
, Cu¼’tResidu -> 
AvaMask
, 
Neigh
, 
iMb_x
, 
iMb_y
) ;

88 
Cu¼’tResidu
 -> 
Cbp
 |ğ(
	`decode_ÿbac_mb_cbp_chroma
Ğ
ÿbac
, 
ÿbac_¡©e
, 
Neigh
)) << 4 ;

90 iàĞ
DùAÎowed
 && (
Cu¼’tResidu
 -> 
Cbp
 & 15)){

91 ifĞ
	`decode_ÿbac_mb_ŒªsfÜm_size
(
ÿbac
, 
ÿbac_¡©e
, 
TabBlock
, 
Cu¼’tResidu
 -> 
AvaMask
, 
iCu¼MbAddr
, 
Sliû
 -> 
mb_¡ride
)){

92 
Cu¼’tResidu
 -> 
T¿nsfÜm8x8
 = 
Cu¼Block
 -> T¿nsfÜm8x8 = 
INTRA_8x8
;

97 
coded_block_·‰”n
 = 
Cu¼’tResidu
 -> 
Cbp
;

99 iàĞ
Cu¼’tResidu
 -> 
Cbp
 > 0 || 
Cu¼Block
 -> 
MbP¬tP»dMode
[0] =ğ
INTRA_16x16
 ) {

100 *
MbQpD–
 = 
	`decode_ÿbac_mb_dqp
Ğ
ÿbac
, 
ÿbac_¡©e
, 
Neigh
, 
Cu¼’tResidu
[- 1] . 
MbTy³
);

101 #ifdeà
TI_OPTIM


103 *
La¡QP
 = 
Cu¼’tResidu
 -> 
Qp
 = 
	`divide
(*La¡QP + *
MbQpD–
 + 52, 52) >> 8;

105 *
La¡QP
 = 
Cu¼’tResidu
 -> 
Qp
 = (*La¡QP + *
MbQpD–
 + 52) % 52;

109 
	`»sidu®_ÿbac
(
ÿbac
, 
ÿbac_¡©e
, 
Cu¼’tResidu
, 
Neigh
, 
NÚZ”oCouÁCache
, &
coded_block_·‰”n
);

110 
Cu¼’tResidu
 -> 
Cbp
 = 
coded_block_·‰”n
;

114 
	`š™_mb_sk
(
NÚZ”oCouÁCache
);

115 
Cu¼’tResidu
 -> 
Qp
 = *
La¡QP
;

118 
	}
}

	@lib_svc/CabacPMacroblock.h

37 
CabacPP¬tiÚnšg
 (
CABACCÚ‹xt
 *
ÿbac
, *
ÿbac_¡©e
, 
SLICE
 *
Sliû
, 
RESIDU
 *
Cu¼’tResidu
, 
DATA
 *
TabBlock
,

38 
CABAC_NEIGH
 *
Neigh
, *
SliûTabË
, 
NÚZ”oCouÁCache
 [], 
mv_ÿche_l0
[][2],

39 *
»f_ÿche_l0
, cÚ¡ 
iMb_x
, cÚ¡ 
iMb_y
, 
DùAÎowed
, *
La¡QP
, *
MbQpD–
);

	@lib_svc/ChooseLayer.c

36 #iâdeà
TI_OPTIM


37 #iâdeà
POCKET_PC


42 
	~"¡dio.h
"

43 
	~"¡ršg.h
"

44 
	~"¡dlib.h
"

47 
	~"svc_ty³.h
"

49 #ifdeà
HAVE_SDL


50 #ifdeà
WIN32


51 
	~<cÚio.h
>

54 
	$KeybßrdEv’t
(){

57 if(
	`_kbh™
()){

62 
	}
}

64 
	~<SDL/SDL_ev’ts.h
>

68 
	$KeybßrdEv’t
(){

71 
SDL_Ev’t
 
ev’t
;

74 
	`SDL_PŞlEv’t
(&
ev’t
)){

75 
ev’t
.
ty³
){

76 
SDL_KEYDOWN
:

81 
	}
}

93 
	$choo£_Ïy”
 (
CÚfigSVC
 *
CÚfig
)

95 iàĞ
	`KeybßrdEv’t
() ) {

96 
	`´štf
("DqIdo decode ?\n");

97 
	`sÿnf
("%d", &
CÚfig
 -> 
S‘Lay”
);

98 
	`´štf
("Temporal Command ?\n");

99 
	`´štf
("0: No change, 1: Switch down, 2: Switch up, 3: defined specific one\n");

100 
	`sÿnf
("%d", &
CÚfig
 -> 
TempÜ®Com
);

101 if(
CÚfig
 -> 
TempÜ®Com
 == 3){

102 
	`´štf
("Enterhe maximalemporal_ido decode\n");

103 
	`sÿnf
("%d", &
CÚfig
 -> 
TempÜ®Id
);

106 
	}
}

114 
	$g‘_Ïy”
(
¬gc
, **
¬gv
, 
CÚfigSVC
 *
CÚfig
)

116 
i
;

117 
found
 = 0;

118 
CÚfig
 -> 
S‘Lay”
 = 0;

119 
CÚfig
 -> 
TempÜ®Id
 = 0;

121  
i
 = 1 ; i < 
¬gc
 ; i++ ) {

122 ià(
	`¡rcmp
("-Ïy”", 
¬gv
[
i
]è=ğ0 && i < 
¬gc
 - 1 ) {

123 
i
++;

124 
CÚfig
 -> 
S‘Lay”
 = 
	`©oi
(
¬gv
[
i
]);

125 
found
 = 1;

127 ià(
	`¡rcmp
("-‹mpId", 
¬gv
[
i
]è=ğ0 && i < 
¬gc
 - 1 ) {

128 
i
++;

129 
CÚfig
 -> 
TempÜ®Id
 = 
	`©oi
(
¬gv
[
i
]);

130 
CÚfig
 -> 
TempÜ®Com
 = 3;

131 
found
 = 1;

135 iàĞ!
found
 ) {

136 
	`´štf
("Cannot determinehe†ayero display\n");

137 
	`´štf
("Help: -layer†ayer_num\n");

138 
	`´štf
("Layer Forcedo 0\n");

140 
	}
}

145 
	~"¡dio.h
"

146 
	~"¡ršg.h
"

147 
	~"¡dlib.h
"

150 
	~"svc_ty³.h
"

152 
	$choo£_Ïy”
 (
CÚfigSVC
 *
CÚfig
)

155 ià(
	`G‘La¡DqId
() == -1){

156 
DecMaxLay”
 = 
	`G‘MaxDecLay”
();

157 
Wª‹dDqId
 = 
CÚfig
 -> 
S‘Lay”
;

158 iàĞ
Wª‹dDqId
 >ğ15 && Wª‹dDqId <ğ(
DecMaxLay”
 << 4) || WantedDqId < 16 && WantedDqId <= DecMaxLayer ){

159 
	`S‘La¡DqId
(
Wª‹dDqId
);

161 
Wª‹dDqId
 = 0;

162 
	`S‘La¡DqId
 (0);

165 
	}
}

169 
	$g‘_Ïy”
(
¬gc
, **
¬gv
, 
CÚfigSVC
 *
CÚfig
)

171 
i
;

172 
found
 = 0;

173 
CÚfig
 -> 
S‘Lay”
 = 0;

174 
CÚfig
 -> 
TempÜ®Id
 = 255;

176  
i
 = 1 ; i < 
¬gc
 ; i++ ) {

177 ià(
	`¡rcmp
("-Ïy”", 
¬gv
[
i
]è=ğ0 && i < 
¬gc
 - 1 ) {

178 
i
++;

179 
CÚfig
 -> 
S‘Lay”
 = 
	`©oi
(
¬gv
[
i
]);

180 
found
 = 1;

182 ià(
	`¡rcmp
("-‹mpId", 
¬gv
[
i
]è=ğ0 && i < 
¬gc
 - 1 ) {

183 
i
++;

184 
CÚfig
 -> 
TempÜ®Id
 = 
	`©oi
(
¬gv
[
i
]);

185 
found
 = 1;

189 iàĞ!
found
 ) {

190 
	`´štf
("CªnÙ o³Àd‘”mšthÏy”Ødi¥Ïy %d \n", 
CÚfig
 -> 
S‘Lay”
);

191 
	`´štf
("Help -layer†ayer_num\n");

192 
	`´štf
("Layer Forcedo 0\n");

194 
	}
}

	@lib_svc/CoeffLevelPrediction.c

36 
	~"ty³.h
"

37 
	~"d©a.h
"

38 
	~"T¿nsfÜm.h
"

44 
	~"svc_ty³.h
"

45 
	~"blk4x4.h
"

46 
	~"BL_»sidu®.h
"

47 
	~"»sidu®_4x4.h
"

48 
	~"»sidu®_8x8.h
"

49 
	~"quªtiz©iÚ.h
"

50 
	~"»sidu®_chroma.h
"

51 
	~"Residu®Proûssšg.h
"

52 
	~"CÛffLev–P»diùiÚ.h
"

58 
	$ScÛffSResÿË4x4
(
RESIDU
 *
Cu¼Residu
, cÚ¡ 
W4x4_š‹r
 [6][16])

61 
i8x8
;

62  
i8x8
 = 0 ; i8x8 < 16 ; i8x8++ ) {

64 
šdex
 = 
i8x8
 << 4;

65 
	`»sÿË_4x4_»sidu®
(
Cu¼Residu
 -> 
Qp
, &Cu¼Residu -> 
LumaLev–
 [
šdex
], &Cu¼Residu -> LumaLev– [šdex], 
W4x4_š‹r
);

67 
	}
}

76 
	$ScÛffSResÿË8x8
(
RESIDU
 *
Cu¼Residu
, cÚ¡ 
W8x8š‹r
 [6][64])

79 
i8x8
;

80  
i8x8
 = 0 ; i8x8 < 4 ; i8x8++ ) {

82 
šdex
 = 
i8x8
 << 6;

83 
	`»sÿË_8x8_»sidu®
(
Cu¼Residu
 -> 
Qp
, &Cu¼Residu -> 
LumaLev–
 [
šdex
], &Cu¼Residu -> LumaLev– [šdex], 
W8x8š‹r
);

85 
	}
}

94 
	$ScÛffSResÿËChr4x4
(
RESIDU
 *
Cu¼Residu
, cÚ¡ 
PPS
* 
Pps
, cÚ¡ 
W_TABLES
 *
Quªtif
)

98 
Ba£DC_cÛff
 [4];

99 
BqP
 = (è(
Cu¼Residu
 -> 
Qp
 + 
Pps
 -> 
chroma_qp_šdex_off£t
);

100 
BQPc
 = 
qP_b
 [
BqP
];

102 
	`iù_4x4_dc_chroma
(&
Cu¼Residu
 -> 
ChromaDCLev–_Cb
 [0], 
Ba£DC_cÛff
);

103 
	`»sÿË_4x4_dc_chr
(
BQPc
, 
Ba£DC_cÛff
, Ba£DC_cÛff, 
Quªtif
 -> 
W4x4_Cb_š‹r
);

105 
	`»sÿË_4x4_»sidu®
(
BQPc
, &
Cu¼Residu
 -> 
ChromaACLev–_Cb
 [0], &Cu¼Residu -> ChromaACLev–_Cb [0], 
Quªtif
 -> 
W4x4_Cb_š‹r
);

106 
Cu¼Residu
 -> 
ChromaACLev–_Cb
 [0] = 
Ba£DC_cÛff
 [0];

108 
	`»sÿË_4x4_»sidu®
(
BQPc
, &
Cu¼Residu
 -> 
ChromaACLev–_Cb
 [16], &Cu¼Residu -> ChromaACLev–_Cb [16], 
Quªtif
 -> 
W4x4_Cb_š‹r
);

109 
Cu¼Residu
 -> 
ChromaACLev–_Cb
 [16] = 
Ba£DC_cÛff
 [1];

111 
	`»sÿË_4x4_»sidu®
(
BQPc
, &
Cu¼Residu
 -> 
ChromaACLev–_Cb
 [32], &Cu¼Residu -> ChromaACLev–_Cb [32], 
Quªtif
 -> 
W4x4_Cb_š‹r
);

112 
Cu¼Residu
 -> 
ChromaACLev–_Cb
 [32] = 
Ba£DC_cÛff
 [2];

114 
	`»sÿË_4x4_»sidu®
(
BQPc
, &
Cu¼Residu
 -> 
ChromaACLev–_Cb
 [48], &Cu¼Residu -> ChromaACLev–_Cb [48], 
Quªtif
 -> 
W4x4_Cb_š‹r
);

115 
Cu¼Residu
 -> 
ChromaACLev–_Cb
 [48] = 
Ba£DC_cÛff
 [3];

118 
BqP
 = (è(
Cu¼Residu
 -> 
Qp
 + 
Pps
 -> 
£cÚd_chroma_qp_šdex_off£t
);

119 
BQPc
 = 
qP_b
 [
BqP
];

120 
	`iù_4x4_dc_chroma
(&
Cu¼Residu
 -> 
ChromaDCLev–_Cr
 [0], 
Ba£DC_cÛff
);

121 
	`»sÿË_4x4_dc_chr
(
BQPc
, 
Ba£DC_cÛff
, Ba£DC_cÛff, 
Quªtif
 -> 
W4x4_Cr_š‹r
);

123 
	`»sÿË_4x4_»sidu®
(
BQPc
, &
Cu¼Residu
 -> 
ChromaACLev–_Cr
 [0], &Cu¼Residu -> ChromaACLev–_C¸[0], 
Quªtif
 -> 
W4x4_Cr_š‹r
);

124 
Cu¼Residu
 -> 
ChromaACLev–_Cr
 [0] = 
Ba£DC_cÛff
 [0];

126 
	`»sÿË_4x4_»sidu®
(
BQPc
, &
Cu¼Residu
 -> 
ChromaACLev–_Cr
 [16], &Cu¼Residu -> ChromaACLev–_C¸[16], 
Quªtif
 -> 
W4x4_Cr_š‹r
);

127 
Cu¼Residu
 -> 
ChromaACLev–_Cr
 [16] = 
Ba£DC_cÛff
 [1];

129 
	`»sÿË_4x4_»sidu®
(
BQPc
, &
Cu¼Residu
 -> 
ChromaACLev–_Cr
 [32], &Cu¼Residu -> ChromaACLev–_C¸[32], 
Quªtif
 -> 
W4x4_Cr_š‹r
);

130 
Cu¼Residu
 -> 
ChromaACLev–_Cr
 [32] = 
Ba£DC_cÛff
 [2];

132 
	`»sÿË_4x4_»sidu®
(
BQPc
, &
Cu¼Residu
 -> 
ChromaACLev–_Cr
 [48], &Cu¼Residu -> ChromaACLev–_C¸[48], 
Quªtif
 -> 
W4x4_Cr_š‹r
);

133 
Cu¼Residu
 -> 
ChromaACLev–_Cr
 [48] = 
Ba£DC_cÛff
 [3];

134 
	}
}

144 
	$ResÿËCu¼’tCÛff
(
RESIDU
 *
Cu¼Residu
, RESIDU *
Ba£Residu
, cÚ¡ 
PPS
 *
Pps
, cÚ¡ 
W_TABLES
 *
quªtif
, 
S·tŸlEnhªûm’t
){

147 ifĞ
Cu¼Residu
 -> 
Cbp
 & 0xf){

148 ià(
Cu¼Residu
 -> 
T¿nsfÜm8x8
){

149 
	`ScÛffSResÿË8x8
(
Cu¼Residu
, 
quªtif
 -> 
W8x8_š‹r
);

151 
	`ScÛffSResÿË4x4
(
Cu¼Residu
, 
quªtif
 -> 
W4x4_š‹r
);

153 }if(!
S·tŸlEnhªûm’t
){

157 
Cu¼Residu
 -> 
T¿nsfÜm8x8
 = 
Ba£Residu
 -> Transform8x8;

161 ifĞ
Cu¼Residu
 -> 
Cbp
 & 0x30){

162 
	`ScÛffSResÿËChr4x4
(
Cu¼Residu
, 
Pps
, 
quªtif
);

164 
	}
}

170 
	$Compu‹Cu¼’tCÛff
(cÚ¡ 
NAL
 *
N®
, 
RESIDU
 *
Cu¼Residu
, RESIDU *
Ba£Residu
, cÚ¡ 
PPS
 *
Pps
, cÚ¡ 
W_TABLES
 *
quªtif
)

175 ià((
N®
 -> 
D•’d’cyId
 =ğ1 && N® -> 
Qu®™yId
 == 0) || (Nal -> QualityId == 1 && Nal -> DependencyId == 0)){

176 ià(
Ba£Residu
 -> 
T¿nsfÜm8x8
){

177 
	`ScÛffSResÿË8x8
(
Ba£Residu
, 
quªtif
 -> 
W8x8_š‹r
);

179 
	`ScÛffSResÿË4x4
(
Ba£Residu
, 
quªtif
 -> 
W4x4_š‹r
);

181 
	`ScÛffSResÿËChr4x4
(
Ba£Residu
, 
Pps
, 
quªtif
);

183 
	`AddCÛff256
(
Cu¼Residu
 -> 
LumaLev–
, 
Ba£Residu
 -> LumaLevel);

184 
	`AddCÛff64
(
Cu¼Residu
 -> 
ChromaACLev–_Cb
, 
Ba£Residu
 -> ChromaACLevel_Cb);

185 
	`AddCÛff64
(
Cu¼Residu
 -> 
ChromaACLev–_Cr
, 
Ba£Residu
 -> ChromaACLevel_Cr);

186 
	`Upd©eBlk4x4
(
Cu¼Residu
);

187 
	}
}

200 
	$SCÛffResidu®AddRes
(cÚ¡ 
NAL
 *
N®
, 
RESIDU
 *
Cu¼Residu
, RESIDU *
Ba£Residu
, cÚ¡ 
PPS
 *
Pps
, cÚ¡ 
PicWidthInPix
,

201 cÚ¡ 
W_TABLES
 *
Quªtif
, *
Residu_Luma
, *
Residu_Cb
, *
Residu_Cr
)

206 ifĞ
Cu¼Residu
 -> 
Cbp
){

208 
	`ResÿËCu¼’tCÛff
(
Cu¼Residu
, 
Ba£Residu
, 
Pps
, 
Quªtif
, 
N®
 -> 
S·tŸlSÿÏb™y
);

209 }iàĞ
Cu¼Residu
 -> 
Residu®P»diùiÚFÏg
 && !
N®
 -> 
S·tŸlSÿÏb™y
){

212 
Cu¼Residu
 -> 
Qp
 = 
Ba£Residu
 -> Qp;

213 
Cu¼Residu
 -> 
T¿nsfÜm8x8
 = 
Ba£Residu
 -> Transform8x8;

218 ifĞ(!
	`IS_I
(
Cu¼Residu
 -> 
MbTy³
)è&& Cu¼Residu -> 
Residu®P»diùiÚFÏg
 && (!IS_I(
Ba£Residu
 -> MbType))){

219 
	`Compu‹Cu¼’tCÛff
(
N®
, 
Cu¼Residu
, 
Ba£Residu
, 
Pps
, 
Quªtif
);

222 ià(
N®
 -> 
PicToDecode
){

223 ià(!
Cu¼Residu
 -> 
T¿nsfÜm8x8
){

224 
	`SCÛff4x4AddRes
(
Residu_Luma
, 
Cu¼Residu
, 
PicWidthInPix
);

226 
	`SCÛff8x8AddRes
(
Residu_Luma
, 
Cu¼Residu
, 
PicWidthInPix
);

230 
	`SCÛffChromaAddRes
(
Residu_Cb
, 
Residu_Cr
, 
Cu¼Residu
, 
PicWidthInPix
 >> 1);

232 
	}
}

238 
	$SCÛffResidu®AddPic
(cÚ¡ 
NAL
 *
N®
, 
RESIDU
 *
Cu¼Residu
, RESIDU *
Ba£Residu
, cÚ¡ 
PPS
 *
Pps
, cÚ¡ 
PicWidthInPix
,

239 cÚ¡ 
W_TABLES
 *
Quªtif
, *
Y
, *
U
, *
V
)

246 ifĞ
Cu¼Residu
 -> 
Cbp
){

248 
	`ResÿËCu¼’tCÛff
(
Cu¼Residu
, 
Ba£Residu
, 
Pps
, 
Quªtif
, 
N®
 -> 
S·tŸlSÿÏb™y
);

251 
	`Compu‹Cu¼’tCÛff
(
N®
, 
Cu¼Residu
, 
Ba£Residu
, 
Pps
, 
Quªtif
);

253 ià(
N®
 -> 
PicToDecode
){

254 iàĞ!
Cu¼Residu
 -> 
T¿nsfÜm8x8
){

255 
	`SCÛff4x4AddPic
(
Y
, 
Cu¼Residu
, 
PicWidthInPix
);

257 
	`SCÛff8x8AddPic
(
Y
, 
Cu¼Residu
, 
PicWidthInPix
);

261 
	`SCÛffChromaAddPic
(
U
, 
V
, 
Cu¼Residu
, 
PicWidthInPix
 >> 1);

263 
	}
}

269 
	$TCÛffResidu®
(
RESIDU
 *
Cu¼Residu
, RESIDU *
Ba£Residu
, cÚ¡ 
PPS
 *
Pps
, cÚ¡ 
PicWidthInPix
,

270 cÚ¡ 
W_TABLES
 *
Quªtif
, *
Residu_Y
, *
Residu_Cb
, *
Residu_Cr
)

276 ià(
Ba£Residu
 -> 
Cbp
){

278 
Ba£QP
 = 
qP_b
[
Ba£Residu
 -> 
Qp
 + 
Pps
 -> 
chroma_qp_šdex_off£t
];

279 
Cu¼QP
 = 
qP_b
[
Cu¼Residu
 -> 
Qp
 + 
Pps
 -> 
chroma_qp_šdex_off£t
];

280 
D–
 = 
Ba£QP
 - 
Cu¼QP
 + 54;

281 
D–QP
 = (è(
Ba£Residu
 -> 
Qp
 - 
Cu¼Residu
 -> Qp + 54);

283 
	`TCÛffResÿËACLuma
(
D–QP
, 
Ba£Residu
 -> 
LumaLev–
, 
Cu¼Residu
 -> LumaLevel);

284 
	`Upd©eLumaCbp
(
Cu¼Residu
, 
Ba£Residu
);

286 
	`TCÛffResÿËDCChr
(
D–
, 
Ba£Residu
 -> 
ChromaDCLev–_Cb
, 
Cu¼Residu
 -> ChromaDCLevel_Cb);

287 
	`TCÛffResÿËDCChr
(
D–
, 
Ba£Residu
 -> 
ChromaDCLev–_Cr
, 
Cu¼Residu
 -> ChromaDCLevel_Cr);

288 
	`TCÛffResÿËACChr
(
D–
, 
Ba£Residu
 -> 
ChromaACLev–_Cb
, 
Cu¼Residu
 -> ChromaACLevel_Cb);

289 
	`TCÛffResÿËACChr
(
D–
, 
Ba£Residu
 -> 
ChromaACLev–_Cr
, 
Cu¼Residu
 -> ChromaACLevel_Cr);

290 
	`Upd©eChrCbp
(
Cu¼Residu
, 
Ba£Residu
);

293 ià(
Cu¼Residu
 -> 
Cbp
){

295 
	`Compu‹Residu®Image
(
Pps
, 
Cu¼Residu
, 
PicWidthInPix
, 
Residu_Y
, 
Residu_Cb
, 
Residu_Cr
, 
Quªtif
);

298 
	`Re£tMbResidu
(
Residu_Y
, 
Residu_Cb
, 
Residu_Cr
, 
PicWidthInPix
);

300 
	}
}

	@lib_svc/CoeffLevelPrediction.h

34 #iâdeà
COEFF_LEVEL_PRED_H


35 
	#COEFF_LEVEL_PRED_H


	)

39 
	~"svc_ty³.h
"

43 cÚ¡ 
DIV6
 [72];

53 
__šlše
 
	$TCÛffResÿËDCLuma
 ( cÚ¡ 
qp
, cÚ¡ * 
RESTRICT
 
š
, * RESTRICT 
out
){

56 
i
;

57 
shiá
 = 
DIV6
[
qp
];

58 cÚ¡ 
aiSÿËFaùÜ
[6] = { 8, 9, 10, 11, 13, 14 };

59 cÚ¡ 
SÿË
 = 
aiSÿËFaùÜ
[
qp
 % 6];

62  
i
 = 0 ; i < 16 ; i++ ) {

63 
out
 [
i
] +ğ(
š
 [i] * 
SÿË
 << 
shiá
) >> 12;

65 
	}
}

67 
__šlše
 
	$TCÛffResÿËDCChr
 ( cÚ¡ 
qp
, cÚ¡ * 
RESTRICT
 
š
, * RESTRICT 
out
){

70 
i
;

71 
shiá
 = 
DIV6
[
qp
];

72 cÚ¡ 
aiSÿËFaùÜ
[6] = { 8, 9, 10, 11, 13, 14 };

73 cÚ¡ 
SÿË
 = 
aiSÿËFaùÜ
[
qp
 % 6];

76  
i
 = 0 ; i < 4 ; i++ ) {

77 
out
 [
i
] +ğ(
š
 [i] * 
SÿË
 << 
shiá
) >> 12;

79 
	}
}

82 
__šlše
 
	$TCÛffResÿËACLuma
 ( cÚ¡ 
qp
, cÚ¡ * 
RESTRICT
 
š
, * RESTRICT 
out
){

85 
i
;

86 
shiá
 = 
DIV6
[
qp
];

87 cÚ¡ 
aiSÿËFaùÜ
[6] = { 8, 9, 10, 11, 13, 14 };

88 cÚ¡ 
SÿË
 = 
aiSÿËFaùÜ
[
qp
 % 6];

91  
i
 = 0 ; i < 256 ; i++ ) {

92 
out
 [
i
] +ğ(
š
 [i] * 
SÿË
 << 
shiá
) >> 12;

94 
	}
}

97 
__šlše
 
	$TCÛffResÿËACChr
 ( cÚ¡ 
qp
, cÚ¡ * 
RESTRICT
 
š
, * RESTRICT 
out
){

100 
i
;

101 
shiá
 = 
DIV6
[
qp
];

102 cÚ¡ 
aiSÿËFaùÜ
[6] = { 8, 9, 10, 11, 13, 14 };

103 cÚ¡ 
SÿË
 = 
aiSÿËFaùÜ
[
qp
 % 6];

106  
i
 = 0 ; i < 64 ; i++ ) {

107 
out
 [
i
] +ğ(
š
 [i] * 
SÿË
 << 
shiá
) >> 12;

109 
	}
}

112 
__šlše
 
	$Upd©eLumaCbp
(
RESIDU
 *
Cu¼Residu
, cÚ¡ RESIDU *
Ba£Residu
){

115 iàĞ!(
Cu¼Residu
 -> 
Cbp
 & 0x01)){

116 
Cu¼Residu
 -> 
Cbp
 +ğ
Ba£Residu
 -> Cbp & 0x01;

119 iàĞ!(
Cu¼Residu
 -> 
Cbp
 & 0x02)){

120 
Cu¼Residu
 -> 
Cbp
 +ğ
Ba£Residu
 -> Cbp & 0x02;

123 iàĞ!(
Cu¼Residu
 -> 
Cbp
 & 0x04)){

124 
Cu¼Residu
 -> 
Cbp
 +ğ
Ba£Residu
 -> Cbp & 0x04;

127 iàĞ!(
Cu¼Residu
 -> 
Cbp
 & 0x08)){

128 
Cu¼Residu
 -> 
Cbp
 +ğ
Ba£Residu
 -> Cbp & 0x08;

130 
	}
}

133 
__šlše
 
	$Upd©eChrCbp
(
RESIDU
 *
Cu¼Residu
, cÚ¡ RESIDU *
Ba£Residu
){

136 iàĞ!(
Cu¼Residu
 -> 
Cbp
 & 0x30)){

137 
Cu¼Residu
 -> 
Cbp
 +ğ
Ba£Residu
 -> Cbp & 0x30;

140 iàĞ!(
Cu¼Residu
 -> 
Cbp
 & 0x20)){

141 
Cu¼Residu
 -> 
Cbp
 +ğ
Ba£Residu
 -> Cbp & 0x20;

143 
	}
}

148 
__šlše
 
	$Upd©eLev–
(
RESIDU
 *
Cu¼Residu
){

150 
Cu¼Residu
 -> 
IÁ¿16x16DCLev–
 [0] = Cu¼Residu -> IÁ¿16x16DCLev– [0] + Cu¼Residu -> 
LumaLev–
 [0];

151 
Cu¼Residu
 -> 
IÁ¿16x16DCLev–
 [1] = Cu¼Residu -> IÁ¿16x16DCLev– [1] + Cu¼Residu -> 
LumaLev–
 [16];

152 
Cu¼Residu
 -> 
IÁ¿16x16DCLev–
 [2] = Cu¼Residu -> IÁ¿16x16DCLev– [2] + Cu¼Residu -> 
LumaLev–
 [64];

153 
Cu¼Residu
 -> 
IÁ¿16x16DCLev–
 [3] = Cu¼Residu -> IÁ¿16x16DCLev– [3] + Cu¼Residu -> 
LumaLev–
 [80];

154 
Cu¼Residu
 -> 
IÁ¿16x16DCLev–
 [4] = Cu¼Residu -> IÁ¿16x16DCLev– [4] + Cu¼Residu -> 
LumaLev–
 [32];

155 
Cu¼Residu
 -> 
IÁ¿16x16DCLev–
 [5] = Cu¼Residu -> IÁ¿16x16DCLev– [5] + Cu¼Residu -> 
LumaLev–
 [48];

156 
Cu¼Residu
 -> 
IÁ¿16x16DCLev–
 [6] = Cu¼Residu -> IÁ¿16x16DCLev– [6] + Cu¼Residu -> 
LumaLev–
 [96];

157 
Cu¼Residu
 -> 
IÁ¿16x16DCLev–
 [7] = Cu¼Residu -> IÁ¿16x16DCLev– [7] + Cu¼Residu -> 
LumaLev–
 [112];

158 
Cu¼Residu
 -> 
IÁ¿16x16DCLev–
 [8] = Cu¼Residu -> IÁ¿16x16DCLev– [8] + Cu¼Residu -> 
LumaLev–
 [128];

159 
Cu¼Residu
 -> 
IÁ¿16x16DCLev–
 [9] = Cu¼Residu -> IÁ¿16x16DCLev– [9] + Cu¼Residu -> 
LumaLev–
 [144];

160 
Cu¼Residu
 -> 
IÁ¿16x16DCLev–
 [10] = Cu¼Residu -> IÁ¿16x16DCLev– [10] + Cu¼Residu -> 
LumaLev–
 [192];

161 
Cu¼Residu
 -> 
IÁ¿16x16DCLev–
 [11] = Cu¼Residu -> IÁ¿16x16DCLev– [11] + Cu¼Residu -> 
LumaLev–
 [208];

162 
Cu¼Residu
 -> 
IÁ¿16x16DCLev–
 [12] = Cu¼Residu -> IÁ¿16x16DCLev– [12] + Cu¼Residu -> 
LumaLev–
 [160];

163 
Cu¼Residu
 -> 
IÁ¿16x16DCLev–
 [13] = Cu¼Residu -> IÁ¿16x16DCLev– [13] + Cu¼Residu -> 
LumaLev–
 [176];

164 
Cu¼Residu
 -> 
IÁ¿16x16DCLev–
 [14] = Cu¼Residu -> IÁ¿16x16DCLev– [14] + Cu¼Residu -> 
LumaLev–
 [224];

165 
Cu¼Residu
 -> 
IÁ¿16x16DCLev–
 [15] = Cu¼Residu -> IÁ¿16x16DCLev– [15] + Cu¼Residu -> 
LumaLev–
 [240];

166 
	}
}

169 
ScÛffSResÿË4x4
(
RESIDU
 *
Cu¼Residu
, cÚ¡ 
W4x4_š‹r
 [6][16]);

170 
ScÛffSResÿËChr4x4
(
RESIDU
 *
Cu¼Residu
, cÚ¡ 
PPS
* 
Pps
, cÚ¡ 
W_TABLES
 *
Quªtif
);

171 
ScÛffSResÿË8x8
(
RESIDU
 *
Cu¼Residu
, cÚ¡ 
W8x8š‹r
 [6][64]);

173 
Compu‹Cu¼’tCÛff
(cÚ¡ 
NAL
 *
N®
, 
RESIDU
 *
Cu¼Residu
, RESIDU *
Ba£Residu
, cÚ¡ 
PPS
 *
Pps
, cÚ¡ 
W_TABLES
 *
quªtif
);

174 
ResÿËCu¼’tCÛff
(
RESIDU
 *
Cu¼Residu
, RESIDU *
Ba£Residu
, cÚ¡ 
PPS
 *
Pps
, cÚ¡ 
W_TABLES
 *
quªtif
, 
SÄEnhªûm’t
);

177 
SCÛffResidu®AddRes
(cÚ¡ 
NAL
 *
N®
,
RESIDU
 *
Cu¼Residu
, RESIDU *
Ba£Residu
, cÚ¡ 
PPS
 *
Pps
, cÚ¡ 
PicWidthInPix
, cÚ¡ 
W_TABLES
 *
quªtif


178 , *
Residu_img_lum
, *
Residu_img_Cb
, *
Residu_img_Cr
 );

179 
SCÛffResidu®AddPic
(cÚ¡ 
NAL
 *
N®
, 
RESIDU
 *
Cu¼Residu
, RESIDU *
Ba£Residu
, cÚ¡ 
PPS
 *
Pps
, cÚ¡ 
PicWidthInPix
, cÚ¡ 
W_TABLES
 *
quªtif


180 , *
Y
, *
U
, *
V
);

181 
TCÛffResidu®
(
RESIDU
 *
Cu¼Residu
, RESIDU *
Ba£Residu
, cÚ¡ 
PPS
 *
Pps
, cÚ¡ 
PicWidthInPix
, cÚ¡ 
W_TABLES
 *
quªtif


182 , *
Residu_Y
, *
Residu_Cb
, *
Residu_Cr
);

	@lib_svc/Coordonates.c

34 
	~"¡ršg.h
"

37 
	~"ş.h
"

38 
	~"d©a.h
"

39 
	~"svc_d©a.h
"

40 
	~"svc_ty³.h
"

41 
	~"M”geMvIdx.h
"

42 
	~"CoÜdÚ©es.h
"

43 
	~"P¬t™iÚTy³.h
"

48 cÚ¡ 
	gNxNP¬tIdx
[5][4] =

64 
	$G‘RefIdc
(cÚ¡ 
NAL
 *
N®
, 
x
, 
y
, 
REFPART
 *
RefP¬t™iÚ
, 
RESIDU
 *
Ba£Residu
){

67 
iBa£X
, 
iBa£Y
, 
Ba£X
, 
Ba£Y
, 
Ba£Addr
;

68 ià(
N®
 -> 
S·tŸlSÿÏb™y
){

69 
iBa£X
 = (è
	`RESCALE_POSITION
((
x
 - 
N®
 -> 
Ëá_off£t
), N® -> 
down_Width
, (N® -> 
up_Width
 >> 1), Nal -> up_Width);

70 
iBa£Y
 = (è
	`RESCALE_POSITION
((
y
 - 
N®
 -> 
tİ_off£t
), N® -> 
down_Height
, (N® -> 
up_Height
 >> 1), Nal -> up_Height);

72 
iBa£X
 = 
x
;

73 
iBa£Y
 = 
y
;

76 
Ba£X
 = 
iBa£X
 >> 4;

77 
Ba£Y
 = 
iBa£Y
 >> 4;

78 
Ba£Addr
 = 
Ba£X
 + 
Ba£Y
 * (
N®
 -> 
ba£_Width
 >> 4);

81 
iBa£X
 -ğ(
Ba£X
 << 4);

82 
iBa£Y
 -ğ(
Ba£Y
 << 4);

84 iàĞ
	`IS_I_SVC
 (
Ba£Residu
 [
Ba£Addr
] . 
MbTy³
)){

85 
Index8x8
 = ((
iBa£Y
 >> 3è<< 1è+ (
iBa£X
 >> 3);

86 
Index4x4
 = (((
iBa£Y
 & 7è>> 2è<< 1è+ ((
iBa£X
 & 7) >> 2);

87 
BlkX4x4
 = ((
Index8x8
 & 1è<< 1è+ (
Index4x4
 & 1);

88 
BlkY4x4
 = ((
Index8x8
 >> 1è<< 1è+ (
Index4x4
 >> 1);

89 
RefP¬t™iÚ
 -> 
MvIndex
 = (((
Ba£X
 << 2è+ 
BlkX4x4
è<< 1è+ ((
BlkY4x4
 + (
Ba£Y
 << 2)è* 
N®
 -> 
b_¡ride
);

90 
RefP¬t™iÚ
 -> 
RefIndex
 = ((
Ba£X
 << 2è+ 
BlkX4x4
è+ (
BlkY4x4
 + (
Ba£Y
 << 2)è* 
N®
 -> 
b8_¡ride
;

91 
RefP¬t™iÚ
 -> 
P¬tIdc
 = (
Ba£Addr
 << 4è+ (
BlkY4x4
 << 2è+ 
BlkX4x4
;

92 
RefP¬t™iÚ
 -> 
RefIdc
 = -2;

96 
MbP¬tIdx4x4
 = 0;

97 
BlkX4x4
, 
BlkY4x4
;

98 
Index8x8
 = ((
iBa£Y
 >> 3è<< 1è+ (
iBa£X
 >> 3);

99 
Index4x4
 = (((
iBa£Y
 & 7è>> 2è<< 1è+ ((
iBa£X
 & 7) >> 2);

100 
MbP¬tIdx8x8
 = 
NxNP¬tIdx
 [
Ba£Residu
 [
Ba£Addr
] . 
Mode
] [
Index8x8
];

101 
Mode8x8
 = (è(
Ba£Residu
 [
Ba£Addr
] . 
SubMbTy³
 [
Index8x8
]);

103 iàĞ
Ba£Residu
 [
Ba£Addr
] . 
Mode
 == 0){

104 iàĞ
	`IS_P
(
Ba£Residu
 [
Ba£Addr
] . 
MbTy³
)){

105 
MbP¬tIdx4x4
 = 
NxNP¬tIdx
 [3 - 
Mode8x8
] [
Index4x4
];

106 }ià(
Mode8x8
 == 0){

108 
MbP¬tIdx4x4
 = 
Index4x4
;

110 
x8
 = (è(
Mode8x8
 < 4);

111 
x4
 = (è(
Mode8x8
 > 9);

112 
Mode
 = 3 * 
x4
 + (!x4 && !
x8
è* (((
Mode8x8
 & 1) << 1) + 1);

113 
MbP¬tIdx4x4
 = 
NxNP¬tIdx
 [3 - 
Mode
] [
Index4x4
];

117 
BlkX4x4
 = ((
MbP¬tIdx8x8
 & 1è<< 1è+ (
MbP¬tIdx4x4
 & 1);

118 
BlkY4x4
 = ((
MbP¬tIdx8x8
 >> 1è<< 1è+ (
MbP¬tIdx4x4
 >> 1);

119 
RefP¬t™iÚ
 -> 
MvIndex
 = (((
Ba£X
 << 2è+ 
BlkX4x4
è<< 1è+ ((
BlkY4x4
 + (
Ba£Y
 << 2)è* 
N®
 -> 
b_¡ride
);

120 
RefP¬t™iÚ
 -> 
RefIndex
 = ((
Ba£X
 << 2è+ 
BlkX4x4
è+ (
BlkY4x4
 + (
Ba£Y
 << 2)è* 
N®
 -> 
b8_¡ride
;

121 
RefP¬t™iÚ
 -> 
P¬tIdc
 = (
Ba£Addr
 << 4è+ (
BlkY4x4
 << 2è+ 
BlkX4x4
;

122 
RefP¬t™iÚ
 -> 
RefIdc
 = 0;

124 
	}
}

133 
	$S‘IÁ”IÁ¿
(cÚ¡ 
NAL
 *
N®
, 
x
, 
y
, 
REFPART
 
RefP¬t™iÚ
[16], 
RESIDU
 *
Ba£Residu
)

136 
i
;

137 
REFPART
 
P¬t™iÚ
[4];

138  
i
 = 0; i < 4; i++){

139 
	`G‘RefIdc
(
N®
, 
x
 + (
i
 & 1è* 15, 
y
 + ((˜& 2è>> 1è* 15, &
P¬t™iÚ
[i], 
Ba£Residu
);

140 ià(
P¬t™iÚ
 [
i
] . 
RefIdc
 !ğ
RefP¬t™iÚ
 [((i & 1) << 1) + ((i & 2) << 2)] . RefIdc){

142 
RefP¬t™iÚ
 [((
i
 & 1è<< 1è+ ((˜& 2è<< 2)] . 
RefIdc
 = 
P¬t™iÚ
 [i] . RefIdc;

143 
RefP¬t™iÚ
 [((
i
 & 1è<< 1è+ ((˜& 2è<< 2)] . 
RefIndex
 = 
P¬t™iÚ
 [i] . RefIndex;

144 
RefP¬t™iÚ
 [((
i
 & 1è<< 1è+ ((˜& 2è<< 2è+ 1] . 
RefIdc
 = 
P¬t™iÚ
 [i] . RefIdc;

145 
RefP¬t™iÚ
 [((
i
 & 1è<< 1è+ ((˜& 2è<< 2è+ 1] . 
RefIndex
 = 
P¬t™iÚ
 [i] . RefIndex;

146 
RefP¬t™iÚ
 [((
i
 & 1è<< 1è+ ((˜& 2è<< 2è+ 4] . 
RefIdc
 = 
P¬t™iÚ
 [i] . RefIdc;

147 
RefP¬t™iÚ
 [((
i
 & 1è<< 1è+ ((˜& 2è<< 2è+ 4] . 
RefIndex
 = 
P¬t™iÚ
 [i] . RefIndex;

148 
RefP¬t™iÚ
 [((
i
 & 1è<< 1è+ ((˜& 2è<< 2è+ 5] . 
RefIdc
 = 
P¬t™iÚ
 [i] . RefIdc;

149 
RefP¬t™iÚ
 [((
i
 & 1è<< 1è+ ((˜& 2è<< 2è+ 5] . 
RefIndex
 = 
P¬t™iÚ
 [i] . RefIndex;

152 
	}
}

161 
	$In™ŸlizeBa£Index
(cÚ¡ 
NAL
 *
N®
, 
x
, 
y
, 
REFPART
 
RefP¬t™iÚ
[16], 
RESIDU
 *
Ba£Residu
, RESIDU *
Residu
)

164 
IÁ¿BL
 = 1;

165 
i
;

166  
i
 = 0; i < 16; i++){

167 
	`G‘RefIdc
(
N®
, 
x
 + 1 + 
	`POSX
(
i
), 
y
 + 1 + 
	`POSY
(i), &
RefP¬t™iÚ
[i], 
Ba£Residu
);

168 
IÁ¿BL
 = IÁ¿BL && ( 
RefP¬t™iÚ
[
i
] . 
RefIdc
 == -2);

171 iàĞ
	`IS_BL
(
Residu
 -> 
MbTy³
)){

172 if(
IÁ¿BL
){

173  
I_BL
;

175  
P_BL
;

178  
Residu
 -> 
MbTy³
;

180 
	}
}

190 
	$G‘Ba£Pos™iÚ
(
x
, 
y
, *
x_ba£
, *
y_ba£
, *
x_mbP¬tIdx
, *
y_mbP¬tIdx
,

191 cÚ¡ 
NAL
 *
N®
, 
REFPART
 
RefP¬t™iÚ
[16], cÚ¡ 
DATA
 *
Maüoblock
, 
RESIDU
 *
»sidu
,

192 
RESIDU
 *
ba£_»sidu
, *
mv_l0
, *
»f_l0
, 
mv_ÿche_l0
[][2])

197 iàĞ
»sidu
 -> 
InCrİWšdow
){

199 
	`G‘Ba£MbCoÜd
(
Maüoblock
, 
x_ba£
, 
y_ba£
, 
x_mbP¬tIdx
, 
y_mbP¬tIdx
);

202 ià(
	`IS_BL
(
»sidu
 -> 
MbTy³
è|| 
Maüoblock
 -> 
MÙiÚP»dL0
[0] || Macroblock -> MotionPredL0[1] || Macroblock -> MotionPredL0[2] || Macroblock -> MotionPredL0[3]

203 || 
Maüoblock
 -> 
MÙiÚP»dL1
[0] || Macroblock -> MotionPredL1[1] || Macroblock -> MotionPredL1[2] || Macroblock -> MotionPredL1[3]){

205 
»sidu
 -> 
MbTy³
 = 
	`In™ŸlizeBa£Index
(
N®
, 
x
, 
y
, 
RefP¬t™iÚ
, 
ba£_»sidu
,„esidu);

208 iàĞ
»sidu
 -> 
MbTy³
 !ğ
I_BL
){

209 iàĞ
N®
 -> 
S·tŸlSÿÏb™yTy³
 > 2){

210 
ModeIndex8x8
[4];

211 
MÙiÚP»dL0
[4];

213 
	`FuÎMÙiÚP»d
(
»sidu
 -> 
MbTy³
,„esidu -> 
Mode
, 
Maüoblock
 -> 
MÙiÚP»dL0
, MotionPredL0);

215 
	`S‘P¬tP»d
(
RefP¬t™iÚ
, 
»f_l0
);

216 
	`M”geMv
(
N®
, 0, 
RefP¬t™iÚ
, 
MÙiÚP»dL0
, 
mv_ÿche_l0
, 
ModeIndex8x8
, 
mv_l0
);

217 
	`CombšeMv
(
ModeIndex8x8
, 
mv_ÿche_l0
, 
MÙiÚP»dL0
);

219 
	`S‘IÁ”IÁ¿
(
N®
, 
x
, 
y
, 
RefP¬t™iÚ
, 
ba£_»sidu
);

221 iàĞ
	`IS_BL
(
»sidu
 -> 
MbTy³
)){

222 
	`S‘P¬tiÚnšg
(0, 
»sidu
, 
RefP¬t™iÚ
);

227  
Maüoblock
 -> 
MbBa£Addr
;

228 
	}
}

239 
	$G‘Ba£Pos™iÚB
(cÚ¡ 
Dœeù8x8xFÏg
, 
x
, 
y
, *
x_ba£
, *
y_ba£
, *
x_mbP¬tIdx
, *
y_mbP¬tIdx
,

240 cÚ¡ 
NAL
 *
N®
, 
REFPART
 
RefP¬t™iÚ
[32], cÚ¡ 
DATA
 *
Maüoblock
, 
RESIDU
 *
»sidu
, RESIDU *
ba£_»sidu
,

241 *
mv_l0
, *
»f_l0
, *
mv_l1
, *
»f_l1
, 
mv_ÿche_l0
[][2], 
mv_ÿche_l1
[][2])

246 iàĞ
»sidu
 -> 
InCrİWšdow
){

248 
	`G‘Ba£MbCoÜd
(
Maüoblock
, 
x_ba£
, 
y_ba£
, 
x_mbP¬tIdx
, 
y_mbP¬tIdx
);

251 ià(
	`IS_BL
(
»sidu
 -> 
MbTy³
è|| 
Maüoblock
 -> 
MÙiÚP»dL0
[0] || Macroblock -> MotionPredL0[1] || Macroblock -> MotionPredL0[2] || Macroblock -> MotionPredL0[3]

252 || 
Maüoblock
 -> 
MÙiÚP»dL1
[0] || Macroblock -> MotionPredL1[1] || Macroblock -> MotionPredL1[2] || Macroblock -> MotionPredL1[3]){

254 
»sidu
 -> 
MbTy³
 = 
	`In™ŸlizeBa£Index
(
N®
, 
x
, 
y
, 
RefP¬t™iÚ
, 
ba£_»sidu
,„esidu);

256 iàĞ
	`IS_P
(
»sidu
 -> 
MbTy³
)){

257 
»sidu
 -> 
MbTy³
 += 1;

261 iàĞ
»sidu
 -> 
MbTy³
 !ğ
I_BL
){

262 
i
;

263 
Ba£MbAddr
 = *
x_ba£
 + (*
y_ba£
 * (
N®
 -> 
ba£_Width
 >> 4));

264 
	`memıy
(&
RefP¬t™iÚ
[16], RefP¬t™iÚ, 16 * (
REFPART
));

265 iàĞ
	`IS_P
(
ba£_»sidu
[
Ba£MbAddr
] . 
MbTy³
)){

267 *
»f_l1
 = -1;

268  
i
 = 0; i < 16; i++){

269 
RefP¬t™iÚ
[16 + 
i
] . 
RefIndex
 = 0;

273 iàĞ
N®
 -> 
S·tŸlSÿÏb™yTy³
 > 2){

274 
ModeIndex8x8
[4];

275 
MÙiÚP»dL0
[4];

276 
MÙiÚP»dL1
[4];

278 
	`FuÎMÙiÚP»d
(
»sidu
 -> 
MbTy³
,„esidu -> 
Mode
, 
Maüoblock
 -> 
MÙiÚP»dL0
, MotionPredL0);

279 
	`FuÎMÙiÚP»d
(
»sidu
 -> 
MbTy³
,„esidu -> 
Mode
, 
Maüoblock
 -> 
MÙiÚP»dL1
, MotionPredL1);

282 
	`S‘P¬tP»d
(
RefP¬t™iÚ
, 
»f_l0
);

283 
	`S‘P¬tP»d
(&
RefP¬t™iÚ
[16], 
»f_l1
);

284 
	`M”geMv
(
N®
, 
Dœeù8x8xFÏg
, 
RefP¬t™iÚ
, 
MÙiÚP»dL0
, 
mv_ÿche_l0
, 
ModeIndex8x8
, 
mv_l0
);

285 
	`M”geMv
(
N®
, 
Dœeù8x8xFÏg
, &
RefP¬t™iÚ
[16], 
MÙiÚP»dL1
, 
mv_ÿche_l1
, 
ModeIndex8x8
, 
mv_l1
);

286 
	`CombšeMv
(
ModeIndex8x8
, 
mv_ÿche_l0
, 
MÙiÚP»dL0
);

287 
	`CombšeMv
(
ModeIndex8x8
, 
mv_ÿche_l1
, 
MÙiÚP»dL1
);

289 
	`S‘IÁ”IÁ¿
(
N®
, 
x
, 
y
, 
RefP¬t™iÚ
, 
ba£_»sidu
);

291 iàĞ
	`IS_BL
(
»sidu
 -> 
MbTy³
)){

292 
	`S‘P¬tiÚnšg
(1, 
»sidu
, 
RefP¬t™iÚ
);

297  
Maüoblock
 -> 
MbBa£Addr
;

298 
	}
}

	@lib_svc/Coordonates.h

35 #iâdeà
COORDONATES_H


36 
	#COORDONATES_H


	)

38 
	~"m©h.h
"

41 
	~"svc_d©a.h
"

45 
G‘RefIdc
(cÚ¡ 
NAL
 *
N®
, 
x
, 
y
, 
REFPART
 *
RefP¬t™iÚ
, 
RESIDU
 *
Ba£Residu
);

47 
G‘Ba£Pos™iÚ
(
x
, 
y
, *
x_ba£
, *
y_ba£
, *
x_mbP¬tIdx
, *
y_mbP¬tIdx
,

48 cÚ¡ 
NAL
 *
N®
, 
REFPART
 
RefP¬t™iÚ
[16], cÚ¡ 
DATA
 *
maüoblock
, 
RESIDU
 *
»sidu
,

49 
RESIDU
 *
ba£_»sidu
, *
mv_l0
, *
»f_l0
, 
mv_ÿche_l0
[][2]);

52 
G‘Ba£Pos™iÚB
(cÚ¡ 
Dœeù8x8xFÏg
, 
x
, 
y
, *
x_ba£
, *
y_ba£
, *
x_mbP¬tIdx
, *
y_mbP¬tIdx
,

53 cÚ¡ 
NAL
 *
N®
, 
REFPART
 
RefP¬t™iÚ
[16], cÚ¡ 
DATA
 *
maüoblock
, 
RESIDU
 *
»sidu
, RESIDU *
ba£_»sidu
,

54 *
mv_l0
, *
»f_l0
, *
mv_l1
, *
»f_l1
, 
mv_ÿche_l0
[][2], 
mv_ÿche_l1
[][2]);

64 
__šlše
 
	$FuÎMÙiÚP»d
(cÚ¡ 
MbTy³
, cÚ¡ 
Mode
, cÚ¡ *
MÙiÚP»dFÏg
, *
MÙiÚP»d
)

66 iàĞ
	`IS_BL
(
MbTy³
)){

67 
MÙiÚP»d
[0] = MotionPred[1] = MotionPred[2] = MotionPred[3] = 1;

68 }ià(
Mode
 == 3){

69 
MÙiÚP»d
[0] = MÙiÚP»d[1] = MÙiÚP»d[2] = MÙiÚP»d[3] = 
MÙiÚP»dFÏg
[0];

70 }ià(
Mode
 == 2){

71 
MÙiÚP»d
[0] = MÙiÚP»d[1] = 
MÙiÚP»dFÏg
[0];

72 
MÙiÚP»d
[2] = MÙiÚP»d[3] = 
MÙiÚP»dFÏg
[1];

73 }ià(
Mode
 == 1){

74 
MÙiÚP»d
[0] = MÙiÚP»d[2] = 
MÙiÚP»dFÏg
[0];

75 
MÙiÚP»d
[1] = MÙiÚP»d[3] = 
MÙiÚP»dFÏg
[1];

77 
MÙiÚP»d
[0] = 
MÙiÚP»dFÏg
[0];

78 
MÙiÚP»d
[1] = 
MÙiÚP»dFÏg
[1];

79 
MÙiÚP»d
[2] = 
MÙiÚP»dFÏg
[2];

80 
MÙiÚP»d
[3] = 
MÙiÚP»dFÏg
[3];

82 
	}
}

87 
__šlše
 
	$G‘Ba£MbCoÜd
(cÚ¡ 
DATA
 *
Maüoblock
, *
x_ba£
, *
y_ba£
,

88 *
x_mbP¬tIdx
, *
y_mbP¬tIdx
)

91 *
x_ba£
 = 
Maüoblock
 -> 
xBa£
;

92 *
y_ba£
 = 
Maüoblock
 -> 
yBa£
;

95 *
x_mbP¬tIdx
 = 
Maüoblock
 -> 
xBa£P¬t
;

96 *
y_mbP¬tIdx
 = 
Maüoblock
 -> 
yBa£P¬t
;

97 
	}
}

103 
__šlše
 
	$G‘Ba£MbAddr
(cÚ¡ 
NAL
 *
N®
, 
DATA
 *
Maüoblock
, cÚ¡ 
x
, cÚ¡ 
y
){

105 
x_ba£
, 
y_ba£
;

107 if(
N®
 -> 
S·tŸlSÿÏb™y
){

108 
x_ba£
 = 
Maüoblock
 -> 
xBa£
 = (è
	`RESCALE_POSITION
((
x
 - 
N®
 -> 
Ëá_off£t
 + 1), N® -> 
down_Width
, (N® -> 
up_Width
 >> 1), Nal -> up_Width);

109 
y_ba£
 = 
Maüoblock
 -> 
yBa£
 = (è
	`RESCALE_POSITION
((
y
 - 
N®
 -> 
tİ_off£t
 + 1), N® -> 
down_Height
, (N® -> 
up_Height
 >> 1), Nal -> up_Height);

110 
Maüoblock
 -> 
xBa£P¬t
 = ((
x_ba£
) - ((x_base >> 4) << 4)) >> 2;

111 
Maüoblock
 -> 
yBa£P¬t
 = ((
y_ba£
) - ((y_base >> 4) << 4)) >> 2;

113 
x_ba£
 = 
x
;

114 
y_ba£
 = 
y
;

118 
Maüoblock
 -> 
xBa£
 = 
x_ba£
 >> 4;

119 
Maüoblock
 -> 
yBa£
 = 
y_ba£
 >> 4;

120 
Maüoblock
 -> 
MbBa£Addr
 = Maüoblock -> 
xBa£
 + (Maüoblock -> 
yBa£
 * (
N®
 -> 
ba£_Width
 >> 4));

122  
Maüoblock
 -> 
MbBa£Addr
;

123 
	}
}

129 
__šlše
 
	$G‘Ba£Ty³
(cÚ¡ 
NAL
 *
N®
, 
RESIDU
 *
»sidu
, 
DATA
 *
Maüoblock
, cÚ¡ 
x
, cÚ¡ 
y
){

131 
mbBa£Addr
 = 
	`G‘Ba£MbAddr
(
N®
, 
Maüoblock
, 
x
 << 4, 
y
 << 4);

133 if(
	`IS_I_SVC
(
»sidu
[
mbBa£Addr
] . 
MbTy³
))

134  
I_BL
;

135 if(
	`IS_P_SVC
(
»sidu
[
mbBa£Addr
] . 
MbTy³
))

136  
P_BL
;

138  
B_BL
;

139 
	}
}

	@lib_svc/ErrorConcealment.c

36 
	~"ty³.h
"

37 
	~"d©a.h
"

38 
	~"š™_d©a.h
"

41 
	~"svc_ty³.h
"

42 
	~"CoÜdÚ©es.h
"

43 
	~"Wr™eBackSVC.h
"

44 
	~"E¼ÜCÚû®m’t.h
"

50 
	$E¼ÜS‘MbTy³
(cÚ¡ 
SPS
 *
Sps
, 
SLICE
 *
Sliû
, 
NAL
 *
N®
, 
RESIDU
 *
Residu
, 
DATA
 *
Maüoblocks
, *
SliûTabË
, 
MbTy³
)

52 
iCu¼MbAddr
;

53 
PicSizeInMbs
 = 
Sps
 -> PicSizeInMbs;

54 
PicWidthInMbs
 = 
Sps
 -> 
pic_width_š_mbs
;

56 
iCu¼MbAddr
 = 0; iCu¼MbAdd¸< 
PicSizeInMbs
 ; iCurrMbAddr ++) {

57 ià(
SliûTabË
 [
iCu¼MbAddr
] == 255){

58 
	`š™_»sidu
(&
Residu
[
iCu¼MbAddr
]);

59 
SliûTabË
 [
iCu¼MbAddr
] = 
Sliû
 -> 
¦iû_num
;

60 
Residu
[
iCu¼MbAddr
] . 
MbTy³
 = MbType;

61 ifĞ
MbTy³
 =ğ
I_BL
){

64 
iMb_x
, 
iMb_y
;

65 
	`G‘MbPos™iÚ
(
iCu¼MbAddr
, 
PicWidthInMbs
, &
iMb_x
, &
iMb_y
);

66 
	`G‘Ba£MbAddr
(
N®
, &
Maüoblocks
[
iCu¼MbAddr
], 
iMb_x
 << 4, 
iMb_y
 << 4);

70 
	}
}

76 
	$AVCPBE¼ÜCÚû®m’t
(cÚ¡ 
SPS
 *
Sps
, 
SLICE
 *
Sliû
, *
SliûTabË
, 
RESIDU
 *
Residu
,

77 
MbTy³
, *
MvL0
, *
MvL1
, *
RefL0
, *
RefL1
)

80 
iCu¼MbAddr
;

81 cÚ¡ 
PicWidthInMbs
 = 
Sps
 -> 
pic_width_š_mbs
;

82 cÚ¡ 
PicSizeInMbs
 = 
Sps
 -> PicSizeInMbs;

85 
	`__deş¥ec
(
	`®ign
(64)è
RefCacheL0
 [48];

86 
	`__deş¥ec
(
	`®ign
(64)è
MvCacheL0
 [48][2];

89 
	`mem£t
(
RefCacheL0
, 0, 48 * ());

90 
	`š™_mv_ÿche
(
MvCacheL0
);

93 
iCu¼MbAddr
 = 0; iCu¼MbAdd¸< 
PicSizeInMbs
 ; iCurrMbAddr ++) {

94 ià(
SliûTabË
 [
iCu¼MbAddr
] == 255){

95 
iMb_x
, 
iMb_y
;

96 
	`G‘MbPos™iÚ
(
iCu¼MbAddr
, 
PicWidthInMbs
, &
iMb_x
, &
iMb_y
);

98 
	`š™_»sidu
(&
Residu
[
iCu¼MbAddr
]);

99 
SliûTabË
 [
iCu¼MbAddr
] = 
Sliû
 -> 
¦iû_num
;

100 
Residu
[
iCu¼MbAddr
] . 
MbTy³
 = MbType;

101 
	`wr™e_back_mÙiÚ_fuÎ_»f
Ğ
Sliû
 -> 
b_¡ride
, Sliû -> 
b8_¡ride
,

102 &
MvL0
[(
iMb_x
 << 3è+ 
iMb_y
 * (
Sliû
 -> 
b_¡ride
 << 2)], 
MvCacheL0
,

103 &
RefL0
[(
iMb_x
 << 2è+ 
iMb_y
 * (
Sliû
 -> 
b_¡ride
 << 1)], 
RefCacheL0
 );

104 
	`wr™e_back_mÙiÚ_fuÎ_»f
Ğ
Sliû
 -> 
b_¡ride
, Sliû -> 
b8_¡ride
,

105 &
MvL1
[(
iMb_x
 << 3è+ 
iMb_y
 * (
Sliû
 -> 
b_¡ride
 << 2)], 
MvCacheL0
,

106 &
RefL1
[(
iMb_x
 << 2è+ 
iMb_y
 * (
Sliû
 -> 
b_¡ride
 << 1)], 
RefCacheL0
 );

109 
	}
}

116 
	$AVCE¼ÜCÚû®m’t
(
NAL
 *
N®
, cÚ¡ 
SPS
 *
Sps
, 
SLICE
 *
Sliû
, *
SliûTabË
, 
RESIDU
 *
Residu
,

117 
DATA
 *
Maüoblocks
, *
MvL0
, *
MvL1
, *
RefL0
, *
RefL1
)

119 ià(
N®
 -> 
E¼ÜD‘eùiÚ
 && 
Sliû
 -> 
mb_xy
 < 
Sps
 -> 
PicSizeInMbs
){

123 ifĞ
Sliû
 -> 
¦iû_ty³
 !ğ
SLICE_TYPE_I
){

126 
MbTy³
 = 
P_Sk
 - 
Sliû
 -> 
¦iû_ty³
;

127 
	`AVCPBE¼ÜCÚû®m’t
(
Sps
, 
Sliû
, 
SliûTabË
, 
Residu
, 
MbTy³
, 
MvL0
, 
MvL1
, 
RefL0
, 
RefL1
);

130 
	`E¼ÜS‘MbTy³
(
Sps
, 
Sliû
, 
N®
, 
Residu
, 
Maüoblocks
, 
SliûTabË
, 
INTRA_16x16
);

133 
	}
}

139 
	$SVCE¼ÜCÚû®m’t
(
NAL
 *
N®
, cÚ¡ 
SPS
 *
Sps
, 
SLICE
 *
Sliû
, *
SliûTabË
,

140 
RESIDU
 *
Residu
, 
DATA
 *
Maüoblocks
)

142 ià(
N®
 -> 
E¼ÜD‘eùiÚ
 && 
Sliû
 -> 
mb_xy
 < 
Sps
 -> 
PicSizeInMbs
){

144 ià(
Sliû
 -> 
¦iû_ty³
 !ğ
SLICE_TYPE_I
){

145 
MbTy³
 = 
P_Sk
 - 
Sliû
 -> 
¦iû_ty³
;

146 
	`E¼ÜS‘MbTy³
(
Sps
, 
Sliû
, 
N®
, 
Residu
, 
Maüoblocks
, 
SliûTabË
, 
MbTy³
);

147 }if(
N®
 -> 
DqId
){

148 
MbTy³
 = 
I_BL
;

149 
	`E¼ÜS‘MbTy³
(
Sps
, 
Sliû
, 
N®
, 
Residu
, 
Maüoblocks
, 
SliûTabË
, 
MbTy³
);

152 
	}
}

	@lib_svc/ErrorConcealment.h

35 
AVCE¼ÜCÚû®m’t
(
NAL
 *
N®
, cÚ¡ 
SPS
 *
Sps
, 
SLICE
 *
Sliû
, *
SliûTabË
, 
RESIDU
 *
Residu
,

36 
DATA
 *
Maüoblocks
, *
MvL0
, *
MvL1
, *
RefL0
, *
RefL1
);

37 
SVCE¼ÜCÚû®m’t
(
NAL
 *
N®
, cÚ¡ 
SPS
 *
Sps
, 
SLICE
 *
Sliû
, *
SliûTabË
, 
RESIDU
 *
Residu
, 
DATA
 *
Maüoblocks
);

	@lib_svc/ErrorDetection.c

35 
	~"m©h.h
"

36 
	~"¡ršg.h
"

39 
	~"memÜy_mªagem’t.h
"

40 
	~"di¥Ïy_mªagem’t.h
"

43 
	~"svc_ty³.h
"

44 
	~"symbŞ.h
"

45 
	~"pic_li¡.h
"

46 
	~"£t_Ïy”.h
"

47 
	~"E¼ÜD‘eùiÚ.h
"

48 
	~"FšishF¿meSVC.h
"

49 
	~"piùu»_mªagem’t.h
"

56 
	$D‘eùSliûE¼Ü
(
NAL
 *
N®
, 
SPS
 *
¥s
, 
PPS
 *
µs
, 
LIST_MMO
 *
Cu¼’t_pic
, 
MMO
 *
Mmo
,

57 
EndOfSliû
, 
P»vEndOfSliû
, *
Crİ
, *
ImgToDi¥Ïy
,

58 *
Add»ssPic
, *
xsize
, *
ysize
)

62 ià(!
EndOfSliû
 && (
P»vEndOfSliû
 || 
N®
 -> 
E¼ÜD‘eùed
è&& N® -> 
La¡DqId
 <ğN® -> 
DqIdToDi¥Ïy
){

65 
NAL
 
La¡SŒuùN®
[1];

66 
	`memıy
(
La¡SŒuùN®
, 
N®
, (
NAL
));

67 
La¡SŒuùN®
 -> 
Lay”Id
 = 
Mmo
 -> LayerId;

68 if(
N®
 -> 
Ïy”_id_bË
 [
Mmo
 -> 
Lay”Id
] != -1){

69 
La¡SŒuùN®
 -> 
DqId
 = 
N®
 -> 
Ïy”_id_bË
 [
Mmo
 -> 
Lay”Id
];

73 
La¡SŒuùN®
 -> 
DqId
 = 0;

77 
La¡SŒuùN®
 -> 
DqIdMax
 = 
N®
 -> 
La¡DqIdMax
;

79 
	`FšishF¿meSVCE¼Ü
(1, 
La¡SŒuùN®
, 
¥s
, 
µs
, 
Cu¼’t_pic
, 
Crİ
, 
ImgToDi¥Ïy
, 
Add»ssPic
, 
Mmo
, 
xsize
, 
ysize
);

81 
	}
}

87 
	$D‘ecMissšgTİLay”
(
NAL
 *
N®
, 
SPS
 *
¥s
, 
PPS
 *
µs
, 
LIST_MMO
 *
Cu¼’t_pic
, 
MMO
 *
Mmo
,

88 *
Crİ
, *
ImgToDi¥Ïy
, *
Add»ssPic
, *
xsize
, *
ysize
)

93 if(!
Mmo
 -> 
num_ä“_poc_add»ss
 && 
N®
 -> 
DqId
 =ğ0 && (N® -> 
La¡DqId
 !ğN® -> 
La¡DqIdMax
 && Nal -> LastDqId < Nal -> LastDqIdMax)){

94 
AÌ—dyIn
 = 0, 
i
;

95 
i
 = 0; i < 
Mmo
 -> 
nb_img_di¥Ïy
 - MmØ-> 
num_ä“_poc_add»ss
; i++){

96 if((
Cu¼’t_pic
 -> 
poc
 =ğ
Mmo
 -> 
poc_·¿ms
[
i
] . 
Piùu»
 ->…oc) &&

97 (
Cu¼’t_pic
 -> 
MemÜyAdd»ss
 =ğ
Mmo
 -> 
poc_·¿ms
[
i
] . 
Piùu»
 -> MemoryAddress)){

98 
AÌ—dyIn
 = 1;

103 if(!
AÌ—dyIn
){

104 
NAL
 
La¡SŒuùN®
[1];

105 
LAYER_MMO
 *
Lay”Mmo
 = &
Mmo
 -> 
Lay”MMO
 [
N®
 -> 
Lay”Id
];

106 
	`memıy
(
La¡SŒuùN®
, 
N®
, (
NAL
));

107 
La¡SŒuùN®
 -> 
DqId
 = 
N®
 -> 
La¡DqIdMax
;

108 
La¡SŒuùN®
 -> 
Lay”Id
 = (è
	`G‘Lay”Numb”
(
N®
, N® -> 
La¡DqIdMax
);

109 
La¡SŒuùN®
 -> 
DqIdMax
 = 
N®
 -> 
La¡DqIdMax
;

112 
	`ProvideMemAdd»ss
(
Cu¼’t_pic
, 
Mmo
, 
Lay”Mmo
);

115 
	`FšishF¿meSVCE¼Ü
(0, 
La¡SŒuùN®
, 
¥s
, 
µs
, 
Cu¼’t_pic
, 
Crİ
, 
ImgToDi¥Ïy
, 
Add»ssPic
, 
Mmo
, 
xsize
, 
ysize
);

118 
	}
}

124 
	$D‘eùPocProbËm
(
NAL
 *
N®
, 
MMO
 *
Mmo
, 
LIST_MMO
 *
Cu¼’t_pic
, 
LAYER_MMO
 *
Lay”Mmo
, 
SPS
 *
¥s
)

127 if(
N®
 -> 
DqId
 && 
Cu¼’t_pic
 -> 
poc
 !ğ
Mmo
 -> 
La¡DecodedPoc
){

128 cÚ¡ 
MaxPicOrd”CÁLsb
 = 1 << (
¥s
 -> 
log2_max_pic_Üd”_út_lsb
);

131 
La¡DecodedPoc
 = 
Mmo
 -> LastDecodedPoc;

135 ifĞ
Lay”Mmo
 -> 
´evPicOrd”CÁLsb
 !ğ
Mmo
 -> 
P»vPicOrd”CÁLsb
){

136 
Lay”Mmo
 -> 
´evPicOrd”CÁLsb
 = 
Mmo
 -> 
P»vPicOrd”CÁLsb
;

140 ifĞ
Lay”Mmo
 -> 
´evPicOrd”CÁMsb
 !ğ
Mmo
 -> 
P»vPicOrd”CÁMsb
){

141 
Lay”Mmo
 -> 
´evPicOrd”CÁMsb
 = 
Mmo
 -> 
P»vPicOrd”CÁMsb
;

144 if(
	`abs
(
Lay”Mmo
 -> 
pic_Üd”_út_lsb
è> 
MaxPicOrd”CÁLsb
){

145 
Lay”Mmo
 -> 
pic_Üd”_út_lsb
 = 
Mmo
 -> 
La¡DecodedPoc
 - Lay”MmØ-> 
´evPicOrd”CÁMsb
;

149 
Cu¼’t_pic
 -> 
poc
 = 
	`PocComputiÚ
(
¥s
, 
N®
 -> 
IdrFÏg
 * 5, N® -> 
N®RefIdc
, 
Lay”Mmo
);

150 
Mmo
 -> 
La¡DecodedPoc
 = LastDecodedPoc;

152 
	}
}

158 
	$D‘eùUnu£dReã»nûF¿me
(
NAL
 *
N®
, 
MMO
 *
Mmo
)

160 
i
;

163 
Lay”IdMax
 = 
	`G‘Lay”Numb”
(
N®
, N® -> 
DqIdMax
);

165 
i
 = 
Lay”IdMax
 + 1; i < 8; i++){

166 
LAYER_MMO
 *
Lay”Mmo
 = &
Mmo
 -> 
Lay”MMO
 [
i
];

167 if(
Lay”Mmo
 -> 
ShÜtRefCouÁ
){

168 
	`»move_®l
(
Mmo
, 
Lay”Mmo
);

171 
	}
}

177 
	$D‘eùUnDÚeExecu‹RefPic
(
NAL
 *
N®
, 
MMO
 *
Mmo
)

179 
i
;

181 
Lay”IdMax
 = 
	`G‘Lay”Numb”
(
N®
, N® -> 
DqIdMax
);

183 
i
 = 
Lay”IdMax
 + 1; i < 8; i++){

184 
LAYER_MMO
 *
Lay”Mmo
 = &
Mmo
 -> 
Lay”MMO
 [
i
];

185 ifĞ
Lay”Mmo
 -> 
šdex
){

186 
	`»move_®l
(
Mmo
, 
Lay”Mmo
);

187 
Lay”Mmo
 -> 
šdex
 = 0;

190 
	}
}

196 
	$RemoveDi¥ÏyE¼Ü
(
MMO
 *
Mmo
, 
NAL
 *
N®
)

198 
Pos
 = 
Mmo
 -> 
nb_img_di¥Ïy
;

199 
Lay”Id
 = 
Mmo
 -> 
poc_·¿ms
[
Pos
] . LayerId;

200 
DqId
 = 
N®
 -> 
Ïy”_id_bË
 [
Lay”Id
];

201 
Poc
 = 
Mmo
 -> 
poc_·¿ms
[
Pos
] . 
Piùu»
 -> 
poc
;

204 iàĞ
DqId
 > 
N®
 -> 
DqIdToDi¥Ïy
){

206 
Mmo
 -> 
AuMemÜyAdd»ss
[MmØ-> 
AuMemÜy
] = MmØ-> 
poc_·¿ms
[
Pos
] . 
Piùu»
 -> 
MemÜyAdd»ss
;

207 
Mmo
 -> 
AuMemÜy
++;

210 
	`memmove
(&
Mmo
 -> 
poc_·¿ms
[
Pos
], &MmØ->…oc_·¿ms[Po + 1], 1 * (
POC_PARAMS
));

211 
Mmo
 -> 
num_ä“_poc_add»ss
++;

213 
LAYER_MMO
 *
Lay”Mmo
;

216 
i
, 
Found
 = 0;

217  
i
 = 0; i < 
NUM_POC_PARAMS
; i++){

218 
POC_PARAMS
 *
Cu¼F¿me
 = &
Mmo
 -> 
poc_·¿ms
[
i
];

219 ià(
Cu¼F¿me
 -> 
Lay”Id
 !ğ
N®
 -> LayerId){

220 
Poc
 = 
Cu¼F¿me
 -> 
Piùu»
 -> 
poc
;

221 
Lay”Id
 = 
Cu¼F¿me
 -> LayerId;

222 
Found
 = 1;

229 ià(
Found
){

230 
Lay”Mmo
 = &
Mmo
 -> 
Lay”MMO
 [MmØ-> 
poc_·¿ms
[
i
] . 
Lay”Id
];

233 
Mmo
 -> 
F»eMemÜyAdd»ss
 [MmØ-> 
NumF»eAdd»ss
] = MmØ-> 
poc_·¿ms
[
i
] . 
Piùu»
 -> 
MemÜyAdd»ss
;

234 
Mmo
 -> 
NumF»eAdd»ss
++;

237 
Lay”Mmo
 -> 
MvMemÜyAdd»ss
 [Lay”MmØ-> 
F»eMvMemÜy
] = 
Mmo
 -> 
poc_·¿ms
[
i
] . 
Piùu»
 -> MvMemoryAddress;

238 
Lay”Mmo
 -> 
F»eMvMemÜy
++;

242 
	`memmove
(&
Mmo
 -> 
poc_·¿ms
[
i
], &MmØ->…oc_·¿ms[˜+ 1], (MmØ-> 
nb_img_di¥Ïy
 - iè* (
POC_PARAMS
));

243 
Mmo
 -> 
num_ä“_poc_add»ss
++;

245 
Mmo
 -> 
poc_·¿ms
[MmØ-> 
nb_img_di¥Ïy
] . 
Piùu»
 -> 
poc
 = 
MAX_POC
;

247 
Lay”Mmo
 = &
Mmo
 -> 
Lay”MMO
 [
Lay”Id
];

250 
i
 = 0; i < 16; i++){

251 ifĞ
Lay”Mmo
 -> 
ShÜtRef
 [
i
] . 
poc
 =ğ
Poc
){

252 
Lay”Mmo
 -> 
ShÜtRef
 [
i
] . 
poc
 = 
Mmo
 -> 
poc_·¿ms
[
Pos
] . 
Piùu»
 ->…oc;

255 ifĞ
Lay”Mmo
 -> 
LÚgRef
 [
i
] . 
poc
 =ğ
Poc
){

256 
Lay”Mmo
 -> 
ShÜtRef
 [
i
] . 
poc
 = 
Mmo
 -> 
poc_·¿ms
[
Pos
] . 
Piùu»
 ->…oc;

265 
add»ss_pic
;

266 
POC_PARAMS
 *
F¿me
 = 
	`FšdBe¡F¿me
(
Mmo
, MmØ-> 
poc_·¿ms
, &
i
, 
MIN_POC
);

267 
Mmo
 -> 
num_ä“_poc_add»ss
 ++;

270 
	`Cu¼’tDi¥Ïy
(
Mmo
, &MmØ-> 
Lay”MMO
[0], 
F¿me
 -> 
Piùu»
, &
add»ss_pic
);

271 ; 
i
 < 
Mmo
 -> 
nb_img_di¥Ïy
 - MmØ-> 
num_ä“_poc_add»ss
; i++){

272 
	`memmove
(&
Mmo
 -> 
poc_·¿ms
[
i
], &MmØ->…oc_·¿ms[˜+ 1], 1 * (
POC_PARAMS
));

276 
	}
}

	@lib_svc/ErrorDetection.h

38 
D‘eùSliûE¼Ü
(
NAL
 *
N®
, 
SPS
 *
¥s
, 
PPS
 *
µs
, 
LIST_MMO
 *
Cu¼’t_pic
, 
MMO
 *
Mmo
,

39 
EndOfSliû
, 
P»vEndOfSliû
, *
Crİ
, *
ImgToDi¥Ïy
,

40 *
Add»ssPic
, *
xsize
, *
ysize
);

42 
D‘ecMissšgTİLay”
(
NAL
 *
N®
, 
SPS
 *
¥s
, 
PPS
 *
µs
, 
LIST_MMO
 *
Cu¼’t_pic
, 
MMO
 *
Mmo
,

43 *
Crİ
, *
ImgToDi¥Ïy
, *
Add»ssPic
, *
xsize
, *
ysize
);

45 
D‘eùPocProbËm
(
NAL
 *
N®
, 
MMO
 *
Mmo
, 
LIST_MMO
 *
Cu¼’t_pic
, 
LAYER_MMO
 *
Lay”Mmo
, 
SPS
 *
¥s
);

46 
RemoveDi¥ÏyE¼Ü
(
MMO
 *
Mmo
, 
NAL
 *
N®
);

	@lib_svc/Fill_caches_svc.c

35 
	~"ty³.h
"

36 
	~"d©a.h
"

37 
	~"š™_d©a.h
"

38 
	~"fl_ÿches.h
"

41 
	~"svc_d©a.h
"

42 
	~"fl_ÿches_svc.h
"

50 
	$fl_ÿches_svc
 ( cÚ¡ 
SLICE
 *
Sliû
, cÚ¡ 
RESIDU
 *
»sidu
, cÚ¡ RESIDU *
Ba£Residu
, cÚ¡ 
EÁrİyCodšgModeFlog
,

51 
NÚZ”oCouÁCache
 [ 
RESTRICT
 ], cÚ¡ *
SliûTabË
, cÚ¡ 
DATA
 *
Cu¼Block
,

52 
aio_tiIÁ¿4x4_´ed_mode_ÿche
[], cÚ¡ 
ai_iMb_x
, cÚ¡ 
ai_iMb_y
 ,

53 cÚ¡ 
ai_iCÚ¡¿šed_šŒa_´ed
, cÚ¡ 
Ëv–_´ediùiÚ_æag
)

55 
tİ_ty³
 = 0 ;

56 
Ëá_ty³
 = 0;

57 
tİ_xy
 = 0;

58 
Ëá_xy
 = 0;

59 
´ed
;

60 cÚ¡ 
iMb_xy
 = 
ai_iMb_x
 + 
ai_iMb_y
 * ()(
Sliû
 -> 
mb_¡ride
);

61 cÚ¡ 
ai_iMb_ty³_Çme
 = 
»sidu
 -> 
MbTy³
;

62 cÚ¡ 
v®_š™
 = 
EÁrİyCodšgModeFlog
 && !(
	`IS_I
(
ai_iMb_ty³_Çme
)) ? 0 : 64 ;

64 
	`š™_nÚ_z”o_couÁ_ÿche
(
NÚZ”oCouÁCache
, 
v®_š™
);

66 iàĞ
ai_iMb_y
 > 0 ) {

67 
tİ_xy
 = 
iMb_xy
 - 
Sliû
 -> 
mb_¡ride
;

68 
tİ_ty³
 = (
SliûTabË
 [
tİ_xy
] =ğ
Sliû
 -> 
¦iû_num
è? 
»sidu
 [- Sliû -> 
mb_¡ride
] . 
MbTy³
 : 0 ;

70 
tİ_ty³
 = 0;

73 iàĞ
iMb_xy
 > 0 && 
ai_iMb_x
 != 0 ) {

74 
Ëá_xy
 = 
iMb_xy
 - 1 ;

75 
Ëá_ty³
 = 
SliûTabË
 [
Ëá_xy
] =ğ
Sliû
 -> 
¦iû_num
 ? 
»sidu
 [-1] . 
MbTy³
 : 0 ;

77 
Ëá_ty³
 = 0;

80 
	`FlNÚZ”oCouÁ
(
Cu¼Block
, 
Sliû
 -> 
mb_¡ride
, 
tİ_ty³
, 
Ëá_ty³
, 
NÚZ”oCouÁCache
);

84 if(
	`IS_NxN
(
tİ_ty³
)){

85 
aio_tiIÁ¿4x4_´ed_mode_ÿche
[4] = 
»sidu
[- 
Sliû
 -> 
mb_¡ride
] . 
IÁ¿16x16DCLev–
[10];

86 
aio_tiIÁ¿4x4_´ed_mode_ÿche
[5] = 
»sidu
[- 
Sliû
 -> 
mb_¡ride
] . 
IÁ¿16x16DCLev–
[11];

87 
aio_tiIÁ¿4x4_´ed_mode_ÿche
[6] = 
»sidu
[- 
Sliû
 -> 
mb_¡ride
] . 
IÁ¿16x16DCLev–
[14];

88 
aio_tiIÁ¿4x4_´ed_mode_ÿche
[7] = 
»sidu
[- 
Sliû
 -> 
mb_¡ride
] . 
IÁ¿16x16DCLev–
[15];

90 ià(
Ëv–_´ediùiÚ_æag
 && 
tİ_ty³
 =ğ
I_BL
 && 
	`IS_NxN
(
Ba£Residu
 [
tİ_xy
] . 
MbTy³
)){

91 
aio_tiIÁ¿4x4_´ed_mode_ÿche
[4] = 
Ba£Residu
[
tİ_xy
] . 
IÁ¿16x16DCLev–
[10];

92 
aio_tiIÁ¿4x4_´ed_mode_ÿche
[5] = 
Ba£Residu
[
tİ_xy
] . 
IÁ¿16x16DCLev–
[11];

93 
aio_tiIÁ¿4x4_´ed_mode_ÿche
[6] = 
Ba£Residu
[
tİ_xy
] . 
IÁ¿16x16DCLev–
[14];

94 
aio_tiIÁ¿4x4_´ed_mode_ÿche
[7] = 
Ba£Residu
[
tİ_xy
] . 
IÁ¿16x16DCLev–
[15];

98 ifĞ
tİ_ty³
 && (!
ai_iCÚ¡¿šed_šŒa_´ed
 || (
Ëv–_´ediùiÚ_æag
 && 
	`IS_I_SVC
Ñİ_ty³)è|| (×i_iCÚ¡¿šed_šŒa_´ed || !Ëv–_´ediùiÚ_æagè&& 
	`IS_I
(top_type)))){

99 
´ed
 = 2;

101 
´ed
 = -1;

104 
aio_tiIÁ¿4x4_´ed_mode_ÿche
[4] =‡io_tiIntra4x4_pred_mode_cache[5] =

105 
aio_tiIÁ¿4x4_´ed_mode_ÿche
[6] =‡io_tiIÁ¿4x4_´ed_mode_ÿche[7] = 
´ed
;

108 if(
	`IS_NxN
(
Ëá_ty³
)) {

109 
aio_tiIÁ¿4x4_´ed_mode_ÿche
[3 + 8] = 
»sidu
[-1] . 
IÁ¿16x16DCLev–
[5];

110 
aio_tiIÁ¿4x4_´ed_mode_ÿche
[3 + 16] = 
»sidu
[-1] . 
IÁ¿16x16DCLev–
[7];

111 
aio_tiIÁ¿4x4_´ed_mode_ÿche
[3 + 24] = 
»sidu
[-1] . 
IÁ¿16x16DCLev–
[13];

112 
aio_tiIÁ¿4x4_´ed_mode_ÿche
[3 + 32] = 
»sidu
[-1] . 
IÁ¿16x16DCLev–
[15];

114 if(
Ëv–_´ediùiÚ_æag
 && 
Ëá_ty³
 =ğ
I_BL
 && 
	`IS_NxN
(
Ba£Residu
 [
Ëá_xy
] . 
MbTy³
)){

115 
aio_tiIÁ¿4x4_´ed_mode_ÿche
[3 + 8] = 
Ba£Residu
[
Ëá_xy
] . 
IÁ¿16x16DCLev–
[5];

116 
aio_tiIÁ¿4x4_´ed_mode_ÿche
[3 + 16] = 
Ba£Residu
[
Ëá_xy
] . 
IÁ¿16x16DCLev–
[7];

117 
aio_tiIÁ¿4x4_´ed_mode_ÿche
[3 + 24] = 
Ba£Residu
[
Ëá_xy
] . 
IÁ¿16x16DCLev–
[13];

118 
aio_tiIÁ¿4x4_´ed_mode_ÿche
[3 + 32] = 
Ba£Residu
[
Ëá_xy
] . 
IÁ¿16x16DCLev–
[15];

121 ifĞ
Ëá_ty³
 && (!
ai_iCÚ¡¿šed_šŒa_´ed
 || (
Ëv–_´ediùiÚ_æag
 && 
	`IS_I_SVC
Öeá_ty³)è|| (×i_iCÚ¡¿šed_šŒa_´ed || !Ëv–_´ediùiÚ_æagè&& 
	`IS_I
(left_type)))){

122 
´ed
 = 2;

124 
´ed
 = -1;

127 
aio_tiIÁ¿4x4_´ed_mode_ÿche
[3 + 8] =‡io_tiIntra4x4_pred_mode_cache[3 + 24] =

128 
aio_tiIÁ¿4x4_´ed_mode_ÿche
[3 + 16] =‡io_tiIÁ¿4x4_´ed_mode_ÿche[3 + 32] = 
´ed
;

131 ià(
ai_iMb_x
 == 0) {

132 
aio_tiIÁ¿4x4_´ed_mode_ÿche
 [11] =‡io_tiIntra4x4_pred_mode_cache [27] =

133 
aio_tiIÁ¿4x4_´ed_mode_ÿche
 [19] =‡io_tiIntra4x4_pred_mode_cache [35] = -1 ;

135 
	}
}

149 
	$fl_ÿches_mÙiÚ_veùÜ_fuÎ_»f
ĞcÚ¡ 
SLICE
 *
Sliû
, cÚ¡ 
ai_iB_¡ride
, cÚ¡ 
ai_iB8_¡ride
,

150 
aio_tiRef_ÿche_l0
 [ 
RESTRICT
 ], 
aio_tiMv_ÿche_l0
[ RESTRICT ][2],

151 cÚ¡ *
SliûTabË
, cÚ¡ 
RESIDU
 
Cu¼Residu
 [ ], 
ai_tiMv
[ 
RESTRICT
 ],

152 cÚ¡ *
ai_tiRef
, cÚ¡ 
ai_iX
, cÚ¡ 
ai_iY
)

155 
tİ_ty³
 = 0;

156 
tİËá_ty³
;

157 
tİright_ty³
;

158 
Ëá_ty³
;

159 cÚ¡ 
iCu¼MbAddr
 = 
ai_iX
 + 
Sliû
 -> 
mb_¡ride
 * 
ai_iY
;

160 cÚ¡ 
tİ_xy
 = 
iCu¼MbAddr
 - 
Sliû
 -> 
mb_¡ride
 ;

161 cÚ¡ 
tİËá_xy
 = 
tİ_xy
 - 1 ;

162 cÚ¡ 
tİright_xy
 = (
tİ_xy
 >= 0)?op_xy + 1:-1 ;

163 cÚ¡ 
Ëá_xy
 = 
iCu¼MbAddr
 - 1;

166 iàĞ
tİ_xy
 >= 0 ) {

167 
tİ_ty³
 = 
SliûTabË
 [
tİ_xy
] =ğ
Sliû
 -> 
¦iû_num
 ? 
Cu¼Residu
 [tİ_xy] . 
MbTy³
 : 0 ;

169 iàĞ
tİËá_xy
 >ğ0 && 
ai_iX
 !ğ0 && 
SliûTabË
 [tİËá_xy] =ğ
Sliû
 -> 
¦iû_num
){

170 
tİËá_ty³
 = 
Cu¼Residu
 [
tİËá_xy
] . 
MbTy³
;

172 
tİËá_ty³
 = 0;

173 
aio_tiRef_ÿche_l0
[3] = 
PART_NOT_AVAILABLE
;

177 iàĞ
tİright_xy
 >ğ0 && (
ai_iX
 !ğ
Sliû
 -> 
mb_¡ride
 - 1è&& 
SliûTabË
 [tİright_xy] =ğSliû -> 
¦iû_num
){

178 
tİright_ty³
 = 
Cu¼Residu
 [
tİright_xy
] . 
MbTy³
;

180 
tİright_ty³
 = 0;

181 
aio_tiRef_ÿche_l0
[8] = 
PART_NOT_AVAILABLE
;

185 
tİ_ty³
 = 0;

186 
tİËá_ty³
 = 0;

187 
tİright_ty³
 = 0;

190 
aio_tiRef_ÿche_l0
[3] = 
PART_NOT_AVAILABLE
;

191 
aio_tiRef_ÿche_l0
[8] = 
PART_NOT_AVAILABLE
;

195 iàĞ
Ëá_xy
 >ğ0 && 
ai_iX
 !ğ0 && 
SliûTabË
 [Ëá_xy] =ğ
Sliû
 -> 
¦iû_num
){

196 
Ëá_ty³
 = 
Cu¼Residu
 [
Ëá_xy
] . 
MbTy³
 ;

198 
Ëá_ty³
 = 0;

200 
	`FlRefCacheLeáPos™iÚ
(
aio_tiRef_ÿche_l0
, 
PART_NOT_AVAILABLE
, PART_NOT_AVAILABLE);

205 if(
	`IS_P
(
tİ_ty³
)) {

206 
	`FlMvCacheTİPos™iÚ
(
aio_tiMv_ÿche_l0
, &
ai_tiMv
[-
ai_iB_¡ride
]);

207 
aio_tiRef_ÿche_l0
[4] = 
ai_tiRef
 [- 
ai_iB8_¡ride
];

208 
aio_tiRef_ÿche_l0
[5] = 
ai_tiRef
 [1 - 
ai_iB8_¡ride
];

209 
aio_tiRef_ÿche_l0
[6] = 
ai_tiRef
 [2 - 
ai_iB8_¡ride
];

210 
aio_tiRef_ÿche_l0
[7] = 
ai_tiRef
 [3 - 
ai_iB8_¡ride
];

212 ià(!
tİ_ty³
){

213 
	`FlRefCacheTİPos™iÚ
(
aio_tiRef_ÿche_l0
, 
PART_NOT_AVAILABLE
, PART_NOT_AVAILABLE);

217 if(
	`IS_P
(
Ëá_ty³
)) {

218 
	`FlMvCacheLeáPos™iÚ
(
aio_tiMv_ÿche_l0
, &
ai_tiMv
[-2], 
ai_iB_¡ride
);

219 
aio_tiRef_ÿche_l0
[11] = 
ai_tiRef
[-1];

220 
aio_tiRef_ÿche_l0
[19] = 
ai_tiRef
[-1 + 
ai_iB8_¡ride
];

221 
aio_tiRef_ÿche_l0
[27] = 
ai_tiRef
[-1 + 2 * 
ai_iB8_¡ride
];

222 
aio_tiRef_ÿche_l0
[35] = 
ai_tiRef
[-1 + 3 * 
ai_iB8_¡ride
];

227 if(
	`IS_P
(
tİËá_ty³
 )) {

228 
aio_tiMv_ÿche_l0
 [3][0] = 
ai_tiMv
[-2 - 
ai_iB_¡ride
];

229 
aio_tiMv_ÿche_l0
 [3][1] = 
ai_tiMv
[-1 - 
ai_iB_¡ride
];

230 
aio_tiRef_ÿche_l0
[3] = 
ai_tiRef
[-1 - 
ai_iB8_¡ride
];

234 if(
	`IS_P
(
tİright_ty³
 )) {

236 
aio_tiMv_ÿche_l0
 [8][0] = 
ai_tiMv
[8 - 
ai_iB_¡ride
];

237 
aio_tiMv_ÿche_l0
 [8][1] = 
ai_tiMv
[9 - 
ai_iB_¡ride
];

238 
aio_tiRef_ÿche_l0
[8] = 
ai_tiRef
[4 - 
ai_iB8_¡ride
];

242 
aio_tiRef_ÿche_l0
[14] =‡io_tiRef_cache_l0[15 + 1] =

243 
aio_tiRef_ÿche_l0
[23 + 1] =‡io_tiRef_ÿche_l0[30] =‡io_tiRef_ÿche_l0[31 + 1] = 
PART_NOT_AVAILABLE
;

245 
	}
}

253 
	$fl_ÿches_fuÎ_»f
ĞcÚ¡ 
SLICE
 *
Sliû
, cÚ¡ 
ai_iB_¡ride
, cÚ¡ 
ai_iB8_¡ride
, 
aio_tiRef_ÿche_l0
 [ 
RESTRICT
 ],

254 
aio_tiMv_ÿche_l0
[ 
RESTRICT
 ][2], cÚ¡ *
SliûTabË
, cÚ¡ 
RESIDU
 
Cu¼Residu
 [ ],

255 
ai_tiMv
[ 
RESTRICT
 ], cÚ¡ *
ai_tiRef
, cÚ¡ 
ai_iX
, cÚ¡ 
ai_iY
)

259 
tİ_ty³
 = 0;

260 
tİËá_ty³
;

261 
tİright_ty³
;

262 
Ëá_ty³
;

264 cÚ¡ 
iCu¼MbAddr
 = 
ai_iX
 + 
Sliû
 -> 
mb_¡ride
 * 
ai_iY
;

265 cÚ¡ 
tİ_xy
 = 
iCu¼MbAddr
 - 
Sliû
 -> 
mb_¡ride
 ;

266 cÚ¡ 
tİËá_xy
 = 
tİ_xy
 - 1 ;

267 cÚ¡ 
tİright_xy
 = (
tİ_xy
 >= 0)?op_xy + 1:-1 ;

268 cÚ¡ 
Ëá_xy
 = 
iCu¼MbAddr
 - 1;

271 ià(
tİ_xy
 >= 0 ){

272 
tİ_ty³
 = 
SliûTabË
 [
tİ_xy
] =ğ
Sliû
 -> 
¦iû_num
 ? 
Cu¼Residu
 [tİ_xy] . 
MbTy³
 : 0 ;

274 iàĞ
tİËá_xy
 >ğ0 && 
ai_iX
 !ğ0 && 
SliûTabË
 [tİËá_xy] =ğ
Sliû
 -> 
¦iû_num
){

275 
tİËá_ty³
 = 
Cu¼Residu
 [
tİËá_xy
] . 
MbTy³
;

277 
tİËá_ty³
 = 0;

278 
aio_tiRef_ÿche_l0
[3] = 
PART_NOT_AVAILABLE
;

282 iàĞ
tİright_xy
 >ğ0 && (
ai_iX
 !ğ
Sliû
 -> 
mb_¡ride
 - 1è&& 
SliûTabË
 [tİright_xy] =ğSliû -> 
¦iû_num
){

283 
tİright_ty³
 = 
Cu¼Residu
 [
tİright_xy
] . 
MbTy³
;

285 
tİright_ty³
 = 0;

286 
aio_tiRef_ÿche_l0
[8] = 
PART_NOT_AVAILABLE
;

290 
tİ_ty³
 = 0;

291 
tİËá_ty³
 = 0;

292 
tİright_ty³
 = 0;

295 
aio_tiRef_ÿche_l0
[3] = 
PART_NOT_AVAILABLE
;

296 
aio_tiRef_ÿche_l0
[8] = 
PART_NOT_AVAILABLE
;

300 iàĞ
Ëá_xy
 >ğ0 && 
ai_iX
 !ğ0 && 
SliûTabË
 [Ëá_xy] =ğ
Sliû
 -> 
¦iû_num
){

301 
Ëá_ty³
 = 
Cu¼Residu
 [
Ëá_xy
] . 
MbTy³
 ;

303 
Ëá_ty³
 = 0;

306 
	`FlRefCacheLeáPos™iÚ
(
aio_tiRef_ÿche_l0
, 
PART_NOT_AVAILABLE
, PART_NOT_AVAILABLE);

311 if(
tİ_ty³
) {

312 
	`FlMvCacheTİPos™iÚ
(
aio_tiMv_ÿche_l0
, &
ai_tiMv
[-
ai_iB_¡ride
]);

314 
aio_tiRef_ÿche_l0
[4] = 
ai_tiRef
 [- 
ai_iB8_¡ride
];

315 
aio_tiRef_ÿche_l0
[5] = 
ai_tiRef
 [1 - 
ai_iB8_¡ride
];

316 
aio_tiRef_ÿche_l0
[6] = 
ai_tiRef
 [2 - 
ai_iB8_¡ride
];

317 
aio_tiRef_ÿche_l0
[7] = 
ai_tiRef
 [3 - 
ai_iB8_¡ride
];

320 ià(!
tİ_ty³
){

321 
	`FlRefCacheTİPos™iÚ
(
aio_tiRef_ÿche_l0
, 
PART_NOT_AVAILABLE
, PART_NOT_AVAILABLE);;

325 if(
Ëá_ty³
) {

326 
	`FlMvCacheLeáPos™iÚ
(
aio_tiMv_ÿche_l0
, &
ai_tiMv
[-2], 
ai_iB_¡ride
);

328 
aio_tiRef_ÿche_l0
[11] = 
ai_tiRef
[-1];

329 
aio_tiRef_ÿche_l0
[19] = 
ai_tiRef
[-1 + 
ai_iB8_¡ride
];

330 
aio_tiRef_ÿche_l0
[27] = 
ai_tiRef
[-1 + 2 * 
ai_iB8_¡ride
];

331 
aio_tiRef_ÿche_l0
[35] = 
ai_tiRef
[-1 + 3 * 
ai_iB8_¡ride
];

336 if(
tİËá_ty³
) {

337 
aio_tiMv_ÿche_l0
 [3][0] = 
ai_tiMv
[-2 - 
ai_iB_¡ride
];

338 
aio_tiMv_ÿche_l0
 [3][1] = 
ai_tiMv
[-1 - 
ai_iB_¡ride
];

339 
aio_tiRef_ÿche_l0
[3] = 
ai_tiRef
[-1 - 
ai_iB8_¡ride
];

343 if(
tİright_ty³
) {

344 
aio_tiMv_ÿche_l0
 [8][0] = 
ai_tiMv
[8 - 
ai_iB_¡ride
];

345 
aio_tiMv_ÿche_l0
 [8][1] = 
ai_tiMv
[9 - 
ai_iB_¡ride
];

346 
aio_tiRef_ÿche_l0
[8] = 
ai_tiRef
[4 - 
ai_iB8_¡ride
];

349 
aio_tiRef_ÿche_l0
[14] =‡io_tiRef_cache_l0[15 + 1] =

350 
aio_tiRef_ÿche_l0
[23 + 1] =‡io_tiRef_ÿche_l0[30] =‡io_tiRef_ÿche_l0[31 + 1] = 
PART_NOT_AVAILABLE
;

351 
	}
}

361 
	$fl_ÿches_mÙiÚ_veùÜ_B_fuÎ_»f
Ğ
SLICE
 *
¦iû
, 
b_¡ride
, 
b8_¡ride
, 
»f_ÿche_l0
 [], 
»f_ÿche_l1
 [],

362 
mv_ÿche_l0
[][2], 
mv_ÿche_l1
[][2], *
SliûTabË
, cÚ¡ 
RESIDU
 
Cu¼Residu
 [ ],

363 *
mv_l0
, 
mv_l1
[], 
»f_l0
[], 
»f_l1
[], 
iCu¼MbAddr
, 
ai_iX
)

366 
tİ_ty³
 = 0 ;

367 
tİËá_ty³
;

368 
tİright_ty³
;

369 
Ëá_ty³
;

373 
tİ_xy
 = 
iCu¼MbAddr
 - 
¦iû
 -> 
mb_¡ride
 ;

374 
tİËá_xy
 = 
tİ_xy
 - 1 ;

375 
tİright_xy
 = 
tİ_xy
 >= 0?op_xy + 1: -1 ;

376 
Ëá_xy
 = 
iCu¼MbAddr
 - 1 ;

381 iàĞ
tİ_xy
 >= 0 ) {

382 
tİ_ty³
 = 
SliûTabË
 [
tİ_xy
] =ğ
¦iû
 -> 
¦iû_num
 ? 
Cu¼Residu
 [tİ_xy] . 
MbTy³
 : 0 ;

384 iàĞ
tİËá_xy
 >ğ0 && 
ai_iX
 !ğ0 && 
SliûTabË
 [tİËá_xy] =ğ
¦iû
 -> 
¦iû_num
){

385 
tİËá_ty³
 = 
Cu¼Residu
 [
tİËá_xy
] . 
MbTy³
 ;

387 
tİËá_ty³
 = 0;

388 
»f_ÿche_l0
[12 - 1 - 8] = 
»f_ÿche_l1
[12 - 1 - 8] = 
PART_NOT_AVAILABLE
;

392 iàĞ
tİright_xy
 >ğ0 && (
ai_iX
 !ğ
¦iû
 -> 
mb_¡ride
 - 1è&& 
SliûTabË
 [tİright_xy] =ğ¦iû -> 
¦iû_num
){

393 
tİright_ty³
 = 
Cu¼Residu
 [
tİright_xy
] . 
MbTy³
;

395 
tİright_ty³
 = 0;

396 
»f_ÿche_l0
[12 + 4 - 8] = 
»f_ÿche_l1
[12 + 4 - 8] = 
PART_NOT_AVAILABLE
;

400 
tİ_ty³
 = 0;

401 
tİËá_ty³
 = 0;

402 
tİright_ty³
 = 0;

405 
»f_ÿche_l0
[12 - 1 - 8] = 
»f_ÿche_l1
[12 - 1 - 8] = 
PART_NOT_AVAILABLE
;

406 
»f_ÿche_l0
[12 + 4 - 8] = 
»f_ÿche_l1
[12 + 4 - 8] = 
PART_NOT_AVAILABLE
;

410 iàĞ
Ëá_xy
 >ğ0 && 
ai_iX
 !ğ0 && 
SliûTabË
 [Ëá_xy] =ğ
¦iû
 -> 
¦iû_num
){

411 
Ëá_ty³
 = 
Cu¼Residu
 [
Ëá_xy
] . 
MbTy³
;

413 
Ëá_ty³
 = 0;

416 
	`FlRefCacheLeáPos™iÚ
(
»f_ÿche_l0
, 
PART_NOT_AVAILABLE
, PART_NOT_AVAILABLE);

417 
	`FlRefCacheLeáPos™iÚ
(
»f_ÿche_l1
, 
PART_NOT_AVAILABLE
, PART_NOT_AVAILABLE);

424 ifĞ
tİ_ty³
 && !
	`IS_I
(top_type)){

425 
	`FlMvCacheTİPos™iÚ
(
mv_ÿche_l0
, &
mv_l0
[-
b_¡ride
]);

426 
	`FlMvCacheTİPos™iÚ
(
mv_ÿche_l1
, &
mv_l1
[-
b_¡ride
]);

428 
»f_ÿche_l0
[4] = 
»f_l0
 [- 
b8_¡ride
];

429 
»f_ÿche_l0
[5] = 
»f_l0
 [1 - 
b8_¡ride
];

430 
»f_ÿche_l0
[6] = 
»f_l0
 [2 - 
b8_¡ride
];

431 
»f_ÿche_l0
[7] = 
»f_l0
 [3 - 
b8_¡ride
];

433 
»f_ÿche_l1
[4] = 
»f_l1
 [- 
b8_¡ride
];

434 
»f_ÿche_l1
[5] = 
»f_l1
 [1 - 
b8_¡ride
];

435 
»f_ÿche_l1
[6] = 
»f_l1
 [2 - 
b8_¡ride
];

436 
»f_ÿche_l1
[7] = 
»f_l1
 [3 - 
b8_¡ride
];

438 }ià(!
tİ_ty³
){

439 
	`FlRefCacheTİPos™iÚ
(
»f_ÿche_l0
, 
PART_NOT_AVAILABLE
, PART_NOT_AVAILABLE);

440 
	`FlRefCacheTİPos™iÚ
(
»f_ÿche_l1
, 
PART_NOT_AVAILABLE
, PART_NOT_AVAILABLE);;

444 if(
Ëá_ty³
 && !
	`IS_I
(left_type)){

445 
	`FlMvCacheLeáPos™iÚ
(
mv_ÿche_l0
, &
mv_l0
[-2], 
b_¡ride
);

446 
	`FlMvCacheLeáPos™iÚ
(
mv_ÿche_l1
, &
mv_l1
[-2], 
b_¡ride
);

448 
»f_ÿche_l0
[11] = 
»f_l0
[-1];

449 
»f_ÿche_l0
[19] = 
»f_l0
[-1 + 
b8_¡ride
];

450 
»f_ÿche_l0
[27] = 
»f_l0
[-1 + 2 * 
b8_¡ride
];

451 
»f_ÿche_l0
[35] = 
»f_l0
[-1 + 3 * 
b8_¡ride
];

453 
»f_ÿche_l1
[11] = 
»f_l1
[-1];

454 
»f_ÿche_l1
[19] = 
»f_l1
[-1 + 
b8_¡ride
];

455 
»f_ÿche_l1
[27] = 
»f_l1
[-1 + 2 * 
b8_¡ride
];

456 
»f_ÿche_l1
[35] = 
»f_l1
[-1 + 3 * 
b8_¡ride
];

461 if(
tİËá_ty³
 && !
	`IS_I
(topleft_type)){

463 
mv_ÿche_l0
 [12 - 1 - 8][0] = 
mv_l0
[-2 - 
b_¡ride
];

464 
mv_ÿche_l0
 [12 - 1 - 8][1] = 
mv_l0
[-1 - 
b_¡ride
];

465 
mv_ÿche_l1
 [12 - 1 - 8][0] = 
mv_l1
[-2 - 
b_¡ride
];

466 
mv_ÿche_l1
 [12 - 1 - 8][1] = 
mv_l1
[-1 - 
b_¡ride
];

468 
»f_ÿche_l0
[12 - 1 - 8] = 
»f_l0
[-1 - 
b8_¡ride
];

469 
»f_ÿche_l1
[12 - 1 - 8] = 
»f_l1
[-1 - 
b8_¡ride
];

474 if(
tİright_ty³
 && !
	`IS_I
(topright_type)){

476 
mv_ÿche_l0
 [12 + 4 - 8][0] = 
mv_l0
[8 - 
b_¡ride
];

477 
mv_ÿche_l0
 [12 + 4 - 8][1] = 
mv_l0
[9 - 
b_¡ride
];

478 
mv_ÿche_l1
 [12 + 4 - 8][0] = 
mv_l1
[8 - 
b_¡ride
];

479 
mv_ÿche_l1
 [12 + 4 - 8][1] = 
mv_l1
[9 - 
b_¡ride
];

480 
»f_ÿche_l0
[12 + 4 - 8] = 
»f_l0
[4 - 
b8_¡ride
];

481 
»f_ÿche_l1
[12 + 4 - 8] = 
»f_l1
[4 - 
b8_¡ride
];

485 
»f_ÿche_l0
[15+1] =„ef_cache_l0[23+1] =„ef_cache_l0[31+1] =„ef_cache_l0[14] =„ef_cache_l0[30] =

486 
»f_ÿche_l1
[15+1] =„ef_ÿche_l1[23+1] =„ef_ÿche_l1[31+1] =„ef_ÿche_l1[14] =„ef_ÿche_l1[30] = 
PART_NOT_AVAILABLE
;

487 
	}
}

500 
	$m”geMÙiÚD©a
(*
mb_mode
, 
maüoblock_mode
[4], *
mv_l0
, *
»f_l0
, 
ba£_šdex_l0
[],

501 
mv_šc
, 
mv_ÿche_l0
[][2])

505 
i
;

506 *
mv_0
;

507 *
mv_1
;

508 *
mv_2
;

509 *
mv_3
;

510 
»f_0
;

511 
»f_1
;

512 
»f_2
;

513 
»f_3
;

514 
bC1
, 
bC2
, 
bC3
, 
bC4
;

515 
chªge
[4] = {0,0,0,0};

519 *
mb_mode
){

520 
MBLK_8x8
:

521  
i
 = 0; i < 4; i++){

522 
ÿche_šdex
 = ((
i
 & 2) << 3) + ((i & 1) << 1);

523 
block_šdex
 = ((
i
 & 2) << 2) + ((i & 1) << 1);

525 ifĞ
maüoblock_mode
[
i
] =ğ
BLK_8x4
){

526 
mv_0
 = &
mv_l0
[(
ba£_šdex_l0
[
block_šdex
] >> 4è* 
mv_šc
 + (base_index_l0[block_index] & 0x07)];

527 
mv_1
 = &
mv_l0
[(
ba£_šdex_l0
[
block_šdex
 + 4] >> 4è* 
mv_šc
 + (base_index_l0[block_index + 4] & 0x07)];

528 
bC1
 = 
	`ABS_MV
(
mv_0
, 
mv_1
) <= 1;

530 iàĞ
bC1
){

531 
mv_x
 = (
mv_0
[0] + 
mv_1
[0] + 1) >> 1;

532 
mv_y
 = (
mv_0
[1] + 
mv_1
[1] + 1) >> 1;

533 
chªge
[
i
] = 1;

535 
mv_ÿche_l0
[12 + 
ÿche_šdex
][0] = mv_ÿche_l0[13 + cache_šdex][0] = mv_ÿche_l0[20 + cache_šdex][0] = mv_ÿche_l0[21 + cache_šdex][0] = 
mv_x
;

536 
mv_ÿche_l0
[12 + 
ÿche_šdex
][1] = mv_ÿche_l0[13 + cache_šdex][1] = mv_ÿche_l0[20 + cache_šdex][1] = mv_ÿche_l0[21 + cache_šdex][1] = 
mv_y
;

537 
maüoblock_mode
[
i
] = 
BLK_8x8
;

539 
mv_ÿche_l0
[12 + 
ÿche_šdex
][0] = mv_ÿche_l0[13 + cache_šdex][0] = 
mv_0
[0];

540 
mv_ÿche_l0
[12 + 
ÿche_šdex
][1] = mv_ÿche_l0[13 + cache_šdex][1] = 
mv_0
[1];

541 
mv_ÿche_l0
[20 + 
ÿche_šdex
][0] = mv_ÿche_l0[21 + cache_šdex][0] = 
mv_1
[0];

542 
mv_ÿche_l0
[20 + 
ÿche_šdex
][1] = mv_ÿche_l0[21 + cache_šdex][1] = 
mv_1
[1];

545 }ifĞ
maüoblock_mode
[
i
] =ğ
BLK_4x8
){

546 
mv_0
 = &
mv_l0
[(
ba£_šdex_l0
[
block_šdex
] >> 4è* 
mv_šc
 + (base_index_l0[block_index] & 0x07)];

547 
mv_1
 = &
mv_l0
[(
ba£_šdex_l0
[
block_šdex
 + 1] >> 4è* 
mv_šc
 + (base_index_l0[block_index + 1] & 0x07)];

548 
bC1
 = 
	`ABS_MV
(
mv_0
, 
mv_1
) <= 1;

550 iàĞ
bC1
){

551 
mv_x
 = (
mv_0
[0] + 
mv_1
[0] + 1) >> 1;

552 
mv_y
 = (
mv_0
[1] + 
mv_1
[1] + 1) >> 1;

553 
chªge
[
i
] = 1;

555 
mv_ÿche_l0
[12 + 
ÿche_šdex
][0] = mv_ÿche_l0[13 + cache_šdex][0] = mv_ÿche_l0[20 + cache_šdex][0] = mv_ÿche_l0[21 + cache_šdex][0] = 
mv_x
;

556 
mv_ÿche_l0
[12 + 
ÿche_šdex
][1] = mv_ÿche_l0[13 + cache_šdex][1] = mv_ÿche_l0[20 + cache_šdex][1] = mv_ÿche_l0[21 + cache_šdex][1] = 
mv_y
;

557 
maüoblock_mode
[
i
] = 
BLK_8x8
;

559 
mv_ÿche_l0
[12 + 
ÿche_šdex
][0] = mv_ÿche_l0[20 + cache_šdex][0] = 
mv_0
[0];

560 
mv_ÿche_l0
[12 + 
ÿche_šdex
][1] = mv_ÿche_l0[20 + cache_šdex][1] = 
mv_0
[1];

561 
mv_ÿche_l0
[13 + 
ÿche_šdex
][0] = mv_ÿche_l0[21 + cache_šdex][0] = 
mv_1
[0];

562 
mv_ÿche_l0
[13 + 
ÿche_šdex
][1] = mv_ÿche_l0[21 + cache_šdex][1] = 
mv_1
[1];

564 }ifĞ
maüoblock_mode
[
i
] =ğ
BLK_4x4
){

565 
mv_0
 = &
mv_l0
[(
ba£_šdex_l0
[
block_šdex
] >> 4è* 
mv_šc
 + (base_index_l0[block_index] & 0x07)];

566 
mv_1
 = &
mv_l0
[(
ba£_šdex_l0
[
block_šdex
 + 1] >> 4è* 
mv_šc
 + (base_index_l0[block_index + 1] & 0x07)];

567 
mv_2
 = &
mv_l0
[(
ba£_šdex_l0
[
block_šdex
 + 4] >> 4è* 
mv_šc
 + (base_index_l0[block_index + 4] & 0x07)];

568 
mv_3
 = &
mv_l0
[(
ba£_šdex_l0
[
block_šdex
 + 5] >> 4è* 
mv_šc
 + (base_index_l0[block_index + 5] & 0x07)];

570 
bC1
 = 
	`ABS_MV
(
mv_0
, 
mv_1
) <= 1;

571 
bC2
 = 
	`ABS_MV
(
mv_2
, 
mv_3
) <= 1;

572 
bC3
 = 
	`ABS_MV
(
mv_0
, 
mv_2
) <= 1;

573 
bC4
 = 
	`ABS_MV
(
mv_1
, 
mv_3
) <= 1;

575 iàĞ
bC1
 && 
bC2
)

576 
maüoblock_mode
[
i
] = 
BLK_8x4
;

577 iàĞ
bC3
 && 
bC4
)

578 
maüoblock_mode
[
i
] = ( maüoblock_mode[i] =ğ
BLK_8x4
è? 
BLK_8x8
: 
BLK_4x8
;

580 
chªge
[
i
] = 1;

582 iàĞ
maüoblock_mode
[
i
] =ğ
BLK_8x8
){

583 
mv_x
 = (
mv_0
[0] + 
mv_1
[0] + 
mv_2
[0] + 
mv_3
[0] + 2) >> 2;

584 
mv_y
 = (
mv_0
[1] + 
mv_1
[1] + 
mv_2
[1] + 
mv_3
[1] + 2) >> 2;

586 
mv_ÿche_l0
[12 + 
ÿche_šdex
][0] = mv_cache_l0[13 + cache_index][0] =

587 
mv_ÿche_l0
[20 + 
ÿche_šdex
][0] = mv_ÿche_l0[21 + cache_šdex][0] = 
mv_x
;

588 
mv_ÿche_l0
[12 + 
ÿche_šdex
][1] = mv_cache_l0[13 + cache_index][1] =

589 
mv_ÿche_l0
[20 + 
ÿche_šdex
][1] = mv_ÿche_l0[21 + cache_šdex][1] = 
mv_y
;

591 }iàĞ
maüoblock_mode
[
i
] =ğ
BLK_8x4
){

592 
mv_x
 = (
mv_0
[0] + 
mv_1
[0] + 1) >> 1;

593 
mv_y
 = (
mv_0
[1] + 
mv_1
[1] + 1) >> 1;

595 
mv_ÿche_l0
[12 + 
ÿche_šdex
][0] = mv_ÿche_l0[13 + cache_šdex][0] = 
mv_x
;

596 
mv_ÿche_l0
[12 + 
ÿche_šdex
][1] = mv_ÿche_l0[13 + cache_šdex][1] = 
mv_y
;

598 
mv_x
 = (
mv_2
[0] + 
mv_3
[0] + 1) >> 1;

599 
mv_y
 = (
mv_2
[1] + 
mv_3
[1] + 1) >> 1;

601 
mv_ÿche_l0
[20 + 
ÿche_šdex
][0] = mv_ÿche_l0[21 + cache_šdex][0] = 
mv_x
;

602 
mv_ÿche_l0
[20 + 
ÿche_šdex
][1] = mv_ÿche_l0[21 + cache_šdex][1] = 
mv_y
;

604 }iàĞ
maüoblock_mode
[
i
] =ğ
BLK_4x8
){

605 
mv_x
 = (
mv_0
[0] + 
mv_2
[0] + 1) >> 1;

606 
mv_y
 = (
mv_0
[1] + 
mv_2
[1] + 1) >> 1;

608 
mv_ÿche_l0
[12 + 
ÿche_šdex
][0] = mv_ÿche_l0[20 + cache_šdex][0] = 
mv_x
;

609 
mv_ÿche_l0
[12 + 
ÿche_šdex
][1] = mv_ÿche_l0[20 + cache_šdex][1] = 
mv_y
;

611 
mv_x
 = (
mv_1
[0] + 
mv_3
[0] + 1) >> 1;

612 
mv_y
 = (
mv_1
[1] + 
mv_3
[1] + 1) >> 1;

614 
mv_ÿche_l0
[13 + 
ÿche_šdex
][0] = mv_ÿche_l0[21 + cache_šdex][0] = 
mv_x
;

615 
mv_ÿche_l0
[13 + 
ÿche_šdex
][1] = mv_ÿche_l0[21 + cache_šdex][1] = 
mv_y
;

617 
mv_ÿche_l0
[12 + 
ÿche_šdex
][0] = 
mv_0
[0];

618 
mv_ÿche_l0
[12 + 
ÿche_šdex
][1] = 
mv_0
[1];

619 
mv_ÿche_l0
[13 + 
ÿche_šdex
][0] = 
mv_1
[0];

620 
mv_ÿche_l0
[13 + 
ÿche_šdex
][1] = 
mv_1
[1];

621 
mv_ÿche_l0
[20 + 
ÿche_šdex
][0] = 
mv_2
[0];

622 
mv_ÿche_l0
[20 + 
ÿche_šdex
][1] = 
mv_2
[1];

623 
mv_ÿche_l0
[21 + 
ÿche_šdex
][0] = 
mv_3
[0];

624 
mv_ÿche_l0
[21 + 
ÿche_šdex
][1] = 
mv_3
[1];

629 
mv_ÿche_l0
[12 + 
ÿche_šdex
][0] = mv_cache_l0[13 + cache_index][0] =

630 
mv_ÿche_l0
[20 + 
ÿche_šdex
][0] = mv_ÿche_l0[21 + cache_šdex][0] = 
mv_l0
[(
ba£_šdex_l0
[
block_šdex
] >> 4è* 
mv_šc
 + (base_index_l0[block_index] & 0x07)];

631 
mv_ÿche_l0
[12 + 
ÿche_šdex
][1] = mv_cache_l0[13 + cache_index][1] =

632 
mv_ÿche_l0
[20 + 
ÿche_šdex
][1] = mv_ÿche_l0[21 + cache_šdex][1] = 
mv_l0
[(
ba£_šdex_l0
[
block_šdex
] >> 4è* 
mv_šc
 + (base_index_l0[block_index] & 0x07) + 1];

638 iàĞ
maüoblock_mode
[0] =ğ
BLK_8x8
 && macroblock_mode[1] == BLK_8x8 && macroblock_mode[2] == BLK_8x8 && macroblock_mode[3] == BLK_8x8){

639 
»f_0
 = 
»f_l0
[(
ba£_šdex_l0
[0] >> 4è* (
mv_šc
 >> 1) + ((base_index_l0[0] & 0x07) >> 1)];

640 
»f_1
 = 
»f_l0
[(
ba£_šdex_l0
[2] >> 4è* (
mv_šc
 >> 1) + ((base_index_l0[2] & 0x07) >> 1)];

641 
»f_2
 = 
»f_l0
[(
ba£_šdex_l0
[8] >> 4è* (
mv_šc
 >> 1) + ((base_index_l0[8] & 0x07) >> 1)];

642 
»f_3
 = 
»f_l0
[(
ba£_šdex_l0
[10] >> 4è* (
mv_šc
 >> 1) + ((base_index_l0[10] & 0x07) >> 1)];

644 
bC1
 = 
mv_ÿche_l0
[12][0] =ğmv_ÿche_l0[14][0] && mv_ÿche_l0[12][1] =ğmv_ÿche_l0[14][1] && 
»f_0
 =ğ
»f_1
 && 
chªge
[0] == change[1];

645 
bC2
 = 
mv_ÿche_l0
[28][0] =ğmv_ÿche_l0[30][0] && mv_ÿche_l0[28][1] =ğmv_ÿche_l0[30][1] && 
»f_2
 =ğ
»f_3
 && 
chªge
[2] == change[3];

646 
bC3
 = 
mv_ÿche_l0
[12][0] =ğmv_ÿche_l0[28][0] && mv_ÿche_l0[12][1] =ğmv_ÿche_l0[28][1] && 
»f_0
 =ğ
»f_2
 && 
chªge
[0] == change[2];

647 
bC4
 = 
mv_ÿche_l0
[14][0] =ğmv_ÿche_l0[30][0] && mv_ÿche_l0[14][1] =ğmv_ÿche_l0[30][1] && 
»f_1
 =ğ
»f_3
 && 
chªge
[1] == change[3];

649 iàĞ
bC1
 && 
bC2
){

650 *
mb_mode
 = 
MBLK_16x8
;

652 iàĞ
bC3
 && 
bC4
){

653 *
mb_mode
 = (*mb_mod=ğ
MBLK_16x8
 ? 
MBLK_16x16
: 
MBLK_8x16
);

659 
MBLK_8x16
:

660 
mv_0
 = &
mv_l0
[(
ba£_šdex_l0
[0] >> 4è* 
mv_šc
 + (base_index_l0[0] & 0x07)];

661 
mv_1
 = &
mv_l0
[(
ba£_šdex_l0
[2] >> 4è* 
mv_šc
 + (base_index_l0[2] & 0x07)];

662 
bC1
 = (
mv_0
[0] =ğ
mv_1
[0]) && (mv_0[1] == mv_1[1]);

664 iàĞ
bC1
) {

665 *
mb_mode
 = 
MBLK_16x16
;

666  
i
 = 0; i < 16; i ++){

667 
ba£_šdex_l0
[
i
] = base_index_l0[0];

669 
mv_ÿche_l0
[12][0] = mv_cache_l0[13][0] = mv_cache_l0[14][0] = mv_cache_l0[15][0] =

670 
mv_ÿche_l0
[20][0] = mv_cache_l0[21][0] = mv_cache_l0[22][0] = mv_cache_l0[23][0] =

671 
mv_ÿche_l0
[28][0] = mv_cache_l0[29][0] = mv_cache_l0[30][0] = mv_cache_l0[31][0] =

672 
mv_ÿche_l0
[36][0] = mv_cache_l0[37][0] =

673 
mv_ÿche_l0
[38][0] = mv_ÿche_l0[39][0] = 
mv_0
[0];

674 
mv_ÿche_l0
[12][1] = mv_cache_l0[13][1] = mv_cache_l0[14][1] = mv_cache_l0[15][1] =

675 
mv_ÿche_l0
[20][1] = mv_cache_l0[21][1] = mv_cache_l0[22][1] = mv_cache_l0[23][1] =

676 
mv_ÿche_l0
[28][1] = mv_cache_l0[29][1] = mv_cache_l0[30][1] = mv_cache_l0[31][1] =

677 
mv_ÿche_l0
[36][1] = mv_cache_l0[37][1] =

678 
mv_ÿche_l0
[38][1] = mv_ÿche_l0[39][1] = 
mv_0
[1];

680  
i
 = 0; i < 4; i ++){

681 
ba£_šdex_l0
[4 * 
i
] = base_index_l0[4 * i + 1] = base_index_l0[0];

682 
ba£_šdex_l0
[4 * 
i
 + 2] = base_index_l0[4 * i + 3] = base_index_l0[2];

685 
mv_ÿche_l0
[12][0] = mv_cache_l0[13][0] = mv_cache_l0[28][0] = mv_cache_l0[29][0] =

686 
mv_ÿche_l0
[20][0] = mv_ÿche_l0[21][0] = mv_ÿche_l0[36][0] = mv_ÿche_l0[37][0] = 
mv_0
[0];

687 
mv_ÿche_l0
[12][1] = mv_cache_l0[13][1] = mv_cache_l0[28][1] = mv_cache_l0[29][1] =

688 
mv_ÿche_l0
[20][1] = mv_ÿche_l0[21][1] = mv_ÿche_l0[36][1] = mv_ÿche_l0[37][1] = 
mv_0
[1];

689 
mv_ÿche_l0
[14][0] = mv_cache_l0[15][0] = mv_cache_l0[30][0] = mv_cache_l0[31][0] =

690 
mv_ÿche_l0
[22][0] = mv_ÿche_l0[23][0] = mv_ÿche_l0[38][0] = mv_ÿche_l0[39][0] = 
mv_1
[0];

691 
mv_ÿche_l0
[14][1] = mv_cache_l0[15][1] = mv_cache_l0[30][1] = mv_cache_l0[31][1] =

692 
mv_ÿche_l0
[22][1] = mv_ÿche_l0[23][1] = mv_ÿche_l0[38][1] = mv_ÿche_l0[39][1] = 
mv_1
[1];

698 
MBLK_16x8
:

699 
mv_0
 = &
mv_l0
[(
ba£_šdex_l0
[0] >> 4è* 
mv_šc
 + (base_index_l0[0] & 0x07)];

700 
mv_1
 = &
mv_l0
[(
ba£_šdex_l0
[8] >> 4è* 
mv_šc
 + (base_index_l0[8] & 0x07)];

701 
bC1
 = (
mv_0
[0] =ğ
mv_1
[0]) && (mv_0[1] == mv_1[1]);

703 iàĞ
bC1
) {

704 *
mb_mode
 = 
MBLK_16x16
;

705  
i
 = 0; i < 16; i ++){

706 
ba£_šdex_l0
[
i
] = base_index_l0[0];

708 
mv_ÿche_l0
[12][0] = mv_cache_l0[13][0] = mv_cache_l0[14][0] = mv_cache_l0[15][0] =

709 
mv_ÿche_l0
[20][0] = mv_cache_l0[21][0] = mv_cache_l0[22][0] = mv_cache_l0[23][0] =

710 
mv_ÿche_l0
[28][0] = mv_cache_l0[29][0] = mv_cache_l0[30][0] = mv_cache_l0[31][0] =

711 
mv_ÿche_l0
[36][0] = mv_cache_l0[37][0] =

712 
mv_ÿche_l0
[38][0] = mv_ÿche_l0[39][0] = 
mv_0
[0];

713 
mv_ÿche_l0
[12][1] = mv_cache_l0[13][1] = mv_cache_l0[14][1] = mv_cache_l0[15][1] =

714 
mv_ÿche_l0
[20][1] = mv_cache_l0[21][1] = mv_cache_l0[22][1] = mv_cache_l0[23][1] =

715 
mv_ÿche_l0
[28][1] = mv_cache_l0[29][1] = mv_cache_l0[30][1] = mv_cache_l0[31][1] =

716 
mv_ÿche_l0
[36][1] = mv_cache_l0[37][1] =

717 
mv_ÿche_l0
[38][1] = mv_ÿche_l0[39][1] = 
mv_0
[1];

719  
i
 = 0; i < 8; i ++){

720 
ba£_šdex_l0
[
i
] = base_index_l0[0];

721 
ba£_šdex_l0
[8 + 
i
] = base_index_l0[8];

723 
mv_ÿche_l0
[12][0] = mv_cache_l0[13][0] = mv_cache_l0[14][0] = mv_cache_l0[15][0] =

724 
mv_ÿche_l0
[20][0] = mv_ÿche_l0[21][0] = mv_ÿche_l0[22][0] = mv_ÿche_l0[23][0] = 
mv_0
[0];

725 
mv_ÿche_l0
[12][1] = mv_cache_l0[13][1] = mv_cache_l0[14][1] = mv_cache_l0[15][1] =

726 
mv_ÿche_l0
[20][1] = mv_ÿche_l0[21][1] = mv_ÿche_l0[22][1] = mv_ÿche_l0[23][1] = 
mv_0
[1];

727 
mv_ÿche_l0
[28][0] = mv_cache_l0[29][0] = mv_cache_l0[30][0] = mv_cache_l0[31][0] =

728 
mv_ÿche_l0
[36][0] = mv_ÿche_l0[37][0] = mv_ÿche_l0[38][0] = mv_ÿche_l0[39][0] = 
mv_1
[0];

729 
mv_ÿche_l0
[28][1] = mv_cache_l0[29][1] = mv_cache_l0[30][1] = mv_cache_l0[31][1] =

730 
mv_ÿche_l0
[36][1] = mv_ÿche_l0[37][1] = mv_ÿche_l0[38][1] = mv_ÿche_l0[39][1] = 
mv_1
[1];

737 
MBLK_16x16
:

738  
i
 = 0; i < 16; i ++){

739 
ba£_šdex_l0
[
i
] = base_index_l0[0];

742 
mv_ÿche_l0
[12][0] = mv_cache_l0[13][0] = mv_cache_l0[14][0] = mv_cache_l0[15][0] =

743 
mv_ÿche_l0
[20][0] = mv_cache_l0[21][0] = mv_cache_l0[22][0] = mv_cache_l0[23][0] =

744 
mv_ÿche_l0
[28][0] = mv_cache_l0[29][0] = mv_cache_l0[30][0] = mv_cache_l0[31][0] =

745 
mv_ÿche_l0
[36][0] = mv_cache_l0[37][0] =

746 
mv_ÿche_l0
[38][0] = mv_ÿche_l0[39][0] = 
mv_l0
[(
ba£_šdex_l0
[0] >> 4è* 
mv_šc
 + (base_index_l0[0] & 0x07)];

747 
mv_ÿche_l0
[12][1] = mv_cache_l0[13][1] = mv_cache_l0[14][1] = mv_cache_l0[15][1] =

748 
mv_ÿche_l0
[20][1] = mv_cache_l0[21][1] = mv_cache_l0[22][1] = mv_cache_l0[23][1] =

749 
mv_ÿche_l0
[28][1] = mv_cache_l0[29][1] = mv_cache_l0[30][1] = mv_cache_l0[31][1] =

750 
mv_ÿche_l0
[36][1] = mv_cache_l0[37][1] =

751 
mv_ÿche_l0
[38][1] = mv_ÿche_l0[39][1] = 
mv_l0
[(
ba£_šdex_l0
[0] >> 4è* 
mv_šc
 + (base_index_l0[0] & 0x07) + 1];

755 
	}
}

	@lib_svc/FinishFrameSVC.c

37 
	~"symbŞ.h
"

38 
	~"pic_li¡.h
"

39 
	~"di¥Ïy_mªagem’t.h
"

43 
	~"svc_ty³.h
"

44 
	~"£t_Ïy”.h
"

45 
	~"SVCDi¥Ïy.h
"

46 
	~"pic_li¡_svc.h
"

47 
	~"Loİ_f‹r_ext.h
"

56 
	$FšishF¿meSVCE¼Ü
(
Execu‹
, 
NAL
 *
N®
, 
SPS
 *
SŒuùSPS
, 
PPS
 *
Pps
, 
LIST_MMO
 *
Cu¼’t_pic
, *
Crİ
,

57 *
ImgToDi¥Ïy
, *
Ad»ssPic
, 
MMO
 *
Mmo
, *
xsize
, *
ysize
)

60 
pic_·¿m‘”_£t_id
 = 
N®
 -> 
pic_·¿m‘”_id
 [N® -> 
Lay”Id
];

61 
SPS
 *
¥s_id
 = &
SŒuùSPS
[
Pps
[
pic_·¿m‘”_£t_id
] . 
£q_·¿m‘”_£t_id
 + (
N®
 -> 
Lay”Id
 ? 16: 0)];

65 if(
Execu‹
){

67 
	`execu‹_»f_pic_m¬kšg
(
Cu¼’t_pic
, 
Mmo
, 
N®
 -> 
Lay”Id
);

71 
	`Di¥ÏyOrd”Svc
(
¥s_id
, 
Cu¼’t_pic
, 
N®
, 
Ad»ssPic
, 
xsize
, 
ysize
, 
Crİ
, 
ImgToDi¥Ïy
, 
Mmo
);

72 
	}
}

80 
	$FšishF¿meSVC
(cÚ¡ 
NbMaüo
, 
NAL
 *
N®
, 
SPS
 *
Sps
, 
PPS
 *
Pps
, 
LIST_MMO
 *
Cu¼’t_pic
, 
SLICE
 *
Sliû
, 
EndOfSliû
,

81 *
SliûTab
, 
DATA
 *
TabBlbock
, 
RESIDU
 *
Residu
, *
MvL0
, *
MvL1
, *
RefL0
,

82 *
RefL1
, *
Crİ
, *
ImgToDi¥Ïy
, *
Ad»ssPic
, 
MMO
 *
Mmo
,

83 *
RefY
, *
RefU
, *
RefV
, *
xsize
, *
ysize
)

87 ià(!
EndOfSliû
 && 
Mmo
 -> 
MemÜyAÎoÿtiÚ
){

89 
	`execu‹_»f_pic_m¬kšg
(
Cu¼’t_pic
, 
Mmo
, 
N®
 -> 
Lay”Id
);

91 iàĞ
N®
 -> 
PicToDi¥Ïy
){

92 cÚ¡ 
PicWidthInPix
 = (
Sps
 -> 
pic_width_š_mbs
 + 2) << 4;

93 cÚ¡ 
PicHeightInPix
 = (
Sps
 -> 
pic_height_š_m­_un™s
 ) << 4;

94 *
mvL0
 = &
MvL0
[
Cu¼’t_pic
 -> 
MvMemÜyAdd»ss
];

95 *
mvL1
 = &
MvL1
[
Cu¼’t_pic
 -> 
MvMemÜyAdd»ss
];

96 *
»fL0
 = &
RefL0
[
Cu¼’t_pic
 -> 
MvMemÜyAdd»ss
 >> 1];

97 *
»fL1
 = &
RefL1
[
Cu¼’t_pic
 -> 
MvMemÜyAdd»ss
 >> 1];

98 *
Y
 = &
RefY
[
Cu¼’t_pic
 -> 
MemÜyAdd»ss
];

99 *
U
 = &
RefU
[
Cu¼’t_pic
 -> 
MemÜyAdd»ss
 >> 2];

100 *
V
 = &
RefV
[
Cu¼’t_pic
 -> 
MemÜyAdd»ss
 >> 2];

103 ià(!
N®
 -> 
DqId
){

104 
	`Loİ_f‹r_avc
(
NbMaüo
, 0, 
Sps
, 
Pps
, 
Sliû
, 
Cu¼’t_pic
, 
SliûTab
, 
TabBlbock
, 
mvL0
, 
mvL1
, 
»fL0
, 
»fL1
, 
Residu
, 
Y
, 
U
, 
V
);

106 
	`Loİ_f‹r_svc
(
NbMaüo
, 
N®
, 
Sps
, 
Pps
, 
Sliû
, 
Cu¼’t_pic
, 
SliûTab
, 
mvL0
, 
mvL1
, 
»fL0
, 
»fL1
, 
Residu
, 
Y
, 
U
, 
V
);

110 
	`ImageS‘Edges
(
Y
, 
U
, 
V
, 
PicWidthInPix
, 
PicHeightInPix
);

114 
	`Di¥ÏyOrd”Svc
(
Sps
, 
Cu¼’t_pic
, 
N®
, 
Ad»ssPic
, 
xsize
, 
ysize
, 
Crİ
, 
ImgToDi¥Ïy
, 
Mmo
);

116 
N®
 -> 
La¡DqIdMax
 = N® -> 
DqIdMax
;

118 
	}
}

	@lib_svc/FinishFrameSVC.h

37 
FšishF¿meSVCE¼Ü
(
Execu‹
, 
NAL
 *
N®
, 
SPS
 *
¥s_id
, 
PPS
 *
µs
, 
LIST_MMO
 *
Cu¼’t_pic
, *
Crİ
, *
ImgToDi¥Ïy
, *
Ad»ssPic
,

38 
MMO
 *
Mmo
, *
xsize
, *
ysize
);

	@lib_svc/I_BL.c

34 
	~"¡ršg.h
"

37 
	~"ty³.h
"

38 
	~"decode_mb_I.h
"

42 
	~"I_BL.h
"

43 
	~"mb_·ddšg.h
"

44 
	~"svc_Ãighbourhood.h
"

45 
	~"mb_up§m¶e_f‹r.h
"

46 
	~"CÛffLev–P»diùiÚ.h
"

53 
	$DecodeITCÛff
(
RESIDU
 *
Cu¼Residu
, cÚ¡ RESIDU *
Ba£Residu
, cÚ¡ 
PPS
 *
Pps
, cÚ¡ 
PicWidthInPix
,

54 cÚ¡ 
W_TABLES
 *
quªtif
, cÚ¡ 
STRUCT_PF
 * 
AÎpf_¡ruù
,

55 *
Y
, *
U
, *
V
)

60 cÚ¡ 
D–QP
 = (è(
Ba£Residu
 -> 
Qp
 - 
Cu¼Residu
 -> Qp + 54);

63 
Cu¼Residu
 -> 
MbTy³
 = 
Ba£Residu
 -> MbType;

64 
Cu¼Residu
 -> 
IÁ¿16x16P»dMode
 = 
Ba£Residu
 -> Intra16x16PredMode;

65 
Cu¼Residu
 -> 
IÁ¿ChromaP»dMode
 = 
Ba£Residu
 -> IntraChromaPredMode;

69 ià(
Ba£Residu
 -> 
MbTy³
 =ğ
INTRA_16x16
){

70 
	`TCÛffResÿËDCLuma
(
D–QP
, 
Ba£Residu
 -> 
IÁ¿16x16DCLev–
, 
Cu¼Residu
 -> Intra16x16DCLevel);

71 
	`TCÛffResÿËACLuma
(
D–QP
, 
Ba£Residu
 -> 
LumaLev–
, 
Cu¼Residu
 -> LumaLevel);

72 
	`Upd©eLev–
(
Cu¼Residu
);

76 ià(
Ba£Residu
 -> 
MbTy³
 =ğ
INTRA_4x4
){

78 
	`memıy
(
Cu¼Residu
 -> 
IÁ¿16x16DCLev–
, 
Ba£Residu
 -> Intra16x16DCLevel, 16 * ());

79 ià(
Ba£Residu
 -> 
Cbp
){

80 
	`TCÛffResÿËACLuma
(
D–QP
, 
Ba£Residu
 -> 
LumaLev–
, 
Cu¼Residu
 -> LumaLevel);

81 
	`Upd©eLumaCbp
(
Cu¼Residu
, 
Ba£Residu
);

85 ifĞ
Ba£Residu
 -> 
Cbp
 > 0x0f){

86 
Ba£QP
 = 
qP_b
[
Ba£Residu
 -> 
Qp
 + 
Pps
 -> 
chroma_qp_šdex_off£t
];

87 
Cu¼QP
 = 
qP_b
[
Cu¼Residu
 -> 
Qp
 + 
Pps
 -> 
chroma_qp_šdex_off£t
];

88 
D–
 = 
Ba£QP
 - 
Cu¼QP
 + 54;

89 
	`TCÛffResÿËDCChr
(
D–
, 
Ba£Residu
 -> 
ChromaDCLev–_Cb
, 
Cu¼Residu
 -> ChromaDCLevel_Cb);

90 
	`TCÛffResÿËDCChr
(
D–
, 
Ba£Residu
 -> 
ChromaDCLev–_Cr
, 
Cu¼Residu
 -> ChromaDCLevel_Cr);

91 
	`TCÛffResÿËACChr
(
D–
, 
Ba£Residu
 -> 
ChromaACLev–_Cb
, 
Cu¼Residu
 -> ChromaACLevel_Cb);

92 
	`TCÛffResÿËACChr
(
D–
, 
Ba£Residu
 -> 
ChromaACLev–_Cr
, 
Cu¼Residu
 -> ChromaACLevel_Cr);

93 
	`Upd©eChrCbp
(
Cu¼Residu
, 
Ba£Residu
);

99 
	`decode_MB_I
(
Y
, 
U
, 
V
, 
Pps
, 
Cu¼Residu
, 
PicWidthInPix
, 
quªtif
, 
AÎpf_¡ruù
 );

100 
	}
}

107 
	$MbIPad
(cÚ¡ 
NAL
 *
N®
, cÚ¡ 
PPS
 *
Pps
, cÚ¡ 
SPS
 *
Sps
, 
Ba£MbAddr
, 
x
, 
y
,

108 
x_ba£
, 
y_ba£
, 
x_mbP¬tIdx
, 
y_mbP¬tIdx
, cÚ¡ 
RESIDU
 *
Ba£Residu
,

109 *
Ba£Y
, *
Ba£U
, *
Ba£V
,

110 *
Y
, *
U
, *
V
)

113 
tmp_luma
[
LumaSŒide
 * LumaStride];

114 
tmp_Cb
[
ChromaSŒide
 * ChromaStride];

115 
tmp_Cr
[
ChromaSŒide
 * ChromaStride];

117 
AvaMask
;

119 
	`g‘_ba£_Ãighbourhood
(&
AvaMask
, 
Ba£MbAddr
, 
x_ba£
, 
N®
 -> 
ba£_Width
 >> 4, 
Ba£Residu
,

120 (
N®
 -> 
ba£_Height
 * N® -> 
ba£_Width
è>> 8, 
Pps
 -> 
cÚ¡¿šed_šŒa_up§m¶šg_æag
);

121 
x_ba£
 = x_base << 4;

122 
y_ba£
 = y_base << 4;

125 
	`edges_lim™
(
N®
, 
AvaMask
, 
x_mbP¬tIdx
, 
y_mbP¬tIdx
, 
tmp_luma
, &
Ba£Y
[
x_ba£
 + 
y_ba£
 * (N® -> 
ba£_Width
 + 32)],

126 
tmp_Cb
, &
Ba£U
[(
x_ba£
 >> 1è+ (
y_ba£
 >> 1è* ((
N®
 -> 
ba£_Width
 + 32) >> 1)],

127 
tmp_Cr
, &
Ba£V
[(
x_ba£
 >> 1è+ (
y_ba£
 >> 1è* ((
N®
 -> 
ba£_Width
 + 32) >> 1)]);

129 
x_ba£
 +ğ
x_mbP¬tIdx
 << 2;

130 
y_ba£
 +ğ
y_mbP¬tIdx
 << 2;

133 
	`up§m¶e_mb_lunšªû
(
Sps
, 
N®
, 
Y
, &
tmp_luma
[
LeáBÜd”
 + (
x_mbP¬tIdx
 << 2è+ (
y_mbP¬tIdx
 << 2è* 
LumaSŒide
], 
x_ba£
, 
y_ba£
, 
x
, 
y
);

134 
	`up§m¶e_mb_chroma
(
Sps
, 
N®
, 
U
, &
tmp_Cb
[(
LeáBÜd”
 >> 1è+ (
x_mbP¬tIdx
 << 1è+ (
y_mbP¬tIdx
 << 1è* 
ChromaSŒide
], 
x_ba£
 >> 1, 
y_ba£
 >> 1, 
x
 >> 1, 
y
 >> 1);

135 
	`up§m¶e_mb_chroma
(
Sps
, 
N®
, 
V
, &
tmp_Cr
[(
LeáBÜd”
 >> 1è+ (
x_mbP¬tIdx
 << 1è+ (
y_mbP¬tIdx
 << 1è* 
ChromaSŒide
], 
x_ba£
 >> 1, 
y_ba£
 >> 1, 
x
 >> 1, 
y
 >> 1);

136 
	}
}

	@lib_svc/I_BL.h

34 #iâdeà
I_BL_H


35 
	#I_BL_H


	)

37 
	~"svc_ty³.h
"

41 
DecodeITCÛff
(
RESIDU
 *
Cu¼Residu
, cÚ¡ RESIDU *
Ba£Residu
, cÚ¡ 
PPS
 *
µs
, cÚ¡ 
PicWidthInPix
, cÚ¡ 
W_TABLES
 *
quªtif
, cÚ¡ 
STRUCT_PF
 * 
AÎpf_¡ruù


42 , *
Y
, *
U
, *
V
);

44 
MbIPad
(cÚ¡ 
NAL
 *
N®
, cÚ¡ 
PPS
 *
Pps
, cÚ¡ 
SPS
 *
Sps
, 
Ba£MbAddr


45 , 
x
, 
y
, 
x_ba£
, 
y_ba£
, 
x_mbP¬tIdx
, 
y_mbP¬tIdx


46 , cÚ¡ 
RESIDU
 *
Ba£Residu
, *
Ba£Y
, *
Ba£U
, *
Ba£V


47 , *
Y
, *
U
, *
V
);

	@lib_svc/InterLayerPrediction.c

33 
	~<¡ršg.h
>

37 
	~"d©a.h
"

40 
	~"svc_ty³.h
"

41 
	~"up§m¶e_»sidu.h
"

42 
	~"Loİ_f‹r_ext.h
"

43 
	~"IÁ”Lay”P»diùiÚ.h
"

51 
	$G‘Ba£Sam¶e
(*
Y
, *
U
, *
V
, *
DpbLuma
,

52 *
DpbCb
, *
DpbCr
, 
PicWidthInPix
)

54 
i
;

55 
i
 = 0; i < 16; i++){

56 
	`memıy
(&
Y
[
i
 * 
PicWidthInPix
], &
DpbLuma
[i * PicWidthInPix], 16 * ());

59 
PicWidthInPix
 >>= 1;

60 
i
 = 0; i < 8; i++){

61 
	`memıy
(&
U
[
i
 * 
PicWidthInPix
], &
DpbCb
[i * PicWidthInPix], 8 * ());

62 
	`memıy
(&
V
[
i
 * 
PicWidthInPix
], &
DpbCr
[i * PicWidthInPix], 8 * ());

64 
	}
}

74 
	$G‘Ba£F‹r
(cÚ¡ 
NAL
 *
N®
, cÚ¡ 
SLICE
 *
Sliû
, cÚ¡ 
PPS
 *
Pps
, cÚ¡ 
SPS
 *
Sps
, 
RESIDU
 *
Ba£Residu
,

75 *
Ba£Y
, *
Ba£U
, *
Ba£V
)

78 ià(
Sliû
 -> 
¦iû_num
 =ğ0 && (Sliû -> 
IÁ”Lay”DeblockšgF‹rIdc
 !ğ1 || 
N®
 -> 
LoİF‹rFÜûdIdc
)){

79 
Ba£PpsId
 = 
N®
 -> 
pic_·¿m‘”_id
[N® -> 
Ba£Lay”Id
];

80 
Cu¼PpsId
 = 
N®
 -> 
pic_·¿m‘”_id
[N® -> 
Lay”Id
];

81 
Ba£SpsId
 = 
Pps
[
Ba£PpsId
] . 
£q_·¿m‘”_£t_id
 + (
N®
 -> 
Ba£Lay”Id
 ? 16: 0);

82 
AÍhaOff£t
 = 
Pps
[
Cu¼PpsId
] . 
AÍhaOff£tUp§pm¶šg
;

83 
B‘aOff£t
 = 
Pps
[
Cu¼PpsId
] . 
B‘aOff£tUp§pm¶šg
;

85 
	`Deblockšg_ba£_Ïy”
(&
Sps
[
Ba£SpsId
], &
Pps
[
Ba£PpsId
], 
Ba£Residu
,

86 
N®
, 
Sliû
 -> 
IÁ”Lay”DeblockšgF‹rIdc
, 
AÍhaOff£t
, 
B‘aOff£t
, 
Ba£Y
, 
Ba£U
, 
Ba£V
);

88 
	}
}

97 
	$G‘Ba£P»diùiÚ
(cÚ¡ 
NAL
 *
N®
, cÚ¡ 
SLICE
 *
Sliû
, cÚ¡ 
PPS
 *
Pps
, cÚ¡ 
SPS
 *
Sps
, cÚ¡ SPS *
Sps_id
,

98 
RESIDU
 *
Cu¼Residu
, RESIDU *
Ba£Residu
, cÚ¡ 
size_Mb
, 
iCu¼MbAddr
,

99 cÚ¡ *
ai_tiMbToSliûGroupM­
, *
x16
, *
y16
, *
xk16
,

100 *
xp16
, *
yk16
, *
yp16
, *
Up§m¶šg_tmp
,

101 *
Ba£Y
, *
Ba£U
, *
Ba£V
,

102 *
Luma_Residu
, *
Cb_Residu
, *
Cr_Residu
)

107 *
Ba£_Residu_Luma
 = &
Luma_Residu
[(
size_Mb
 << 8è* 
N®
 -> 
Ba£Lay”Id
];

108 *
Ba£_Residu_Cb
 = &
Cb_Residu
[(
size_Mb
 << 6è* 
N®
 -> 
Ba£Lay”Id
];

109 *
Ba£_Residu_Cr
 = &
Cr_Residu
[(
size_Mb
 << 6è* 
N®
 -> 
Ba£Lay”Id
];

111 *
Residu_Luma
 = &
Luma_Residu
[(
size_Mb
 << 8è* 
N®
 -> 
Lay”Id
];

112 *
Residu_Cb
 = &
Cb_Residu
[(
size_Mb
 << 6è* 
N®
 -> 
Lay”Id
];

113 *
Residu_Cr
 = &
Cr_Residu
[(
size_Mb
 << 6è* 
N®
 -> 
Lay”Id
];

115 
nb_v®
 = (
Sps_id
 -> 
pic_width_š_mbs
 + 2è* Sps_id -> 
pic_height_š_m­_un™s
 * 256;

117 ià(!
N®
 -> 
no_š‹r_Ïy”_´ed_æag
 && N® -> 
Ba£MemÜyAdd»ss
 != -1){

118 
	`G‘Ba£F‹r
(
N®
, 
Sliû
, 
Pps
, 
Sps
, 
Ba£Residu
, 
Ba£Y
, 
Ba£U
, 
Ba£V
);

120 ià(
N®
 -> 
S·tŸlSÿÏb™y
){

121 ià(
Sliû
 -> 
¦iû_num
 == 0){

123 
	`mem£t
(
Residu_Luma
, 0, 
nb_v®
 * ());

124 
	`mem£t
(
Residu_Cb
, 0, (
nb_v®
 >> 2) * ());

125 
	`mem£t
(
Residu_Cr
, 0, (
nb_v®
 >> 2) * ());

128 
	`Up§m¶e_»sidu
((
size_Mb
 << 8è* (
N®
 -> 
Lay”Id
 - N® -> 
Ba£Lay”Id
), 
iCu¼MbAddr
, N®, 
Sps_id
, 
Cu¼Residu
,

129 
Ba£Residu
, 
x16
, 
y16
, 
xk16
, 
xp16
, 
yk16
, 
yp16
, 
Up§m¶šg_tmp
,

130 
Ba£_Residu_Luma
, 
Ba£_Residu_Cb
, 
Ba£_Residu_Cr
, 
ai_tiMbToSliûGroupM­
);

132 }ià(
Sliû
 -> 
¦iû_num
 == 0){

134 
	`memıy
(
Residu_Luma
, 
Ba£_Residu_Luma
, 
nb_v®
 * ());

135 
	`memıy
(
Residu_Cb
, 
Ba£_Residu_Cb
, 
nb_v®
 * () >> 2);

136 
	`memıy
(
Residu_Cr
, 
Ba£_Residu_Cr
, 
nb_v®
 * () >> 2);

138 } ià(
Sliû
 -> 
¦iû_num
 == 0){

140 
	`mem£t
(
Residu_Luma
, 0, 
nb_v®
 * ());

141 
	`mem£t
(
Residu_Cb
, 0, 
nb_v®
 * () >> 2);

142 
	`mem£t
(
Residu_Cr
, 0, 
nb_v®
 * () >> 2);

144 
	}
}

	@lib_svc/InterLayerPrediction.h

34 #iâdeà
INTER_LAYER_PRED


35 
	#INTER_LAYER_PRED


	)

38 
G‘Ba£Sam¶e
(*
Y
, *
U
, *
V
, *
DpbLuma
,

39 *
DpbCb
, *
DpbCr
, 
PicWidthInPix
);

42 
G‘Ba£F‹r
(cÚ¡ 
NAL
 *
N®
, cÚ¡ 
SLICE
 *
Sliû
, cÚ¡ 
PPS
 *
Pps
, cÚ¡ 
SPS
 *
Sps
, 
RESIDU
 *
Ba£Residu
,

43 *
Ba£Y
, *
Ba£U
, *
Ba£V
);

46 
G‘Ba£P»diùiÚ
(cÚ¡ 
NAL
 *
N®
, cÚ¡ 
SLICE
 *
Sliû
, cÚ¡ 
PPS
 *
Pps
, cÚ¡ 
SPS
 *
Sps
, cÚ¡ SPS *
Sps_id
,

47 
RESIDU
 *
Cu¼Residu
, RESIDU *
Ba£Residu
, cÚ¡ 
size_Mb
, 
iCu¼MbAddr
,

48 cÚ¡ *
ai_tiMbToSliûGroupM­
, *
x16
, *
y16
, *
xk16
,

49 *
xp16
, *
yk16
, *
yp16
, *
Up§m¶šg_tmp
,

50 *
Ba£Y
, *
Ba£U
, *
Ba£V
,

51 *
Luma_Residu
, *
Cb_Residu
, *
Cr_Residu
);

	@lib_svc/Loop_filter_ext.c

36 
	~"ty³.h
"

37 
	~"š™_d©a.h
"

38 
	~"Loİ_F‹r_B.h
"

42 
	~"svc_ty³.h
"

43 
	~"svc_d©a.h
"

44 
	~"blk4x4.h
"

45 
	~"Wr™eBackSVC.h
"

46 
	~"Loİ_f‹r_ext.h
"

47 
	~"maüoblock_f‹r.h
"

57 
	$Loİ_f‹r_avc
(cÚ¡ 
size_mb
, 
Ïy”_id
, 
SPS
 *
Sps
, 
PPS
 *
µs
, 
SLICE
 *
¦iû
, 
LIST_MMO
 *
Cu¼’t_pic
,

58 *
SliûTabË
, 
DATA
 *
Tab_Block
, *
aio_tiMv_l0
, *
aio_tiMv_l1
, *
aio_tiRef_l0
,

59 *
aio_tiRef_l1
, 
RESIDU
 *
®l_»sidu
, 
Y
[], 
U
[], 
V
[])

64 
	`__deş¥ec
(
	`®ign
(64)è
mv_ÿche_l0
[48][2];

65 
	`__deş¥ec
(
	`®ign
(64)è
mv_ÿche_l1
[48][2];

66 
	`__deş¥ec
(
	`®ign
(64)è
»f_ÿche_l0
[48];

67 
	`__deş¥ec
(
	`®ign
(64)è
»f_ÿche_l1
[48];

71 if(
¦iû
 -> 
di§bË_deblockšg_f‹r_idc
 != 1){

72 cÚ¡ 
PicSizeInMbs
 = (è
Sps
 -> PicSizeInMbs ;

73 cÚ¡ 
PicWiInMbs
 = (è
Sps
 -> 
pic_width_š_mbs
;

74 cÚ¡ 
PicWidthInMbs
 = (è
Sps
 -> 
pic_width_š_mbs
 +2;

75 cÚ¡ 
off£t_L
 = (
PicWidthInMbs
 << 8) + 16;

76 cÚ¡ 
off£t_C
 = (
PicWidthInMbs
 << 6) + 8;

77 
RESIDU
 *
»sidu
 = &
®l_»sidu
[
Ïy”_id
 * 
size_mb
];

79 
iMb_x
 = 0;

80 
iMb_y
 = 0;

81 
iCu¼MbAddr
 = 0;

84 
Y
 +ğ
off£t_L
;

85 
U
 +ğ
off£t_C
;

86 
V
 +ğ
off£t_C
;

89 
iCu¼MbAddr
 = 0 ; iCu¼MbAdd¸< 
PicSizeInMbs
 ;iCurrMbAddr++) {

91 
	`wr™e_back_mÙiÚ_ÿche_B_fuÎ_»f
(
¦iû
 -> 
b_¡ride
, sliû -> 
b8_¡ride
, 
iCu¼MbAddr
,

92 &
aio_tiMv_l0
[
iMb_x
 * 8 + 
iMb_y
 * (
¦iû
 -> 
b_¡ride
 << 2)], &
aio_tiMv_l1
[iMb_x * 8 + iMb_y * (slice -> b_stride << 2)],

93 
mv_ÿche_l0
, 
mv_ÿche_l1
, &
aio_tiRef_l0
[
iMb_x
 * 4 + 
iMb_y
 * (
¦iû
 -> 
b_¡ride
 << 1)],

94 &
aio_tiRef_l1
[
iMb_x
 * 4 + 
iMb_y
 * (
¦iû
 -> 
b_¡ride
 << 1)] , 
»f_ÿche_l0
, 
»f_ÿche_l1
, sliû -> 
mb_¡ride
);

97 
	`f‹r_mb_B
(&
Y
 [((
iMb_x
 + (
PicWidthInMbs
 << 4è* 
iMb_y
è<< 4)], &
U
 [((iMb_x + (PicWidthInMbs << 3) * iMb_y) <<3)],

98 &
V
 [((
iMb_x
 + (
PicWidthInMbs
 << 3è* 
iMb_y
è<<3)], 
¦iû
, 
µs
, 
SliûTabË
, 
mv_ÿche_l0
, 
mv_ÿche_l1
,

99 
»f_ÿche_l0
, 
»f_ÿche_l1
, 
iCu¼MbAddr
, 
PicWidthInMbs
, 
Cu¼’t_pic
 -> 
»f_poc_l0
,

100 
Cu¼’t_pic
 -> 
»f_poc_l1
, 
Tab_Block
[
iCu¼MbAddr
] . 
T¿nsfÜm8x8
, 
iMb_x
, 
iMb_y
, 
»sidu
);

102 
iMb_x
++;

103 ifĞ
iMb_x
 =ğ
PicWiInMbs
){

104 
iMb_x
 = 0;

105 
iMb_y
++;

109 
	}
}

121 
	$Loİ_f‹r_svc
(cÚ¡ 
size_mb
, cÚ¡ 
NAL
 *
N®
, 
SPS
 *
Sps
, 
PPS
 *
µs
, 
SLICE
 *
Sliû
, 
LIST_MMO
 *
Cu¼’t_pic
,

122 *
SliûTabË
, *
aio_tiMv_l0
, *
aio_tiMv_l1
, *
aio_tiRef_l0
,

123 *
aio_tiRef_l1
, 
RESIDU
 *
®l_»sidu
, 
Y
[], 
U
[], 
V
[])

127 
	`__deş¥ec
(
	`®ign
(64)è
mv_ÿche_l0
[48][2];

128 
	`__deş¥ec
(
	`®ign
(64)è
mv_ÿche_l1
[48][2];

129 
	`__deş¥ec
(
	`®ign
(64)è
»f_ÿche_l0
[48];

130 
	`__deş¥ec
(
	`®ign
(64)è
»f_ÿche_l1
[48];

131 cÚ¡ 
PicSizeInMbs
 = 
Sps
 -> PicSizeInMbs ;

132 cÚ¡ 
PicWiInMbs
 = 
Sps
 -> 
pic_width_š_mbs
;

133 cÚ¡ 
PicWidthInMbs
 = 
Sps
 -> 
pic_width_š_mbs
 + 2;

134 cÚ¡ 
off£t_L
 = (
PicWidthInMbs
 << 8) + 16;

135 cÚ¡ 
off£t_C
 = (
PicWidthInMbs
 << 6) + 8;

136 
RESIDU
 *
Cu¼Residu
 = &
®l_»sidu
[
N®
 -> 
Lay”Id
 * 
size_mb
];

138 if(
Sliû
 -> 
di§bË_deblockšg_f‹r_idc
 != 1){

139 
Pass
;

140 
NbPass
 = (è((
Sliû
 -> 
di§bË_deblockšg_f‹r_idc
 == 3 || Slice -> disable_deblocking_filter_idc == 6) + 1);

142 
Y
 +ğ
off£t_L
;

143 
U
 +ğ
off£t_C
;

144 
V
 +ğ
off£t_C
;

146 
Pass
 = 0; Pas < 
NbPass
; Pass ++){

147 
iMb_x
 = 0;

148 
iMb_y
 = 0;

149 
iCu¼MbAddr
 = 0;

153 
Mode
 = 
NbPass
 =ğ2 ? 
Pass
 + 1: Pass;

156  
iCu¼MbAddr
 = 0; iCu¼MbAdd¸< 
PicSizeInMbs
 ; iCurrMbAddr++) {

159 
	`S‘LoİF‹rQp
(&
Cu¼Residu
 [
iCu¼MbAddr
], 
N®
, iCurrMbAddr);

161 
	`wr™e_back_mÙiÚ_ÿche_B_fuÎ_»f
(
N®
 -> 
b_¡ride
, N® -> 
b8_¡ride
, 
iCu¼MbAddr
,

162 &
aio_tiMv_l0
[
iMb_x
 * 8 + 
iMb_y
 * (
N®
 -> 
b_¡ride
 << 2)],

163 &
aio_tiMv_l1
[
iMb_x
 * 8 + 
iMb_y
 * (
N®
 -> 
b_¡ride
 << 2)],

164 
mv_ÿche_l0
, 
mv_ÿche_l1
,

165 &
aio_tiRef_l0
[
iMb_x
 * 4 + 
iMb_y
 * (
N®
 -> 
b_¡ride
 << 1)],

166 &
aio_tiRef_l1
[
iMb_x
 * 4 + 
iMb_y
 * (
N®
 -> 
b_¡ride
 << 1)],

167 
»f_ÿche_l0
, 
»f_ÿche_l1
, 
Sliû
 -> 
mb_¡ride
);

169 
	`f‹r_mb_svc
(&
Y
 [((
iMb_x
 + (
PicWidthInMbs
 << 4è* 
iMb_y
) << 4)],

170 &
U
 [((
iMb_x
 + (
PicWidthInMbs
 << 3è* 
iMb_y
) << 3)],

171 &
V
 [((
iMb_x
 + (
PicWidthInMbs
 << 3è* 
iMb_y
è<< 3)], 
Sliû
, 
µs
, 
SliûTabË
,

172 
mv_ÿche_l0
, 
mv_ÿche_l1
, 
»f_ÿche_l0
, 
»f_ÿche_l1
, 
iCu¼MbAddr
,

173 
PicWidthInMbs
, 
Cu¼’t_pic
 -> 
»f_poc_l0
, Cu¼’t_piø-> 
»f_poc_l1
, 
iMb_x
, 
iMb_y
,

174 
Cu¼Residu
, 
N®
, 
Mode
, 
Sps
 -> 
´ofe_idc
);

176 
iMb_x
++;

177 ifĞ
iMb_x
 =ğ
PicWiInMbs
){

178 
iMb_x
 = 0;

179 
iMb_y
++;

184 
	}
}

194 
	$Deblockšg_ba£_Ïy”
(cÚ¡ 
SPS
 *
Sps
, cÚ¡ 
PPS
 *
µs
, cÚ¡ 
RESIDU
 *
»sidu
, cÚ¡ 
NAL
 *
N®
, 
DeblockšgF‹rIdc
,

195 
AÍhaOff£t
, 
B‘aOff£t
, 
Y
[], 
U
[], 
V
[])

201 cÚ¡ 
PicSizeInMbs
 = 
Sps
 -> PicSizeInMbs ;

202 cÚ¡ 
PicWiInMbs
 = 
Sps
 -> 
pic_width_š_mbs
;

203 cÚ¡ 
PicWidthInMbs
 = 
Sps
 -> 
pic_width_š_mbs
 + 2;

205 
iMb_x
 = 0;

206 
iMb_y
 = 0;

207 
iCu¼MbAddr
 = 0;

209  ; 
iCu¼MbAddr
 < 
PicSizeInMbs
 ;iCurrMbAddr++) {

211 ià(
	`IS_I_SVC
(
»sidu
[
iCu¼MbAddr
] . 
MbTy³
)){

212 
	`Up§m¶šfF‹rMb
(&
Y
 [((
iMb_x
 + (
PicWidthInMbs
 << 4è* 
iMb_y
è<< 4)], &
U
 [((iMb_x + (PicWidthInMbs << 3) * iMb_y) << 3)],

213 &
V
 [((
iMb_x
 + (
PicWidthInMbs
 << 3è* 
iMb_y
è<< 3)], 
µs
, 
iCu¼MbAddr
, PicWidthInMbs,

214 
»sidu
[
iCu¼MbAddr
] . 
T¿nsfÜm8x8
, 
N®
 -> 
LoİF‹rS·tŸlSÿÏb™y
, 
DeblockšgF‹rIdc
,

215 
AÍhaOff£t
, 
B‘aOff£t
, 
iMb_x
, 
iMb_y
, 
»sidu
);

217 
iMb_x
++;

218 ifĞ
iMb_x
 =ğ
PicWiInMbs
){

219 
iMb_x
 = 0;

220 
iMb_y
++;

223 
	}
}

	@lib_svc/Loop_filter_ext.h

34 #iâdeà
LOOP_FILTER_EXT_H


35 
	#LOOP_FILTER_EXT_H


	)

37 
	~"svc_ty³.h
"

39 
Aùiv_ba£_f‹r
(cÚ¡ 
nb_num
,
SLICE
 *
¦iû
,*
Aùiv_f‹r
);

40 
Aùiv_Ïy”_f‹r
(
SLICE
 *
¦iû
, 
NAL
 *
N®
,*
Aùiv_f‹r
);

42 
Deblockšg_ba£_Ïy”
(cÚ¡ 
SPS
 *
Sps
,cÚ¡ 
PPS
 *
µs
,cÚ¡ 
RESIDU
 *
»sidu
, cÚ¡ 
NAL
 *
N®
, 
IÁ”Lay”DeblockšgF‹rIdc
,

43 
AÍhaOff£t
, 
B‘aOff£t
, 
Y
[], 
U
[], 
V
[]);

45 
Loİ_f‹r_svc
(cÚ¡ 
size_mb
, cÚ¡ 
NAL
 *
N®
, 
SPS
 *
Sps
, 
PPS
 *
µs
, 
SLICE
 *
Sliû
, 
LIST_MMO
 *
Cu¼’t_pic
,

46 *
SliûTabË
, *
aio_tiMv_l0
, *
aio_tiMv_l1
, *
aio_tiRef_l0
,

47 *
aio_tiRef_l1
, 
RESIDU
 *
®l_»sidu
, 
Y
[], 
U
[], 
V
[]);

50 
Loİ_f‹r_avc
(cÚ¡ 
size_mb
, 
Ïy”_id
, 
SPS
 *
Sps
, 
PPS
 *
µs
, 
SLICE
 *
¦iû
, 
LIST_MMO
 *
Cu¼’t_pic
,

51 *
SliûTabË
, 
DATA
 *
Tab_Block
, *
aio_tiMv_l0
, *
aio_tiMv_l1
, *
aio_tiRef_l0
,

52 *
aio_tiRef_l1
, 
RESIDU
 *
®l_»sidu
, 
Y
[], 
U
[], 
V
[]);

57 
__šlše
 
	$S‘LoİF‹rQp
(
RESIDU
 *
Cu¼Residu
, cÚ¡ 
NAL
 *
N®
, 
iCu¼MbAddr
){

61 iàĞ(
iCu¼MbAddr
 !ğ0è&& 
N®
 -> 
TCÛffP»diùiÚ
 && !N® -> 
no_š‹r_Ïy”_´ed_æag
 && (
Cu¼Residu
 -> 
Cbp
 =ğ0è&& (Cu¼Residu -> 
MbTy³
 !ğ
INTRA_16x16
)){

62 
Cu¼Residu
 -> 
QpLf
 = CurrResidu [-1] . QpLf;

64 
Cu¼Residu
 -> 
QpLf
 = Cu¼Residu -> 
Qp
;

66 
	}
}

	@lib_svc/Mb_B_svc.c

35 
	~"d©a.h
"

36 
	~"»fl.h
"

37 
	~"mÙiÚ_veùÜ.h
"

38 
	~"š‹½Ş©iÚ.h
"

39 
	~"š‹½Ş©iÚ_8x8.h
"

40 
	~"Dœeù_´ediùiÚ.h
"

41 
	~"š‹½Ş©iÚ_maš.h
"

42 
	~"š‹½Ş©iÚ_maš_8x8.h
"

46 
	~"Mb_P_svc.h
"

47 
	~"Mb_B_svc.h
"

48 
	~"fl_ÿches_svc.h
"

49 
	~"¦iû_d©a_I_svc.h
"

50 
	~"mÙiÚ_veùÜ_svc.h
"

58 
	$SvcB4x4
(cÚ¡ 
NAL
 *
N®
, 
mbP¬tIdx
, cÚ¡ *
MÙiÚP»dLx
, cÚ¡ 
MvdLx
[][2], cÚ¡ *
RefIdxLx
,

59 
REFPART
 *
RefP¬t™iÚ
, 
MvCacheLx
[][2], *
RefCacheLX
, *
MvBa£Lx
, *
RefBa£Lx
)

62 
subMbP¬tIdx
 ;

63 
mvL0
 [2];

65  
subMbP¬tIdx
 = 0 ; subMbPartIdx < 4 ; subMbPartIdx++ ) {

66 cÚ¡ 
šd
 = (
mbP¬tIdx
 << 2è+ 
subMbP¬tIdx
 ;

67 cÚ¡ 
šdex
 = 
	`SCAN8
(
šd
) ;

69 iàĞ
MÙiÚP»dLx
 [
mbP¬tIdx
] == 1){

70 
Idx
 = (
subMbP¬tIdx
 & 1) + ((subMbPartIdx & 2) << 1);

71 
»f_šdex
 = 
RefP¬t™iÚ
 [
Idx
] . 
RefIndex
;

72 
RefCacheLX
[
šdex
] = 
RefBa£Lx
[
»f_šdex
];

73 ià(!
N®
 -> 
nÚ_dŸdic
) {

74 
šdex_mv
 = 
RefP¬t™iÚ
 [
Idx
] . 
MvIndex
;

75 
MvCacheLx
 [
šdex
][0] = 
	`MV_CAL
(
MvBa£Lx
[
šdex_mv
] , 
N®
 -> 
MvC®x
 [N® -> 
Lay”Id
]è+ 
MvdLx
[(
mbP¬tIdx
 << 2è+ 
subMbP¬tIdx
][0];

76 
MvCacheLx
 [
šdex
][1] = 
	`MV_CAL
(
MvBa£Lx
[
šdex_mv
 + 1], 
N®
 -> 
MvC®y
 [N® -> 
Lay”Id
]è+ 
MvdLx
[(
mbP¬tIdx
 << 2è+ 
subMbP¬tIdx
][1];

78 
MvCacheLx
[
šdex
][0] +ğ
MvdLx
[
mbP¬tIdx
 << 2][0];

79 
MvCacheLx
[
šdex
][1] +ğ
MvdLx
[
mbP¬tIdx
 << 2][1];

82 
RefCacheLX
 [
šdex
] = 
RefIdxLx
 [
mbP¬tIdx
];

83 
	`mÙiÚ_veùÜ
Ğ
MvCacheLx
, 
MvdLx
[
šd
], 
RefCacheLX
, 
mvL0
, 
RefIdxLx
[
mbP¬tIdx
], 
šdex
, 1);

85 
MvCacheLx
 [
šdex
][0] = 
mvL0
 [0];

86 
MvCacheLx
 [
šdex
][1] = 
mvL0
 [1];

89 
	}
}

96 
	$Sub_B_svc_4x4
 (
MvCache_l0
 [][2], 
MvCache_l1
 [][2], *
RefCache_l0
, *
RefCache_l1
,

97 cÚ¡ 
DATA
 *
aio_pBlock
, 
mbP¬tIdx
, 
SubMbTy³
, *
mv_bas_l0
, *
mv_bas_l1
,

98 *
»f_bas_l0
, *
»f_bas_l1
, cÚ¡ 
NAL
 *
N®
, 
REFPART
 
RefP¬t™iÚL0
[16])

103 iàĞ
SubMbTy³
 == 0){

104 cÚ¡ 
šdex
 = 
	`SCAN8
(
mbP¬tIdx
 << 2);

105 
mvL0
 [2];

106 
mvL1
 [2];

108 
Ref0
 = 
	`SvcSkMÙiÚVeùÜ
(
MvCache_l0
, 
aio_pBlock
 -> 
MvdL0
[(
mbP¬tIdx
 << 2)], 
RefCache_l0
, 
mvL0
, 
šdex
, 2);

109 
Ref1
 = 
	`SvcSkMÙiÚVeùÜ
(
MvCache_l1
, 
aio_pBlock
 -> 
MvdL1
[(
mbP¬tIdx
 << 2)], 
RefCache_l1
, 
mvL1
, 
šdex
, 2);

111 ià(
Ref0
 =ğ
LIST_NOT_USED
 && 
Ref1
 == LIST_NOT_USED){

112 
Ref0
 = 
Ref1
 = 0;

115 
RefCache_l0
 [
šdex
] = RefCache_l0 [šdex + 1] = RefCache_l0 [šdex + 8] = RefCache_l0 [šdex + 9] = 
Ref0
;

116 
RefCache_l1
 [
šdex
] = RefCache_l1 [šdex + 1] = RefCache_l1 [šdex + 8] = RefCache_l1 [šdex + 9] = 
Ref1
;

119 
MvCache_l0
 [
šdex
 + 0][0] = MvCache_l0 [šdex + 1][0] = MvCache_l0 [šdex + 8][0] = MvCache_l0 [šdex + 9][0] = 
mvL0
 [0];

120 
MvCache_l0
 [
šdex
 + 0][1] = MvCache_l0 [šdex + 1][1] = MvCache_l0 [šdex + 8][1] = MvCache_l0 [šdex + 9][1] = 
mvL0
 [1];

122 
MvCache_l1
 [
šdex
 + 0][0] = MvCache_l1 [šdex + 1][0] = MvCache_l1 [šdex + 8][0] = MvCache_l1 [šdex + 9][0] = 
mvL1
 [0];

123 
MvCache_l1
 [
šdex
 + 0][1] = MvCache_l1 [šdex + 1][1] = MvCache_l1 [šdex + 8][1] = MvCache_l1 [šdex + 9][1] = 
mvL1
 [1];

125 }iàĞ
SubMbTy³
 == 10){

127 
	`SvcB4x4
(
N®
, 
mbP¬tIdx
, 
aio_pBlock
 -> 
MÙiÚP»dL0
,‡io_pBlock -> 
MvdL0
,‡io_pBlock -> 
RefIdxL0
, 
RefP¬t™iÚL0
,

128 
MvCache_l0
, 
RefCache_l0
, 
mv_bas_l0
, 
»f_bas_l0
);

129 }iàĞ
SubMbTy³
 == 11){

131 
	`SvcB4x4
(
N®
, 
mbP¬tIdx
, 
aio_pBlock
 -> 
MÙiÚP»dL1
,‡io_pBlock -> 
MvdL1
,‡io_pBlock -> 
RefIdxL1
, &
RefP¬t™iÚL0
[16],

132 
MvCache_l1
, 
RefCache_l1
, 
mv_bas_l1
, 
»f_bas_l1
);

135 
	`SvcB4x4
(
N®
, 
mbP¬tIdx
, 
aio_pBlock
 -> 
MÙiÚP»dL0
,‡io_pBlock -> 
MvdL0
,‡io_pBlock -> 
RefIdxL0
, 
RefP¬t™iÚL0
,

136 
MvCache_l0
, 
RefCache_l0
, 
mv_bas_l0
, 
»f_bas_l0
);

137 
	`SvcB4x4
(
N®
, 
mbP¬tIdx
, 
aio_pBlock
 -> 
MÙiÚP»dL1
,‡io_pBlock -> 
MvdL1
,‡io_pBlock -> 
RefIdxL1
, &
RefP¬t™iÚL0
[16],

138 
MvCache_l1
, 
RefCache_l1
, 
mv_bas_l1
, 
»f_bas_l1
);

140 
	}
}

148 
	$SvcB8x4
(cÚ¡ 
NAL
 *
N®
, 
mbP¬tIdx
, cÚ¡ *
MÙiÚP»dLx
, cÚ¡ 
MvdLx
[][2], cÚ¡ *
RefIdxLx
,

149 
REFPART
 
RefP¬t™iÚ
[16], 
MvCacheLx
[][2], *
RefCacheLX
, *
MvBa£Lx
, *
RefBa£Lx
)

152 
subMbP¬tIdx
 ;

153 
mvL0
 [2];

155  
subMbP¬tIdx
 = 0 ; subMbPartIdx < 2 ; subMbPartIdx++ ) {

156 cÚ¡ 
šd
 = (
mbP¬tIdx
 << 2è+ (
subMbP¬tIdx
 << 1);

157 cÚ¡ 
šdex
 = 
	`SCAN8
(
šd
) ;

159 iàĞ
MÙiÚP»dLx
 [
mbP¬tIdx
] == 1){

160 
Idx
 = (
subMbP¬tIdx
 & 1) << 2;

161 
»f_šdex
 = 
RefP¬t™iÚ
 [
Idx
] . 
RefIndex
;

162 
RefCacheLX
 [
šdex
] = RefCacheLX [šdex + 1] = 
RefBa£Lx
[
»f_šdex
];

164 iàĞ!
N®
 -> 
nÚ_dŸdic
){

165 
šdex_mv
 = 
RefP¬t™iÚ
 [
Idx
] . 
MvIndex
;

166 
mvL0
 [0] = 
	`MV_CAL
(
MvBa£Lx
[
šdex_mv
] , 
N®
 -> 
MvC®x
 [N® -> 
Lay”Id
]è+ 
MvdLx
[Ğ
mbP¬tIdx
 << 2è+ 
subMbP¬tIdx
][0];

167 
mvL0
 [1] = 
	`MV_CAL
(
MvBa£Lx
[
šdex_mv
 + 1], 
N®
 -> 
MvC®y
 [N® -> 
Lay”Id
]è+ 
MvdLx
[Ğ
mbP¬tIdx
 << 2è+ 
subMbP¬tIdx
][1];

169 
mvL0
 [0] = 
MvCacheLx
 [
šdex
][0] + 
MvdLx
[Ğ
mbP¬tIdx
 << 2è+ 
subMbP¬tIdx
][0];

170 
mvL0
 [1] = 
MvCacheLx
 [
šdex
][1] + 
MvdLx
[Ğ
mbP¬tIdx
 << 2è+ 
subMbP¬tIdx
][1];

173 
RefCacheLX
 [
šdex
] = RefCacheLX [šdex + 1] = 
RefIdxLx
 [
mbP¬tIdx
];

174 
	`mÙiÚ_veùÜ
(
MvCacheLx
, 
MvdLx
[Ğ
mbP¬tIdx
 << 2è+ 
subMbP¬tIdx
], 
RefCacheLX
, 
mvL0
, 
RefIdxLx
[mbP¬tIdx], 
šdex
, 2);

177 
MvCacheLx
 [
šdex
][0] = MvCacheLx [šdex + 1][0] = 
mvL0
 [0];

178 
MvCacheLx
 [
šdex
][1] = MvCacheLx [šdex + 1][1] = 
mvL0
 [1];

180 
	}
}

186 
	$Sub_B_svc_8x4
 ( 
MvCache_l0
 [][2], 
MvCache_l1
 [][2], *
RefCache_l0
, *
RefCache_l1
,

187 cÚ¡ 
DATA
 *
aio_pBlock
, 
mbP¬tIdx
, 
SubMbTy³
, *
mv_bas_l0
, *
mv_bas_l1
,

188 *
»f_bas_l0
, *
»f_bas_l1
, cÚ¡ 
NAL
 *
N®
, 
REFPART
 
RefP¬t™iÚL0
[16])

193 iàĞ
SubMbTy³
 == 4 ){

195 
	`SvcB8x4
(
N®
, 
mbP¬tIdx
, 
aio_pBlock
 -> 
MÙiÚP»dL0
,‡io_pBlock -> 
MvdL0
,‡io_pBlock -> 
RefIdxL0
, 
RefP¬t™iÚL0
,

196 
MvCache_l0
, 
RefCache_l0
, 
mv_bas_l0
, 
»f_bas_l0
);

197 }iàĞ
SubMbTy³
 == 6 ){

199 
	`SvcB8x4
(
N®
, 
mbP¬tIdx
, 
aio_pBlock
 -> 
MÙiÚP»dL1
,‡io_pBlock -> 
MvdL1
,‡io_pBlock -> 
RefIdxL1
, &
RefP¬t™iÚL0
[16],

200 
MvCache_l1
, 
RefCache_l1
, 
mv_bas_l1
, 
»f_bas_l1
);

203 
	`SvcB8x4
(
N®
, 
mbP¬tIdx
, 
aio_pBlock
 -> 
MÙiÚP»dL0
,‡io_pBlock -> 
MvdL0
,‡io_pBlock -> 
RefIdxL0
, 
RefP¬t™iÚL0
,

204 
MvCache_l0
, 
RefCache_l0
, 
mv_bas_l0
, 
»f_bas_l0
);

205 
	`SvcB8x4
(
N®
, 
mbP¬tIdx
, 
aio_pBlock
 -> 
MÙiÚP»dL1
,‡io_pBlock -> 
MvdL1
,‡io_pBlock -> 
RefIdxL1
, &
RefP¬t™iÚL0
[16],

206 
MvCache_l1
, 
RefCache_l1
, 
mv_bas_l1
, 
»f_bas_l1
);

208 
	}
}

218 
	$SvcB4x8
(cÚ¡ 
NAL
 *
N®
, 
mbP¬tIdx
, cÚ¡ *
MÙiÚP»dLx
, cÚ¡ 
MvdLx
[][2], cÚ¡ *
RefIdxLx
,

219 
REFPART
 *
RefP¬t™iÚ
, 
MvCacheLx
[][2], *
RefCacheLX
, *
MvBa£Lx
, *
RefBa£Lx
)

222 
subMbP¬tIdx
 ;

223 
mvL0
 [2];

225  
subMbP¬tIdx
 = 0 ; subMbPartIdx < 2 ; subMbPartIdx++ ) {

226 cÚ¡ 
šd
 = (
mbP¬tIdx
 << 2è+ 
subMbP¬tIdx
 ;

227 cÚ¡ 
šdex
 = 
	`SCAN8
(
šd
) ;

229 iàĞ
MÙiÚP»dLx
 [
mbP¬tIdx
] == 1){

230 
»f_šdex
 = 
RefP¬t™iÚ
 [
subMbP¬tIdx
] . 
RefIndex
;

231 
RefCacheLX
 [
šdex
] = RefCacheLX [šdex + 8] = 
RefBa£Lx
[
»f_šdex
];

232 ifĞ!
N®
 -> 
nÚ_dŸdic
){

233 
šdex_mv
 = 
RefP¬t™iÚ
 [
subMbP¬tIdx
] . 
MvIndex
;

234 
mvL0
 [0] = 
	`MV_CAL
(
MvBa£Lx
[
šdex_mv
] , 
N®
 -> 
MvC®x
 [N® -> 
Lay”Id
]è+ 
MvdLx
[Ğ
mbP¬tIdx
 << 2è+ 
subMbP¬tIdx
][0];

235 
mvL0
 [1] = 
	`MV_CAL
(
MvBa£Lx
[
šdex_mv
 + 1], 
N®
 -> 
MvC®y
 [N® -> 
Lay”Id
]è+ 
MvdLx
[Ğ
mbP¬tIdx
 << 2è+ 
subMbP¬tIdx
][1];

237 
mvL0
 [0] = 
MvCacheLx
 [
šdex
][0] + 
MvdLx
[Ğ
mbP¬tIdx
 << 2è+ 
subMbP¬tIdx
][0];

238 
mvL0
 [1] = 
MvCacheLx
 [
šdex
][1] + 
MvdLx
[Ğ
mbP¬tIdx
 << 2è+ 
subMbP¬tIdx
][1];

241 
RefCacheLX
 [
šdex
] = RefCacheLX [šdex + 8] = 
RefIdxLx
 [
mbP¬tIdx
];

242 
	`mÙiÚ_veùÜ
(
MvCacheLx
, 
MvdLx
[
šd
], 
RefCacheLX
, 
mvL0
, 
RefIdxLx
[
mbP¬tIdx
], 
šdex
, 1);

245 
MvCacheLx
 [
šdex
][0] = MvCacheLx [šdex + 8][0] = 
mvL0
 [0];

246 
MvCacheLx
 [
šdex
][1] = MvCacheLx [šdex + 8][1] = 
mvL0
 [1];

248 
	}
}

257 
	$Sub_B_svc_4x8
Ğ
MvCache_l0
 [][2], 
MvCache_l1
 [][2], *
RefCache_l0
, *
RefCache_l1
,

258 cÚ¡ 
DATA
 *
aio_pBlock
, 
mbP¬tIdx
, 
SubMbTy³
, *
mv_bas_l0
, *
mv_bas_l1
,

259 *
»f_bas_l0
, *
»f_bas_l1
, cÚ¡ 
NAL
 *
N®
, 
REFPART
 
RefP¬t™iÚL0
[16])

263 iàĞ
SubMbTy³
 == 5 ){

265 
	`SvcB4x8
(
N®
, 
mbP¬tIdx
, 
aio_pBlock
 -> 
MÙiÚP»dL0
,‡io_pBlock -> 
MvdL0
,‡io_pBlock -> 
RefIdxL0
, 
RefP¬t™iÚL0
,

266 
MvCache_l0
, 
RefCache_l0
, 
mv_bas_l0
, 
»f_bas_l0
);

267 }ià(
SubMbTy³
 == 7 ){

269 
	`SvcB4x8
(
N®
, 
mbP¬tIdx
, 
aio_pBlock
 -> 
MÙiÚP»dL1
,‡io_pBlock -> 
MvdL1
,‡io_pBlock -> 
RefIdxL1
, &
RefP¬t™iÚL0
[16],

270 
MvCache_l1
, 
RefCache_l1
, 
mv_bas_l1
, 
»f_bas_l1
);

273 
	`SvcB4x8
(
N®
, 
mbP¬tIdx
, 
aio_pBlock
 -> 
MÙiÚP»dL0
,‡io_pBlock -> 
MvdL0
,‡io_pBlock -> 
RefIdxL0
, 
RefP¬t™iÚL0
,

274 
MvCache_l0
, 
RefCache_l0
, 
mv_bas_l0
, 
»f_bas_l0
);

275 
	`SvcB4x8
(
N®
, 
mbP¬tIdx
, 
aio_pBlock
 -> 
MÙiÚP»dL1
,‡io_pBlock -> 
MvdL1
,‡io_pBlock -> 
RefIdxL1
, &
RefP¬t™iÚL0
[16],

276 
MvCache_l1
, 
RefCache_l1
, 
mv_bas_l1
, 
»f_bas_l1
);

278 
	}
}

286 
	$SvcB8x8
(cÚ¡ 
NAL
 *
N®
, 
mbP¬tIdx
, cÚ¡ *
MÙiÚP»dLx
, cÚ¡ 
MvdLx
[][2], cÚ¡ *
RefIdxLx
,

287 
REFPART
 *
RefP¬t™iÚ
, 
MvCacheLx
[][2], *
RefCacheLX
, *
MvBa£Lx
, *
RefBa£Lx
)

290 
»f
;

291 
mvL0
 [2];

292 cÚ¡ 
šdex
 = 
	`SCAN8
(
mbP¬tIdx
 << 2);

294 iàĞ
MÙiÚP»dLx
 [
mbP¬tIdx
] == 1){

295 
»f_šdex
 = 
RefP¬t™iÚ
 [0] . 
RefIndex
;

296 
»f
 = 
RefBa£Lx
[
»f_šdex
];

298 iàĞ!
N®
 -> 
nÚ_dŸdic
){

299 
šdex_mv
 = 
RefP¬t™iÚ
 [0] . 
MvIndex
;

301 
mvL0
[0] = 
	`MV_CAL
(
MvBa£Lx
 [
šdex_mv
] , 
N®
 -> 
MvC®x
 [N® -> 
Lay”Id
]è+ 
MvdLx
[
mbP¬tIdx
 << 2][0];

302 
mvL0
[1] = 
	`MV_CAL
(
MvBa£Lx
 [
šdex_mv
 + 1], 
N®
 -> 
MvC®y
 [N® -> 
Lay”Id
]è+ 
MvdLx
[
mbP¬tIdx
 << 2][1];

304 
mvL0
[0] = 
MvCacheLx
 [
šdex
][0] + 
MvdLx
[
mbP¬tIdx
 << 2][0];

305 
mvL0
[1] = 
MvCacheLx
 [
šdex
][1] + 
MvdLx
[
mbP¬tIdx
 << 2][1];

308 
»f
 = 
RefIdxLx
 [
mbP¬tIdx
];

309 
	`mÙiÚ_veùÜ
Ğ
MvCacheLx
, 
MvdLx
[
mbP¬tIdx
 << 2], 
RefCacheLX
, 
mvL0
, 
RefIdxLx
[mbP¬tIdx], 
šdex
, 2);

312 
RefCacheLX
 [
šdex
] = RefCacheLX [šdex + 1] = RefCacheLX [šdex + 8] = RefCacheLX [šdex + 9] = 
»f
;

314 
MvCacheLx
 [
šdex
][0] = MvCacheLx [šdex + 1][0] = MvCacheLx [šdex + 8][0] = MvCacheLx [šdex + 9][0] = 
mvL0
 [0];

315 
MvCacheLx
 [
šdex
][1] = MvCacheLx [šdex + 1][1] = MvCacheLx [šdex + 8][1] = MvCacheLx [šdex + 9][1] = 
mvL0
 [1];

316 
	}
}

327 
	$Sub_B_svc_8x8
 ( 
MvCache_l0
 [][2], 
MvCache_l1
 [][2], *
RefCache_l0
, *
RefCache_l1
,

328 cÚ¡ 
DATA
 *
aio_pBlock
, 
mbP¬tIdx
, 
SubMbTy³
, *
mv_bas_l0
, *
mv_bas_l1
,

329 *
»f_bas_l0
, *
»f_bas_l1
, cÚ¡ 
NAL
 *
N®
, 
REFPART
 
RefP¬t™iÚL0
[16])

333 ià(
SubMbTy³
 == 1 ){

334 
	`SvcB8x8
(
N®
, 
mbP¬tIdx
, 
aio_pBlock
 -> 
MÙiÚP»dL0
,‡io_pBlock -> 
MvdL0
,‡io_pBlock -> 
RefIdxL0
, 
RefP¬t™iÚL0
,

335 
MvCache_l0
, 
RefCache_l0
, 
mv_bas_l0
, 
»f_bas_l0
);

336 }ifĞ
SubMbTy³
 == 2){

337 
	`SvcB8x8
(
N®
, 
mbP¬tIdx
, 
aio_pBlock
 -> 
MÙiÚP»dL1
,‡io_pBlock -> 
MvdL1
,‡io_pBlock -> 
RefIdxL1
, &
RefP¬t™iÚL0
[16],

338 
MvCache_l1
, 
RefCache_l1
, 
mv_bas_l1
, 
»f_bas_l1
);

340 
	`SvcB8x8
(
N®
, 
mbP¬tIdx
, 
aio_pBlock
 -> 
MÙiÚP»dL0
,‡io_pBlock -> 
MvdL0
,‡io_pBlock -> 
RefIdxL0
, 
RefP¬t™iÚL0
,

341 
MvCache_l0
, 
RefCache_l0
, 
mv_bas_l0
, 
»f_bas_l0
);

342 
	`SvcB8x8
(
N®
, 
mbP¬tIdx
, 
aio_pBlock
 -> 
MÙiÚP»dL1
,‡io_pBlock -> 
MvdL1
,‡io_pBlock -> 
RefIdxL1
, &
RefP¬t™iÚL0
[16],

343 
MvCache_l1
, 
RefCache_l1
, 
mv_bas_l1
, 
»f_bas_l1
);

345 
	}
}

356 
	$B_svc_8x8
(
MvCache_l0
 [][2], 
MvCache_l1
 [][2], *
RefCache_l0
, *
RefCache_l1
,

357 cÚ¡ 
RESIDU
 *
Cu¼Residu
, cÚ¡ 
DATA
 *
aio_pBlock
, 
Sub_B_svc
 
aio_tdecode_sub
[],

358 *
DpbLuma
, *
DpbCb
, *
DpbCr
,

359 *
image
, *
image_Cb
, *
image_Cr
,

360 cÚ¡ 
x
, cÚ¡ 
y
, cÚ¡ 
PicWidthInPix
, cÚ¡ 
PicHeightInPix
,

361 cÚ¡ 
NAL
 *
N®
, 
LIST_MMO
 *
RefPicLi¡L0
, LIST_MMO *
RefPicLi¡L1
, *
mv_bas_l0
,

362 *
mv_bas_l1
, *
»f_bas_l0
, *
»f_bas_l1
, cÚ¡ 
STRUCT_PF
 *
veùÜs
, 
REFPART
 
RefP¬t™iÚL0
[16])

367 
mbP¬tIdx
 ;

368 
image_l0
[256];

369 
image_l1
[256];

370 
image_Cb_l0
[64];

371 
image_Cb_l1
[64];

372 
image_Cr_l0
[64];

373 
image_Cr_l1
[64];

376  
mbP¬tIdx
 = 0 ; mbPartIdx < 4 ; mbPartIdx++ ) {

377 
mode
 = 
Cu¼Residu
 -> 
SubMbTy³
 [
mbP¬tIdx
] ;

379 
RefCache_l0
 [
	`SCAN8
(
mbP¬tIdx
 << 2)] = 
RefCache_l1
 [SCAN8(mbPartIdx << 2)] = -1;

381 
aio_tdecode_sub
 [
mode
](
MvCache_l0
, 
MvCache_l1
, 
RefCache_l0
, 
RefCache_l1
, 
aio_pBlock
, 
mbP¬tIdx
,

382 
mode
, 
mv_bas_l0
, 
mv_bas_l1
, 
»f_bas_l0
, 
»f_bas_l1
, 
N®
, &
RefP¬t™iÚL0
[(((
mbP¬tIdx
 & 2) << 1) + (mbPartIdx & 1)) << 1]);

385 iàĞ
N®
 -> 
PicToDi¥Ïy
 ){

386 
	`§m¶e_š‹½Ş©iÚ_maš
(
DpbLuma
, 
DpbCb
, 
DpbCr
, 
image_l0
, 
image_l1
, 
image_Cb_l0
, 
image_Cb_l1
,

387 
image_Cr_l0
, 
image_Cr_l1
, 
MvCache_l0
, 
MvCache_l1
, 
RefCache_l0
, 
RefCache_l1
, 
x
, 
y
,

388 
PicWidthInPix
, 
PicHeightInPix
 , 
RefPicLi¡L0
, 
RefPicLi¡L1
, 
veùÜs
 -> 
PŒ_š‹½Ş_4x4
);

390 
	`£t_image_4x4
(
image
, 
image_Cb
, 
image_Cr
, 
image_l0
, 
image_l1
, 
image_Cb_l0
, 
image_Cb_l1
, 
image_Cr_l0
,

391 
image_Cr_l1
, 
RefCache_l0
, 
RefCache_l1
, 
PicWidthInPix
);

393 
	}
}

403 
	$B_svc_16x16
Ğ
MvCache_l0
 [][2], 
MvCache_l1
 [][2], *
RefCache_l0
, *
RefCache_l1
,

404 cÚ¡ 
RESIDU
 *
Cu¼Residu
, cÚ¡ 
DATA
 *
aio_pBlock
, 
Sub_B_svc
 
aio_tdecode_sub
[],

405 *
DpbLuma
, *
DpbCb
, *
DpbCr
,

406 *
image
, *
image_Cb
, *
image_Cr
,

407 cÚ¡ 
x
, cÚ¡ 
y
, cÚ¡ 
PicWidthInPix
, cÚ¡ 
PicHeightInPix
,

408 cÚ¡ 
NAL
 *
N®
, 
LIST_MMO
 *
RefPicLi¡L0
, LIST_MMO *
RefPicLi¡L1
, *
mv_bas_l0
,

409 *
mv_bas_l1
, *
»f_bas_l0
, *
»f_bas_l1
, cÚ¡ 
STRUCT_PF
 *
veùÜs
, 
REFPART
 
RefP¬t™iÚL0
[16])

412 
mvL0
 [2];

413 
»f
;

414 
image_l0
[256];

415 
image_l1
[256];

416 
image_Cb_l0
[64];

417 
image_Cb_l1
[64];

418 
image_Cr_l0
[64];

419 
image_Cr_l1
[64];

422 
RefCache_l0
 [12 + 2] = RefCache_l0 [12 + 18] =

423 
RefCache_l1
 [12 + 2] = RefCache_l1 [12 + 18] = -1;

426 iàĞ
aio_pBlock
 -> 
MbP¬tP»dMode
[0] =ğ
P»d_L0
 ||‡io_pBlock -> MbP¬tP»dMode[0] =ğ
B_Bi
 ){

427 iàĞ
aio_pBlock
 -> 
MÙiÚP»dL0
 [0] == 1){

428 
»f_šdex
 = 
RefP¬t™iÚL0
 [0] . 
RefIndex
;

429 
»f
 = 
»f_bas_l0
[
»f_šdex
];

430 iàĞ!
N®
 -> 
nÚ_dŸdic
){

431 
šdex_mv
 = 
RefP¬t™iÚL0
 [0] . 
MvIndex
;

432 
mvL0
[0] = 
	`MV_CAL
(
mv_bas_l0
[
šdex_mv
] , 
N®
 -> 
MvC®x
 [N® -> 
Lay”Id
]è+ 
aio_pBlock
 -> 
MvdL0
[0][0];

433 
mvL0
[1] = 
	`MV_CAL
(
mv_bas_l0
[
šdex_mv
 + 1], 
N®
 -> 
MvC®y
 [N® -> 
Lay”Id
]è+ 
aio_pBlock
 -> 
MvdL0
[0][1];

435 
mvL0
[0] = 
MvCache_l0
 [12 + 0][0] + 
aio_pBlock
 -> 
MvdL0
[0][0];

436 
mvL0
[1] = 
MvCache_l0
 [12 + 0][1] + 
aio_pBlock
 -> 
MvdL0
[0][1];

439 
»f
 = 
aio_pBlock
 -> 
RefIdxL0
 [0];

440 
	`mÙiÚ_veùÜ
(
MvCache_l0
, 
aio_pBlock
 -> 
MvdL0
[0], 
RefCache_l0
, 
mvL0
,‡io_pBlock -> 
RefIdxL0
[0], 12, 4);

443 
	`FlRefIdx
(
»f
, &
RefCache_l0
 [12], 3);

444 
	`FlMÙiÚVeùÜ
(
mvL0
 , &
MvCache_l0
 [12], 3);

449 ià(
aio_pBlock
 -> 
MbP¬tP»dMode
[0] =ğ
P»d_L1
 ||‡io_pBlock -> MbP¬tP»dMode[0] =ğ
B_Bi
){

450 iàĞ
aio_pBlock
 -> 
MÙiÚP»dL1
 [0] == 1){

451 
»f_šdex
 = 
RefP¬t™iÚL0
 [16] . 
RefIndex
;

452 
»f
 = 
»f_bas_l1
[
»f_šdex
];

453 ià(!
N®
 -> 
nÚ_dŸdic
){

454 
šdex_mv
 = 
RefP¬t™iÚL0
 [0] . 
MvIndex
;

455 
mvL0
[0] = 
	`MV_CAL
(
mv_bas_l1
[
šdex_mv
] , 
N®
 -> 
MvC®x
 [N® -> 
Lay”Id
]è+ 
aio_pBlock
 -> 
MvdL1
[0][0];

456 
mvL0
[1] = 
	`MV_CAL
(
mv_bas_l1
[
šdex_mv
 + 1], 
N®
 -> 
MvC®y
 [N® -> 
Lay”Id
]è+ 
aio_pBlock
 -> 
MvdL1
[0][1];

458 
mvL0
[0] = 
MvCache_l1
 [12 + 0][0] + 
aio_pBlock
 -> 
MvdL1
[0][0];

459 
mvL0
[1] = 
MvCache_l1
 [12 + 0][1] + 
aio_pBlock
 -> 
MvdL1
[0][1];

462 
»f
 = 
aio_pBlock
 -> 
RefIdxL1
 [0];

463 
	`mÙiÚ_veùÜ
(
MvCache_l1
, 
aio_pBlock
 -> 
MvdL1
[0], 
RefCache_l1
, 
mvL0
,‡io_pBlock -> 
RefIdxL1
[0], 12, 4);

466 
	`FlRefIdx
(
»f
, &
RefCache_l1
 [12], 3);

467 
	`FlMÙiÚVeùÜ
(
mvL0
, &
MvCache_l1
 [12], 3);

470 iàĞ
N®
 -> 
PicToDi¥Ïy
 ){

472 
	`Sam¶eIÁ”pŞ©iÚMaš8x8
(
DpbLuma
, 
DpbCb
, 
DpbCr
, 
image_l0
, 
image_Cb_l0
, 
image_Cr_l0
, 
MvCache_l0
,

473 
RefCache_l0
, 
x
, 
y
, 
PicWidthInPix
, 
PicHeightInPix
, 
RefPicLi¡L0
, 
veùÜs
 -> 
PŒ_š‹½Ş_8x8
);

476 
	`Sam¶eIÁ”pŞ©iÚMaš8x8
(
DpbLuma
, 
DpbCb
, 
DpbCr
, 
image_l1
, 
image_Cb_l1
, 
image_Cr_l1
, 
MvCache_l1
,

477 
RefCache_l1
, 
x
, 
y
, 
PicWidthInPix
, 
PicHeightInPix
, 
RefPicLi¡L1
, 
veùÜs
 -> 
PŒ_š‹½Ş_8x8
 );

480 
	`£t_image_8x8
(
image
, 
image_Cb
, 
image_Cr
, 
image_l0
, 
image_l1
, 
image_Cb_l0
, 
image_Cb_l1
, 
image_Cr_l0
,

481 
image_Cr_l1
, 
RefCache_l0
, 
RefCache_l1
, 
PicWidthInPix
);

483 
	}
}

494 
	$B_svc_8x16
(
MvCache_l0
 [][2], 
MvCache_l1
 [][2], *
RefCache_l0
, *
RefCache_l1
,

495 cÚ¡ 
RESIDU
 *
Cu¼Residu
, cÚ¡ 
DATA
 *
aio_pBlock
, 
Sub_B_svc
 
aio_tdecode_sub
[],

496 *
DpbLuma
, *
DpbCb
, *
DpbCr
,

497 *
image
, *
image_Cb
, *
image_Cr
, cÚ¡ 
x
,

498 cÚ¡ 
y
, cÚ¡ 
PicWidthInPix
, cÚ¡ 
PicHeightInPix
, cÚ¡ 
NAL
 *
N®
,

499 
LIST_MMO
 *
RefPicLi¡L0
, LIST_MMO *
RefPicLi¡L1
, *
mv_bas_l0
, *
mv_bas_l1
,

500 *
»f_bas_l0
, *
»f_bas_l1
, cÚ¡ 
STRUCT_PF
 *
veùÜs
, 
REFPART
 
RefP¬t™iÚL0
[16])

504 
mbP¬tIdx
 ;

505 
mvL0
 [2];

506 
»f
;

507 
image_l0
[256];

508 
image_l1
[256];

509 
image_Cb_l0
[64];

510 
image_Cb_l1
[64];

511 
image_Cr_l0
[64];

512 
image_Cr_l1
[64];

514 
mbP¬tIdx
 = 0; mbPartIdx < 2; mbPartIdx++){

515 cÚ¡ 
šdex
 = 
	`SCAN8
 (
mbP¬tIdx
 << 2);

516 
RefCache_l0
 [
šdex
] = RefCache_l0 [index + 16] =

517 
RefCache_l1
 [
šdex
] = RefCache_l1 [index + 16] = -1;

519 iàĞ
aio_pBlock
 -> 
MbP¬tP»dMode
[
mbP¬tIdx
] =ğ
P»d_L0
 ||‡io_pBlock -> MbP¬tP»dMode[mbP¬tIdx] =ğ
B_Bi
){

520 iàĞ
aio_pBlock
 -> 
MÙiÚP»dL0
 [
mbP¬tIdx
] == 1){

521 
»f_šdex
 = 
RefP¬t™iÚL0
 [
mbP¬tIdx
 << 1] . 
RefIndex
;

522 ià(!
N®
 -> 
nÚ_dŸdic
){

523 
šdex_mv
 = 
RefP¬t™iÚL0
 [
mbP¬tIdx
 << 1] . 
MvIndex
;

524 
	`S‘IÁ”P¬am
(
N®
, &
mvL0
[0], &
»f
, 
aio_pBlock
 -> 
MvdL0
[
mbP¬tIdx
 << 2], &
mv_bas_l0
[
šdex_mv
], &
»f_bas_l0
[
»f_šdex
]);

526 
»f
 = 
»f_bas_l0
[
»f_šdex
];

527 
mvL0
[0] = 
MvCache_l0
 [
šdex
][0] + 
aio_pBlock
 -> 
MvdL0
[
mbP¬tIdx
 << 2][0];

528 
mvL0
[1] = 
MvCache_l0
 [
šdex
][1] + 
aio_pBlock
 -> 
MvdL0
[
mbP¬tIdx
 << 2][1];

531 
»f
 = 
aio_pBlock
 -> 
RefIdxL0
 [
mbP¬tIdx
];

532 
	`mÙiÚ_veùÜ_8x16
(
MvCache_l0
, 
aio_pBlock
 -> 
MvdL0
[
mbP¬tIdx
 << 2], 
RefCache_l0
, 
mvL0
,‡io_pBlock -> 
RefIdxL0
[mbP¬tIdx], 
šdex
);

536 
	`FlRefIdx
(
»f
, &
RefCache_l0
 [
šdex
], 1);

537 
	`FlMÙiÚVeùÜ
(
mvL0
 , &
MvCache_l0
 [
šdex
], 1);

540 ià(
aio_pBlock
 -> 
MbP¬tP»dMode
[
mbP¬tIdx
] =ğ
P»d_L1
 ||‡io_pBlock -> MbP¬tP»dMode[mbP¬tIdx] =ğ
B_Bi
){

541 
REFPART
 *
RefP¬t™iÚL1
 = &
RefP¬t™iÚL0
[16];

542 iàĞ
aio_pBlock
 -> 
MÙiÚP»dL1
 [
mbP¬tIdx
] == 1){

543 
»f_šdex
 = 
RefP¬t™iÚL1
 [
mbP¬tIdx
 << 1] . 
RefIndex
;

544 ià(!
N®
 -> 
nÚ_dŸdic
){

545 
šdex_mv
 = 
RefP¬t™iÚL1
 [
mbP¬tIdx
 << 1] . 
MvIndex
;

546 
	`S‘IÁ”P¬am
(
N®
, &
mvL0
[0], &
»f
, 
aio_pBlock
 -> 
MvdL1
[
mbP¬tIdx
 << 2], &
mv_bas_l1
[
šdex_mv
], &
»f_bas_l1
[
»f_šdex
]);

548 
»f
 = 
»f_bas_l1
[
»f_šdex
];

549 
mvL0
[0] = 
MvCache_l1
 [
šdex
][0] + 
aio_pBlock
 -> 
MvdL1
[
mbP¬tIdx
 << 2][0];

550 
mvL0
[1] = 
MvCache_l1
 [
šdex
][1] + 
aio_pBlock
 -> 
MvdL1
[
mbP¬tIdx
 << 2][1];

553 
»f
 = 
aio_pBlock
 -> 
RefIdxL1
 [
mbP¬tIdx
];

554 
	`mÙiÚ_veùÜ_8x16
(
MvCache_l1
, 
aio_pBlock
 -> 
MvdL1
[
mbP¬tIdx
 << 2], 
RefCache_l1
, 
mvL0
,‡io_pBlock -> 
RefIdxL1
[mbP¬tIdx], 
šdex
);

557 
	`FlRefIdx
(
»f
, &
RefCache_l1
 [
šdex
], 1);

558 
	`FlMÙiÚVeùÜ
(
mvL0
 , &
MvCache_l1
 [
šdex
], 1);

562 iàĞ
N®
 -> 
PicToDi¥Ïy
 ){

564 
	`Sam¶eIÁ”pŞ©iÚMaš8x8
(
DpbLuma
, 
DpbCb
, 
DpbCr
, 
image_l0
, 
image_Cb_l0
, 
image_Cr_l0
, 
MvCache_l0
,

565 
RefCache_l0
, 
x
, 
y
, 
PicWidthInPix
, 
PicHeightInPix
, 
RefPicLi¡L0
, 
veùÜs
 -> 
PŒ_š‹½Ş_8x8
 );

568 
	`Sam¶eIÁ”pŞ©iÚMaš8x8
(
DpbLuma
, 
DpbCb
, 
DpbCr
, 
image_l1
, 
image_Cb_l1
, 
image_Cr_l1
, 
MvCache_l1
,

569 
RefCache_l1
, 
x
, 
y
, 
PicWidthInPix
, 
PicHeightInPix
, 
RefPicLi¡L1
, 
veùÜs
 -> 
PŒ_š‹½Ş_8x8
);

572 
	`£t_image_8x8
(
image
, 
image_Cb
, 
image_Cr
, 
image_l0
, 
image_l1
, 
image_Cb_l0
, 
image_Cb_l1
, 
image_Cr_l0
,

573 
image_Cr_l1
, 
RefCache_l0
, 
RefCache_l1
, 
PicWidthInPix
);

575 
	}
}

584 
	$B_svc_16x8
 (
MvCache_l0
 [][2], 
MvCache_l1
 [][2], *
RefCache_l0
, *
RefCache_l1
,

585 cÚ¡ 
RESIDU
 *
Cu¼Residu
, cÚ¡ 
DATA
 *
aio_pBlock
, 
Sub_B_svc
 
aio_tdecode_sub
[],

586 *
DpbLuma
, *
DpbCb
, *
DpbCr
,

587 *
image
, *
image_Cb
, *
image_Cr
,

588 cÚ¡ 
x
, cÚ¡ 
y
, cÚ¡ 
PicWidthInPix
, cÚ¡ 
PicHeightInPix
,

589 cÚ¡ 
NAL
 *
N®
, 
LIST_MMO
 * 
RefPicLi¡L0
, LIST_MMO * 
RefPicLi¡L1
, *
mv_bas_l0
,

590 *
mv_bas_l1
, *
»f_bas_l0
, *
»f_bas_l1
, cÚ¡ 
STRUCT_PF
 *
veùÜs
, 
REFPART
 
RefP¬t™iÚL0
[16])

596 
mbP¬tIdx
 ;

597 
mvL0
 [2];

598 
»f
;

599 
image_l0
[256];

600 
image_l1
[256];

601 
image_Cb_l0
[64];

602 
image_Cb_l1
[64];

603 
image_Cr_l0
[64];

604 
image_Cr_l1
[64];

606 
mbP¬tIdx
 = 0; mbPartIdx < 2; mbPartIdx++){

607 cÚ¡ 
šdex
 = 
	`SCAN8
 (
mbP¬tIdx
 << 3);

608 
RefCache_l0
 [
šdex
 + 2] = 
RefCache_l1
 [index + 2] = -1;

610 iàĞ
aio_pBlock
 -> 
MbP¬tP»dMode
[
mbP¬tIdx
] =ğ
P»d_L0
 ||‡io_pBlock -> MbP¬tP»dMode[mbP¬tIdx] =ğ
B_Bi
){

611 iàĞ
aio_pBlock
 -> 
MÙiÚP»dL0
 [
mbP¬tIdx
] == 1){

612 
»f_šdex
 = 
RefP¬t™iÚL0
 [
mbP¬tIdx
 << 3] . 
RefIndex
;

613 iàĞ!
N®
 -> 
nÚ_dŸdic
){

614 
šdex_mv
 = 
RefP¬t™iÚL0
 [
mbP¬tIdx
 << 3] . 
MvIndex
;

615 
	`S‘IÁ”P¬am
(
N®
, &
mvL0
[0], &
»f
, 
aio_pBlock
 -> 
MvdL0
[
mbP¬tIdx
 << 2], &
mv_bas_l0
[
šdex_mv
], &
»f_bas_l0
[
»f_šdex
]);

617 
»f
 = 
»f_bas_l0
[
»f_šdex
];

618 
mvL0
[0] = 
MvCache_l0
 [
šdex
][0] + 
aio_pBlock
 -> 
MvdL0
[
mbP¬tIdx
 << 2][0];

619 
mvL0
[1] = 
MvCache_l0
 [
šdex
][1] + 
aio_pBlock
 -> 
MvdL0
[
mbP¬tIdx
 << 2][1];

622 
»f
 = 
aio_pBlock
 -> 
RefIdxL0
 [
mbP¬tIdx
];

623 
	`mÙiÚ_veùÜ_16x8
(
MvCache_l0
,
aio_pBlock
 -> 
MvdL0
[
mbP¬tIdx
 << 2], 
RefCache_l0
, 
mvL0
,‡io_pBlock -> 
RefIdxL0
[mbP¬tIdx], 
šdex
);

626 
	`FlRefIdx
(
»f
, &
RefCache_l0
 [
šdex
], 2);

627 
	`FlMÙiÚVeùÜ
(
mvL0
 , &
MvCache_l0
 [
šdex
], 2);

632 ià(
aio_pBlock
 -> 
MbP¬tP»dMode
[
mbP¬tIdx
] =ğ
P»d_L1
 ||‡io_pBlock -> MbP¬tP»dMode[mbP¬tIdx] =ğ
B_Bi
){

633 
REFPART
 *
RefP¬t™iÚL1
 = &
RefP¬t™iÚL0
[16];

634 iàĞ
aio_pBlock
 -> 
MÙiÚP»dL1
 [
mbP¬tIdx
] == 1){

635 
»f_šdex
 = 
RefP¬t™iÚL1
 [
mbP¬tIdx
 << 3] . 
RefIndex
;

636 iàĞ!
N®
 -> 
nÚ_dŸdic
){

637 
šdex_mv
 = 
RefP¬t™iÚL1
 [
mbP¬tIdx
 << 3] . 
MvIndex
;

638 
	`S‘IÁ”P¬am
(
N®
, &
mvL0
[0], &
»f
, 
aio_pBlock
 -> 
MvdL1
[
mbP¬tIdx
 << 2], &
mv_bas_l1
[
šdex_mv
], &
»f_bas_l1
[
»f_šdex
]);

641 
»f
 = 
»f_bas_l1
[
»f_šdex
];

642 
mvL0
[0] = 
MvCache_l1
 [
šdex
][0] + 
aio_pBlock
 -> 
MvdL1
[
mbP¬tIdx
 << 2][0];

643 
mvL0
[1] = 
MvCache_l1
 [
šdex
][1] + 
aio_pBlock
 -> 
MvdL1
[
mbP¬tIdx
 << 2][1];

646 
»f
 = 
aio_pBlock
 -> 
RefIdxL1
 [
mbP¬tIdx
];

647 
	`mÙiÚ_veùÜ_16x8
(
MvCache_l1
, 
aio_pBlock
 -> 
MvdL1
[
mbP¬tIdx
 << 2], 
RefCache_l1
, 
mvL0
,‡io_pBlock -> 
RefIdxL1
[mbP¬tIdx], 
šdex
);

650 
	`FlRefIdx
(
»f
, &
RefCache_l1
 [
šdex
], 2);

651 
	`FlMÙiÚVeùÜ
(
mvL0
, &
MvCache_l1
 [
šdex
], 2);

655 iàĞ
N®
 -> 
PicToDi¥Ïy
 ){

657 
	`Sam¶eIÁ”pŞ©iÚMaš8x8
(
DpbLuma
, 
DpbCb
, 
DpbCr
, 
image_l0
, 
image_Cb_l0
, 
image_Cr_l0
, 
MvCache_l0
, 
RefCache_l0
,

658 
x
, 
y
, 
PicWidthInPix
, 
PicHeightInPix
, 
RefPicLi¡L0
, 
veùÜs
 -> 
PŒ_š‹½Ş_8x8
);

661 
	`Sam¶eIÁ”pŞ©iÚMaš8x8
(
DpbLuma
, 
DpbCb
, 
DpbCr
, 
image_l1
, 
image_Cb_l1
, 
image_Cr_l1
, 
MvCache_l1
, 
RefCache_l1
,

662 
x
, 
y
, 
PicWidthInPix
, 
PicHeightInPix
, 
RefPicLi¡L1
, 
veùÜs
 -> 
PŒ_š‹½Ş_8x8
);

665 
	`£t_image_8x8
(
image
, 
image_Cb
, 
image_Cr
, 
image_l0
, 
image_l1
, 
image_Cb_l0
, 
image_Cb_l1
, 
image_Cr_l0
, 
image_Cr_l1
,

666 
RefCache_l0
, 
RefCache_l1
, 
PicWidthInPix
);

668 
	}
}

678 
	$B_svc_Sk
(
MvCache_l0
 [][2], 
MvCache_l1
 [][2], *
RefCache_l0
, *
RefCache_l1
,

679 cÚ¡ 
RESIDU
 *
Cu¼Residu
, cÚ¡ 
DATA
 *
aio_pBlock
, 
Sub_B_svc
 
aio_tdecode_sub
[],

680 *
DpbLuma
, *
DpbCb
, *
DpbCr
,

681 *
image
, *
image_Cb
, *
image_Cr
,

682 cÚ¡ 
x
, cÚ¡ 
y
, cÚ¡ 
PicWidthInPix
, cÚ¡ 
PicHeightInPix
,

683 cÚ¡ 
NAL
 *
N®
, 
LIST_MMO
 *
RefPicLi¡L0
, LIST_MMO *
RefPicLi¡L1
, *
mv_bas_l0
, *
mv_bas_l1
,

684 *
»f_bas_l0
, *
»f_bas_l1
, cÚ¡ 
STRUCT_PF
 *
veùÜs
, 
REFPART
 
RefP¬t™iÚL0
[16])

689 
mvL0
 [2];

690 
mvL1
 [2];

691 
image_l0
[256];

692 
image_l1
[256];

693 
image_Cb_l0
[64];

694 
image_Cb_l1
[64];

695 
image_Cr_l0
[64];

696 
image_Cr_l1
[64];

699 
Ref0
 = 
	`SvcSkMÙiÚVeùÜ
(
MvCache_l0
, 
aio_pBlock
 -> 
MvdL0
[0], 
RefCache_l0
, 
mvL0
, 12, 4);

700 
Ref1
 = 
	`SvcSkMÙiÚVeùÜ
(
MvCache_l1
, 
aio_pBlock
 -> 
MvdL1
[0], 
RefCache_l1
, 
mvL1
, 12, 4);

702 ià(
Ref0
 =ğ
LIST_NOT_USED
 && 
Ref1
 == LIST_NOT_USED){

703 
Ref0
 = 
Ref1
 = 0;

706 
	`FlRefIdx
(
Ref0
, &
RefCache_l0
 [12], 3);

707 
	`FlRefIdx
(
Ref1
, &
RefCache_l1
 [12], 3);

708 
	`FlMÙiÚVeùÜ
(
mvL0
, &
MvCache_l0
 [12], 3);

709 
	`FlMÙiÚVeùÜ
(
mvL1
, &
MvCache_l1
 [12], 3);

712 iàĞ
N®
 -> 
PicToDi¥Ïy
 ){

714 
	`Sam¶eIÁ”pŞ©iÚMaš8x8
(
DpbLuma
, 
DpbCb
, 
DpbCr
, 
image_l0
, 
image_Cb_l0
, 
image_Cr_l0
, 
MvCache_l0
,

715 
RefCache_l0
, 
x
, 
y
, 
PicWidthInPix
, 
PicHeightInPix
, 
RefPicLi¡L0
, 
veùÜs
 -> 
PŒ_š‹½Ş_8x8
);

718 
	`Sam¶eIÁ”pŞ©iÚMaš8x8
(
DpbLuma
, 
DpbCb
, 
DpbCr
, 
image_l1
, 
image_Cb_l1
, 
image_Cr_l1
, 
MvCache_l1
,

719 
RefCache_l1
, 
x
, 
y
, 
PicWidthInPix
, 
PicHeightInPix
, 
RefPicLi¡L1
, 
veùÜs
 -> 
PŒ_š‹½Ş_8x8
 );

722 
	`£t_image_8x8
(
image
, 
image_Cb
, 
image_Cr
, 
image_l0
, 
image_l1
, 
image_Cb_l0
, 
image_Cb_l1
, 
image_Cr_l0
,

723 
image_Cr_l1
, 
RefCache_l0
, 
RefCache_l1
, 
PicWidthInPix
);

725 
	}
}

	@lib_svc/Mb_B_svc.h

35 #iâdeà
MB_B_H


36 
	#MB_B_H


	)

39 
	~"svc_ty³.h
"

40 
	~"svc_d©a.h
"

46 
B_svc_š™
Ğ
B_svc
 
PŒ_decode_B
[4], 
Sub_B_svc
 
PŒ_decode_B_sub
[13]);

50 
B_svc_8x8
(
aio_tmv_ÿche_l0
 [][2], 
aio_tmv_ÿche_l1
 [][2], *
aio_Œef_ÿche_l0
,*
aio_Œef_ÿche_l1


51 , cÚ¡ 
RESIDU
 *
Cu¼Residu
, cÚ¡ 
DATA
 *
aio_pBlock
, 
Sub_B_svc
 
aio_tdecode_sub
[]

52 , *
DpbLuma
, *
DpbCb
, *
DpbCr


53 , *
image
, *
image_Cb
, *
image_Cr


54 , cÚ¡ 
x
, cÚ¡ 
y
, cÚ¡ 
PicWidthInPix
, cÚ¡ 
PicHeightInPix


55 , cÚ¡ 
NAL
 *
N®
, 
LIST_MMO
 * 
RefPicLi¡L0
, LIST_MMO * 
RefPicLi¡L1


56 , *
mv_bas_l0
, *
mv_bas_l1
, *
»f_bas_l0
, *
»f_bas_l1
, cÚ¡ 
STRUCT_PF
 *
veùÜs


57 , 
REFPART
 
RefP¬t™iÚ
[16]);

59 
B_svc_8x16
(
aio_tmv_ÿche_l0
 [][2], 
aio_tmv_ÿche_l1
 [][2], *
aio_Œef_ÿche_l0
, *
aio_Œef_ÿche_l1


60 , cÚ¡ 
RESIDU
 *
Cu¼Residu
, cÚ¡ 
DATA
 *
aio_pBlock
, 
Sub_B_svc
 
aio_tdecode_sub
[]

61 , *
DpbLuma
, *
DpbCb
, *
DpbCr


62 , *
image
, *
image_Cb
, *
image_Cr


63 , cÚ¡ 
x
, cÚ¡ 
y
, cÚ¡ 
PicWidthInPix
, cÚ¡ 
PicHeightInPix


64 , cÚ¡ 
NAL
 *
N®
, 
LIST_MMO
 * 
RefPicLi¡L0
, LIST_MMO * 
RefPicLi¡L1


65 , *
mv_bas_l0
, *
mv_bas_l1v
, *
»f_bas_l0
, *
»f_bas_l1
, cÚ¡ 
STRUCT_PF
 *
veùÜs


66 , 
REFPART
 
RefP¬t™iÚ
[16]);

68 
B_svc_16x8
(
aio_tmv_ÿche_l0
 [][2], 
aio_tmv_ÿche_l1
 [][2], *
aio_Œef_ÿche_l0
, *
aio_Œef_ÿche_l1


69 , cÚ¡ 
RESIDU
 *
Cu¼Residu
, cÚ¡ 
DATA
 *
aio_pBlock
, 
Sub_B_svc
 
aio_tdecode_sub
[]

70 , *
DpbLuma
, *
DpbCb
, *
DpbCr


71 , *
image
, *
image_Cb
, *
image_Cr


72 , cÚ¡ 
x
, cÚ¡ 
y
, cÚ¡ 
PicWidthInPix
, cÚ¡ 
PicHeightInPix


73 , cÚ¡ 
NAL
 *
N®
, 
LIST_MMO
 * 
RefPicLi¡L0
, LIST_MMO * 
RefPicLi¡L1


74 , *
mv_bas_l0
, *
mv_bas_l1
, *
»f_bas_l0
, *
»f_bas_l1
, cÚ¡ 
STRUCT_PF
 *
veùÜs


75 , 
REFPART
 
RefP¬t™iÚ
[16]);

77 
B_svc_16x16
(
aio_tmv_ÿche_l0
 [][2], 
aio_tmv_ÿche_l1
 [][2], *
aio_Œef_ÿche_l0
, *
aio_Œef_ÿche_l1


78 , cÚ¡ 
RESIDU
 *
Cu¼Residu
, cÚ¡ 
DATA
 *
aio_pBlock
, 
Sub_B_svc
 
aio_tdecode_sub
[]

79 , *
DpbLuma
, *
DpbCb
, *
DpbCr


80 , *
image
, *
image_Cb
, *
image_Cr


81 , cÚ¡ 
x
, cÚ¡ 
y
, cÚ¡ 
PicWidthInPix
, cÚ¡ 
PicHeightInPix


82 , cÚ¡ 
NAL
 *
N®
, 
LIST_MMO
 * 
RefPicLi¡L0
, LIST_MMO * 
RefPicLi¡L1


83 , *
mv_bas_l0
, *
mv_bas_l1
, *
»f_bas_l0
, *
»f_bas_l1
, cÚ¡ 
STRUCT_PF
 *
veùÜs


84 , 
REFPART
 
RefP¬t™iÚ
[16]);

86 
B_svc_Sk
(
aio_tmv_ÿche_l0
 [][2], 
aio_tmv_ÿche_l1
 [][2], *
aio_Œef_ÿche_l0
, *
aio_Œef_ÿche_l1


87 , cÚ¡ 
RESIDU
 *
Cu¼Residu
, cÚ¡ 
DATA
 *
aio_pBlock
, 
Sub_B_svc
 
aio_tdecode_sub
[]

88 , *
DpbLuma
, *
DpbCb
, *
DpbCr


89 , *
image
, *
image_Cb
, *
image_Cr


90 , cÚ¡ 
x
, cÚ¡ 
y
, cÚ¡ 
PicWidthInPix
, cÚ¡ 
PicHeightInPix


91 , cÚ¡ 
NAL
 *
N®
, 
LIST_MMO
 * 
RefPicLi¡L0
, LIST_MMO * 
RefPicLi¡L1


92 , *
mv_bas_l0
, *
mv_bas_l1
, *
»f_bas_l0
, *
»f_bas_l1
, cÚ¡ 
STRUCT_PF
 *
veùÜs


93 , 
REFPART
 
RefP¬t™iÚ
[16]);

95 
Sub_B_svc_4x4
 ( 
aio_tmv_ÿche_l0
 [][2], 
aio_tmv_ÿche_l1
 [][2], *
aio_Œef_ÿche_l0
, *
aio_Œef_ÿche_l1


96 , cÚ¡ 
DATA
 *
aio_pBlock
, 
mbP¬tIdx
, 
SubMbTy³


97 , *
mv_bas_l0
, *
mv_bas_l1
, *
»f_bas_l0
, *
»f_bas_l1


98 , cÚ¡ 
NAL
 *
N®
, 
REFPART
 
RefP¬t™iÚ
[16]);

101 
Sub_B_svc_4x8
 ( 
aio_tmv_ÿche_l0
 [][2], 
aio_tmv_ÿche_l1
 [][2], *
aio_Œef_ÿche_l0
, *
aio_Œef_ÿche_l1


102 , cÚ¡ 
DATA
 *
aio_pBlock
, 
mbP¬tIdx
, 
SubMbTy³


103 , *
mv_bas_l0
, *
mv_bas_l1
, *
»f_bas_l0
, *
»f_bas_l1


104 , cÚ¡ 
NAL
 *
N®
, 
REFPART
 
RefP¬t™iÚ
[16]);

106 
Sub_B_svc_8x4
 ( 
aio_tmv_ÿche_l0
 [][2], 
aio_tmv_ÿche_l1
 [][2], *
aio_Œef_ÿche_l0
, *
aio_Œef_ÿche_l1


107 , cÚ¡ 
DATA
 *
aio_pBlock
, 
mbP¬tIdx
, 
SubMbTy³


108 , *
mv_bas_l0
, *
mv_bas_l1
, *
»f_bas_l0
, *
»f_bas_l1


109 , cÚ¡ 
NAL
 *
N®
, 
REFPART
 
RefP¬t™iÚ
[16]);

111 
Sub_B_svc_8x8
 ( 
aio_tmv_ÿche_l0
 [][2], 
aio_tmv_ÿche_l1
 [][2], *
aio_Œef_ÿche_l0
, *
aio_Œef_ÿche_l1


112 , cÚ¡ 
DATA
 *
aio_pBlock
, 
mbP¬tIdx
, 
SubMbTy³


113 , *
mv_bas_l0
, *
mv_bas_l1
, *
»f_bas_l0
, *
»f_bas_l1


114 , cÚ¡ 
NAL
 *
N®
, 
REFPART
 
RefP¬t™iÚ
[16]);

	@lib_svc/Mb_I_svc.c

37 
	~"ty³.h
"

38 
	~"symbŞ.h
"

39 
	~"decode_mb_I.h
"

40 
	~"decode_mb_P.h
"

41 
	~"Ãighbourhood.h
"

45 
	~"svc_ty³.h
"

46 
	~"svc_d©a.h
"

47 
	~"I_BL.h
"

48 
	~"Mb_I_svc.h
"

49 
	~"BL_»sidu®.h
"

50 
	~"CoÜdÚ©es.h
"

51 
	~"Residu®Proûssšg.h
"

52 
	~"IÁ”Lay”P»diùiÚ.h
"

53 
	~"CÛffLev–P»diùiÚ.h
"

61 
	$MbISÄ
 (cÚ¡ 
PPS
 *
Pps
, cÚ¡ 
NAL
* 
N®
, cÚ¡ 
W_TABLES
 *
Quªtif
, cÚ¡ 
STRUCT_PF
 *
Ba£lšeVeùÜs
,

62 
RESIDU
 *
Cu¼Residu
, RESIDU *
Ba£Residu
, cÚ¡ 
PicWidthInPix
,

63 *
Y
, *
U
, *
V
,

64 *
Ba£Y
, *
Ba£U
, *
Ba£V
)

68 ià(
	`IS_I
(
Cu¼Residu
 -> 
MbTy³
)){

70 
	`decode_MB_I
(
Y
, 
U
, 
V
, 
Pps
, 
Cu¼Residu
, 
PicWidthInPix
, 
Quªtif
, 
Ba£lšeVeùÜs
);

71 }ià(
N®
 -> 
TCÛffP»diùiÚ
){

73 
	`DecodeITCÛff
(
Cu¼Residu
, 
Ba£Residu
, 
Pps
, 
PicWidthInPix
, 
Quªtif
, 
Ba£lšeVeùÜs
, 
Y
, 
U
, 
V
);

74 }ià(
N®
 -> 
SCÛffP»diùiÚ
){

75 ià((
Cu¼Residu
 -> 
Cbp
 & 0x0f) == 0){

78 
Cu¼Residu
 -> 
T¿nsfÜm8x8
 = 
Ba£Residu
 -> Transform8x8;

79 ià(!
Cu¼Residu
 -> 
Cbp
){

80 
Cu¼Residu
 -> 
Qp
 = 
Ba£Residu
 -> Qp;

85 
	`G‘Ba£Sam¶e
(
Y
, 
U
, 
V
, 
Ba£Y
, 
Ba£U
, 
Ba£V
, 
PicWidthInPix
);

88 iàĞ
	`IS_BL
 (
Ba£Residu
 -> 
MbTy³
)){

92 
	`SCÛffResidu®AddPic
(
N®
, 
Cu¼Residu
, 
Ba£Residu
, 
Pps
, 
PicWidthInPix
, 
Quªtif
, 
Y
, 
U
, 
V
);

93 }ià(
N®
 -> 
PicToDecode
){

95 
	`Compu‹Residu®
(
Pps
, 
Cu¼Residu
, 
PicWidthInPix
, 
Y
, 
U
, 
V
, 
Quªtif
);

97 ifĞ
Cu¼Residu
 -> 
Cbp
){

99 
	`ResÿËCu¼’tCÛff
(
Cu¼Residu
, 
Ba£Residu
, 
Pps
, 
Quªtif
, 
N®
 -> 
S·tŸlSÿÏb™y
);

103 
	}
}

111 
	$MbIS·tŸl
 (cÚ¡ 
NAL
 *
N®
, cÚ¡ 
SPS
 *
Sps
, cÚ¡ 
PPS
 *
Pps
, cÚ¡ 
PicWidthInPix
, cÚ¡ 
W_TABLES
 *
Quªtif
,

112 
x
, 
y
, 
DATA
 *
Cu¼Block
, 
RESIDU
 *
Cu¼Residu
, RESIDU *
Ba£Residu
,

113 *
Y
, *
U
, *
V
,

114 *
Ba£Y
, *
Ba£U
, *
Ba£V
)

119 
x_ba£
, 
y_ba£
, 
x_mbP¬tIdx
, 
y_mbP¬tIdx
;

122 
Ba£MbAddr
 = 
Cu¼Block
 -> 
MbBa£Addr
;

123 
	`G‘Ba£MbCoÜd
(
Cu¼Block
, &
x_ba£
, &
y_ba£
, &
x_mbP¬tIdx
, &
y_mbP¬tIdx
);

126 
	`MbIPad
(
N®
, 
Pps
, 
Sps
, 
Ba£MbAddr
, 
x
 << 4, 
y
 << 4, 
x_ba£
, 
y_ba£
, 
x_mbP¬tIdx
, 
y_mbP¬tIdx
, 
Ba£Residu
, 
Ba£Y
, 
Ba£U
, 
Ba£V
, 
Y
, 
U
, 
V
);

129 
	`Compu‹Cu¼’tResidu®
(
N®
, 
Cu¼Residu
, 
Ba£Residu
, 
Pps
, 
Quªtif
, 
PicWidthInPix
, 
Y
, 
U
, 
V
);

130 
	}
}

136 
	$MbISVCDecodšg
(cÚ¡ 
SPS
 *
Sps
, cÚ¡ 
PPS
 *
Pps
, cÚ¡ 
NAL
* 
N®
, cÚ¡ 
W_TABLES
 *
Quªtif
, cÚ¡ 
STRUCT_PF
 *
Ba£lšeVeùÜs
,

137 
RESIDU
 *
Cu¼Residu
, RESIDU *
Ba£Residu
, 
DATA
 *
Block
,

138 cÚ¡ 
PicWidthInPix
, 
iMb_x
, 
iMb_y
,

139 *
Y
, *
U
, *
V
,

140 *
Ba£Y
, *
Ba£U
, *
Ba£V
)

142 if(!
N®
 -> 
S·tŸlSÿÏb™y
 || 
	`IS_I
(
Cu¼Residu
 -> 
MbTy³
)){

144 cÚ¡ 
iMb_xy
 = 
iMb_x
 + 
iMb_y
 * ((
PicWidthInPix
 - 32) >> 4);

145 
	`MbISÄ
(
Pps
, 
N®
, 
Quªtif
, 
Ba£lšeVeùÜs
, 
Cu¼Residu
, &
Ba£Residu
[
iMb_xy
], 
PicWidthInPix
,

146 
Y
, 
U
, 
V
, &
Ba£Y
[((
iMb_x
 + (
iMb_y
 * 
PicWidthInPix
)) << 4)],

147 &
Ba£U
[((
iMb_x
 + (
iMb_y
 * 
PicWidthInPix
 >> 1)) << 3)],

148 &
Ba£V
[((
iMb_x
 + (
iMb_y
 * 
PicWidthInPix
 >> 1)) << 3)]);

151 
	`MbIS·tŸl
 (
N®
, 
Sps
, 
Pps
, 
PicWidthInPix
, 
Quªtif
, 
iMb_x
, 
iMb_y
, 
Block
, 
Cu¼Residu
, 
Ba£Residu
,

152 
Y
, 
U
, 
V
, 
Ba£Y
, 
Ba£U
, 
Ba£V
);

154 
	}
}

	@lib_svc/Mb_I_svc.h

35 #iâdeà
MB_I_SVC_H


36 
	#MB_I_SVC_H


	)

39 
	~"ty³.h
"

43 
	~"svc_ty³.h
"

45 
MbISÄ
 (cÚ¡ 
PPS
 *
Pps
, cÚ¡ 
NAL
* 
N®
, cÚ¡ 
W_TABLES
 *
Quªtif
, cÚ¡ 
STRUCT_PF
 *
Ba£lšeVeùÜs
,

46 
RESIDU
 *
Cu¼Residu
, RESIDU *
Ba£Residu
, cÚ¡ 
PicWidthInMbs
,

47 *
Y
, *
U
, *
V
,

48 *
Ba£Y
, *
Ba£U
, *
Ba£V
);

51 
MbIS·tŸl
 (cÚ¡ 
NAL
 *
N®
, cÚ¡ 
SPS
 *
Sps
, cÚ¡ 
PPS
 *
Pps
, cÚ¡ 
PicWidthInPix
, cÚ¡ 
W_TABLES
 *
quªtif
,

52 
x
, 
y
, 
DATA
 *
Cu¼Block
, 
RESIDU
 *
Cu¼Residu
, RESIDU *
Ba£Residu
,

53 *
Y
, *
U
, *
V
,

54 *
Ba£Y
, *
Ba£U
, *
Ba£V
);

56 
MbISVCDecodšg
(cÚ¡ 
SPS
 *
Sps
, cÚ¡ 
PPS
 *
Pps
, cÚ¡ 
NAL
* 
N®
, cÚ¡ 
W_TABLES
 *
Quªtif
, cÚ¡ 
STRUCT_PF
 *
Ba£lšeVeùÜs
,

57 
RESIDU
 *
Cu¼Residu
, RESIDU *
Ba£Residu
, 
DATA
 *
Block
,

58 cÚ¡ 
PicWidthInPix
, 
iMb_x
, 
iMb_y
,

59 *
Y
, *
U
, *
V
,

60 *
Ba£Y
, *
Ba£U
, *
Ba£V
);

	@lib_svc/Mb_P_svc.c

35 
	~"ty³.h
"

36 
	~"symbŞ.h
"

37 
	~"d©a.h
"

38 
	~"ş.h
"

39 
	~"»fl.h
"

40 
	~"mÙiÚ_veùÜ.h
"

41 
	~"š‹½Ş©iÚ.h
"

42 
	~"Ãighbourhood.h
"

43 
	~"š‹½Ş©iÚ_8x8.h
"

46 
	~"Mb_P_svc.h
"

47 
	~"Mb_B_svc.h
"

48 
	~"mÙiÚ_veùÜ_svc.h
"

49 
	~"¦iû_d©a_I_svc.h
"

50 
	~"fl_ÿches_svc.h
"

51 
	~"svc_Ãighbourhood.h
"

55 
	$š™_svc_veùÜs
(
SVC_VECTORS
 *
svc
)

57 
svc
 -> 
P_veùÜs
 [0] = 
P_svc_8x8
 ;

58 
svc
 -> 
P_veùÜs
 [1] = 
P_svc_8x16
 ;

59 
svc
 -> 
P_veùÜs
 [2] = 
P_svc_16x8
 ;

60 
svc
 -> 
P_veùÜs
 [3] = 
P_svc_16x16
 ;

61 
svc
 -> 
P_veùÜs
 [4] = 
P_svc_sk
;

62 
svc
 -> 
P_sub_veùÜs
 [0] = 
Sub_P_svc_8x8
;

63 
svc
 -> 
P_sub_veùÜs
 [1] = 
Sub_P_svc_8x4
;

64 
svc
 -> 
P_sub_veùÜs
 [2] = 
Sub_P_svc_4x8
;

65 
svc
 -> 
P_sub_veùÜs
 [3] = 
Sub_P_svc_4x4
;

68 
svc
 -> 
B_veùÜs
 [0] = 
B_svc_8x8
 ;

69 
svc
 -> 
B_veùÜs
 [1] = 
B_svc_8x16
 ;

70 
svc
 -> 
B_veùÜs
 [2] = 
B_svc_16x8
 ;

71 
svc
 -> 
B_veùÜs
 [3] = 
B_svc_16x16
 ;

72 
svc
 -> 
B_veùÜs
 [4] = 
B_svc_Sk
 ;

74 
svc
 -> 
B_sub_veùÜs
 [0] = 
Sub_B_svc_4x4
;

75 
svc
 -> 
B_sub_veùÜs
 [1] = 
Sub_B_svc_8x8
;

76 
svc
 -> 
B_sub_veùÜs
 [2] = 
Sub_B_svc_8x8
;

77 
svc
 -> 
B_sub_veùÜs
 [3] = 
Sub_B_svc_8x8
;

78 
svc
 -> 
B_sub_veùÜs
 [4] = 
Sub_B_svc_8x4
;

79 
svc
 -> 
B_sub_veùÜs
 [5] = 
Sub_B_svc_4x8
;

80 
svc
 -> 
B_sub_veùÜs
 [6] = 
Sub_B_svc_8x4
;

81 
svc
 -> 
B_sub_veùÜs
 [7] = 
Sub_B_svc_4x8
;

82 
svc
 -> 
B_sub_veùÜs
 [8] = 
Sub_B_svc_8x4
;

83 
svc
 -> 
B_sub_veùÜs
 [9] = 
Sub_B_svc_4x8
;

84 
svc
 -> 
B_sub_veùÜs
 [10] = 
Sub_B_svc_4x4
;

85 
svc
 -> 
B_sub_veùÜs
 [11] = 
Sub_B_svc_4x4
;

86 
svc
 -> 
B_sub_veùÜs
 [12] = 
Sub_B_svc_4x4
;

87 
	}
}

94 
	$Sub_P_svc_8x4
(
mv_ÿche
 [][2], *
»f_ÿche
, cÚ¡ 
DATA
 *
Block
, 
mbP¬tIdx
,

95 *
mv_l0
, *
»f_bas_l0
, cÚ¡ 
NAL
 *
N®
, 
REFPART
 
RefP¬t™iÚ
[16]){

98 
mvL0
 [2];

99 
šdex
 = 
	`SCAN8
((
mbP¬tIdx
 << 2)) ;

101 iàĞ
Block
 -> 
MÙiÚP»dL0
 [
mbP¬tIdx
] == 1){

102 
»f_šdex_0
 = 
RefP¬t™iÚ
 [0] . 
RefIndex
;

103 
»f_šdex_1
 = 
RefP¬t™iÚ
 [4] . 
RefIndex
;

104 ià(!
N®
 -> 
nÚ_dŸdic
){

106 
šdex_mv
 = 
RefP¬t™iÚ
 [0] . 
MvIndex
;

107 
	`S‘IÁ”P¬amHÜi
(
N®
, &
mv_ÿche
[
šdex
], &
»f_ÿche
[šdex], 
Block
 -> 
MvdL0
[
mbP¬tIdx
 << 2], &
mv_l0
[
šdex_mv
], &
»f_bas_l0
[
»f_šdex_0
]);

110 
šdex_mv
 = 
RefP¬t™iÚ
 [4] . 
MvIndex
;

111 
	`S‘IÁ”P¬amHÜi
(
N®
, &
mv_ÿche
[
šdex
 + 8], &
»f_ÿche
[šdex + 8], 
Block
 -> 
MvdL0
[(
mbP¬tIdx
 << 2è+ 1], &
mv_l0
[
šdex_mv
], &
»f_bas_l0
[
»f_šdex_1
]);

115 
»f_ÿche
[
šdex
] =„ef_ÿche[šdex + 1] = 
»f_bas_l0
[
»f_šdex_0
];

116 
mv_ÿche
 [
šdex
][0] = mv_ÿch[šdex + 1][0] = mv_ÿch[šdex][0] + 
Block
 -> 
MvdL0
[
mbP¬tIdx
 << 2][0];

117 
mv_ÿche
 [
šdex
][1] = mv_ÿch[šdex + 1][1] = mv_ÿch[šdex][1] + 
Block
 -> 
MvdL0
[
mbP¬tIdx
 << 2][1];

119 
»f_ÿche
[
šdex
 + 8] =„ef_ÿche[šdex + 9] = 
»f_bas_l0
[
»f_šdex_1
];

120 
mv_ÿche
 [
šdex
 + 8][0] = mv_ÿch[šdex + 9][0] = mv_ÿch[šdex + 8] [0] + 
Block
 -> 
MvdL0
[(
mbP¬tIdx
 << 2) + 1][0];

121 
mv_ÿche
 [
šdex
 + 8][1] = mv_ÿch[šdex + 9][1] = mv_ÿch[šdex + 8] [1] + 
Block
 -> 
MvdL0
[(
mbP¬tIdx
 << 2) + 1][1];

125 
»f_ÿche
 [
šdex
] =„ef_cache [index + 1] =

126 
»f_ÿche
 [
šdex
 + 8] =„ef_ÿch[šdex + 9] = 
Block
 -> 
RefIdxL0
 [
mbP¬tIdx
];

129 
	`mÙiÚ_veùÜ
(
mv_ÿche
, 
Block
 -> 
MvdL0
[(
mbP¬tIdx
 << 2è], 
»f_ÿche
, 
mvL0
, Block -> 
RefIdxL0
[mbP¬tIdx], 
šdex
, 2);

130 
mv_ÿche
 [
šdex
][0] = mv_ÿch[šdex + 1][0] = 
mvL0
 [0];

131 
mv_ÿche
 [
šdex
][1] = mv_ÿch[šdex + 1][1] = 
mvL0
 [1];

134 
	`mÙiÚ_veùÜ
Ğ
mv_ÿche
, 
Block
 -> 
MvdL0
[(
mbP¬tIdx
 << 2è+ 1], 
»f_ÿche
, 
mvL0
, Block -> 
RefIdxL0
[mbP¬tIdx], 
šdex
+8, 2);

135 
mv_ÿche
 [
šdex
 + 8][0] = mv_ÿch[šdex + 9][0] = 
mvL0
 [0];

136 
mv_ÿche
 [
šdex
 + 8][1] = mv_ÿch[šdex + 9][1] = 
mvL0
 [1];

139 
	}
}

146 
	$Sub_P_svc_4x8
(
mv_ÿche
 [][2], *
»f_ÿche
, cÚ¡ 
DATA
 * 
Block
, 
mbP¬tIdx
,

147 *
mv_l0
, *
»f_bas_l0
,cÚ¡ 
NAL
 *
N®
, 
REFPART
 
RefP¬t™iÚ
[16]){

150 
mvL0
 [2];

151 
šdex
 = 
	`SCAN8
((
mbP¬tIdx
 << 2)) ;

153 iàĞ
Block
 -> 
MÙiÚP»dL0
 [
mbP¬tIdx
] == 1){

154 
»f_šdex_0
 = 
RefP¬t™iÚ
 [0] . 
RefIndex
;

155 
»f_šdex_1
 = 
RefP¬t™iÚ
 [1] . 
RefIndex
;

156 iàĞ!
N®
 -> 
nÚ_dŸdic
){

158 
šdex_mv
 = 
RefP¬t™iÚ
 [0] . 
MvIndex
;

159 
	`S‘IÁ”P¬amV”t
(
N®
, &
mv_ÿche
[
šdex
], &
»f_ÿche
[šdex], 
Block
 -> 
MvdL0
[
mbP¬tIdx
 << 2], &
mv_l0
[
šdex_mv
], &
»f_bas_l0
[
»f_šdex_0
]);

162 
šdex_mv
 = 
RefP¬t™iÚ
 [1] . 
MvIndex
;

163 
	`S‘IÁ”P¬amV”t
(
N®
, &
mv_ÿche
[
šdex
 + 1], &
»f_ÿche
[šdex + 1], 
Block
 -> 
MvdL0
[(
mbP¬tIdx
 << 2è+ 1], &
mv_l0
[
šdex_mv
], &
»f_bas_l0
[
»f_šdex_1
]);

166 
»f_ÿche
[
šdex
] =„ef_ÿche[šdex + 8] = 
»f_bas_l0
[
»f_šdex_0
];

167 
mv_ÿche
 [
šdex
][0] = mv_ÿch[šdex + 8][0] = mv_ÿch[šdex][0] + 
Block
 -> 
MvdL0
[(
mbP¬tIdx
 << 2)][0];

168 
mv_ÿche
 [
šdex
][1] = mv_ÿch[šdex + 8][1] = mv_ÿch[šdex][1] + 
Block
 -> 
MvdL0
[(
mbP¬tIdx
 << 2)][1];

171 
»f_ÿche
[
šdex
 + 1] =„ef_ÿche[šdex + 9] = 
»f_bas_l0
[
»f_šdex_1
];

172 
mv_ÿche
 [
šdex
 + 1][0] = mv_ÿch[šdex + 9][0] = mv_ÿch[šdex + 1][0] + 
Block
 -> 
MvdL0
[(
mbP¬tIdx
 << 2) + 1][0];

173 
mv_ÿche
 [
šdex
 + 1][1] = mv_ÿch[šdex + 9][1] = mv_ÿch[šdex + 1][1] + 
Block
 -> 
MvdL0
[(
mbP¬tIdx
 << 2) + 1][1];

177 
»f_ÿche
 [
šdex
] =„ef_cache [index + 1] =

178 
»f_ÿche
 [
šdex
 + 8] =„ef_ÿch[šdex + 9] = 
Block
 -> 
RefIdxL0
 [
mbP¬tIdx
];

181 
	`mÙiÚ_veùÜ
(
mv_ÿche
, 
Block
 -> 
MvdL0
[(
mbP¬tIdx
 << 2)], 
»f_ÿche
, 
mvL0
, Block -> 
RefIdxL0
[mbP¬tIdx], 
šdex
, 1);

183 
mv_ÿche
 [
šdex
][0] = mv_ÿch[šdex + 8][0] = 
mvL0
 [0];

184 
mv_ÿche
 [
šdex
][1] = mv_ÿch[šdex + 8][1] = 
mvL0
 [1];

188 
	`mÙiÚ_veùÜ
Ğ
mv_ÿche
, 
Block
 -> 
MvdL0
[(
mbP¬tIdx
 << 2è+ 1], 
»f_ÿche
, 
mvL0
, Block -> 
RefIdxL0
[mbP¬tIdx], 
šdex
 + 1, 1);

190 
mv_ÿche
 [
šdex
 + 1][0] = mv_ÿch[šdex + 9][0] = 
mvL0
 [0];

191 
mv_ÿche
 [
šdex
 + 1][1] = mv_ÿch[šdex + 9][1] = 
mvL0
 [1];

193 
	}
}

200 
	$Sub_P_svc_4x4
(
mv_ÿche
 [][2], *
»f_ÿche
, cÚ¡ 
DATA
 * 
Block
, 
mbP¬tIdx
,

201 *
mv_l0
, *
»f_bas_l0
,cÚ¡ 
NAL
 *
N®
, 
REFPART
 
RefP¬t™iÚ
[16]){

203 
šdex
 = 
	`SCAN8
((
mbP¬tIdx
 << 2));

205 iàĞ
Block
 -> 
MÙiÚP»dL0
 [
mbP¬tIdx
] == 1){

206 
»f_šdex_0
 = 
RefP¬t™iÚ
 [0] . 
RefIndex
;

207 
»f_šdex_1
 = 
RefP¬t™iÚ
 [1] . 
RefIndex
;

208 
»f_šdex_2
 = 
RefP¬t™iÚ
 [4] . 
RefIndex
;

209 
»f_šdex_3
 = 
RefP¬t™iÚ
 [5] . 
RefIndex
;

210 iàĞ!
N®
 -> 
nÚ_dŸdic
){

212 
šdex_mv
 = 
RefP¬t™iÚ
 [0] . 
MvIndex
;

213 
	`S‘IÁ”P¬am
(
N®
, 
mv_ÿche
[
šdex
], &
»f_ÿche
[šdex], 
Block
 -> 
MvdL0
[
mbP¬tIdx
 << 2], &
mv_l0
[
šdex_mv
], &
»f_bas_l0
[
»f_šdex_0
]);

216 
šdex_mv
 = 
RefP¬t™iÚ
 [1] . 
MvIndex
;

217 
	`S‘IÁ”P¬am
(
N®
, 
mv_ÿche
[
šdex
 + 1], &
»f_ÿche
[šdex + 1], 
Block
 -> 
MvdL0
[(
mbP¬tIdx
 << 2è+ 1], &
mv_l0
[
šdex_mv
], &
»f_bas_l0
[
»f_šdex_1
]);

220 
šdex_mv
 = 
RefP¬t™iÚ
 [4] . 
MvIndex
;

221 
	`S‘IÁ”P¬am
(
N®
, 
mv_ÿche
[
šdex
 + 8], &
»f_ÿche
[šdex + 8], 
Block
 -> 
MvdL0
[(
mbP¬tIdx
 << 2è+ 2], &
mv_l0
[
šdex_mv
], &
»f_bas_l0
[
»f_šdex_2
]);

224 
šdex_mv
 = 
RefP¬t™iÚ
 [5] . 
MvIndex
;

225 
	`S‘IÁ”P¬am
(
N®
, 
mv_ÿche
[
šdex
 + 9], &
»f_ÿche
[šdex + 9], 
Block
 -> 
MvdL0
[(
mbP¬tIdx
 << 2è+ 3], &
mv_l0
[
šdex_mv
], &
»f_bas_l0
[
»f_šdex_3
]);

228 
»f_ÿche
[
šdex
] = 
»f_bas_l0
[
»f_šdex_0
];

229 
mv_ÿche
[
šdex
][0] +ğ
Block
 -> 
MvdL0
[
mbP¬tIdx
 << 2][0];

230 
mv_ÿche
[
šdex
][1] +ğ
Block
 -> 
MvdL0
[
mbP¬tIdx
 << 2][1];

232 
»f_ÿche
[
šdex
 + 1] = 
»f_bas_l0
[
»f_šdex_1
];

233 
mv_ÿche
[
šdex
 + 1][0] +ğ
Block
 -> 
MvdL0
[(
mbP¬tIdx
 << 2) + 1][0];

234 
mv_ÿche
[
šdex
 + 1][1] +ğ
Block
 -> 
MvdL0
[(
mbP¬tIdx
 << 2) + 1][1];

236 
»f_ÿche
[
šdex
 + 8] = 
»f_bas_l0
[
»f_šdex_2
];

237 
mv_ÿche
[
šdex
 + 8][0] +ğ
Block
 -> 
MvdL0
[(
mbP¬tIdx
 << 2) + 2][0];

238 
mv_ÿche
[
šdex
 + 8][1] +ğ
Block
 -> 
MvdL0
[(
mbP¬tIdx
 << 2) + 2][1];

240 
»f_ÿche
[
šdex
 + 9] = 
»f_bas_l0
[
»f_šdex_3
];

241 
mv_ÿche
[
šdex
 + 9][0] +ğ
Block
 -> 
MvdL0
[(
mbP¬tIdx
 << 2) + 3][0];

242 
mv_ÿche
[
šdex
 + 9][1] +ğ
Block
 -> 
MvdL0
[(
mbP¬tIdx
 << 2) + 3][1];

245 
mvL0
[2];

246 
»f_ÿche
 [
šdex
] =„ef_cache [index + 1] =

247 
»f_ÿche
 [
šdex
 + 8] =„ef_ÿch[šdex + 9] = 
Block
 -> 
RefIdxL0
 [
mbP¬tIdx
];

250 
	`mÙiÚ_veùÜ
Ğ
mv_ÿche
,
Block
 -> 
MvdL0
[(
mbP¬tIdx
 << 2)], 
»f_ÿche
, 
mvL0
, Block -> 
RefIdxL0
[mbP¬tIdx] , 
šdex
, 1);

251 
mv_ÿche
 [
šdex
][0] = 
mvL0
 [0];

252 
mv_ÿche
 [
šdex
][1] = 
mvL0
 [1];

255 
šdex
 += 1;

256 
	`mÙiÚ_veùÜ
(
mv_ÿche
,
Block
 -> 
MvdL0
[(
mbP¬tIdx
 << 2è+ 1], 
»f_ÿche
, 
mvL0
, Block -> 
RefIdxL0
[mbP¬tIdx] , 
šdex
, 1);

257 
mv_ÿche
 [
šdex
][0] = 
mvL0
 [0];

258 
mv_ÿche
 [
šdex
][1] = 
mvL0
 [1];

261 
šdex
 += 7;

262 
	`mÙiÚ_veùÜ
Ğ
mv_ÿche
,
Block
 -> 
MvdL0
[(
mbP¬tIdx
 << 2è+ 2], 
»f_ÿche
, 
mvL0
, Block -> 
RefIdxL0
[mbP¬tIdx], 
šdex
, 1);

263 
mv_ÿche
 [
šdex
][0] = 
mvL0
 [0];

264 
mv_ÿche
 [
šdex
][1] = 
mvL0
 [1];

267 
šdex
 += 1;

268 
	`mÙiÚ_veùÜ
Ğ
mv_ÿche
,
Block
 -> 
MvdL0
[(
mbP¬tIdx
 << 2è+ 3], 
»f_ÿche
, 
mvL0
, Block -> 
RefIdxL0
[mbP¬tIdx] , 
šdex
, 1);

269 
mv_ÿche
 [
šdex
][0] = 
mvL0
 [0];

270 
mv_ÿche
 [
šdex
][1] = 
mvL0
 [1];

272 
	}
}

278 
	$Sub_P_svc_8x8
(
mv_ÿche
 [][2], *
»f_ÿche
, cÚ¡ 
DATA
 * 
Block
, 
mbP¬tIdx
,

279 *
mv_l0
, *
»f_bas_l0
,cÚ¡ 
NAL
 *
N®
, 
REFPART
 
RefP¬t™iÚ
[16]){

281 
mvL0
 [2];

282 
šdex
 = 
	`SCAN8
(
mbP¬tIdx
 << 2);

284 iàĞ
Block
 -> 
MÙiÚP»dL0
 [
mbP¬tIdx
] == 1){

285 
»f_šdex
 = 
RefP¬t™iÚ
 [0] . 
RefIndex
;

286 iàĞ!
N®
 -> 
nÚ_dŸdic
 ){

287 
šdex_mv
 = 
RefP¬t™iÚ
 [0] . 
MvIndex
;

288 
	`S‘IÁ”P¬am
(
N®
, &
mvL0
[0], &
»f_ÿche
[
šdex
], 
Block
 -> 
MvdL0
[
mbP¬tIdx
 << 2], &
mv_l0
[
šdex_mv
], &
»f_bas_l0
[
»f_šdex
]);

290 
»f_ÿche
[
šdex
] = 
»f_bas_l0
[
»f_šdex
];

291 
mvL0
[0] = 
mv_ÿche
 [
šdex
][0] + 
Block
 -> 
MvdL0
[
mbP¬tIdx
 << 2][0];

292 
mvL0
[1] = 
mv_ÿche
 [
šdex
][1] + 
Block
 -> 
MvdL0
[
mbP¬tIdx
 << 2][1];

295 
»f_ÿche
 [
šdex
] = 
Block
 -> 
RefIdxL0
 [
mbP¬tIdx
];

296 
	`mÙiÚ_veùÜ
Ğ
mv_ÿche
, 
Block
 -> 
MvdL0
[
mbP¬tIdx
 << 2], 
»f_ÿche
, 
mvL0
, Block -> 
RefIdxL0
[mbP¬tIdx], 
šdex
, 2);

299 
»f_ÿche
 [
šdex
 + 1] =„ef_cache [index + 8] =„ef_cache [index + 9] =„ef_cache [index];

300 
mv_ÿche
 [
šdex
][0] = mv_ÿch[šdex + 1][0] = mv_ÿch[šdex + 8][0] = mv_ÿch[šdex + 9][0] = 
mvL0
 [0];

301 
mv_ÿche
 [
šdex
][1] = mv_ÿch[šdex + 1][1] = mv_ÿch[šdex + 8][1] = mv_ÿch[šdex + 9][1] = 
mvL0
 [1];

302 
	}
}

310 
	$P_svc_8x8
Ğ
mv_ÿche
 [][2], *
»f_ÿche
, cÚ¡ 
RESIDU
 *
Cu¼Residu
, cÚ¡ 
DATA
 *
Block
, cÚ¡ 
Sub_P_svc
 
decode_sub
[],

311 *
DpbLuma
, *
DpbCb
, *
DpbCr
,

312 *
image
, *
image_Cb
, *
image_Cr
,

313 cÚ¡ 
x
, cÚ¡ 
y
, cÚ¡ 
PicWidthInPix
, cÚ¡ 
PicHeightInPix
,

314 cÚ¡ 
NAL
 *
N®
, 
LIST_MMO
 *
RefPicLi¡L0
, *
mv_l0
, *
»f_bas_l0
,

315 cÚ¡ 
STRUCT_PF
 *
veùÜs
, 
REFPART
 
RefP¬t™iÚ
[16])

318 
mbP¬tIdx
;

320  
mbP¬tIdx
 = 0 ; mbPartIdx < 4 ; mbPartIdx++ ) {

321 cÚ¡ 
mode
 = 
Cu¼Residu
 -> 
SubMbTy³
 [
mbP¬tIdx
];

322 
decode_sub
 [
mode
](
mv_ÿche
, 
»f_ÿche
, 
Block
, 
mbP¬tIdx
, 
mv_l0
, 
»f_bas_l0
, 
N®
, &
RefP¬t™iÚ
[((mbPartIdx & 2) << 2) + ((mbPartIdx & 1) << 1)]);

325 iàĞ
N®
 -> 
PicToDi¥Ïy
 ){

327 
	`§m¶e_š‹½Ş©iÚ
(
DpbLuma
, 
DpbCb
,
DpbCr
, 
image
, 
image_Cb
, 
image_Cr
, 
mv_ÿche
, 
»f_ÿche
, 
x
 , 
y
, 
PicWidthInPix
, 
PicHeightInPix
, 
RefPicLi¡L0
, 
veùÜs
 -> 
PŒ_š‹½Ş_4x4
);

329 
	}
}

337 
	$P_svc_8x16
 ( 
mv_ÿche
 [][2], *
»f_ÿche
, cÚ¡ 
RESIDU
 *
Cu¼Residu
, cÚ¡ 
DATA
 * 
Block
, cÚ¡ 
Sub_P_svc
 
decode_sub
[],

338 *
DpbLuma
, *
DpbCb
, *
DpbCr
,

339 *
image
, *
image_Cb
, *
image_Cr
,

340 cÚ¡ 
x
, cÚ¡ 
y
, cÚ¡ 
PicWidthInPix
, cÚ¡ 
PicHeightInPix
,

341 cÚ¡ 
NAL
 *
N®
, 
LIST_MMO
 *
RefPicLi¡L0
, *
mv_l0
, *
»f_bas_l0
,

342 cÚ¡ 
STRUCT_PF
 *
veùÜs
, 
REFPART
 
RefP¬t™iÚ
[16])

345 
mbP¬tIdx
 ;

346 
mvL0
 [2];

347 
»f
;

349  
mbP¬tIdx
 = 0 ; mbPartIdx < 2 ; mbPartIdx++ ) {

350 
šdex
 = 
	`SCAN8
(
mbP¬tIdx
 << 2) ;

352 iàĞ
Block
 -> 
MÙiÚP»dL0
[
mbP¬tIdx
] == 1){

353 
»f_šdex
 = 
RefP¬t™iÚ
 [
mbP¬tIdx
 << 1] . 
RefIndex
;

354 ià(!
N®
 -> 
nÚ_dŸdic
){

355 
šdex_mv
 = 
RefP¬t™iÚ
 [
mbP¬tIdx
 << 1] . 
MvIndex
;

356 
	`S‘IÁ”P¬am
(
N®
, &
mvL0
[0], &
»f
, 
Block
 -> 
MvdL0
[
mbP¬tIdx
 << 2], &
mv_l0
[
šdex_mv
], &
»f_bas_l0
[
»f_šdex
]);

359 
»f
 = 
»f_bas_l0
[
»f_šdex
];

360 
mvL0
[0] = 
mv_ÿche
 [
šdex
][0] + 
Block
 -> 
MvdL0
[
mbP¬tIdx
 << 2][0];

361 
mvL0
[1] = 
mv_ÿche
 [
šdex
][1] + 
Block
 -> 
MvdL0
[
mbP¬tIdx
 << 2][1];

364 
»f
 = 
Block
 -> 
RefIdxL0
 [
mbP¬tIdx
];

365 
	`mÙiÚ_veùÜ_8x16
(
mv_ÿche
, 
Block
 -> 
MvdL0
[
mbP¬tIdx
 << 2], 
»f_ÿche
, 
mvL0
, 
»f
,
šdex
);

368 
	`FlRefIdx
(
»f
, &
»f_ÿche
 [
šdex
], 1);

369 
	`FlMÙiÚVeùÜ
(
mvL0
, &
mv_ÿche
 [
šdex
], 1);

371 iàĞ
N®
 -> 
PicToDi¥Ïy
 ){

373 
	`Sam¶eIÁ”pŞ©iÚ8x8
(
DpbLuma
, 
DpbCb
, 
DpbCr
, 
image
, 
image_Cb
, 
image_Cr
, 
mv_ÿche
, 
»f_ÿche
, 
x
, 
y
, 
PicWidthInPix
, 
PicHeightInPix
, 
RefPicLi¡L0
, 
veùÜs
 -> 
PŒ_š‹½Ş_8x8
);

375 
	}
}

384 
	$P_svc_16x8
 ( 
mv_ÿche
 [][2], *
»f_ÿche
, cÚ¡ 
RESIDU
 *
Cu¼Residu
, cÚ¡ 
DATA
 *
Block
, cÚ¡ 
Sub_P_svc
 
decode_sub
[],

385 *
DpbLuma
, *
DpbCb
, *
DpbCr
,

386 *
image
, *
image_Cb
, *
image_Cr
,

387 cÚ¡ 
x
, cÚ¡ 
y
, cÚ¡ 
PicWidthInPix
, cÚ¡ 
PicHeightInPix
,

388 cÚ¡ 
NAL
 *
N®
, 
LIST_MMO
 *
RefPicLi¡L0
, *
mv_l0
, *
»f_bas_l0
,

389 cÚ¡ 
STRUCT_PF
 *
veùÜs
, 
REFPART
 
RefP¬t™iÚ
[16])

392 
mbP¬tIdx
 ;

393 
mvL0
 [2];

394 
»f
;

396  
mbP¬tIdx
 = 0 ; mbPartIdx < 2 ; mbPartIdx++ ) {

397 
šdex
 = 
	`SCAN8
(
mbP¬tIdx
 << 3) ;

399 iàĞ
Block
 -> 
MÙiÚP»dL0
[
mbP¬tIdx
] == 1){

400 
»f_šdex
 = 
RefP¬t™iÚ
 [
mbP¬tIdx
 << 3] . 
RefIndex
;

401 iàĞ!
N®
 -> 
nÚ_dŸdic
){

402 
šdex_mv
 = 
RefP¬t™iÚ
 [
mbP¬tIdx
 << 3] . 
MvIndex
;

403 
	`S‘IÁ”P¬am
(
N®
, &
mvL0
[0], &
»f
, 
Block
 -> 
MvdL0
[
mbP¬tIdx
 << 2], &
mv_l0
[
šdex_mv
], &
»f_bas_l0
[
»f_šdex
]);

405 
»f
 = 
»f_bas_l0
[
»f_šdex
];

406 
mvL0
[0] = 
mv_ÿche
 [
šdex
][0] + 
Block
 -> 
MvdL0
[
mbP¬tIdx
 << 2][0];

407 
mvL0
[1] = 
mv_ÿche
 [
šdex
][1] + 
Block
 -> 
MvdL0
[
mbP¬tIdx
 << 2][1];

410 
»f
 = 
Block
 -> 
RefIdxL0
 [
mbP¬tIdx
];

411 
	`mÙiÚ_veùÜ_16x8
(
mv_ÿche
, 
Block
 -> 
MvdL0
[
mbP¬tIdx
 << 2], 
»f_ÿche
, 
mvL0
, 
»f
,
šdex
);

415 
	`FlRefIdx
(
»f
, &
»f_ÿche
 [
šdex
], 2);

416 
	`FlMÙiÚVeùÜ
(
mvL0
 , &
mv_ÿche
 [
šdex
], 2);

418 iàĞ
N®
 -> 
PicToDi¥Ïy
 ){

420 
	`Sam¶eIÁ”pŞ©iÚ8x8
(
DpbLuma
, 
DpbCb
, 
DpbCr
, 
image
, 
image_Cb
, 
image_Cr
, 
mv_ÿche
, 
»f_ÿche
, 
x
, 
y
, 
PicWidthInPix
, 
PicHeightInPix
, 
RefPicLi¡L0
, 
veùÜs
 -> 
PŒ_š‹½Ş_8x8
);

422 
	}
}

431 
	$P_svc_16x16
 ( 
mv_ÿche
 [][2], *
»f_ÿche
, cÚ¡ 
RESIDU
 *
Cu¼Residu
, cÚ¡ 
DATA
 *
Block
, cÚ¡ 
Sub_P_svc
 
decode_sub
[],

432 *
DpbLuma
, *
DpbCb
, *
DpbCr
,

433 *
image
, *
image_Cb
, *
image_Cr
,

434 cÚ¡ 
x
, cÚ¡ 
y
, cÚ¡ 
PicWidthInPix
, cÚ¡ 
PicHeightInPix
,

435 cÚ¡ 
NAL
 *
N®
, 
LIST_MMO
 *
RefPicLi¡L0
, *
mv_l0
, *
»f_bas_l0
,

436 cÚ¡ 
STRUCT_PF
 *
veùÜs
, 
REFPART
 
RefP¬t™iÚ
[16])

440 
mvL0
 [2];

441 
»f
;

444 iàĞ
Block
 -> 
MÙiÚP»dL0
[0] == 1){

445 
»f_šdex
 = 
RefP¬t™iÚ
 [0] . 
RefIndex
;

446 iàĞ!
N®
 -> 
nÚ_dŸdic
){

447 
šdex_mv
 = 
RefP¬t™iÚ
 [0] . 
MvIndex
;

448 
	`S‘IÁ”P¬am
(
N®
, &
mvL0
[0], &
»f
, 
Block
 -> 
MvdL0
[0], &
mv_l0
[
šdex_mv
], &
»f_bas_l0
[
»f_šdex
]);

450 
»f
 = 
»f_bas_l0
[
»f_šdex
];

451 
mvL0
[0] = 
mv_ÿche
 [12][0] + 
Block
 -> 
MvdL0
[0][0];

452 
mvL0
[1] = 
mv_ÿche
 [12][1] + 
Block
 -> 
MvdL0
[0][1];

455 
»f
 = 
Block
 -> 
RefIdxL0
 [0];

456 
	`mÙiÚ_veùÜ
Ğ
mv_ÿche
, 
Block
 -> 
MvdL0
[0], 
»f_ÿche
, 
mvL0
, 
»f
, 12, 4);

459 
	`FlRefIdx
(
»f
, &
»f_ÿche
 [12], 3);

460 
	`FlMÙiÚVeùÜ
(
mvL0
, &
mv_ÿche
 [12], 3);

463 iàĞ
N®
 -> 
PicToDi¥Ïy
 ){

465 
	`Sam¶eIÁ”pŞ©iÚ8x8
(
DpbLuma
, 
DpbCb
, 
DpbCr
, 
image
, 
image_Cb
, 
image_Cr
, 
mv_ÿche
, 
»f_ÿche
, 
x
, 
y
, 
PicWidthInPix
, 
PicHeightInPix
, 
RefPicLi¡L0
, 
veùÜs
 -> 
PŒ_š‹½Ş_8x8
);

467 
	}
}

474 
	$P_svc_sk
Ğ
mv_ÿche
 [][2], *
»f_ÿche
, cÚ¡ 
RESIDU
 *
Cu¼Residu
, cÚ¡ 
DATA
 *
Block
, cÚ¡ 
Sub_P_svc
 
decode_sub
[],

475 *
DpbLuma
, *
DpbCb
, *
DpbCr
,

476 *
image
, *
image_Cb
, *
image_Cr
,

477 cÚ¡ 
x
, cÚ¡ 
y
, cÚ¡ 
PicWidthInPix
, cÚ¡ 
PicHeightInPix
,

478 cÚ¡ 
NAL
 *
N®
, 
LIST_MMO
 * 
RefPicLi¡L0
, *
mv_l0
, *
»f_bas_l0
,

479 cÚ¡ 
STRUCT_PF
 *
veùÜs
, 
REFPART
 
RefP¬t™iÚ
[16])

484 
»f
 = 
Block
 -> 
RefIdxL0
 [0];

485 
	`FlRefIdx
(
»f
, &
»f_ÿche
 [12], 3);

486 
	`mÙiÚ_veùÜ_sk
(
mv_ÿche
, 
»f_ÿche
);

487 
	`FlMÙiÚVeùÜ
(&
mv_ÿche
 [12][0], &mv_cache [12], 3);

489 iàĞ
N®
 -> 
PicToDi¥Ïy
 ){

491 
	`Sam¶eIÁ”pŞ©iÚ8x8
(
DpbLuma
, 
DpbCb
, 
DpbCr
, 
image
, 
image_Cb
, 
image_Cr
, 
mv_ÿche
, 
»f_ÿche
, 
x
, 
y
, 
PicWidthInPix
, 
PicHeightInPix
, 
RefPicLi¡L0
, 
veùÜs
 -> 
PŒ_š‹½Ş_8x8
);

493 
	}
}

	@lib_svc/Mb_P_svc.h

36 #iâdeà
MB_P_SVC_H


37 
	#MB_P_SVC_H


	)

39 
	~"svc_ty³.h
"

44 
P_svc_š™
Ğ
P_svc
 
pf
[4], 
Sub_P_svc
 
pf_sub
[4]);

46 
P_svc_8x8
Ğ
mv_ÿche
 [][2], *
»f_ÿche
, cÚ¡ 
RESIDU
 *
Cu¼Residu
, cÚ¡ 
DATA
 *
Block
, cÚ¡ 
Sub_P_svc
 
decode_sub
[]

47 , *
DpbLuma
, *
DpbCb
, *
DpbCr


48 , *
image
, *
image_Cb
, *
image_Cr


49 , cÚ¡ 
x
, cÚ¡ 
y
, cÚ¡ 
PicWidthInPix
, cÚ¡ 
PicHeightInPix


50 , cÚ¡ 
NAL
 *
N®
, 
LIST_MMO
 * 
RefPicLi¡L0


51 , *
mv_l0
, *
»f_bas_l0
, cÚ¡ 
STRUCT_PF
 *
veùÜs
, 
REFPART
 
RefP¬t™iÚ
[16]) ;

53 
P_svc_8x16
 ( 
mv_ÿche
 [][2], *
»f_ÿche
, cÚ¡ 
RESIDU
 *
Cu¼Residu
, cÚ¡ 
DATA
 *
Block
, cÚ¡ 
Sub_P_svc
 
decode_sub
[]

54 , *
DpbLuma
, *
DpbCb
, *
DpbCr


55 , *
image
, *
image_Cb
, *
image_Cr


56 , cÚ¡ 
x
, cÚ¡ 
y
, cÚ¡ 
PicWidthInPix
, cÚ¡ 
PicHeightInPix


57 , cÚ¡ 
NAL
 *
N®
, 
LIST_MMO
 * 
RefPicLi¡L0


58 , *
mv_l0
, *
»f_bas_l0
, cÚ¡ 
STRUCT_PF
 *
veùÜs
, 
REFPART
 
RefP¬t™iÚ
[16]);

60 
P_svc_16x8
 ( 
mv_ÿche
 [][2], *
»f_ÿche
, cÚ¡ 
RESIDU
 *
Cu¼Residu
, cÚ¡ 
DATA
 *
Block
, cÚ¡ 
Sub_P_svc
 
decode_sub
[]

61 , *
DpbLuma
, *
DpbCb
, *
DpbCr


62 , *
image
, *
image_Cb
, *
image_Cr


63 , cÚ¡ 
x
, cÚ¡ 
y
, cÚ¡ 
PicWidthInPix
, cÚ¡ 
PicHeightInPix


64 , cÚ¡ 
NAL
 *
N®
, 
LIST_MMO
 * 
RefPicLi¡L0


65 , *
mv_l0
, *
»f_bas_l0
, cÚ¡ 
STRUCT_PF
 *
veùÜs
, 
REFPART
 
RefP¬t™iÚ
[16]);

67 
P_svc_16x16
 ( 
mv_ÿche
 [][2], *
»f_ÿche
, cÚ¡ 
RESIDU
 *
Cu¼Residu
, cÚ¡ 
DATA
 *
Block
, cÚ¡ 
Sub_P_svc
 
decode_sub
[]

68 , *
DpbLuma
, *
DpbCb
, *
DpbCr


69 , *
image
, *
image_Cb
, *
image_Cr


70 , cÚ¡ 
x
, cÚ¡ 
y
, cÚ¡ 
PicWidthInPix
, cÚ¡ 
PicHeightInPix


71 , cÚ¡ 
NAL
 *
N®
, 
LIST_MMO
 * 
RefPicLi¡L0


72 , *
mv_l0
, *
»f_bas_l0
, cÚ¡ 
STRUCT_PF
 *
veùÜs
, 
REFPART
 
RefP¬t™iÚ
[16]);

74 
P_svc_sk
 ( 
mv_ÿche
 [][2], *
»f_ÿche
, cÚ¡ 
RESIDU
 *
Cu¼Residu
, cÚ¡ 
DATA
 *
Block
, cÚ¡ 
Sub_P_svc
 
decode_sub
[]

75 , *
DpbLuma
, *
DpbCb
, *
DpbCr


76 , *
image
, *
image_Cb
, *
image_Cr


77 , cÚ¡ 
x
, cÚ¡ 
y
, cÚ¡ 
PicWidthInPix
, cÚ¡ 
PicHeightInPix


78 , cÚ¡ 
NAL
 *
N®
, 
LIST_MMO
 * 
RefPicLi¡L0


79 , *
mv_l0
, *
»f_bas_l0
, cÚ¡ 
STRUCT_PF
 *
veùÜs
, 
REFPART
 
RefP¬t™iÚ
[16]);

82 
Sub_P_svc_8x8
(
mv_ÿche
 [][2], *
»f_ÿche
, cÚ¡ 
DATA
 *
Block
, 
mbP¬tIdx
, *
mv_l0
, *
»f_bas_l0
, cÚ¡ 
NAL
 *
N®
, 
REFPART
 
RefP¬t™iÚ
[16]);

83 
Sub_P_svc_8x4
(
mv_ÿche
 [][2], *
»f_ÿche
, cÚ¡ 
DATA
 *
Block
, 
mbP¬tIdx
, *
mv_l0
, *
»f_bas_l0
, cÚ¡ 
NAL
 *
N®
, 
REFPART
 
RefP¬t™iÚ
[16]);

84 
Sub_P_svc_4x8
(
mv_ÿche
 [][2], *
»f_ÿche
, cÚ¡ 
DATA
 *
Block
, 
mbP¬tIdx
, *
mv_l0
, *
»f_bas_l0
, cÚ¡ 
NAL
 *
N®
, 
REFPART
 
RefP¬t™iÚ
[16]);

85 
Sub_P_svc_4x4
(
mv_ÿche
 [][2], *
»f_ÿche
, cÚ¡ 
DATA
 *
Block
, 
mbP¬tIdx
, *
mv_l0
, *
»f_bas_l0
, cÚ¡ 
NAL
 *
N®
, 
REFPART
 
RefP¬t™iÚ
[16]);

94 
__šlše
 
	$S‘IÁ”P¬am
(cÚ¡ 
NAL
 *
N®
, 
mv_ÿche
[2], *
»f_ÿche
, cÚ¡ *
MvdL0
, *
mv_l0
, *
»f_bas_l0
){

96 
»f_ÿche
 [0] = 
»f_bas_l0
[0];

97 
mv_ÿche
 [0] = 
	`MV_CAL
(
mv_l0
[0], 
N®
 -> 
MvC®x
 [N® -> 
Lay”Id
]è+ 
MvdL0
 [0];

98 
mv_ÿche
 [1] = 
	`MV_CAL
(
mv_l0
[1], 
N®
 -> 
MvC®y
 [N® -> 
Lay”Id
]è+ 
MvdL0
 [1];

99 
	}
}

107 
__šlše
 
	$S‘IÁ”P¬amHÜi
(cÚ¡ 
NAL
 *
N®
, 
mv_ÿche
[][2], *
»f_ÿche
, cÚ¡ *
MvdL0
, *
mv_l0
, *
»f_bas_l0
){

109 
»f_ÿche
 [0] =„ef_ÿch[1] = 
»f_bas_l0
[0];

110 
mv_ÿche
 [0][0] = mv_ÿch[1][0] = 
	`MV_CAL
(
mv_l0
[0], 
N®
 -> 
MvC®x
 [N® -> 
Lay”Id
]è+ 
MvdL0
 [0];

111 
mv_ÿche
 [0][1] = mv_ÿch[1][1] = 
	`MV_CAL
(
mv_l0
[1], 
N®
 -> 
MvC®y
 [N® -> 
Lay”Id
]è+ 
MvdL0
 [1];

112 
	}
}

119 
__šlše
 
	$S‘IÁ”P¬amV”t
(cÚ¡ 
NAL
 *
N®
, 
mv_ÿche
[][2], *
»f_ÿche
, cÚ¡ *
MvdL0
, *
mv_l0
, *
»f_bas_l0
){

122 
»f_ÿche
 [0] =„ef_ÿch[8] = 
»f_bas_l0
[0];

123 
mv_ÿche
 [0][0] = mv_ÿch[8][0] = 
	`MV_CAL
(
mv_l0
[0], 
N®
 -> 
MvC®x
 [N® -> 
Lay”Id
]è+ 
MvdL0
 [0];

124 
mv_ÿche
 [0][1] = mv_ÿch[8][1] = 
	`MV_CAL
(
mv_l0
[1], 
N®
 -> 
MvC®y
 [N® -> 
Lay”Id
]è+ 
MvdL0
 [1];

125 
	}
}

	@lib_svc/MemoryManagement.c

35 
	~"ty³.h
"

36 
	~"memÜy_mªagem’t.h
"

39 
	~"svc_ty³.h
"

40 
	~"£t_Ïy”.h
"

42 
	$svc_ÿlcuÏ‹_dpb
(cÚ¡ 
tÙ®_memÜy
, cÚ¡ 
mv_memÜy
, 
nb_of_Ïy”s
, 
MMO
 *
mmo_¡ruù
, 
SPS
 *
¥s
, 
NAL
 *
N®
){

45 
i
;

46 
chªged
 = 0;

47 
¥s_id
 = 0;

48 
NumLay”s
 = 
	`G‘Lay”Numb”
(
N®
, N® -> 
DqIdMax
) + 1;

49 
SeqNumLay”s
 = 0;

50 
max_width
 = 
mmo_¡ruù
 -> 
MaxWidth
;

51 
max_height
 = 
mmo_¡ruù
 -> 
MaxHeight
;

52 
max_d•th_wa™
 = 0;

54  
i
 = 0; i < 32; i ++){

55 iàĞ
max_width
 < (
¥s
[
i
] . 
pic_width_š_mbs
 << 4)){

57 
max_width
 = 
mmo_¡ruù
 -> 
MaxWidth
 = (
¥s
[
i
] . 
pic_width_š_mbs
 << 4);

58 
¥s
[
i
] . 
b_¡ride
 = (
max_width
) >> 1;

59 
¥s
[
i
] . 
b8_¡ride
 = (
max_width
) >> 2;

60 
chªged
 = 1;

61 
¥s_id
 = 
i
;

64 iàĞ
max_height
 < (
¥s
[
i
] . 
pic_height_š_m­_un™s
 << 4)){

66 
max_height
 = 
mmo_¡ruù
 -> 
MaxHeight
 = (
¥s
[
i
] . 
pic_height_š_m­_un™s
 << 4);

69 iàĞ
¥s
[
i
] . 
nb_img_di¥
 > 
max_d•th_wa™
){

71 
max_d•th_wa™
 = 
¥s
[
i
] . 
nb_img_di¥
;

72 
¥s_id
 = 
i
;

75 ià(
¥s
[
i
] . 
pic_width_š_mbs
 > 0){

77 
SeqNumLay”s
 ++;

78 if(
¥s
[
i
]. 
num_»f_äames
 > sps[
¥s_id
] .‚um_ref_frames){

79 
¥s_id
 = 
i
;

84  
i
 = 0; i < 32; i ++){

86 
¥s
[
i
] . 
nb_img_di¥
 = 
max_d•th_wa™
;

89 
¥s
[
i
] . 
b_¡ride
 = (
max_width
) >> 1;

90 
¥s
[
i
] . 
b8_¡ride
 = (
max_width
) >> 2;

95 iàĞ
chªged
){

96 if(
SeqNumLay”s
 > 
NumLay”s
){

99 
NumLay”s
 = 
SeqNumLay”s
;

101 iàĞ
NumLay”s
 > 
nb_of_Ïy”s
){

103 
NumLay”s
 = 
nb_of_Ïy”s
;

105 
	`š™Ÿlize_add»ss
(
tÙ®_memÜy
, 
mv_memÜy
, 
NumLay”s
, (
max_width
 + 32è* (
max_height
 + 32), max_width * max_heighˆ>> 3, &
¥s
[
¥s_id
], 
mmo_¡ruù
);

106 
mmo_¡ruù
 -> 
MemÜyAÎoÿtiÚ
 = 1;

108 
	}
}

	@lib_svc/MergeMvIdx.c

34 
	~"¡ršg.h
"

37 
	~"ş.h
"

38 
	~"symbŞ.h
"

41 
	~"svc_ty³.h
"

42 
	~"svc_d©a.h
"

43 
	~"M”geMvIdx.h
"

47 
	$G‘Ref4x4
(
REFPART
 
RefP¬t™iÚ
[16], 
RefInded4x4
[16], *
»f_l0
){

50 
i
;

51  
i
 = 0; i < 16; i++){

52 
Index
 = 
RefP¬t™iÚ
 [
i
] . 
RefIndex
;

53 
RefInded4x4
[
i
] = (è
»f_l0
[
Index
];

55 
	}
}

57 
	$S‘Ref8x8
(
RefIndex8x8
[], 
RefInded4x4
[]){

59 
i
;

60  
i
 = 0; i < 4; i ++){

61 
RefIndex8x8
[
i
] = 
	`MšRef4x4
(&
RefInded4x4
[((i & 1)<< 1)+((i&2)<<2)]);

63 
	}
}

66 
	$M”geP¬t™iÚ4x4
(
REFPART
 
RefP¬t™iÚ
[16], 
RefIndex8x8
[], 
RefInded4x4
[]){

68 
i
, 
j
;

71  
i
 = 0; i < 4; i++){

72 *
Ref4x4
 = &
RefInded4x4
[((
i
 & 1)<< 1)+((i & 2) << 2)];

73 
REFPART
 *
RefP¬t8x8
 = &
RefP¬t™iÚ
[((
i
 & 1) << 1) + ((i & 2) << 2)];

76  
j
 = 0; j < 4; j++){

77 
Ref
 = 
Ref4x4
 [(
j
 & 1) + ((j & 2) << 1)];

78 
REFPART
 *
RefP¬t4x4
 = &
RefP¬t8x8
 [(
j
 & 1) + ((j & 2)<< 1)];

81 if(
Ref
 !ğ
RefIndex8x8
 [
i
]){

83 
Ref1
 = 
Ref4x4
 [((
j
 - 1) & 1) + ((j & 2) << 1)];

84 
Ref2
 = 
Ref4x4
 [((2 - (
j
 & 2) ) << 1) +(j & 1)];

86 iàĞ
Ref1
 =ğ
RefIndex8x8
 [
i
]){

87 
	`memıy
(
RefP¬t4x4
, &RefP¬t4x4[1 - ((
j
 & 1è<< 1)], (
REFPART
));

88 }iàĞ
Ref2
 =ğ
RefIndex8x8
 [
i
]){

89 
	`memıy
(
RefP¬t4x4
, &RefP¬t4x4[(1 - (
j
 & 2)è<< 2], (
REFPART
));

91 
	`memıy
(
RefP¬t4x4
, &RefP¬t4x4[((1 - (
j
 & 2)è<< 2è+ 1 - ((j & 1è<< 1)], (
REFPART
));

96 
	}
}

99 
	$M”geP¬t™iÚ8x8
(
REFPART
 
RefP¬t™iÚ
[16], 
RefIndex8x8
[]){

101 
i
;

102 
Chªged8x8
[4] = { 0, 0, 0, 0};

105  
i
 = 0; i < 4; i++){

106 
REFPART
 *
RefP¬t8x8
 = &
RefP¬t™iÚ
[((
i
 & 1) << 1) + ((i & 2) << 2)];

107 
Chªged8x8
[
i
] = 0;

109 iàĞ
RefIndex8x8
 [
i
] =ğ-1 && 
RefP¬t8x8
 -> 
RefIdc
 == -2){

110 
REFPART
 *
XInv8x8
 = &
RefP¬t™iÚ
[2 - (
i
 & 0x01) +( (i & 0x02) << 2)];

111 
REFPART
 *
YInv8x8
 = &
RefP¬t™iÚ
[8 + ((
i
 & 0x01) << 1) - ((i & 0x02) << 1)];

112 
REFPART
 *
XYInv8x8
 = &
RefP¬t™iÚ
[10 - (
i
 & 1) - ((i & 2) << 1)];

113 
Chªged8x8
[
i
] = 1;

114 ià(!
Chªged8x8
[1 - (
i
 & 0x01è+ (˜& 0x02)] && (
XInv8x8
 -> 
RefIdc
 != -2)){

117 
RefP¬t8x8
 -> 
MvIndex
 = RefP¬t8x8[1] . MvIndex = 
XInv8x8
 -> MvIndex;

118 
RefP¬t8x8
 -> 
RefIndex
 = RefP¬t8x8[1] . RefIndex = 
XInv8x8
 -> RefIndex;

119 
RefP¬t8x8
[4] . 
MvIndex
 = RefP¬t8x8[5] . MvIndex = 
XInv8x8
 [4] . MvIndex;

120 
RefP¬t8x8
[4] . 
RefIndex
 = RefP¬t8x8[5] . RefIndex = 
XInv8x8
 [4] . RefIndex;

121 } ià(!
Chªged8x8
[2 + (
i
 & 0x01è- (˜& 0x02)] && (
YInv8x8
 -> 
RefIdc
 != -2)){

122 
RefP¬t8x8
 -> 
MvIndex
 = RefP¬t8x8[4] . MvIndex = 
YInv8x8
 -> MvIndex;

123 
RefP¬t8x8
 -> 
RefIndex
 = RefP¬t8x8[4] . RefIndex = 
YInv8x8
 -> RefIndex;

124 
RefP¬t8x8
[1] . 
MvIndex
 = RefP¬t8x8[5] . MvIndex = 
YInv8x8
 [1] . MvIndex;

125 
RefP¬t8x8
[1] . 
RefIndex
 = RefP¬t8x8[5] . RefIndex = 
YInv8x8
 [1] . RefIndex;

126 }ià(!
Chªged8x8
[3 - (
i
 & 1è- (˜& 2)] && (
XYInv8x8
 -> 
RefIdc
 != -2)){

127 
RefP¬t8x8
 -> 
MvIndex
 = RefP¬t8x8[1] . MvIndex = RefP¬t8x8[4] . MvIndex = RefP¬t8x8[5] . MvIndex = 
XYInv8x8
 -> MvIndex;

128 
RefP¬t8x8
 -> 
RefIndex
 = RefP¬t8x8[1] . RefIndex = RefP¬t8x8[4] . RefIndex = RefP¬t8x8[5] . RefIndex = 
XYInv8x8
 -> RefIndex;

132 
	}
}

136 
	$M”geMv
(cÚ¡ 
NAL
 *
N®
, cÚ¡ 
Dœeù8x8Inã»nû
, 
REFPART
 
RefP¬t™iÚ
[16], cÚ¡ *
MÙiÚP»d
, 
mv_ÿche_l0
[][2], 
Mode
[4], *
mv_l0
){

138 
i
,
j
;

139 
Th»shŞd
 = 1;

142  
i
 = 0; i < 4; i++){

144  
j
 = 0; j < 4; j++){

145 iàĞ
MÙiÚP»d
[(
i
 & 2è+ ((
j
 & 2) >> 1)]){

146 
BlkIndex
 = (
i
 << 2è+ 
j
;

147 
CacheIndex
 = 12 + 
j
 + (
i
 << 3);

148 
MvIndex
 = 
RefP¬t™iÚ
 [
BlkIndex
] . MvIndex;

149 
mv_ÿche_l0
[
CacheIndex
][0] = 
	`MV_CAL
(
mv_l0
[
MvIndex
] , 
N®
 -> 
MvC®x
 [N® -> 
Lay”Id
]);

150 
mv_ÿche_l0
[
CacheIndex
][1] = 
	`MV_CAL
(
mv_l0
[
MvIndex
 + 1], 
N®
 -> 
MvC®y
 [N® -> 
Lay”Id
]);

156 ià(
Dœeù8x8Inã»nû
){

157  
i
 = 0; i < 4; i++){

158 iàĞ
MÙiÚP»d
[
i
]){

160 
XP¬t
 = ( 
i
 & 1 ) * 3;

161 
YP¬t
 = ( 
i
 >> 1 ) * 3;

162 
CacheIndex
 = 12 + ((
i
 & 1) << 1) + ((i & 2) << 3);

163 
Index
 = 12 + 
XP¬t
 + (
YP¬t
 << 3);

164 
mv_ÿche_l0
[
CacheIndex
 + 1][0] = mv_ÿche_l0[CacheIndex + 8][0] = mv_ÿche_l0[CacheIndex + 9][0] = mv_ÿche_l0[CacheIndex][0] = mv_ÿche_l0[
Index
][0];

165 
mv_ÿche_l0
[
CacheIndex
 + 1][1] = mv_ÿche_l0[CacheIndex + 8][1] = mv_ÿche_l0[CacheIndex + 9][1] = mv_ÿche_l0[CacheIndex][1] = mv_ÿche_l0[
Index
][1];

172 
i
 = 0; i < 4; i++){

173 iàĞ
MÙiÚP»d
[
i
]){

174 
CacheIndex
 = 12 + ((
i
 & 2) << 3) + ((i & 1) << 1);

175 
HÜ1
 = 
	`MvDiff
(&
mv_ÿche_l0
[
CacheIndex
][0], &mv_ÿche_l0[CacheIndex + 1][0]è<ğ
Th»shŞd
;

176 
HÜ2
 = 
	`MvDiff
(&
mv_ÿche_l0
[
CacheIndex
 + 8][0], &mv_ÿche_l0[CacheIndex + 9][0]è<ğ
Th»shŞd
;

177 
V”t1
 = 
	`MvDiff
(&
mv_ÿche_l0
[
CacheIndex
][0], &mv_ÿche_l0[CacheIndex + 8][0]è<ğ
Th»shŞd
;

178 
V”t2
 = 
	`MvDiff
(&
mv_ÿche_l0
[
CacheIndex
 + 1][0], &mv_ÿche_l0[CacheIndex + 9][0]è<ğ
Th»shŞd
;

179 
DŸg
 = 
	`MvDiff
(&
mv_ÿche_l0
[
CacheIndex
][0], &mv_ÿche_l0[CacheIndex + 9][0]è<ğ
Th»shŞd
;

181 
b8x8
 = 
HÜ1
 && 
V”t1
 && 
DŸg
;

182 
b8x4
 = 
HÜ1
 && 
HÜ2
;

183 
b4x8
 = 
V”t1
 && 
V”t2
;

185 
Mode
 [
i
] = 
b8x8
 ? 0: 
b8x4
 ? 1: 
b4x8
 ? 2: 3;

188 
	}
}

193 
	$CombšeMv
(
Mode8x8
[4], 
mv_ÿche_l0
[][2], cÚ¡ *
MÙiÚP»d
){

195 
i
;

196 
Mvx
, 
Mvy
;

197  
i
 = 0; i < 4; i++){

198 ià(
MÙiÚP»d
 [
i
]){

199 
Index
 = 12 + ((
i
 & 1) << 1) + ((i & 2) << 3);

200 
Mode8x8
 [
i
]){

202 
Mvx
 = (è((
mv_ÿche_l0
[
Index
][0] + mv_cache_l0[Index + 1][0] + mv_cache_l0[Index + 8][0] + mv_cache_l0[Index + 9][0] + 2) >> 2);

203 
Mvy
 = (è((
mv_ÿche_l0
[
Index
][1] + mv_cache_l0[Index + 1][1] + mv_cache_l0[Index + 8][1] + mv_cache_l0[Index + 9][1] + 2) >> 2);

204 
mv_ÿche_l0
[
Index
][0] = mv_ÿche_l0[Index + 1][0] = mv_ÿche_l0[Index + 8][0] = mv_ÿche_l0[Index + 9][0] = 
Mvx
;

205 
mv_ÿche_l0
[
Index
][1] = mv_ÿche_l0[Index + 1][1] = mv_ÿche_l0[Index + 8][1] = mv_ÿche_l0[Index + 9][1] = 
Mvy
;

208 
Mvx
 = (è((
mv_ÿche_l0
[
Index
][0] + mv_cache_l0[Index + 1][0] + 1) >> 1);

209 
Mvy
 = (è((
mv_ÿche_l0
[
Index
][1] + mv_cache_l0[Index + 1][1] + 1) >> 1);

210 
mv_ÿche_l0
[
Index
][0] = mv_ÿche_l0[Index + 1][0] = 
Mvx
;

211 
mv_ÿche_l0
[
Index
][1] = mv_ÿche_l0[Index + 1][1] = 
Mvy
;

213 
Mvx
 = (è((
mv_ÿche_l0
[
Index
 + 8][0] + mv_cache_l0[Index + 9][0] + 1) >> 1);

214 
Mvy
 = (è((
mv_ÿche_l0
[
Index
 + 8][1] + mv_cache_l0[Index + 9][1] + 1) >> 1);

215 
mv_ÿche_l0
[
Index
 + 8][0] = mv_ÿche_l0[Index + 9][0] = 
Mvx
;

216 
mv_ÿche_l0
[
Index
 + 8][1] = mv_ÿche_l0[Index + 9][1] = 
Mvy
;

219 
Mvx
 = (è((
mv_ÿche_l0
[
Index
][0] + mv_cache_l0[Index + 8][0] + 1) >> 1);

220 
Mvy
 = (è((
mv_ÿche_l0
[
Index
][1] + mv_cache_l0[Index + 8][1] + 1) >> 1);

221 
mv_ÿche_l0
[
Index
][0] = mv_ÿche_l0[Index + 8][0] = 
Mvx
;

222 
mv_ÿche_l0
[
Index
][1] = mv_ÿche_l0[Index + 8][1] = 
Mvy
;

224 
Mvx
 = (è((
mv_ÿche_l0
[
Index
 + 1][0] + mv_cache_l0[Index + 9][0] + 1) >> 1);

225 
Mvy
 = (è((
mv_ÿche_l0
[
Index
 + 1][1] + mv_cache_l0[Index + 9][1] + 1) >> 1);

226 
mv_ÿche_l0
[
Index
 + 1][0] = mv_ÿche_l0[Index + 9][0] = 
Mvx
;

227 
mv_ÿche_l0
[
Index
 + 1][1] = mv_ÿche_l0[Index + 9][1] = 
Mvy
;

232 
	}
}

236 
	$S‘P¬tP»d
Ğ
REFPART
 
RefP¬t™iÚ
[16], *
»f_l0
){

238 
RefIndex8x8
[4];

239 
RefInded4x4
[16];

241 
	`G‘Ref4x4
(
RefP¬t™iÚ
, 
RefInded4x4
, 
»f_l0
);

242 
	`S‘Ref8x8
(
RefIndex8x8
, 
RefInded4x4
);

243 
	`M”geP¬t™iÚ4x4
(
RefP¬t™iÚ
, 
RefIndex8x8
, 
RefInded4x4
);

244 
	`M”geP¬t™iÚ8x8
(
RefP¬t™iÚ
, 
RefIndex8x8
);

245 
	}
}

	@lib_svc/MergeMvIdx.h

34 #iâdeà
MERGEMVIDX_H


35 
	#MERGEMVIDX_H


	)

37 
	~"m©h.h
"

39 
__šlše
 
	$MvDiff
 (*
MvA
, *
MvB
){

41  (è(
	`abs
 (
MvA
[0] - 
MvB
[0]) +‡bs (MvA[1] - MvB[1]));

42 
	}
}

46 
__šlše
 
	$MšRef
(
RefA
, 
RefB
){

48 ià(
RefA
 < 0è 
RefB
;

49 ià(
RefB
 < 0è 
RefA
;

50  
	`MIN
(
RefA
, 
RefB
);

51 
	}
}

53 
__šlše
 
	$MšRef4x4
(
RefInded4x4
[]){

55 
Mš
 = 
	`MšRef
(
RefInded4x4
[0], RefInded4x4[1]);

56 
Mš
 = 
	`MšRef
(Mš, 
RefInded4x4
[4]);

57 
Mš
 = 
	`MšRef
(Mš, 
RefInded4x4
[5]);

58  
Mš
;

59 
	}
}

62 
S‘P¬tP»d
(
REFPART
 
RefP¬t™iÚ
[16], *
»f_l0
);

63 
Upd©eRefP¬t™iÚ
(cÚ¡ 
NAL
 *
N®
, 
REFPART
 
RefP¬t™iÚ
[16]);

64 
CombšeMv
(
Mode8x8
[4], 
mv_ÿche_l0
[][2], cÚ¡ *
MÙiÚP»d
);

65 
M”geMv
(cÚ¡ 
NAL
 *
N®
, cÚ¡ 
Dœeù8x8Inã»nû
, 
REFPART
 
RefP¬t™iÚ
[16], cÚ¡ *
MÙiÚP»d
, 
mv_ÿche_l0
[][2], 
Mode
[4], *
mv_l0
);

	@lib_svc/P_BL.c

35 
	~"ty³.h
"

36 
	~"symbŞ.h
"

37 
	~"decode_mb_P.h
"

43 
	~"svc_ty³.h
"

44 
	~"BL.h
"

45 
	~"I_BL.h
"

46 
	~"P_BL.h
"

47 
	~"blk4x4.h
"

48 
	~"svc_d©a.h
"

49 
	~"Mb_P_svc.h
"

50 
	~"mb_·ddšg.h
"

51 
	~"BL_»sidu®.h
"

52 
	~"»sidu®_4x4.h
"

53 
	~"»sidu®_8x8.h
"

54 
	~"»sidu®_chroma.h
"

55 
	~"svc_Ãighbourhood.h
"

56 
	~"mÙiÚ_veùÜ_svc.h
"

57 
	~"Residu®Proûssšg.h
"

58 
	~"mb_up§m¶e_f‹r.h
"

59 
	~"CÛffLev–P»diùiÚ.h
"

60 
	~"IÁ”Lay”P»diùiÚ.h
"

70 
	$Decode_P_BL
(cÚ¡ 
PPS
 * 
Pps
, cÚ¡ 
SPS
 * 
Sps
, cÚ¡ 
NAL
 *
N®
, 
RESIDU
 *
Cu¼Residu
, RESIDU *
Ba£Residu
,

71 cÚ¡ 
STRUCT_PF
 *
ba£lše_veùÜ
, cÚ¡ 
W_TABLES
 *
Quªtif
, 
LIST_MMO
 *
ai_p¡RefPicLi¡L0
,

72 
x
, 
y
, 
x_ba£
, 
y_ba£
, 
x_mbP¬tIdx
, 
y_mbP¬tIdx
, 
PicWidthInPix
,

73 
REFPART
 *
RefP¬t™iÚ
, *
»f_ÿche_l0
, 
mv_ÿche_l0
 [][2], *
mv
, *
»f_ba£
,

74 *
DpbLuma
, *
DpbCb
, *
DpbCr
,

75 
Y
[ ], 
U
[ ], 
V
[ ],

76 
Cu¼Residu_Luma
[], 
Cu¼Residu_Cb
[], 
Cu¼Residu_Cr
[])

81 cÚ¡ 
PicHeightInMbs
 = 
Sps
 -> 
pic_height_š_m­_un™s
 + 2;

82 cÚ¡ 
mbBa£Addr
 = 
x_ba£
 + 
y_ba£
 * (
N®
 -> 
ba£_Width
 >> 4);

87 if(!
N®
 -> 
nÚ_dŸdic
){

90 
off£t_Lum
 = 16 + 16 * (
N®
 -> 
cu¼_Width
 + 32);

91 
off£t_Cb
 = 8 + 4 * (
N®
 -> 
cu¼_Width
 + 32);

92 
DpbLuma
 +ğ
off£t_Lum
;

93 
DpbCb
 +ğ
off£t_Cb
;

94 
DpbCr
 +ğ
off£t_Cb
;

97 
	`g‘_ba£_P_dyadic
(
mv_ÿche_l0
, 
»f_ÿche_l0
, 
DpbLuma
, 
DpbCb
, 
DpbCr
,

98 
Y
, 
U
, 
V
, 
x
 << 4, 
y
 << 4, 
PicWidthInPix
, 
PicHeightInMbs
 << 4, 
ai_p¡RefPicLi¡L0
,

99 
mv
, 
»f_ba£
, 
RefP¬t™iÚ
, 
N®
, 
ba£lše_veùÜ
 -> 
PŒ_š‹½Ş_4x4
);

101 
	`AddResidu®
(
N®
, 
Pps
, 
Cu¼Residu
, &
Ba£Residu
[
mbBa£Addr
], 
PicWidthInPix
, 
Quªtif
, 
Y
, 
U
, 
V
, 
Cu¼Residu_Luma
, 
Cu¼Residu_Cb
, 
Cu¼Residu_Cr
);

104 
Y_Res
[256];

105 
U_Res
[64];

106 
V_Res
[64];

107 
MbP»dY
[32*32];

108 
MbP»dU
[256];

109 
MbP»dV
[256];

114 
cX
 = 8;

115 
cY
 = 8;

117 
off£t_Lum
 = 16 + 16 * (
N®
 -> 
cu¼_Width
 + 32);

118 
off£t_Cb
 = 8 + 4 * (
N®
 -> 
cu¼_Width
 + 32);

119 
Ba£off£tLum
 = 16 + 16 * (
N®
 -> 
ba£_Width
 + 32);

120 
Ba£Off£tCb
 = 8 + 4 * (
N®
 -> 
ba£_Width
 + 32);

122 
Úe_I
 = (
RefP¬t™iÚ
[0] . 
RefIdc
 == -2) || (RefPartition[2] . RefIdc == -2) || (RefPartition[8] . RefIdc == -2) || (RefPartition[10] . RefIdc == -2);

125 
	`Compu‹Residu®Image
(
Pps
, 
Cu¼Residu
, 16, 
Y_Res
, 
U_Res
, 
V_Res
, 
Quªtif
);

128 ifĞ
Úe_I
){

129 
	`DecodeIP¬t
(
N®
, 
Pps
, 
Sps
, 
RefP¬t™iÚ
, 
Ba£Residu
, 
PicWidthInPix
, 
mbBa£Addr
, 
x
 << 4, 
y
 << 4,

130 
x_ba£
, 
y_ba£
, 
x_mbP¬tIdx
, 
y_mbP¬tIdx
, &
DpbLuma
[
N®
 -> 
Ba£MemÜyAdd»ss
 + 
Ba£off£tLum
],

131 &
DpbCb
[(
N®
 -> 
Ba£MemÜyAdd»ss
 >> 2è+ 
Ba£Off£tCb
],

132 &
DpbCr
[(
N®
 -> 
Ba£MemÜyAdd»ss
 >> 2è+ 
Ba£Off£tCb
],

133 
Y
, 
U
, 
V
, 
MbP»dY
, 
MbP»dU
, 
MbP»dV
);

136 
DpbLuma
 +ğ
off£t_Lum
;

137 
DpbCb
 +ğ
off£t_Cb
;

138 
DpbCr
 +ğ
off£t_Cb
;

141 
	`g‘_ba£_P_nÚ_dyadic
(
mv_ÿche_l0
, 
»f_ÿche_l0
 , 
DpbLuma
, 
DpbCb
, 
DpbCr
,

142 
Y
, 
U
, 
V
, 
x
 << 4, 
y
 << 4, 
PicWidthInPix
, 
PicHeightInMbs
 << 4, 
ai_p¡RefPicLi¡L0
, 
»f_ba£
,

143 
N®
, 
ba£lše_veùÜ
 -> 
PŒ_š‹½Ş_4x4
, 
RefP¬t™iÚ
);

147 
	`G‘NÚDŸdicSam¶e
(
Cu¼Residu
 -> 
Residu®P»diùiÚFÏg
, 
RefP¬t™iÚ
[0] . 
RefIdc
, 8, 8,

148 
PicWidthInPix
, 
Y
, 
MbP»dY
, 
Cu¼Residu_Luma
, 
Y_Res
);

149 
	`G‘NÚDŸdicSam¶e
(
Cu¼Residu
 -> 
Residu®P»diùiÚFÏg
, 
RefP¬t™iÚ
[0] . 
RefIdc
, 4, 4,

150 
PicWidthInPix
 >> 1, 
U
, 
MbP»dU
, 
Cu¼Residu_Cb
, 
U_Res
);

151 
	`G‘NÚDŸdicSam¶e
(
Cu¼Residu
 -> 
Residu®P»diùiÚFÏg
, 
RefP¬t™iÚ
[0] . 
RefIdc
, 4, 4,

152 
PicWidthInPix
 >> 1, 
V
, 
MbP»dV
, 
Cu¼Residu_Cr
, 
V_Res
);

155 
	`G‘NÚDŸdicSam¶e
(
Cu¼Residu
 -> 
Residu®P»diùiÚFÏg
, 
RefP¬t™iÚ
[2] . 
RefIdc
, 8, 8,

156 
PicWidthInPix
, &
Y
[
cX
], &
MbP»dY
[cX], &
Cu¼Residu_Luma
[cX], &
Y_Res
[cX]);

157 
	`G‘NÚDŸdicSam¶e
(
Cu¼Residu
 -> 
Residu®P»diùiÚFÏg
, 
RefP¬t™iÚ
[2] . 
RefIdc
, 4, 4,

158 
PicWidthInPix
 >> 1, &
U
[
cX
 >> 1], &
MbP»dU
[cX >> 1], &
Cu¼Residu_Cb
[cX >> 1], &
U_Res
[cX >> 1]);

159 
	`G‘NÚDŸdicSam¶e
(
Cu¼Residu
 -> 
Residu®P»diùiÚFÏg
, 
RefP¬t™iÚ
[2] . 
RefIdc
, 4, 4,

160 
PicWidthInPix
 >> 1, &
V
[
cX
 >> 1], &
MbP»dV
[cX >> 1], &
Cu¼Residu_Cr
[cX >> 1], &
V_Res
[cX >> 1]);

163 
	`G‘NÚDŸdicSam¶e
(
Cu¼Residu
 -> 
Residu®P»diùiÚFÏg
, 
RefP¬t™iÚ
[8] . 
RefIdc
, 8, 8,

164 
PicWidthInPix
, &
Y
[
cY
 * PicWidthInPix], &
MbP»dY
[cY << 4], &
Cu¼Residu_Luma
[cY * PicWidthInPix], &
Y_Res
[cY << 4]);

165 
	`G‘NÚDŸdicSam¶e
(
Cu¼Residu
 -> 
Residu®P»diùiÚFÏg
, 
RefP¬t™iÚ
[8] . 
RefIdc
, 4, 4,

166 
PicWidthInPix
 >> 1, &
U
[(
cY
 >> 1è* (PicWidthInPix >> 1)], &
MbP»dU
[cY << 2], &
Cu¼Residu_Cb
[(cY >> 1è* (PicWidthInPix >> 1)], &
U_Res
[cY << 2]);

167 
	`G‘NÚDŸdicSam¶e
(
Cu¼Residu
 -> 
Residu®P»diùiÚFÏg
, 
RefP¬t™iÚ
[8] . 
RefIdc
, 4, 4,

168 
PicWidthInPix
 >> 1, &
V
[(
cY
 >> 1è* (PicWidthInPix >> 1)], &
MbP»dV
[cY << 2], &
Cu¼Residu_Cr
[(cY >> 1è* (PicWidthInPix >> 1)], &
V_Res
[cY << 2]);

172 
	`G‘NÚDŸdicSam¶e
(
Cu¼Residu
 -> 
Residu®P»diùiÚFÏg
, 
RefP¬t™iÚ
[10] . 
RefIdc
, 8, 8,

173 
PicWidthInPix
, &
Y
[
cX
 + 
cY
 * PicWidthInPix], &
MbP»dY
[cX + (cY << 4)], &
Cu¼Residu_Luma
[cX + cY * PicWidthInPix], &
Y_Res
[cX + (cY << 4)]);

174 
	`G‘NÚDŸdicSam¶e
(
Cu¼Residu
 -> 
Residu®P»diùiÚFÏg
, 
RefP¬t™iÚ
[10] . 
RefIdc
, 4, 4,

175 
PicWidthInPix
 >> 1, &
U
[(
cX
 >> 1è+ (
cY
 >> 1è* (PicWidthInPix >> 1)], &
MbP»dU
[(cX >> 1) + (cY << 2)],

176 &
Cu¼Residu_Cb
[(
cX
 >> 1è+ (
cY
 >> 1è* (
PicWidthInPix
 >> 1)], &
U_Res
[(cX >> 1) + (cY << 2)]);

177 
	`G‘NÚDŸdicSam¶e
(
Cu¼Residu
 -> 
Residu®P»diùiÚFÏg
, 
RefP¬t™iÚ
[10] . 
RefIdc
, 4, 4,

178 
PicWidthInPix
 >> 1, &
V
[(
cX
 >> 1è+ (
cY
 >> 1è* (PicWidthInPix >> 1)], &
MbP»dV
[(cX >> 1) + (cY << 2)],

179 &
Cu¼Residu_Cr
[(
cX
 >> 1è+ (
cY
 >> 1è* (
PicWidthInPix
 >> 1)], &
V_Res
[(cX >> 1) + (cY << 2)]);

182 
	`upd©e_blk4x4Res
(
Y_Res
, 
Cu¼Residu
, 16);

184 
	}
}

	@lib_svc/P_BL.h

36 #iâdeà
P_BL_H


37 
	#P_BL_H


	)

38 
	~"svc_ty³.h
"

39 
	~"svc_d©a.h
"

42 
Decode_P_BL
(cÚ¡ 
PPS
 * 
Pps
, cÚ¡ 
SPS
 * 
Sps
 ,cÚ¡ 
NAL
 *
N®
 , 
RESIDU
 *
»sidu
, RESIDU *
ba£_»sidu
, cÚ¡ 
STRUCT_PF
 *
ba£lše_veùÜ


43 , cÚ¡ 
W_TABLES
 *
quªtif
, 
LIST_MMO
 * 
ai_p¡RefPicLi¡L0
, 
x
, 
y
, 
x_ba£
, 
y_ba£
, 
x_mbP¬tIdx
, 
y_mbP¬tIdx


44 , 
PicWidthInPix
, 
REFPART
 *
RefP¬t™iÚ
, *
»f_ÿche_l0
, 
mv_ÿche_l0
 [][2], *
mv
, *
»f_ba£


45 , *
DpbLuma
, *
DpbCb
, *
DpbCr


46 , 
Y
[ ], 
U
[ ], 
V
[ ], *
Residu_Luma
, *
Residu_Cb
, *
Residu_Cr
);

	@lib_svc/ParseAUDecoder.c

34 
	~"¡ršg.h
"

37 
	~"ty³.h
"

38 
	~"Çl.h
"

39 
	~"¥s.h
"

40 
	~"R—d_h264.h
"

41 
	~"pic_li¡_svc.h
"

44 
	~"svc_ty³.h
"

45 
	~"SliûH—d”Ex‹nsiÚ.h
"

46 
	~"Çl_un™_h—d”_svc_ex‹nsiÚ.h
"

54 
	$IsN®H—d”Chªged
(
NAL
 *
N®
)

56 if(
N®
 -> 
TempÜ®Id
 !ğN® -> 
La¡TempÜ®Id
){

59 if(
N®
 -> 
DqId
 < N® -> 
La¡DqId
){

63 
	}
}

69 
	$IsAuCom¶‘e
(*
N®InRb¥
, 
N®InRBSP
, 
PPS
 *
Pps
, 
SPS
 *
Sps
, 
NAL
 *
N®
,

70 
N®CouÁ
, *
Poc
, *
F¿meCouÁ
)

72 
pos™iÚ
 = 8, 
OldPoc
;

73 
N®RefIdc
, 
N®Un™Ty³
, 
AuNÙFšished
 = 0, 
EndOfSliû
 = 0;

74 
	`N®Un™SVC
(
N®InRb¥
, &
N®Un™Ty³
, &
N®RefIdc
, 
N®
);

76 
N®Un™Ty³
)

80 
OldPoc
 = *
Poc
;

81 *
Poc
 = 
	`SliûH—d”Cut
(
N®InRb¥
, 
Sps
, 
Pps
, 
N®
, &
pos™iÚ
);

82 if(
OldPoc
 !ğ*
Poc
 && (*
F¿meCouÁ
)){

83 
AuNÙFšished
 = 1;

85 (*
F¿meCouÁ
)++;

88 
	`£q_·¿m‘”_£t
(
N®InRb¥
, 
Sps
);

91 
	`PPSCut
(
N®InRb¥
, 
Pps
, 
Sps
, 
N®InRBSP
);

95 
AuNÙFšished
 = 2;

98 
N®
 -> 
La¡Lay”Id
 = N® -> 
Lay”Id
;

99 
N®
 -> 
La¡DqId
 = N® -> 
DqId
;

100 
N®
 -> 
La¡TempÜ®Id
 = N® -> 
TempÜ®Id
;

101 
N®
 -> 
Ïy”_id_bË
[0] = 0;

102 
	`N®Un™D©a
(
N®InRb¥
, &
pos™iÚ
, 
N®
, &
EndOfSliû
);

103 if(
N®CouÁ
){

104 
AuNÙFšished
 = 
	`IsN®H—d”Chªged
(
N®
);

108 
	`sub£t_¥s
(
N®InRb¥
, &
N®InRBSP
, 
Sps
, 
N®
);

111 
N®
 -> 
La¡Lay”Id
 = N® -> 
Lay”Id
;

112 
N®
 -> 
La¡DqId
 = N® -> 
DqId
;

113 
N®
 -> 
La¡TempÜ®Id
 = N® -> 
TempÜ®Id
;

114 
	`N®Un™H—d”
(
N®InRb¥
, &
pos™iÚ
, 
N®
, &
EndOfSliû
);

115 if(
N®CouÁ
){

116 
AuNÙFšished
 = 
	`IsN®H—d”Chªged
(
N®
);

118 if(!
AuNÙFšished
){

119 
OldPoc
 = *
Poc
;

120 *
Poc
 = 
	`SliûH—d”Cut
(
N®InRb¥
, 
Sps
, 
Pps
, 
N®
, &
pos™iÚ
);

121 if(
OldPoc
 !ğ*
Poc
 && (*
F¿meCouÁ
)){

122 
AuNÙFšished
 = 1;

124 (*
F¿meCouÁ
)++;

128  
AuNÙFšished
;

129 
	}
}

136 
	$P¬£Fœ¡AU
(
SŒ—mSize
, *
N®InRb¥
, 
CÚfigSVC
 *
SŒ—mTy³
){

138 
PosFe
 = 0;

139 
pos_o_1
 = 
SŒ—mSize
;

141 
off£t
 = 4;

142 
AuNÙFšished
 = 0;

143 
N®InRBSP
;

144 
NAL
 
N®
[1];

145 
SPS
 
Sps
[
SPS_BUF_SIZE
];

146 
PPS
 
Pps
[
PPS_BUF_SIZE
];

147 
N®CouÁ
 = 0;

148 
F¿meCouÁ
 =0;

149 
Poc
 = 0;

150 
	`š™_Çl_¡ruù
(
N®
, 8);

151 
	`»adh264
(
SŒ—mSize
, 
pos_o_1
, &
PosFe
, 
N®InRb¥
);

152 
N®InRBSP
 = 
	`£¬ch_¡¬t_code
(
N®InRb¥
, &
off£t
);

153 
N®InRb¥
 += 4;

156 !
AuNÙFšished
){

157 
AuNÙFšished
 = 
	`IsAuCom¶‘e
(
N®InRb¥
, 
N®InRBSP
, 
Pps
, 
Sps
, 
N®
, 
N®CouÁ
, &
Poc
, &
F¿meCouÁ
);

158 
N®InRb¥
 +ğ
N®InRBSP
;

159 
N®InRBSP
 = 
	`£¬ch_¡¬t_code
(
N®InRb¥
, &
off£t
);

160 
N®InRb¥
 +ğ
off£t
;

161 
N®CouÁ
++;

164 
SŒ—mTy³
 -> 
DqIdMax
 = 
N®
 -> DqIdMax;

165 
	`memıy
(
SŒ—mTy³
 -> 
Ïy”_id_bË
, 
N®
 ->†ayer_id_table, 8 * ());

166 
	`memıy
(
SŒ—mTy³
 -> 
U£dS·tŸl
, 
N®
 -> UsedSpatial, 64 * ());

167 
	}
}

	@lib_svc/PartitionType.c

35 
	~"symbŞ.h
"

38 
	~"svc_ty³.h
"

39 
	~"P¬t™iÚTy³.h
"

42 
	$D‘”mše8x8P¬t
(
REFPART
 
RefP¬t™iÚ
[16]){

44 
šdex
 = 0;

46 iàĞ
RefP¬t™iÚ
 [0] . 
P¬tIdc
 == RefPartition [1] . PartIdc && RefPartition [4] . PartIdc == RefPartition [5] . PartIdc){

47 
šdex
 += 2;

51 iàĞ
RefP¬t™iÚ
 [0] . 
P¬tIdc
 == RefPartition [4] . PartIdc && RefPartition [1] . PartIdc == RefPartition [5] . PartIdc){

52 
šdex
 ++;

55  3 - 
šdex
;

56 
	}
}

61 
	$D‘”mšeMaüoP¬t
(
SliûTy³
, 
RESIDU
 *
Residu
, 
Mode8x8
[4], 
REFPART
 
RefP¬t™iÚ
[16]){

63 
šdex
 = 0;

66 iàĞ
RefP¬t™iÚ
 [0] . 
P¬tIdc
 =ğRefP¬t™iÚ [2] . P¬tIdø&& 
Mode8x8
 [0] == Mode8x8 [1] &&

67 
RefP¬t™iÚ
 [8] . 
P¬tIdc
 =ğRefP¬t™iÚ [10] . P¬tIdø&& 
Mode8x8
 [2] == Mode8x8 [3]){

68 
šdex
 += 2;

72 iàĞ
RefP¬t™iÚ
 [0] . 
P¬tIdc
 =ğRefP¬t™iÚ [8] . P¬tIdø&& 
Mode8x8
 [0] == Mode8x8 [2] &&

73 
RefP¬t™iÚ
 [2] . 
P¬tIdc
 =ğRefP¬t™iÚ [10] . P¬tIdø&& 
Mode8x8
 [1] == Mode8x8 [3]){

74 
šdex
 ++;

77 
Residu
 -> 
Mode
 = 
šdex
;

79 iàĞ!
šdex
){

80 
šdex
 = 0; index < 4; index++){

81 iàĞ
SliûTy³
 =ğ
SLICE_TYPE_B
){

87 
Residu
 -> 
SubMbTy³
 [
šdex
] = 
Mode8x8
 [index] == 3 ? 12: Mode8x8 [index] == 2 ? 9: Mode8x8 [index] == 1 ? 8 : 3;

89 
Residu
 -> 
SubMbTy³
 [
šdex
] = 
Mode8x8
 [index];

93 
	}
}

98 
	$S‘P¬tiÚnšg
(
SliûTy³
, 
RESIDU
 *
Residu
, 
REFPART
 
RefP¬t™iÚ
[16]){

100 
Mode8x8
[4];

101 
i
;

104  
i
 = 0; i < 4; i++){

105 
Mode8x8
[
i
] = 
	`D‘”mše8x8P¬t
(&
RefP¬t™iÚ
[((i & 1) << 1) + ((i & 2) << 2)]);

108 
	`D‘”mšeMaüoP¬t
(
SliûTy³
, 
Residu
, 
Mode8x8
, 
RefP¬t™iÚ
);

109 
	}
}

	@lib_svc/PartitionType.h

36 #iâdeà
PARTITION_TYPE_H


37 
	#PARTITION_TYPE_H


	)

40 
D‘”mše8x8P¬t
(
REFPART
 
RefP¬t™iÚ
[16]);

41 
D‘”mšeMaüoP¬t
(
SliûTy³
, 
RESIDU
 *
Residu
, 
Mode8x8
[4], 
REFPART
 
RefP¬t™iÚ
[16]);

42 
S‘P¬tiÚnšg
(
SliûTy³
, 
RESIDU
 *
Residu
, 
REFPART
 
RefP¬t™iÚ
[16]);

	@lib_svc/ResidualProcessing.c

36 
	~"ş.h
"

37 
	~"decode_mb_P.h
"

40 
	~"svc_ty³.h
"

41 
	~"blk4x4.h
"

42 
	~"svc_d©a.h
"

43 
	~"BL_»sidu®.h
"

44 
	~"»sidu®_4x4.h
"

45 
	~"»sidu®_8x8.h
"

46 
	~"quªtiz©iÚ.h
"

47 
	~"»sidu®_chroma.h
"

48 
	~"Residu®Proûssšg.h
"

49 
	~"CÛffLev–P»diùiÚ.h
"

56 
	$ba£_Ïy”_»sidu®
(
RESIDU
 *
»sidu
, *
Luma
, *
Chroma_Cb
, *
Chroma_Cr
,

57 cÚ¡ 
PicWidthInPix
, cÚ¡ 
PPS
 *
Pps
, cÚ¡ 
W_TABLES
 *
quªtif
){

60 iàĞ!
»sidu
 -> 
T¿nsfÜm8x8
){

61 
	`AddRes4x4
(
Luma
, 
»sidu
, 
PicWidthInPix
, 
quªtif
 -> 
W4x4_š‹r
);

63 
	`AddRes8x8
(
Luma
, 
»sidu
, 
PicWidthInPix
, 
quªtif
 -> 
W8x8_š‹r
);

67 
	`AddResChroma
(
Chroma_Cb
, 
Chroma_Cr
, 
»sidu
, 
Pps
, 
PicWidthInPix
 >> 1, 
quªtif
);

68 
	}
}

76 
	$Residu®P»diùiÚ
(cÚ¡ 
NAL
 *
N®
, cÚ¡ 
PPS
 *
Pps
, cÚ¡ 
W_TABLES
 *
Quªtif
, 
RESIDU
 *
Cu¼Residu
,

77 
RESIDU
 *
Ba£Residu
, cÚ¡ 
PicWidthInPix
,

78 *
Residu_Luma
, *
Residu_Cb
, *
Residu_Cr
)

81 iàĞ
N®
 -> 
SCÛffP»diùiÚ
){

83 
	`SCÛffResidu®AddRes
(
N®
, 
Cu¼Residu
, 
Ba£Residu
, 
Pps
, 
PicWidthInPix
, 
Quªtif
, 
Residu_Luma
, 
Residu_Cb
, 
Residu_Cr
);

84 }ià(
N®
 -> 
TCÛffP»diùiÚ
 && !
	`IS_I
(
Ba£Residu
 -> 
MbTy³
)){

88 ià(
Cu¼Residu
 -> 
Cbp
 == 0){

89 
Cu¼Residu
 -> 
Qp
 = 
Ba£Residu
 -> Qp;

91 ià((
Cu¼Residu
 -> 
Cbp
 & 0x0f) == 0){

92 
Cu¼Residu
 -> 
T¿nsfÜm8x8
 = 
Ba£Residu
 -> Transform8x8;

95 
	`TCÛffResidu®
(
Cu¼Residu
, 
Ba£Residu
, 
Pps
, 
PicWidthInPix
, 
Quªtif
, 
Residu_Luma
, 
Residu_Cb
, 
Residu_Cr
);

96 }ià(
Cu¼Residu
 -> 
Cbp
){

98 iàĞ!
N®
 -> 
PicToDecode
){

100 
	`ResÿËCu¼’tCÛff
(
Cu¼Residu
, 
Ba£Residu
, 
Pps
, 
Quªtif
, 
N®
 -> 
S·tŸlSÿÏb™y
);

103 
	`ba£_Ïy”_»sidu®
(
Cu¼Residu
, 
Residu_Luma
, 
Residu_Cb
, 
Residu_Cr
, 
PicWidthInPix
, 
Pps
, 
Quªtif
);

108 
	`upd©e_blk4x4Res
(
Residu_Luma
, 
Cu¼Residu
, 
PicWidthInPix
);

113 ià(
N®
 -> 
TCÛffP»diùiÚ
){

114 
Cu¼Residu
 -> 
blk4x4
 = Cu¼Residu -> 
blk4x4_Res
;

116 
	}
}

123 
	$AddResidu®Pic
(cÚ¡ 
NAL
 *
N®
, cÚ¡ 
PPS
 *
Pps
, 
RESIDU
 *
Cu¼Residu
, RESIDU *
Ba£Residu
,

124 cÚ¡ 
PicWidthInPix
, cÚ¡ 
W_TABLES
 *
Quªtif
,

125 *
Y
,*
U
, *
V
,

126 *
Residu_Luma
, *
Residu_Cb
, *
Residu_Cr
)

130 ià(
Cu¼Residu
 -> 
Residu®P»diùiÚFÏg
){

131 
	`Residu®P»diùiÚ
(
N®
, 
Pps
, 
Quªtif
, 
Cu¼Residu
, 
Ba£Residu
, 
PicWidthInPix
, 
Residu_Luma
, 
Residu_Cb
, 
Residu_Cr
);

134 
	`add_com³n£d_»sidu®
(
Y
, 
U
, 
V
, 
Residu_Luma
, 
Residu_Cb
, 
Residu_Cr
, 
PicWidthInPix
);

137 
Cu¼Residu
 -> 
blk4x4_Res
 = Cu¼Residu -> 
blk4x4
;

138 ià(
Cu¼Residu
 -> 
Cbp
){

140 
	`Compu‹Residu®
(
Pps
, 
Cu¼Residu
, 
PicWidthInPix
, 
Y
, 
U
, 
V
, 
Quªtif
);

141 } iàĞ(
N®
 -> 
SCÛffP»diùiÚ
 || N® -> 
TCÛffP»diùiÚ
è&& 
Cu¼Residu
 -> 
Residu®P»diùiÚFÏg
){

144 
Cu¼Residu
 -> 
Qp
 = 
Ba£Residu
 -> Qp;

145 
Cu¼Residu
 -> 
T¿nsfÜm8x8
 = 
Ba£Residu
 -> Transform8x8;

148 
	}
}

156 
	$AddResidu®Res
(cÚ¡ 
NAL
 *
N®
, cÚ¡ 
PPS
 *
Pps
, 
RESIDU
 *
Cu¼Residu
, RESIDU *
Ba£Residu
,

157 cÚ¡ 
PicWidthInPix
, cÚ¡ 
W_TABLES
 *
Quªtif
,

158 *
Residu_Luma
, *
Residu_Cb
, *
Residu_Cr
)

162 ià(
Cu¼Residu
 -> 
Residu®P»diùiÚFÏg
){

163 
	`Residu®P»diùiÚ
(
N®
, 
Pps
, 
Quªtif
, 
Cu¼Residu
, 
Ba£Residu
, 
PicWidthInPix
, 
Residu_Luma
, 
Residu_Cb
, 
Residu_Cr
);

164 }ià(!
N®
 -> 
PicToDecode
){

165 
	`ResÿËCu¼’tCÛff
(
Cu¼Residu
, 
Ba£Residu
, 
Pps
, 
Quªtif
, 
N®
 -> 
S·tŸlSÿÏb™y
);

168 
Cu¼Residu
 -> 
blk4x4_Res
 = Cu¼Residu -> 
blk4x4
;

169 
	`Compu‹Residu®Image
(
Pps
, 
Cu¼Residu
, 
PicWidthInPix
, 
Residu_Luma
, 
Residu_Cb
, 
Residu_Cr
, 
Quªtif
);

171 
	}
}

178 
	$AddResidu®
(cÚ¡ 
NAL
 *
N®
, cÚ¡ 
PPS
 * 
Pps
, 
RESIDU
 *
Cu¼Residu
, RESIDU *
Ba£Residu
,

179 cÚ¡ 
PicWidthInPix
, cÚ¡ 
W_TABLES
 *
quªtif
,

180 *
Y
,*
U
, *
V
,

181 *
Residu_Luma
, *
Residu_Cb
, *
Residu_Cr
)

185 if(
N®
 -> 
PicToDi¥Ïy
){

186 
	`AddResidu®Pic
(
N®
, 
Pps
, 
Cu¼Residu
, 
Ba£Residu
, 
PicWidthInPix
, 
quªtif
, 
Y
, 
U
, 
V
, 
Residu_Luma
, 
Residu_Cb
, 
Residu_Cr
);

187 }ià(
N®
 -> 
SCÛffP»diùiÚ
){

190 
	`SCÛffResidu®AddRes
(
N®
, 
Cu¼Residu
, 
Ba£Residu
, 
Pps
, 
PicWidthInPix
, 
quªtif
, 
Residu_Luma
, 
Residu_Cb
, 
Residu_Cr
);

193 
	`AddResidu®Res
(
N®
, 
Pps
, 
Cu¼Residu
, 
Ba£Residu
, 
PicWidthInPix
, 
quªtif
, 
Residu_Luma
, 
Residu_Cb
, 
Residu_Cr
);

195 
	}
}

	@lib_svc/ResidualProcessing.h

36 #iâdeà
RESIDUAL_PROCESS_H


37 
	#RESIDUAL_PROCESS_H


	)

40 
	~"ş.h
"

43 
	~"svc_ty³.h
"

46 
ba£_Ïy”_»sidu®
(
RESIDU
 *
»sidu
, *
Luma
, *
Chroma_Cb
, *
Chroma_Cr
, cÚ¡ 
PicWidthInPix
, cÚ¡ 
PPS
 *
Pps
, cÚ¡ 
W_TABLES
 *
quªtif
);

47 
AddResidu®Pic
(cÚ¡ 
NAL
 *
N®
,cÚ¡ 
PPS
 * 
Pps
 , 
RESIDU
 *
»sidu
, RESIDU *
Ba£Residu
,cÚ¡ 
PicWidthInMbs
 , cÚ¡ 
W_TABLES
 *
quªtif
,

48 *
Y
,*
U
, *
V
, *
Residu_img_lum
, *
Residu_img_Cb
, *
Residu_img_Cr
);

50 
AddResidu®Res
(cÚ¡ 
NAL
 *
N®
, cÚ¡ 
PPS
 *
Pps
, 
RESIDU
 *
Cu¼Residu
, RESIDU *
Ba£Residu
, cÚ¡ 
PicWidthInPix
,

51 cÚ¡ 
W_TABLES
 *
quªtif
, *
Residu_Luma
, *
Residu_Cb
, *
Residu_Cr
);

52 
AddResidu®
(cÚ¡ 
NAL
 *
N®
, cÚ¡ 
PPS
 * 
Pps
, 
RESIDU
 *
Cu¼Residu
, RESIDU *
Ba£Residu
, cÚ¡ 
PicWidthInPix
,

53 cÚ¡ 
W_TABLES
 *
quªtif
, *
Y
,*
U
, *
V
,

54 *
Residu_Luma
, *
Residu_Cb
, *
Residu_Cr
);

56 
SCÛffPic
(
RESIDU
 *
»sidu
, cÚ¡ RESIDU *
Ba£Residu
, *
Y
, *
Cb
, *
Cr
,

57 cÚ¡ 
PicWidthInPix
, cÚ¡ 
PPS
 *
Pps
, cÚ¡ 
W_TABLES
 *
quªtif
);

60 #ifdeà
TI_OPTIM


61 
	#add_com³n£d_»sidu®
 
add_com³n£d_»sidu®_TI


	)

62 
	#Re£tMbResidu
 
Re£tMbResidu_TI


	)

63 
	#AddCÛff
 
AddCÛff_TI


	)

64 
	#AddCÛff64
 
AddCÛff64_TI


	)

65 
	#AddCÛff256
 
AddCÛff256_TI


	)

67 
	#add_com³n£d_»sidu®
 
add_com³n£d_»sidu®_C


	)

68 
	#Re£tMbResidu
 
Re£tMbResidu_C


	)

69 
	#AddCÛff
 
AddCÛff_C


	)

70 
	#AddCÛff64
 
AddCÛff64_C


	)

71 
	#AddCÛff256
 
AddCÛff256_C


	)

75 #ifdeà
TI_OPTIM


81 
__šlše
 
	$Re£tMbResidu_TI
(*
Residu
, *
Residu_Cb
, *
Residu_Cr
,cÚ¡ 
PicWidthInPix
)

83 
i
;

84 
PicWidthInPixCr
=
PicWidthInPix
>>1;

86  
i
 = 0; i < 16; i++){

87 
	`_mem8
(
Residu
+ 
i
 * 
PicWidthInPix
+0 ) = 0;

88 
	`_mem8
(
Residu
+ 
i
 * 
PicWidthInPix
+4 ) = 0;

89 
	`_mem8
(
Residu
+ 
i
 * 
PicWidthInPix
+8 ) = 0;

90 
	`_mem8
(
Residu
+ 
i
 * 
PicWidthInPix
+12) = 0;

96  
i
 = 0; i < 8; i++){

97 
	`_mem8
(
Residu_Cb
+ 
i
 * 
PicWidthInPixCr
+0 ) = 0;

98 
	`_mem8
(
Residu_Cb
+ 
i
 * 
PicWidthInPixCr
+4 ) = 0;

99 
	`_mem8
(
Residu_Cr
+ 
i
 * 
PicWidthInPixCr
+0 ) = 0;

100 
	`_mem8
(
Residu_Cr
+ 
i
 * 
PicWidthInPixCr
+4 ) = 0;

106 
	}
}

110 
__šlše
 
	$AddCÛff_TI
(*
CÛff
, cÚ¡ *
Ba£LumaCÛff
){

111 
i
;

113  
i
 = 0; i < 16; i=i+2){

114 
	`_mem4
(
CÛff
+ 
i
èğ
	`_add2
(_mem4(CÛff+ i), _mem4((*)(
Ba£LumaCÛff
+i)));

116 
	}
}

120 
__šlše
 
	$AddCÛff64_TI
(*
CÛff
, *
Ba£LumaCÛff
){

121 
i
;

123  
i
 = 0; i < 64; i=i+2){

124 
	`_mem4
(
CÛff
+ 
i
èğ
	`_add2
(_mem4(CÛff+ i), _mem4(
Ba£LumaCÛff
+i));

126 
	}
}

128 
__šlše
 
	$AddCÛff256_TI
(*
CÛff
, *
Ba£LumaCÛff
){

129 
i
;

131  
i
 = 0; i < 256; i=i+2){

132 
	`_mem4
(
CÛff
+ 
i
èğ
	`_add2
(_mem4(CÛff+ i), _mem4(
Ba£LumaCÛff
+i));

134 
	}
}

136 
__šlše
 
	$add_com³n£d_»sidu®_TI
(*
Y
, *
U
, *
V
, *
luma_»sidu
,

137 *
Cb_»sidu
, *
Cr_»sidu
, cÚ¡ 
PicWidthInPix
)

140 
i
;

141 
A
,
B
,
C
,
D
;

142 
PicWidthInPixCr
=
PicWidthInPix
>>1;

144  
i
 = 0; i < 16; i++){

145 
A
=
	`_mem4
(
Y
+
i
*
PicWidthInPix
);

146 
B
=
	`_mem4
(
Y
+
i
*
PicWidthInPix
+4);

147 
C
=
	`_mem4
(
Y
+
i
*
PicWidthInPix
+8);

148 
D
=
	`_mem4
(
Y
+
i
*
PicWidthInPix
+12);

149 
	`_mem4
(
Y
+
i
*
PicWidthInPix
+0 )=
	`_¥acku4
(
	`_add2
(
	`_uÅkhu4
(
A
),_mem4(
luma_»sidu
+˜* PicWidthInPix+2 )è,_add2(
	`_uÅklu4
(A),_mem4(luma_residu+i * PicWidthInPix+0 )) );

150 
	`_mem4
(
Y
+
i
*
PicWidthInPix
+4 )=
	`_¥acku4
(
	`_add2
(
	`_uÅkhu4
(
B
),_mem4(
luma_»sidu
+˜* PicWidthInPix+6 )è,_add2(
	`_uÅklu4
(B),_mem4(luma_residu+i * PicWidthInPix+4 )) );

151 
	`_mem4
(
Y
+
i
*
PicWidthInPix
+8 )=
	`_¥acku4
(
	`_add2
(
	`_uÅkhu4
(
C
),_mem4(
luma_»sidu
+˜* PicWidthInPix+10)è,_add2(
	`_uÅklu4
(C),_mem4(luma_residu+i * PicWidthInPix+8 )) );

152 
	`_mem4
(
Y
+
i
*
PicWidthInPix
+12)=
	`_¥acku4
(
	`_add2
(
	`_uÅkhu4
(
D
),_mem4(
luma_»sidu
+˜* PicWidthInPix+14)è,_add2(
	`_uÅklu4
(D),_mem4(luma_residu+i * PicWidthInPix+12)) );

159  
i
 = 0; i < 8; i++){

160 
A
=
	`_mem4
(
U
+
i
*
PicWidthInPixCr
);

161 
B
=
	`_mem4
(
U
+
i
*
PicWidthInPixCr
+4);

162 
	`_mem4
(
U
+
i
*
PicWidthInPixCr
+0 )=
	`_¥acku4
(
	`_add2
(
	`_uÅkhu4
(
A
),_mem4(
Cb_»sidu
+˜* PicWidthInPixCr+2 )è,_add2(
	`_uÅklu4
(A),_mem4(Cb_residu+i * PicWidthInPixCr+0 )) );

163 
	`_mem4
(
U
+
i
*
PicWidthInPixCr
+4 )=
	`_¥acku4
(
	`_add2
(
	`_uÅkhu4
(
B
),_mem4(
Cb_»sidu
+˜* PicWidthInPixCr+6 )è,_add2(
	`_uÅklu4
(B),_mem4(Cb_residu+i * PicWidthInPixCr+4 )) );

165 
C
=
	`_mem4
(
V
+
i
*
PicWidthInPixCr
);

166 
D
=
	`_mem4
(
V
+
i
*
PicWidthInPixCr
+4);

167 
	`_mem4
(
V
+
i
*
PicWidthInPixCr
+0 )=
	`_¥acku4
(
	`_add2
(
	`_uÅkhu4
(
C
),_mem4(
Cr_»sidu
+˜* PicWidthInPixCr+2 )è,_add2(
	`_uÅklu4
(C),_mem4(Cr_residu+i * PicWidthInPixCr+0 )) );

168 
	`_mem4
(
V
+
i
*
PicWidthInPixCr
+4 )=
	`_¥acku4
(
	`_add2
(
	`_uÅkhu4
(
D
),_mem4(
Cr_»sidu
+˜* PicWidthInPixCr+6 )è,_add2(
	`_uÅklu4
(D),_mem4(Cr_residu+i * PicWidthInPixCr+4 )) );

175 
	}
}

184 
__šlše
 
	$Re£tMbResidu_C
(*
Residu
, *
Residu_Cb
, *
Residu_Cr
,cÚ¡ 
PicWidthInPix
)

186 
i
,
j
;

188  
i
 = 0; i < 16; i++){

189  
j
 = 0; j < 16; j++){

190 
Residu
[
j
 + 
i
 * 
PicWidthInPix
] = 0;

194  
i
 = 0; i < 8; i++){

195  
j
 = 0; j < 8; j++){

196 
Residu_Cb
[
j
 + 
i
 * (
PicWidthInPix
 >> 1)] = 
Residu_Cr
[j + i * (PicWidthInPix >> 1)] = 0;

199 
	}
}

204 
__šlše
 
	$add_com³n£d_»sidu®_C
(*
Y
, *
U
, *
V
, *
luma_»sidu
,

205 *
Cb_»sidu
, *
Cr_»sidu
, cÚ¡ 
PicWidthInPix
)

208 
i
,
j
;

210  
i
 = 0; i < 16; i++){

211  
j
 = 0; j < 16; j++){

212 
Y
 [
i
*
PicWidthInPix
 + 
j
] = (è
	`CLIP255
(Y[˜* PicWidthInPix + j] + 
luma_»sidu
[i * PicWidthInPix + j]) ;

216  
i
 = 0; i < 8; i++){

217  
j
 = 0; j < 8; j++){

218 
U
 [
i
 * (
PicWidthInPix
 >> 1è+ 
j
] = (è
	`CLIP255
(U[˜* (PicWidthInPix >> 1è+ j] + 
Cb_»sidu
[i*(PicWidthInPix >> 1) + j]) ;

219 
V
 [
i
 * (
PicWidthInPix
 >> 1è+ 
j
] = (è
	`CLIP255
(V[˜* (PicWidthInPix >> 1è+ j] + 
Cr_»sidu
[i*(PicWidthInPix >> 1) + j]) ;

222 
	}
}

231 
__šlše
 
	$AddCÛff_C
(*
CÛff
, cÚ¡ *
Ba£LumaCÛff
){

232 
i
;

234  
i
 = 0; i < 16; i++){

235 
CÛff
 [
i
] = CÛfà[i] + 
Ba£LumaCÛff
[i];

237 
	}
}

243 
__šlše
 
	$AddCÛff64_C
(*
CÛff
, *
Ba£LumaCÛff
){

244 
i
;

246  
i
 = 0; i < 64; i++){

247 
CÛff
 [
i
] = CÛfà[i] + 
Ba£LumaCÛff
[i];

249 
	}
}

257 
__šlše
 
	$AddCÛff256_C
(*
CÛff
, *
Ba£LumaCÛff
){

258 
i
;

260  
i
 = 0; i < 256; i++){

261 
CÛff
 [
i
] = CÛfà[i] + 
Ba£LumaCÛff
[i];

263 
	}
}

	@lib_svc/SVCDisplay.h

35 #iâdeà
SVC_DISPLAY_H


36 
	#SVC_DISPLAY_H


	)

39 
MªageNewPic
(
NAL
 *
N®
, 
MMO
 *
mmo
, 
LIST_MMO
 *
Cu¼’t_pic
, 
SPS
 *
Sps
, 
Ïy”_numb”
, 
Wª‹dId
);

40 
Di¥ÏyOrd”Svc
(
SPS
 *
¥s
, 
LIST_MMO
 *
Cu¼’t_pic
, 
NAL
 *
N®
, *
add»ss_pic
, *
x_size
, *
y_size
, *
Crİ
, *
ImgToDi¥Ïy
, 
MMO
 *
mmo
);

	@lib_svc/SVCdisplay.c

34 
	~<¡ršg.h
>

35 
	~<¡dlib.h
>

38 
	~"ty³.h
"

39 
	~"di¥Ïy_mªagem’t.h
"

42 
	~"symbŞ.h
"

43 
	~"svc_ty³.h
"

44 
	~"£t_Ïy”.h
"

45 
	~"SVCDi¥Ïy.h
"

46 
	~"E¼ÜD‘eùiÚ.h
"

53 
	$RemoveAuMemÜy
(
MMO
* 
mmo
){

54 
i
;

56  
i
 = 0; i < 
mmo
 -> 
AuMemÜy
; i++){

57 
mmo
 -> 
F»eMemÜyAdd»ss
[mmØ-> 
NumF»eAdd»ss
] = mmØ-> 
AuMemÜyAdd»ss
[
i
];

58 
mmo
 -> 
AuMemÜyAdd»ss
[
i
] = -1;

59 
mmo
 -> 
NumF»eAdd»ss
 ++;

61 
mmo
 -> 
AuMemÜy
 = 0;

62 
	}
}

68 
	$CheckMissšgLay”ToDi¥Ïy
(
NAL
 *
N®
, 
MMO
 *
Mmo
)

70 
j
, 
SameResŞutiÚ
 = 0;

71 
D–ayedPic
 = 
Mmo
 -> 
nb_img_di¥Ïy
 - MmØ-> 
num_ä“_poc_add»ss
;

73 
j
 = 0; j < 
D–ayedPic
 && !
SameResŞutiÚ
; j++){

74 
POC_PARAMS
 *
F¿me
 = &
Mmo
 -> 
poc_·¿ms
[
j
];

75 
SameResŞutiÚ
 = ((
N®
 -> 
Ïy”_id_bË
[
F¿me
 -> 
Lay”Id
] >> 4è=ğ(N® -> 
DqIdToDi¥Ïy
 >> 4));

77 ià(
SameResŞutiÚ
 || 
Mmo
 -> 
num_ä“_poc_add»ss
){

87 
	}
}

92 
	$S—rchSamePOC
(
POC_PARAMS
 *
F¿me
, 
LIST_MMO
 *
Cu¼’t_pic
, 
NAL
 *
N®
, 
Lay”Numb”
){

94 
i
;

95 
Pos
 = -1;

97  
i
 = 0; i < 
NUM_POC_PARAMS
; i++){

98 
POC_PARAMS
 *
Cu¼F¿me
 = &
F¿me
[
NUM_POC_PARAMS
 - 1 - 
i
];

99 ià(
Cu¼F¿me
 -> 
Piùu»
 -> 
poc
 =ğ
Cu¼’t_pic
 ->…oc){

102 ià(
Cu¼F¿me
 -> 
Lay”Id
 < 
Lay”Numb”
){

103 
Pos
 = 
NUM_POC_PARAMS
 - 
i
 - 1;

105 ià(
Cu¼F¿me
 -> 
Piùu»
 -> 
MemÜyAdd»ss
 =ğ
Cu¼’t_pic
 -> MemoryAddress){

106 
SameResŞutiÚ
 = ((
N®
 -> 
Ïy”_id_bË
[
Cu¼F¿me
 -> 
Lay”Id
] >> 4è=ğ(N® -> 
DqIdToDi¥Ïy
 >> 4));

107 if(
SameResŞutiÚ
){

109 
Cu¼F¿me
 -> 
Piùu»
 -> 
PicToDi¥Ïy
 = 
Cu¼’t_pic
 -> PicToDisplay;

110 
Cu¼F¿me
 -> 
Lay”Id
 = 
Lay”Numb”
;

111 
Pos
 = -2;

118  
Pos
;

119 
	}
}

126 
	$MªageNewPic
(
NAL
 *
N®
, 
MMO
 *
Mmo
, 
LIST_MMO
 *
Cu¼’t_pic
, 
SPS
 *
Sps
, 
Ïy”_numb”
, 
Wª‹dId
)

129 
Pos™iÚ
 = 
	`S—rchSamePOC
(
Mmo
 -> 
poc_·¿ms
, 
Cu¼’t_pic
, 
N®
, 
Ïy”_numb”
);

131 ià(
Pos™iÚ
 >= 0){

133 ià(
N®
 -> 
DqId
 > 
Wª‹dId
 || (N® -> 
DisÿrdabËFÏg
 && N® -> DqId !ğN® -> 
DqIdToDi¥Ïy
)){

137 
Mmo
 -> 
F»eMemÜyAdd»ss
[MmØ-> 
NumF»eAdd»ss
] = 
Cu¼’t_pic
 -> 
MemÜyAdd»ss
;

138 
Mmo
 -> 
NumF»eAdd»ss
++;

140 
POC_PARAMS
 *
F¿me
 = &
Mmo
 -> 
poc_·¿ms
[
Pos™iÚ
];

141 
LAYER_MMO
 *
Lay”Mmo
 = &
Mmo
 -> 
Lay”MMO
 [
F¿me
 -> 
Lay”Id
];

142 
F¿meD•’d’cyId
 = 
N®
 -> 
Ïy”_id_bË
 [
F¿me
 -> 
Lay”Id
] >> 4;

144 ià((
F¿meD•’d’cyId
 =ğ(
N®
 -> 
DqIdToDi¥Ïy
 >> 4)è&& N® -> 
U£RefBa£PicFÏg
){

146 
	`Cu¼’tDi¥Ïy
(
Mmo
, 
Lay”Mmo
, 
F¿me
 -> 
Piùu»
, &F¿m-> Piùu» -> 
MemÜyAdd»ss
);

149 
Mmo
 -> 
AuMemÜyAdd»ss
[MmØ-> 
AuMemÜy
] = 
F¿me
 -> 
Piùu»
 -> 
MemÜyAdd»ss
;

150 
Mmo
 -> 
AuMemÜy
++;

153 
F¿me
 -> 
Piùu»
 -> 
di¥Ïyed
 = 1;

154 
Mmo
 -> 
num_ä“_poc_add»ss
 ++;

156 
	`StÜePiùu»
(&
Mmo
 -> 
poc_·¿ms
[MmØ-> 
nb_img_di¥Ïy
 - MmØ-> 
num_ä“_poc_add»ss
], 
Cu¼’t_pic
, 
Sps
, 
Ïy”_numb”
);

157 
Mmo
 -> 
num_ä“_poc_add»ss
 --;

159 } ià(
Pos™iÚ
 == -1){

162 if(!
Mmo
 -> 
num_ä“_poc_add»ss
){

163 
	`RemoveDi¥ÏyE¼Ü
(
Mmo
, 
N®
);

166 
	`StÜePiùu»
(&
Mmo
 -> 
poc_·¿ms
[MmØ-> 
nb_img_di¥Ïy
 - MmØ-> 
num_ä“_poc_add»ss
], 
Cu¼’t_pic
, 
Sps
, 
Ïy”_numb”
);

167 
Mmo
 -> 
num_ä“_poc_add»ss
 --;

170 
i
;

171  
i
 = 0; i < 
NUM_POC_PARAMS
; i++){

172 
POC_PARAMS
 *
Cu¼F¿me
 = &
Mmo
 -> 
poc_·¿ms
[
i
];

173 ià(
Cu¼F¿me
 -> 
Piùu»
 -> 
poc
 =ğ
Cu¼’t_pic
 ->…oc){

174 
Cu¼F¿me
 -> 
Lay”Id
 = 
Ïy”_numb”
;

180 #ifdeà
ERROR_DETECTION


184 if(
Mmo
 -> 
num_ä“_poc_add»ss
 =ğ-1 && 
Pos™iÚ
 == -1){

186 
	`RemoveDi¥ÏyE¼Ü
(
Mmo
, 
N®
);

191 ià(
N®
 -> 
DqIdMax
 =ğN® -> 
DqId
){

192 
	`RemoveAuMemÜy
(
Mmo
);

194 
N®
 -> 
La¡DqIdMax
 = N® -> 
DqIdMax
;

196 
	}
}

202 
	$S—rchF¿meToDi¥Ïy
(
NAL
 *
N®
, 
MMO
 *
Mmo
, *
x_size
, *
y_size
, *
Crİ
, *
ImgToDi¥Ïy
, *
add»ss_pic
)

204 
Be¡Pos
, 
j
, 
Di¥ÏyFÜûd
 = 0;

207 
POC_PARAMS
 *
F¿me
 = 
	`FšdBe¡F¿me
(
Mmo
, MmØ-> 
poc_·¿ms
, &
Be¡Pos
, 
MIN_POC
);

208 
SameResŞutiÚ
 = ((
N®
 -> 
Ïy”_id_bË
[
F¿me
 -> 
Lay”Id
] >> 4è=ğ(N® -> 
DqIdToDi¥Ïy
 >> 4));

211 if(!
SameResŞutiÚ
){

212 if(
N®
 -> 
FlushR’d””
){

215 
Di¥ÏyFÜûd
 = 1;

217 
Di¥ÏyFÜûd
 = 
	`CheckMissšgLay”ToDi¥Ïy
(
N®
, 
Mmo
);

222 ià(!
F¿me
 -> 
is_gho¡
 && (
SameResŞutiÚ
 || 
Di¥ÏyFÜûd
)){

224 
Lay”Numb”
 = 
	`G‘Lay”Numb”
(
N®
, N® -> 
DqIdToDi¥Ïy
);

225 
LAYER_MMO
 *
Lay”Mmo
 = &
Mmo
 -> 
Lay”MMO
 [
Lay”Numb”
];

226 
Mmo
 -> 
num_ä“_poc_add»ss
 ++;

227 
Mmo
 -> 
Lay”MMO
 [0] . 
num_decoded_äame
++;

228 
	`Cu¼’tDi¥Ïy
(
Mmo
, 
Lay”Mmo
, 
F¿me
 -> 
Piùu»
, 
add»ss_pic
);

231 *
ImgToDi¥Ïy
 = 1;

232 *
x_size
 = 
F¿me
 -> x_size;

233 *
y_size
 = 
F¿me
 -> y_size;

234 *
Crİ
 = 
F¿me
 -> Crop;

236 if(!
Di¥ÏyFÜûd
 && 
N®
 -> 
FlushR’d””
){

238 
N®
 -> 
FlushR’d””
 = 0;

241 
	`memmove
(&
Mmo
 -> 
poc_·¿ms
[
Be¡Pos
], &MmØ->…oc_·¿ms[Be¡Po + 1], (MmØ-> 
nb_img_di¥Ïy
 - MmØ-> 
num_ä“_poc_add»ss
 - Be¡Po + 1è* (
POC_PARAMS
));

244 
NewPos
, 
SameLay”
 = 1;

245 *
ImgToDi¥Ïy
 = 2;

246 
Mmo
 -> 
Lay”MMO
 [0] . 
num_decoded_äame
++;

247 
Mmo
 -> 
num_ä“_poc_add»ss
 ++;

249 if(!
SameResŞutiÚ
 && !
F¿me
 -> 
is_gho¡
){

250 
F¿me
 -> 
is_gho¡
 = 1;

254 
Mmo
 -> 
F»eMemÜyAdd»ss
 [MmØ-> 
NumF»eAdd»ss
] = 
F¿me
 -> 
Piùu»
 -> 
MemÜyAdd»ss
;

255 
Mmo
 -> 
NumF»eAdd»ss
++;

259 
j
 = 0; j < 
Mmo
 -> 
nb_img_di¥Ïy
 - MmØ-> 
num_ä“_poc_add»ss
 && 
SameLay”
; j++){

260 
F¿me
 = 
	`FšdBe¡F¿me
(
Mmo
, MmØ-> 
poc_·¿ms
, &
NewPos
, F¿m-> 
Piùu»
 -> 
poc
);

261 
SameResŞutiÚ
 = ((
N®
 -> 
Ïy”_id_bË
[
F¿me
 -> 
Lay”Id
] >> 4è=ğ(N® -> 
DqIdToDi¥Ïy
 >> 4));

262 
SameLay”
 = 
F¿me
 -> 
is_gho¡
 || !
SameResŞutiÚ
;

265 if(!
SameLay”
){

266 *
add»ss_pic
 = 
F¿me
 -> 
Piùu»
 -> 
MemÜyAdd»ss
;

267 *
x_size
 = 
F¿me
 -> x_size;

268 *
y_size
 = 
F¿me
 -> y_size;

269 *
Crİ
 = 
F¿me
 -> Crop;

273 
	`memmove
(&
Mmo
 -> 
poc_·¿ms
[
Be¡Pos
], &MmØ->…oc_·¿ms[Be¡Po + 1], (MmØ-> 
nb_img_di¥Ïy
 - MmØ-> 
num_ä“_poc_add»ss
 - Be¡Po + 1è* (
POC_PARAMS
));

275 
	}
}

286 
	$Di¥ÏyOrd”Svc
(
SPS
 *
¥s
, 
LIST_MMO
 *
Cu¼’t_pic
, 
NAL
 *
N®
, *
add»ss_pic
, *
x_size
,

287 *
y_size
, *
Crİ
, *
ImgToDi¥Ïy
, 
MMO
 *
Mmo
)

292 ià(
Mmo
 -> 
MemÜyAÎoÿtiÚ
){

294 if(
N®
 -> 
DqIdMax
 != 255){

295 
	`MªageNewPic
(
N®
, 
Mmo
, 
Cu¼’t_pic
, 
¥s
, N® -> 
Lay”Id
, N® -> 
DqIdToDi¥Ïy
);

301 
i
;

302 
¡Üe
 = 1;

303 
i
 = 0; i < 
Mmo
 -> 
AuMemÜy
; i++){

304 if(
Mmo
 -> 
AuMemÜyAdd»ss
[
i
] =ğ
Cu¼’t_pic
 -> 
MemÜyAdd»ss
){

305 
¡Üe
 = 0;

309 if(
¡Üe
){

310 
Mmo
 -> 
AuMemÜyAdd»ss
[MmØ-> 
AuMemÜy
] = 
Cu¼’t_pic
 -> 
MemÜyAdd»ss
;

311 
Mmo
 -> 
AuMemÜy
++;

317 ià(
N®
 -> 
DqIdMax
 =ğN® -> 
DqId
 && ((
Mmo
 -> 
nb_img_di¥Ïy
 - MmØ-> 
num_ä“_poc_add»ss
 >= Mmo ->‚b_img_display)

318 || (!
Mmo
 -> 
Lay”MMO
 [0] . 
num_decoded_äame
))){

319 
	`S—rchF¿meToDi¥Ïy
(
N®
, 
Mmo
, 
x_size
, 
y_size
, 
Crİ
, 
ImgToDi¥Ïy
, 
add»ss_pic
);

322 *
ImgToDi¥Ïy
 = 0;

324 *
x_size
 = (
¥s
 -> 
pic_width_š_mbs
) << 4;

325 *
y_size
 = (
¥s
 -> 
pic_height_š_m­_un™s
) << 4;

328 
	}
}

334 
	$FlushSVCF¿me
(
SPS
 *
¥s
, 
NAL
 *
N®
, 
MMO
 *
Mmo
, *
x_size
, *
y_size
, *
Crİ
, *
ImgToDi¥Ïy
, *
add»ss_pic
)

336 if(
Mmo
 -> 
nb_img_di¥Ïy
 - MmØ-> 
num_ä“_poc_add»ss
 == 0){

337 
	`ex™
(10000);

339 
	`S—rchF¿meToDi¥Ïy
(
N®
, 
Mmo
, 
x_size
, 
y_size
, 
Crİ
, 
ImgToDi¥Ïy
, 
add»ss_pic
);

340 
	}
}

346 
	$U£rDefšedS—rchF¿meToDi¥Ïy
(
NAL
 *
N®
, 
MMO
 *
Mmo
, *
x_size
, *
y_size
, *
Crİ
, *
ImgToDi¥Ïy
, *
add»ss_pic
)

348 
Be¡Pos
, 
j
, 
Di¥ÏyFÜûd
 = 0;

351 
POC_PARAMS
 *
F¿me
 = 
	`FšdBe¡F¿me
(
Mmo
, MmØ-> 
poc_·¿ms
, &
Be¡Pos
, 
MIN_POC
);

352 
SameResŞutiÚ
 = ((
N®
 -> 
Ïy”_id_bË
[
F¿me
 -> 
Lay”Id
] >> 4è=ğ(N® -> 
DqIdToDi¥Ïy
 >> 4));

355 if(!
SameResŞutiÚ
){

356 if(
N®
 -> 
FlushR’d””
){

359 
Di¥ÏyFÜûd
 = 1;

361 
Di¥ÏyFÜûd
 = 
	`CheckMissšgLay”ToDi¥Ïy
(
N®
, 
Mmo
);

366 ià(!
F¿me
 -> 
is_gho¡
 && (
SameResŞutiÚ
 || 
Di¥ÏyFÜûd
)){

368 
Lay”Numb”
 = 
	`G‘Lay”Numb”
(
N®
, N® -> 
DqIdToDi¥Ïy
);

369 
LAYER_MMO
 *
Lay”Mmo
 = &
Mmo
 -> 
Lay”MMO
 [
Lay”Numb”
];

370 
Mmo
 -> 
num_ä“_poc_add»ss
 ++;

371 
Mmo
 -> 
Lay”MMO
 [0] . 
num_decoded_äame
++;

372 
	`Cu¼’tDi¥Ïy
(
Mmo
, 
Lay”Mmo
, 
F¿me
 -> 
Piùu»
, 
add»ss_pic
);

375 *
ImgToDi¥Ïy
 = 1;

376 *
x_size
 = 
F¿me
 -> x_size;

377 *
y_size
 = 
F¿me
 -> y_size;

378 *
Crİ
 = 
F¿me
 -> Crop;

380 if(!
Di¥ÏyFÜûd
 && 
N®
 -> 
FlushR’d””
){

382 
N®
 -> 
FlushR’d””
 = 0;

385 
	`memmove
(&
Mmo
 -> 
poc_·¿ms
[
Be¡Pos
], &MmØ->…oc_·¿ms[Be¡Po + 1], (MmØ-> 
nb_img_di¥Ïy
 - MmØ-> 
num_ä“_poc_add»ss
 - Be¡Po + 1è* (
POC_PARAMS
));

423 
	}
}

	@lib_svc/SliceHeaderAnnex.c

35 
	~"ty³.h
"

36 
	~"ş.h
"

37 
	~"b™¡»am.h
"

38 
	~"¦iû_h—d”.h
"

39 
	~"memÜy_mªagem’t.h
"

43 
	~"svc_ty³.h
"

44 
	~"svc_d©a.h
"

45 
	~"£t_Ïy”.h
"

46 
	~"pic_li¡_svc.h
"

47 
	~"E¼ÜD‘eùiÚ.h
"

48 
	~"SliûH—d”Ex‹nsiÚ.h
"

49 
	~"Çl_un™_h—d”_svc_ex‹nsiÚ.h
"

58 
	$SliûH—d”Cut
(*
d©a
, 
SPS
 *
¥s
, 
PPS
 *
µs
, 
NAL
 *
N®
, *
pos™iÚ
)

61 
PicP¬am‘”Id
;

62 
SeqP¬am‘”Id
;

63 
PPS
 *
±_µs_id
 ;

64 
SPS
 *
±_¥s_id
 ;

65 
SLICE
 
Sliû
[1];

66 
MMO
 
Mmo
[1];

67 
LIST_MMO
 
Cu¼’t_pic
[1], 
RefPicLi¡L0
[16], 
RefPicLi¡L1
[16];

68 
LAYER_MMO
 *
Lay”Mmo
 = &
Mmo
 -> 
Lay”MMO
 [
N®
 -> 
Lay”Id
];

70 
Lay”Mmo
 -> 
´evPicOrd”CÁLsb
 = Lay”MmØ-> 
´evPicOrd”CÁMsb
 = 0;

71 
Sliû
 -> 
fœ¡_mb_š_¦iû
 = (è
	`»ad_ue
(
d©a
, 
pos™iÚ
);

72 
Cu¼’t_pic
 -> 
¦iû_ty³
 = 
Sliû
 -> sliû_ty³ = (è
	`»ad_ue
(
d©a
, 
pos™iÚ
);

73 iàĞ
Sliû
 -> 
¦iû_ty³
 > 4 ) {

74 
Cu¼’t_pic
 -> 
¦iû_ty³
 = 
Sliû
 -> slice_type -= 5 ;

77 
PicP¬am‘”Id
 = 
	`»ad_ue
(
d©a
, 
pos™iÚ
);

78 
N®
 -> 
pic_·¿m‘”_id
[N® -> 
Lay”Id
] = 
PicP¬am‘”Id
 = 
	`CLIP3
(0, 
PPS_BUF_SIZE
 - 1, PicParameterId);

79 
±_µs_id
 = &
µs
[
PicP¬am‘”Id
];

80 
SeqP¬am‘”Id
 = 
±_µs_id
 -> 
£q_·¿m‘”_£t_id
 + (
N®
 -> 
Lay”Id
 ? 16: 0);

81 
±_¥s_id
 = &
¥s
[
SeqP¬am‘”Id
];

82 
Lay”Mmo
 -> 
äame_num
 = 
	`g‘Nb™s
(
d©a
, 
pos™iÚ
, 
±_¥s_id
 -> 
log2_max_äame_num
);

84 if(!
±_¥s_id
 -> 
PicSizeInMbs
){

85 
N®
 -> 
N®ToSk
 = 1;

86 
N®
 -> 
PicToDecode
 = N® -> 
PicToDi¥Ïy
 = 0;

91 
	`F¿meH—d”D©a
(
d©a
, 
pos™iÚ
, 
N®
 -> 
N®RefIdc
, N® -> 
IdrFÏg
, N® -> 
Lay”Id
, 1,

92 
Cu¼’t_pic
, 
Lay”Mmo
, 
±_¥s_id
, 
±_µs_id
, 
Mmo
, 
RefPicLi¡L0
, 
RefPicLi¡L1
);

94 
Cu¼’t_pic
 -> 
poc
 = 
	`PocComputiÚ
(
±_¥s_id
, 
N®
 -> 
IdrFÏg
 * 5, N® -> 
N®RefIdc
, 
Lay”Mmo
);

96 ià(
N®
 -> 
Qu®™yId
 == 0){

97 
	`Reã»nûLi¡Proûssšg
(
d©a
, 
pos™iÚ
, 
Sliû
, 
±_µs_id
, 
±_¥s_id
, 
Lay”Mmo
, 
Cu¼’t_pic
, 
RefPicLi¡L0
, 
RefPicLi¡L1
);

98 
Sliû
 -> 
Ad­tiveP»diùiÚFÏg
 = 0;

100 ifĞ
N®
 -> 
N®RefIdc
 != 0 ) {

101 
	`dec_»f_pic_m¬kšg
(
d©a
, 
pos™iÚ
, 
N®
 -> 
IdrFÏg
 * 5, 
±_¥s_id
, 
Lay”Mmo
);

102 ià(!
±_¥s_id
 -> 
¦iû_h—d”_»¡riùiÚ_æag
){

103 
N®
 -> 
StÜeRefBa£PicFÏg
 = 
	`g‘Nb™s
(
d©a
, 
pos™iÚ
, 1);

104 ià(Ğ
N®
 -> 
U£RefBa£PicFÏg
 || N® -> 
StÜeRefBa£PicFÏg
è&& !N® -> 
IdrFÏg
){

105 
	`DecRefBa£PicM¬kšg
(
d©a
, 
pos™iÚ
, 
Mmo
, 
±_¥s_id
, 
N®
);

110 
N®
 -> 
Ba£Lay”Id
 = N® -> 
La¡Lay”Id
;

113 ifĞ
±_µs_id
 -> 
’Œİy_codšg_mode_æag
 && 
Sliû
 -> 
¦iû_ty³
 !ğ
EI
 ){

114 
	`»ad_ue
(
d©a
, 
pos™iÚ
);

117 
	`»ad_£
(
d©a
, 
pos™iÚ
);

119 iàĞ
±_µs_id
 -> 
deblockšg_f‹r_cÚŒŞ_´e£Á_æag
 ) {

120 
di§bË_deblockšg_f‹r_idc
 = 
	`»ad_ue
(
d©a
, 
pos™iÚ
);

121 ià(
di§bË_deblockšg_f‹r_idc
 != 1 ) {

122 
	`»ad_£
(
d©a
, 
pos™iÚ
);

123 
	`»ad_£
(
d©a
, 
pos™iÚ
);

128 ià(
N®
 -> 
Qu®™yId
 =ğ0 && 
±_µs_id
 -> 
num_¦iû_groups_mšus1
 > 0 &&…t_µs_id -> 
¦iû_group_m­_ty³
 >= 3 &&…t_pps_id -> slice_group_map_type <= 5){

129 
PicSizeInM­Un™s
 = 
±_¥s_id
 -> 
PicSizeInMbs
;

130 
SliûGroupChªgeR©e
 = 
±_µs_id
 -> 
¦iû_group_chªge_¿‹_mšus1
;

131 
tmp
 = 
	`log_ba£2
(
PicSizeInM­Un™s
 / 
SliûGroupChªgeR©e
 + 1);

132 
	`g‘Nb™s
(
d©a
, 
pos™iÚ
, 
tmp
);

137 iàĞ!
N®
 -> 
no_š‹r_Ïy”_´ed_æag
 && N® -> 
Qu®™yId
 == 0){

138 
»f_Ïy”_dq_id
 = 
	`»ad_ue
(
d©a
, 
pos™iÚ
);

139 
N®
 -> 
Ba£Lay”Id
 = 
	`G‘Lay”Numb”
(N®, 
»f_Ïy”_dq_id
);

141 
	`N®P¬amIn™
(
N®
, 
µs
, 
¥s
, 
±_¥s_id
);

142 
	`S‘S·tŸlU£d
(
N®
);

144  
Cu¼’t_pic
 -> 
poc
;

145 
	}
}

	@lib_svc/SliceHeaderExtension.c

34 #ifdeà
WIN32


35 
	~"wšdows.h
"

41 
	~"ty³.h
"

42 
	~"ş.h
"

43 
	~"pic_li¡.h
"

44 
	~"b™¡»am.h
"

45 
	~"¦iû_h—d”.h
"

46 
	~"memÜy_mªagem’t.h
"

49 
	~"svc_ty³.h
"

50 
	~"svc_d©a.h
"

51 
	~"£t_Ïy”.h
"

52 
	~"pic_li¡_svc.h
"

53 
	~"E¼ÜD‘eùiÚ.h
"

54 
	~"SliûH—d”Ex‹nsiÚ.h
"

55 
	~"Çl_un™_h—d”_svc_ex‹nsiÚ.h
"

61 
	$S·tŸlSÿÏb™yTy³
(
SPS
 *
¥s
, 
NAL
 *
N®
 ){

63 
š‹¾aûFÏg
 = 0;

64 
ba£IÁ”ÏûFÏg
 = 0;

68 iàĞ
¥s
 -> 
ex‹nded_¥©Ÿl_sÿÏb™y
 < 2 && !
š‹¾aûFÏg
 && !
ba£IÁ”ÏûFÏg
 && !
N®
 -> 
S·tŸlSÿÏb™y
){

72 ià(!
š‹¾aûFÏg
 && !
ba£IÁ”ÏûFÏg
 && (2 * 
N®
 -> 
down_Height
 =ğN® -> 
up_Height
è&& (2 * N® -> 
down_Width
 =ğN® -> 
up_Width
)){

76 iàĞ
¥s
 -> 
ex‹nded_¥©Ÿl_sÿÏb™y
 && !
š‹¾aûFÏg
 && !
ba£IÁ”ÏûFÏg
 &&

77 (2 * 
N®
 -> 
ba£_Height
 =ğN® -> 
cu¼_Height
è&& (2 * N® -> 
ba£_Width
 =ğN® -> 
cu¼_Width
)){

82 
	}
}

90 
	$S‘S·tŸlU£d
(
NAL
 *
N®
){

91 
Lay”
;

93 
Lay”
 = 0; Lay” < 
N®
 -> 
Lay”Id
 ; Layer++){

94 ià(
N®
 -> 
U£dS·tŸl
 [N® -> 
Ba£Lay”Id
] [
Lay”
] == -1){

95 
N®
 -> 
U£dS·tŸl
 [N® -> 
Ba£Lay”Id
] [
Lay”
] = 0;

98 
Lay”
 = 
N®
 -> 
Lay”Id
; Layer < 8 ; Layer++){

99 
N®
 -> 
U£dS·tŸl
 [N® -> 
Ba£Lay”Id
] [
Lay”
] = (èN® -> 
S·tŸlSÿÏb™y
;

101 
	}
}

110 
	$Upd©eReã»nûLi¡Add»ss
(
LAYER_MMO
 *
Lay”Mmo
, 
LIST_MMO
 *
RefLi¡L0
, LIST_MMO *
RefLi¡L1
, 
Qu®™yId
){

112 
i
;

113 
L0CouÁ
 = 0;

114 
L1CouÁ
 = 0;

116  
i
 = 0; i < 16; i++){

117 if(
RefLi¡L0
[
i
] . 
poc
 !ğ
MIN_POC
){

118 
MemÜyAdd»ss
 = 
	`£¬ch_piùu»_add»ss
(
RefLi¡L0
[
i
] . 
poc
, 
Lay”Mmo
, 
Qu®™yId
);

119 iàĞ
MemÜyAdd»ss
 != -1){

120 
RefLi¡L0
[
i
] . 
MemÜyAdd»ss
 = MemoryAddress;

121 
L0CouÁ
 ++;

124 if(
RefLi¡L1
[
i
] . 
poc
 !ğ
MIN_POC
){

125 
MemÜyAdd»ss
 = 
	`£¬ch_piùu»_add»ss
(
RefLi¡L1
[
i
] . 
poc
, 
Lay”Mmo
, 
Qu®™yId
);

126 iàĞ
MemÜyAdd»ss
 != -1){

127 
RefLi¡L1
[
i
] . 
MemÜyAdd»ss
 = MemoryAddress;

128 
L1CouÁ
 ++;

131 if(
RefLi¡L0
[
i
] . 
poc
 =ğ
MIN_POC
 && 
RefLi¡L1
[i] .…oc == MIN_POC){

135 
Lay”Mmo
 -> 
RefCouÁL0
 = 
L0CouÁ
;

136 
Lay”Mmo
 -> 
RefCouÁL1
 = 
L1CouÁ
;

137 
	}
}

145 
	$SvcR—dReã»nûLi¡Proûssšg
(*
d©a
, *
pos™iÚ
, 
NAL
 *
N®
, 
SLICE
 *
Sliû
, 
SPS
 *
±_¥s_id
,

146 
PPS
 *
±_µs_id
, 
LAYER_MMO
 *
Lay”Mmo
, 
LIST_MMO
 *
Cu¼’t_pic
, 
MMO
 *
Mmo
,

147 
LIST_MMO
 *
RefPicLi¡L0
, LIST_MMO *
RefPicLi¡L1
)

150 ià(
N®
 -> 
Qu®™yId
 == 0){

151 
	`Reã»nûLi¡Proûssšg
(
d©a
, 
pos™iÚ
, 
Sliû
, 
±_µs_id
, 
±_¥s_id
, 
Lay”Mmo
, 
Cu¼’t_pic
, 
RefPicLi¡L0
, 
RefPicLi¡L1
);

152 
Sliû
 -> 
Ad­tiveP»diùiÚFÏg
 = 0;

155 
	`P»dWeightTabË
(
d©a
, 
pos™iÚ
, 
±_µs_id
, 
Sliû
);

158 ià((
N®
 -> 
DqId
 !ğN® -> 
DqIdToDi¥Ïy
) && ((Nal -> DqId >> 4) == (Nal -> DqIdToDisplay >> 4))){

160 
Wª‹dLay”
 = 
	`G‘Lay”Numb”
(
N®
, N® -> 
DqIdToDi¥Ïy
);

161 
LAYER_MMO
 *
Lay”
 = &
Mmo
 -> 
Lay”MMO
 [
Wª‹dLay”
];

162 
	`Upd©eReã»nûLi¡Add»ss
(
Lay”
, 
RefPicLi¡L0
, 
RefPicLi¡L1
, 
N®
 -> 
DqIdToDi¥Ïy
 - N® -> 
DqId
);

163 }ià((
N®
 -> 
DqIdMax
 < N® -> 
DqIdToDi¥Ïy
è&& ((N® -> 
DqId
 >> 4) == (Nal -> DqIdMax >> 4))){

165 
Wª‹dLay”
 = 
	`G‘Lay”Numb”
(
N®
, N® -> 
DqIdMax
);

166 
LAYER_MMO
 *
Lay”
 = &
Mmo
 -> 
Lay”MMO
 [
Wª‹dLay”
];

167 
	`Upd©eReã»nûLi¡Add»ss
(
Lay”
, 
RefPicLi¡L0
, 
RefPicLi¡L1
, 
N®
 -> 
DqIdToDi¥Ïy
 - N® -> 
DqId
);

170 ifĞ
N®
 -> 
N®RefIdc
 != 0 ) {

171 
	`dec_»f_pic_m¬kšg
(
d©a
, 
pos™iÚ
, 
N®
 -> 
IdrFÏg
 * 5, 
±_¥s_id
, 
Lay”Mmo
);

172 ià(!
±_¥s_id
 -> 
¦iû_h—d”_»¡riùiÚ_æag
){

173 
N®
 -> 
StÜeRefBa£PicFÏg
 = 
	`g‘Nb™s
(
d©a
, 
pos™iÚ
, 1);

174 ià(Ğ
N®
 -> 
U£RefBa£PicFÏg
 || N® -> 
StÜeRefBa£PicFÏg
è&& !N® -> 
IdrFÏg
){

175 
	`DecRefBa£PicM¬kšg
(
d©a
, 
pos™iÚ
, 
Mmo
, 
±_¥s_id
, 
N®
);

178 
	`S‘DecRefLay”
(
N®
, 
Mmo
, 
Lay”Mmo
, N® -> 
D•’d’cyId
);

180 
Lay”Mmo
 -> 
šdex
 = 0;

183 
Sliû
 -> 
IÁ”Lay”DeblockšgF‹rIdc
 = 1;

185 
	}
}

193 
	$SvcR—dLay”P»diùiÚ
(*
d©a
, *
pos™iÚ
, 
NAL
 *
N®
, 
SPS
 *
±_¥s_id
, 
PPS
 *
±_µs_id
, 
SLICE
 *
Sliû
,

194 
LIST_MMO
 *
Cu¼’t_pic
, 
MMO
 *
Mmo
, 
EndOfSliû
)

197 
R—lBa£Lay”
 = 0;

199 iàĞ!
N®
 -> 
no_š‹r_Ïy”_´ed_æag
 && N® -> 
Qu®™yId
 == 0){

200 
»f_Ïy”_dq_id
 = 
	`»ad_ue
(
d©a
, 
pos™iÚ
);

201 
R—lBa£Lay”
 = 
N®
 -> 
Ba£Lay”Id
 = 
	`G‘Lay”Numb”
(N®, 
»f_Ïy”_dq_id
);

203 iàĞ
±_¥s_id
 -> 
IÁ”Lay”DeblockšgF‹rFÏg
){

204 
Sliû
 -> 
IÁ”Lay”DeblockšgF‹rIdc
 = (è
	`»ad_ue
(
d©a
, 
pos™iÚ
);

206 if(
Sliû
 -> 
IÁ”Lay”DeblockšgF‹rIdc
 != 1 ) {

207 
±_µs_id
 -> 
AÍhaOff£tUp§pm¶šg
 = (è(
	`»ad_£
(
d©a
, 
pos™iÚ
) << 1);

208 
±_µs_id
 -> 
B‘aOff£tUp§pm¶šg
 = ((è
	`»ad_£
(
d©a
, 
pos™iÚ
) << 1);

212 
Sliû
 -> 
IÁ”Lay”DeblockšgF‹rIdc
 = 1;

213 
±_µs_id
 -> 
AÍhaOff£tUp§pm¶šg
 = 0;

214 
±_µs_id
 -> 
B‘aOff£tUp§pm¶šg
 = 0;

217 
±_µs_id
 -> 
cÚ¡¿šed_šŒa_up§m¶šg_æag
 = (è
	`g‘Nb™s
(
d©a
, 
pos™iÚ
, 1);

219 ifĞ
±_¥s_id
 -> 
ex‹nded_¥©Ÿl_sÿÏb™y
 == 2 ) {

220 iàĞ(
±_¥s_id
 -> 
chroma_fÜm©_idc
) > 0 ) {

221 
	`g‘Nb™s
(
d©a
, 
pos™iÚ
, 2) ;

222 
	`g‘Nb™s
(
d©a
, 
pos™iÚ
, 2) ;

225 } ià(!
EndOfSliû
){

226 if(
N®
 -> 
DqId
){

227 
Ba£Lay”DqId
 = 
N®
 -> 
Ïy”_id_bË
 [N® -> 
La¡DecodedId
];

228 
N®
 -> 
Ba£Lay”Id
 = 
R—lBa£Lay”
 = 
	`G‘Lay”Numb”
(N®, 
Ba£Lay”DqId
);

230 
N®
 -> 
Ba£Lay”Id
 = 
R—lBa£Lay”
;

233 
R—lBa£Lay”
 = 
N®
 -> 
Ba£Lay”Id
;

238 
N®
 -> 
Ba£MvMemÜyAdd»ss
 = 
	`£¬ch_mv_add»ss
(
Cu¼’t_pic
 -> 
poc
, &
Mmo
 -> 
Lay”MMO
 [N® -> 
Ba£Lay”Id
]);

239 
N®
 -> 
Ba£MemÜyAdd»ss
 = 
	`£¬ch_piùu»_add»ss
(
Cu¼’t_pic
 -> 
poc
, &
Mmo
 -> 
Lay”MMO
 [
R—lBa£Lay”
], 0);

240 
	}
}

248 
	$SvcR—dDeçuÉP¬am‘”s
(*
d©a
, *
pos™iÚ
, 
NAL
 *
N®
, 
SLICE
 *
Sliû
, 
SPS
 *
±_¥s_id
)

251 iàĞ!
N®
 -> 
no_š‹r_Ïy”_´ed_æag
){

252 
deçuÉ_ba£_mode_æag
 = 0;

253 
deçuÉ_mÙiÚ_´ediùiÚ_æag
 = 0;

254 
deçuÉ_»sidu®_´ediùiÚ_æag
 = 0;

256 
N®
 -> 
SliûSkFÏg
 = (è
	`g‘Nb™s
(
d©a
, 
pos™iÚ
, 1);

257 ifĞ
N®
 -> 
SliûSkFÏg
 ){

258 
	`»ad_ue
(
d©a
, 
pos™iÚ
);

261 
Sliû
 -> 
Ad­tiveBa£ModeFÏg
 = (è
	`g‘Nb™s
(
d©a
, 
pos™iÚ
, 1);

262 ifĞ!
Sliû
 -> 
Ad­tiveBa£ModeFÏg
 ){

263 
deçuÉ_ba£_mode_æag
 = (è
	`g‘Nb™s
(
d©a
, 
pos™iÚ
, 1);

265 
Sliû
 -> 
DeçuÉBa£ModeFÏg
 = (è
deçuÉ_ba£_mode_æag
;

267 ifĞ!
deçuÉ_ba£_mode_æag
 ) {

268 
Sliû
 -> 
Ad­tiveMÙiÚP»diùiÚFÏg
 = (è
	`g‘Nb™s
(
d©a
, 
pos™iÚ
, 1);

269 ifĞ!
Sliû
 -> 
Ad­tiveMÙiÚP»diùiÚFÏg
 )

270 
deçuÉ_mÙiÚ_´ediùiÚ_æag
 = (è
	`g‘Nb™s
(
d©a
, 
pos™iÚ
, 1);

272 
Sliû
 -> 
Ad­tiveMÙiÚP»diùiÚFÏg
 = 0;

275 
Sliû
 -> 
DeçuÉMÙiÚP»diùiÚFÏg
 = 
deçuÉ_mÙiÚ_´ediùiÚ_æag
;

277 
Sliû
 -> 
Ad­tiveResidu®P»diùiÚFÏg
 = (è
	`g‘Nb™s
(
d©a
, 
pos™iÚ
, 1);

278 ifĞ!
Sliû
 -> 
Ad­tiveResidu®P»diùiÚFÏg
 ){

279 
deçuÉ_»sidu®_´ediùiÚ_æag
 = (è
	`g‘Nb™s
(
d©a
, 
pos™iÚ
, 1);

282 
Sliû
 -> 
DeçuÉResidu®P»diùiÚFÏg
 = 
deçuÉ_»sidu®_´ediùiÚ_æag
;

284 ifĞ
±_¥s_id
 -> 
ad­tive_tcÛff_Ëv–_´ediùiÚ_æag
 == 1 ){

285 
N®
 -> 
TCÛffP»diùiÚ
 = (è
	`g‘Nb™s
(
d©a
, 
pos™iÚ
, 1);

287 
N®
 -> 
TCÛffP»diùiÚ
 = (è
±_¥s_id
 -> 
tcÛff_Ëv–_´ediùiÚ_æag
;

292 
Sliû
 -> 
Ad­tiveBa£ModeFÏg
 = 0;

293 
Sliû
 -> 
Ad­tiveMÙiÚP»diùiÚFÏg
 = 0;

294 
Sliû
 -> 
Ad­tiveResidu®P»diùiÚFÏg
 = 0;

295 
Sliû
 -> 
DeçuÉBa£ModeFÏg
 = 0;

296 
N®
 -> 
TCÛffP»diùiÚ
 = 0;

301 ià(!
N®
 -> 
TCÛffP»diùiÚ
 && !N® -> 
no_š‹r_Ïy”_´ed_æag
 && !N® -> 
S·tŸlSÿÏb™y
){

302 
N®
 -> 
SCÛffP»diùiÚ
 = 1;

304 
N®
 -> 
SCÛffP»diùiÚ
 = 0;

308 ifĞ!
±_¥s_id
 -> 
¦iû_h—d”_»¡riùiÚ_æag
 && !
N®
 -> 
SliûSkFÏg
) {

309 
sÿn_idx_¡¬t
 = 
	`g‘Nb™s
(
d©a
, 
pos™iÚ
, 4);

310 
sÿn_idx_’d
 = 
	`g‘Nb™s
(
d©a
, 
pos™iÚ
, 4);

311 
Sliû
 -> 
nÙDeçuÉSÿnIdx
 = !(
sÿn_idx_¡¬t
 =ğ0 && 
sÿn_idx_’d
 == 15);

313 if(
Sliû
 -> 
nÙDeçuÉSÿnIdx
 && !
N®
 -> 
N®ToSk
){

323 
N®
 -> 
N®ToSk
 = 1;

326 
	}
}

337 
	$N®P¬amIn™
(
NAL
 *
N®
, 
PPS
 *
µs
, 
SPS
 *
¥s
, SPS *
±_¥s_id
)

342 
PPS
 *
ba£_µs
 = &
µs
[
N®
 -> 
pic_·¿m‘”_id
[N® -> 
Ba£Lay”Id
]];

343 
SPS
 *
ba£_¥s
 = &
¥s
[
ba£_µs
 -> 
£q_·¿m‘”_£t_id
 + (
N®
 -> 
Ba£Lay”Id
 ? 16: 0)];

347 
N®
 -> 
cu¼_Width
 = (è
±_¥s_id
 -> 
pic_width_š_mbs
 << 4;

348 
N®
 -> 
cu¼_Height
 = (è
±_¥s_id
 -> 
pic_height_š_m­_un™s
 << 4;

349 
N®
 -> 
ba£_Width
 = (è
ba£_¥s
 -> 
pic_width_š_mbs
 << 4;

350 
N®
 -> 
ba£_Height
 = (è
ba£_¥s
 -> 
pic_height_š_m­_un™s
 << 4;

353 
N®
 -> 
up_Width
 = N® -> 
cu¼_Width
 - ((
±_¥s_id
 -> 
sÿËd_ba£_Ëá_off£t
 +…t_¥s_id -> 
sÿËd_ba£_right_off£t
) << 1);

354 
N®
 -> 
up_Height
 = N® -> 
cu¼_Height
 - ((
±_¥s_id
 -> 
sÿËd_ba£_tİ_off£t
 +…t_¥s_id -> 
sÿËd_ba£_bÙtom_off£t
) << 1);

356 ifĞ
N®
 -> 
Qu®™yId
){

357 
N®
 -> 
down_Width
 = N® -> 
up_Width
;

358 
N®
 -> 
down_Height
 = N® -> 
up_Height
;

360 
N®
 -> 
down_Width
 = N® -> 
ba£_Width
;

361 
N®
 -> 
down_Height
 = N® -> 
ba£_Height
;

364 if(!
N®
 -> 
MvC®x
[N® -> 
Lay”Id
] || !N® -> 
MvC®y
[Nal -> LayerId]){

365 
N®
 -> 
MvC®x
[N® -> 
Lay”Id
] = 
	`RESAMPLE_CAL
(N® -> 
up_Width
, N® -> 
down_Width
);

366 
N®
 -> 
MvC®y
[N® -> 
Lay”Id
] = 
	`RESAMPLE_CAL
(N® -> 
up_Height
, N® -> 
down_Height
);

372 
N®
 -> 
LoİF‹rS·tŸlSÿÏb™y
 = N® -> 
S·tŸlSÿÏb™y
;

375 if(
N®
 -> 
DqId
){

376 
N®
 -> 
S·tŸlSÿÏb™y
 = N® -> 
up_Width
 !ğN® -> 
down_Width
 && N® -> 
up_Height
 !ğN® -> 
down_Height
;

378 
N®
 -> 
S·tŸlSÿÏb™y
 = 0;

382 iàĞ!
±_¥s_id
 -> 
IÁ”Lay”DeblockšgF‹rFÏg
 && 
N®
 -> 
S·tŸlSÿÏb™y
){

383 
N®
 -> 
LoİF‹rFÜûdIdc
 = 1;

385 
N®
 -> 
LoİF‹rFÜûdIdc
 = 0;

388 
N®
 -> 
nÚ_dŸdic
 = (N® -> 
up_Width
 % N® -> 
down_Width
è|| ( N® -> 
up_Height
 % N® -> 
down_Height
);

389 
N®
 -> 
is_üİpšg
 = 
±_¥s_id
 -> 
sÿËd_ba£_Ëá_off£t
 ||…t_¥s_id -> 
sÿËd_ba£_bÙtom_off£t
 ||…t_¥s_id -> 
sÿËd_ba£_tİ_off£t
 ||…t_¥s_id -> 
sÿËd_ba£_right_off£t
;

391 
N®
 -> 
Ëá_off£t
 = 
±_¥s_id
 -> 
sÿËd_ba£_Ëá_off£t
 << 1;

392 
N®
 -> 
tİ_off£t
 = 
±_¥s_id
 -> 
sÿËd_ba£_tİ_off£t
 << 1;

393 
	}
}

	@lib_svc/SliceHeaderExtension.h

34 #iâdeà
SLICE_HEADER_EXT_H


35 
	#SLICE_HEADER_EXT_H


	)

39 
	~"ty³.h
"

44 
__šlše
 
	$£¬ch_piùu»_add»ss
(
poc
, cÚ¡ 
LAYER_MMO
 *
Lay”Mmo
, 
Qu®™yId
)

46 
i
;

48 
i
 = 0; i < 
Lay”Mmo
 -> 
ShÜtRefCouÁ
; i++) {

49 ià(
Lay”Mmo
 -> 
ShÜtRef
[
i
] . 
poc
 ==…oc){

50  (
Lay”Mmo
 -> 
ShÜtRef
[
i
] . 
MemÜyAdd»ss
);

53 
i
 = 0; i < 16; i++) {

54 ià(
Lay”Mmo
 -> 
LÚgRef
 [
i
] . 
poc
 ==…oc){

55  (
Lay”Mmo
 -> 
LÚgRef
 [
i
] . 
MemÜyAdd»ss
);

58 if(
Qu®™yId
){

59  
	`£¬ch_piùu»_add»ss
(
poc
, &
Lay”Mmo
[-1], 
Qu®™yId
 - 1);

62 
	}
}

69 
__šlše
 
	$£¬ch_mv_add»ss
(
poc
, cÚ¡ 
LAYER_MMO
 *
Lay”Mmo
)

71 
i
;

73 
i
 = 0; i < 
Lay”Mmo
 -> 
ShÜtRefCouÁ
; i++) {

74 ià(
Lay”Mmo
 -> 
ShÜtRef
[
i
] . 
poc
 ==…oc){

75  (
Lay”Mmo
 -> 
ShÜtRef
[
i
] . 
MvMemÜyAdd»ss
);

78 
i
 = 0; i < 16; i++) {

79 ià(
Lay”Mmo
 -> 
LÚgRef
[
i
] . 
poc
 ==…oc){

80  (
Lay”Mmo
 -> 
LÚgRef
[
i
] . 
MvMemÜyAdd»ss
);

84 
	}
}

88 
SliûH—d”Cut
(*
d©a
, 
SPS
 *
¥s
, 
PPS
 *
µs
, 
NAL
 *
N®
, *
pos™iÚ
);

89 
S·tŸlSÿÏb™yTy³
(
SPS
 *
¥s
, 
NAL
 *
N®
 );

90 
Upd©eReã»nûLi¡Add»ss
(
LAYER_MMO
 *
Lay”Mmo
, 
LIST_MMO
 *
RefLi¡L0
, LIST_MMO *
RefLi¡L1
, 
Qu®™yId
);

91 
N®P¬amIn™
(
NAL
 *
N®
, 
PPS
 *
µs
, 
SPS
 *
¥s
, SPS *
±_¥s_id
);

92 
S‘S·tŸlU£d
(
NAL
 *
N®
);

93 
SvcR—dDeçuÉP¬am‘”s
(*
d©a
, *
pos™iÚ
, 
NAL
 *
N®
, 
SLICE
 *
Sliû
, 
SPS
 *
±_¥s_id
);

94 
SvcR—dLay”P»diùiÚ
(*
d©a
, *
pos™iÚ
, 
NAL
 *
N®
, 
SPS
 *
±_¥s_id
, 
PPS
 *
±_µs_id
, 
SLICE
 *
Sliû
,

95 
LIST_MMO
 *
Cu¼’t_pic
, 
MMO
 *
Mmo
, 
EndOfSliû
);

96 
SvcR—dReã»nûLi¡Proûssšg
(*
d©a
, *
pos™iÚ
, 
NAL
 *
N®
, 
SLICE
 *
Sliû
, 
SPS
 *
±_¥s_id
,

97 
PPS
 *
±_µs_id
, 
LAYER_MMO
 *
Lay”Mmo
, 
LIST_MMO
 *
Cu¼’t_pic
, 
MMO
 *
Mmo
,

98 
LIST_MMO
 *
RefPicLi¡L0
, LIST_MMO *
RefPicLi¡L1
);

	@lib_svc/Slice_data_B_avc.c

35 
	~"ty³.h
"

36 
	~"d©a.h
"

37 
	~"š™_d©a.h
"

38 
	~"maš_d©a.h
"

39 
	~"decode_mb_I.h
"

40 
	~"decode_mb_P.h
"

41 
	~"fl_ÿches.h
"

42 
	~"SliûGroupM­.h
"

43 
	~"Ãighbourhood.h
"

44 
	~"fl_ÿches_svc.h
"

45 
	~"»sidu®_chroma.h
"

46 
	~"fl_ÿches_ÿbac.h
"

47 
	~"š‹½Ş©iÚ_maš.h
"

48 
	~"š‹½Ş©iÚ_maš_8x8.h
"

52 
	~"blk4x4.h
"

53 
	~"BL_»sidu®.h
"

54 
	~"Wr™eBackSVC.h
"

55 
	~"Sliû_d©a_avc.h
"

56 
	~"Residu®Proûssšg.h
"

61 
	$Decode_B_avc
 ( 
SPS
 *
ai_¡Sps
, 
PPS
 *
Pps
, 
SLICE
 *
ai_¡Sliû
, *
ai_tSliûTabË
,

62 
RESIDU
 *
piùu»_»sidu
, 
MAIN_STRUCT_PF
 *
maš_veùÜs
, 
LIST_MMO
 *
ai_pRefPicLi¡L0
,

63 
LIST_MMO
 *
ai_pRefPicLi¡L1
, LIST_MMO *
Cu¼’t_pic
, cÚ¡ 
W_TABLES
 *
Quªtif
,

64 cÚ¡ 
NAL
 *
N®
, 
Mv_l0
[], 
Mv_l1
[], 
»f_l0
[], 
»f_l1
[],

65 *
aio_tDpb_luma
, *
aio_tDpb_Cb
, *
aio_tDpb_Cr
,

66 *
Residu_Luma
, *
Residu_Cb
, *
Residu_Cr
)

69 if(!
N®
 -> 
N®ToSk
){

70 
	`__deş¥ec
(
	`®ign
(64)è
»f_ÿche_l0
 [48];

71 
	`__deş¥ec
(
	`®ign
(64)è
»f_ÿche_l1
 [48];

72 
	`__deş¥ec
(
	`®ign
(64)è
mv_ÿche_l0
 [48][2];

73 
	`__deş¥ec
(
	`®ign
(64)è
mv_ÿche_l1
 [48][2];

75 
	`__deş¥ec
(
	`®ign
(64)è
image_l0
[256];

76 
	`__deş¥ec
(
	`®ign
(64)è
image_l1
[256];

77 
	`__deş¥ec
(
	`®ign
(64)è
image_Cb_l0
[64];

78 
	`__deş¥ec
(
	`®ign
(64)è
image_Cb_l1
[64];

79 
	`__deş¥ec
(
	`®ign
(64)è
image_Cr_l0
[64];

80 
	`__deş¥ec
(
	`®ign
(64)è
image_Cr_l1
[64];

83 cÚ¡ 
PicSizeInMbs
 = ()
ai_¡Sps
 -> PicSizeInMbs ;

84 cÚ¡ 
PicWiInMbs
 = ()
ai_¡Sps
 -> 
pic_width_š_mbs
;

85 cÚ¡ 
PicWidthInMbs
 = ()
ai_¡Sps
 -> 
pic_width_š_mbs
 + 2;

86 cÚ¡ 
PicWidthInPix
 = ()
PicWidthInMbs
 << 4 ;

87 cÚ¡ 
PicHeightInPix
 = ()(
ai_¡Sps
 -> 
pic_height_š_m­_un™s
 + 2) << 4;

89 *
aio_tMv_l0
 = &
Mv_l0
[
Cu¼’t_pic
 -> 
MvMemÜyAdd»ss
];

90 *
aio_tMv_l1
 = &
Mv_l1
[
Cu¼’t_pic
 -> 
MvMemÜyAdd»ss
];

91 *
aio_Œef_l0
 = &
»f_l0
[
Cu¼’t_pic
 -> 
MvMemÜyAdd»ss
 >> 1];

92 *
aio_Œef_l1
 = &
»f_l1
[
Cu¼’t_pic
 -> 
MvMemÜyAdd»ss
 >> 1];

94 cÚ¡ 
off£t_L
 = (
PicWidthInMbs
 << 8) + 16;

95 cÚ¡ 
off£t_C
 = (
PicWidthInMbs
 << 6) + 8;

97 *
Y
 = &
aio_tDpb_luma
[
off£t_L
 + 
Cu¼’t_pic
 -> 
MemÜyAdd»ss
];

98 *
U
 = &
aio_tDpb_Cb
[
off£t_C
 + (
Cu¼’t_pic
 -> 
MemÜyAdd»ss
 >> 2)];

99 *
V
 = &
aio_tDpb_Cr
[
off£t_C
 + (
Cu¼’t_pic
 -> 
MemÜyAdd»ss
 >> 2)];

101 
iCu¼MbAddr
 = 
ai_¡Sliû
 -> 
fœ¡_mb_š_¦iû
 ;

103 
iMb_x
;

104 
iMb_y
;

107 
	`G‘MbPos™iÚ
(
iCu¼MbAddr
, 
PicWiInMbs
, &
iMb_x
, &
iMb_y
);

110 
aio_tDpb_luma
 +ğ
off£t_L
;

111 
aio_tDpb_Cb
 +ğ
off£t_C
;

112 
aio_tDpb_Cr
 +ğ
off£t_C
;

115  ; 
iCu¼MbAddr
 < 
PicSizeInMbs
 ;) {

117 iàĞ
	`IS_I
(
piùu»_»sidu
 [
iCu¼MbAddr
] . 
MbTy³
)) {

119 
	`G‘Neighbour
(
iCu¼MbAddr
, 
iMb_x
, 
PicWiInMbs
, 
PicSizeInMbs
, 
ai_tSliûTabË
, 
piùu»_»sidu
, 
Pps
 -> 
cÚ¡¿šed_šŒa_´ed_æag
);

121 
	`decode_MB_I
(&
Y
[((
iMb_x
 + (
iMb_y
 * 
PicWidthInPix
)è<< 4è], &
U
[((iMb_x + (iMb_y * PicWidthInPix >> 1)) << 3)],

122 &
V
[((
iMb_x
 + (
iMb_y
 * 
PicWidthInPix
 >> 1)è<< 3)], 
Pps
, &
piùu»_»sidu
[
iCu¼MbAddr
],

123 
PicWidthInPix
, 
Quªtif
, 
maš_veùÜs
 -> 
ba£lše_veùÜs
);

125 
	`Re£tMbResidu
(&
Residu_Luma
[((
iMb_x
 + (
iMb_y
 * 
PicWidthInMbs
 << 4))<< 4)],

126 &
Residu_Cb
[((
iMb_x
 + (
iMb_y
 * 
PicWidthInMbs
 << 3))<< 3)],

127 &
Residu_Cr
[((
iMb_x
 + (
iMb_y
 * 
PicWidthInMbs
 << 3))<< 3)], PicWidthInMbs << 4);

130 ià(
N®
 -> 
PicToDi¥Ïy
){

131 ifĞ
piùu»_»sidu
 [
iCu¼MbAddr
] . 
Mode
 == 0){

132 
	`wr™e_back_fuÎ_»f
Ğ
ai_¡Sliû
 -> 
b_¡ride
,‡i_¡Sliû -> 
b8_¡ride
,

133 &
aio_tMv_l0
[
iMb_x
 * 8 + 
iMb_y
 * (
ai_¡Sliû
 -> 
b_¡ride
 << 2)], 
mv_ÿche_l0
,

134 &
aio_Œef_l0
[
iMb_x
 * 4 + 
iMb_y
 * (
ai_¡Sliû
 -> 
b_¡ride
 << 1)], 
»f_ÿche_l0
);

136 
	`wr™e_back_fuÎ_»f
Ğ
ai_¡Sliû
 -> 
b_¡ride
,‡i_¡Sliû -> 
b8_¡ride
,

137 &
aio_tMv_l1
[
iMb_x
 * 8 + 
iMb_y
 * (
ai_¡Sliû
 -> 
b_¡ride
 << 2)], 
mv_ÿche_l1
,

138 &
aio_Œef_l1
[
iMb_x
 * 4 + 
iMb_y
 * (
ai_¡Sliû
 -> 
b_¡ride
 << 1)], 
»f_ÿche_l1
);

141 
	`§m¶e_š‹½Ş©iÚ_maš
(
aio_tDpb_luma
, 
aio_tDpb_Cb
, 
aio_tDpb_Cr
, 
image_l0
, 
image_l1
, 
image_Cb_l0
, 
image_Cb_l1
,

142 
image_Cr_l0
, 
image_Cr_l1
, 
mv_ÿche_l0
, 
mv_ÿche_l1
, 
»f_ÿche_l0
, 
»f_ÿche_l1
, 
iMb_x
 << 4, 
iMb_y
 << 4,

143 
PicWidthInPix
, 
PicHeightInPix
 , 
ai_pRefPicLi¡L0
, 
ai_pRefPicLi¡L1
, 
maš_veùÜs
 -> 
ba£lše_veùÜs
 -> 
PŒ_š‹½Ş_4x4
);

145 
	`£t_image_4x4
(&
Y
[((
iMb_x
 + (
iMb_y
 * 
PicWidthInPix
)è<< 4)], &
U
[((iMb_x + (iMb_y * PicWidthInPix >> 1)) << 3)],

146 &
V
[((
iMb_x
 + (
iMb_y
 * 
PicWidthInPix
 >> 1)è<< 3)], 
image_l0
, 
image_l1
, 
image_Cb_l0
, 
image_Cb_l1
,

147 
image_Cr_l0
, 
image_Cr_l1
, 
»f_ÿche_l0
, 
»f_ÿche_l1
, 
PicWidthInPix
);

149 
	`wr™e_back_fuÎ_»f_8x8
(
ai_¡Sliû
 -> 
b_¡ride
,‡i_¡Sliû -> 
b8_¡ride
,

150 &
aio_tMv_l0
[
iMb_x
 * 8 + 
iMb_y
 * (
ai_¡Sliû
 -> 
b_¡ride
 << 2)], 
mv_ÿche_l0
,

151 &
aio_Œef_l0
[
iMb_x
 * 4 + 
iMb_y
 * (
ai_¡Sliû
 -> 
b_¡ride
 << 1)], 
»f_ÿche_l0
);

153 
	`wr™e_back_fuÎ_»f_8x8
(
ai_¡Sliû
 -> 
b_¡ride
,‡i_¡Sliû -> 
b8_¡ride
,

154 &
aio_tMv_l1
[
iMb_x
 * 8 + 
iMb_y
 * (
ai_¡Sliû
 -> 
b_¡ride
 << 2)], 
mv_ÿche_l1
,

155 &
aio_Œef_l1
[
iMb_x
 * 4 + 
iMb_y
 * (
ai_¡Sliû
 -> 
b_¡ride
 << 1)], 
»f_ÿche_l1
);

158 
	`Sam¶eIÁ”pŞ©iÚMaš8x8
(
aio_tDpb_luma
, 
aio_tDpb_Cb
,
aio_tDpb_Cr
, 
image_l0
, 
image_Cb_l0
, 
image_Cr_l0
, 
mv_ÿche_l0
, 
»f_ÿche_l0
,

159 
iMb_x
 << 4 , 
iMb_y
 << 4, 
PicWidthInMbs
 << 4, 
PicHeightInPix
, 
ai_pRefPicLi¡L0
, 
maš_veùÜs
 -> 
ba£lše_veùÜs
 -> 
PŒ_š‹½Ş_8x8
);

160 
	`Sam¶eIÁ”pŞ©iÚMaš8x8
(
aio_tDpb_luma
, 
aio_tDpb_Cb
,
aio_tDpb_Cr
, 
image_l1
, 
image_Cb_l1
, 
image_Cr_l1
, 
mv_ÿche_l1
, 
»f_ÿche_l1
,

161 
iMb_x
 << 4 , 
iMb_y
 << 4, 
PicWidthInMbs
 << 4, 
PicHeightInPix
, 
ai_pRefPicLi¡L1
, 
maš_veùÜs
 -> 
ba£lše_veùÜs
 -> 
PŒ_š‹½Ş_8x8
);

163 
	`£t_image_8x8
(&
Y
[((
iMb_x
 + (
iMb_y
 * 
PicWidthInPix
)è<< 4è], &
U
[((iMb_x + (iMb_y * PicWidthInPix >> 1)) << 3)],

164 &
V
[((
iMb_x
 + (
iMb_y
 * 
PicWidthInPix
 >> 1)è<< 3)], 
image_l0
, 
image_l1
, 
image_Cb_l0
, 
image_Cb_l1
,

165 
image_Cr_l0
, 
image_Cr_l1
, 
»f_ÿche_l0
, 
»f_ÿche_l1
, 
PicWidthInPix
);

170 
	`Compu‹Residu®
(
Pps
, &
piùu»_»sidu
 [
iCu¼MbAddr
], 
PicWidthInPix
,

171 &
Y
[((
iMb_x
 + ( 
iMb_y
 * 
PicWidthInPix
)) << 4)],

172 &
U
[((
iMb_x
 + ( 
iMb_y
 * 
PicWidthInPix
 >> 1)) << 3)],

173 &
V
[((
iMb_x
 + ( 
iMb_y
 * 
PicWidthInPix
 >> 1)è<< 3)], 
Quªtif
);

175 }iàĞ
N®
 -> 
PicToDecode
){

177 
	`Compu‹Residu®Image
(
Pps
, &
piùu»_»sidu
 [
iCu¼MbAddr
], 
PicWidthInPix
,

178 &
Residu_Luma
[((
iMb_x
 + (
iMb_y
 * 
PicWidthInMbs
 << 4))<< 4)],

179 &
Residu_Cb
[((
iMb_x
 + (
iMb_y
 * 
PicWidthInMbs
 << 3))<< 3)],

180 &
Residu_Cr
[((
iMb_x
 + (
iMb_y
 * 
PicWidthInMbs
 << 3))<< 3)], 
Quªtif
);

182 
	`upd©e_blk4x4Res
(&
Residu_Luma
[((
iMb_x
 + (
iMb_y
 * 
PicWidthInMbs
 << 4)è<< 4)], &
piùu»_»sidu
 [
iCu¼MbAddr
], PicWidthInMbs << 4);

184 
	`Re£tMbResidu
(&
Residu_Luma
[((
iMb_x
 + (
iMb_y
 * 
PicWidthInMbs
 << 4)) << 4)],

185 &
Residu_Cb
[((
iMb_x
 + (
iMb_y
 * 
PicWidthInMbs
 << 3)) << 3)],

186 &
Residu_Cr
[((
iMb_x
 + (
iMb_y
 * 
PicWidthInMbs
 << 3)) << 3)], PicWidthInMbs << 4);

191 
iCu¼MbAddr
 = 
	`Next_MbAdd»ss
(iCu¼MbAddr, 
PicSizeInMbs
, 
PicWiInMbs
, 
ai_tSliûTabË
, &
iMb_x
, &
iMb_y
);

192 iàĞ
ai_tSliûTabË
 [
iCu¼MbAddr
] == 255 ) {

193 
iCu¼MbAddr
 = 
PicSizeInMbs
 ;

197 
	}
}

	@lib_svc/Slice_data_B_svc.c

36 
	~<¡dio.h
>

40 
	~"maš_d©a.h
"

41 
	~"š™_d©a.h
"

42 
	~"decode_mb_I.h
"

43 
	~"Ãighbourhood.h
"

44 
	~"SliûGroupM­.h
"

49 
	~"svc_ty³.h
"

50 
	~"I_BL.h
"

51 
	~"P_BL.h
"

52 
	~"B_BL.h
"

53 
	~"Mb_I_svc.h
"

54 
	~"svc_d©a.h
"

55 
	~"CoÜdÚ©es.h
"

56 
	~"Wr™eBackSVC.h
"

57 
	~"fl_ÿches_svc.h
"

58 
	~"Residu®Proûssšg.h
"

59 
	~"IÁ”Lay”P»diùiÚ.h
"

68 
	$Decode_B_svc
 ( cÚ¡ 
size_Mb
, 
SPS
 *
ai_p¡Sps
, 
PPS
 * 
ai_p¡Pps
, 
SLICE
 *
Sliû
, cÚ¡ 
NAL
 * 
N®
, *
SliûTabË
,

69 
DATA
 *
TabBlock
, 
RESIDU
 *
AÎResidu
, cÚ¡ 
MAIN_STRUCT_PF
 *
veùÜs
, 
LIST_MMO
 *
RefPicLi¡L0
,

70 
LIST_MMO
 *
RefPicLi¡L1
, LIST_MMO *
Cu¼’t_pic
, cÚ¡ 
W_TABLES
 *
Quªtif
, 
SVC_VECTORS
 *
svc_veùÜs
, *
px
,

71 *
py
, *
Up§m¶šg_tmp
, *
xk16
, *
xp16
, *
yk16
, *
yp16
, *
aio_tiMv_l0
,

72 *
aio_tiMv_l1
, *
aio_tiRef_l0
, *
aio_tiRef_l1
, *
DpbLuma
,

73 *
DpbCb
, *
DpbCr
, *
Luma_Residu
, *
Cb_Residu
, *
Cr_Residu
)

77 ià(!
N®
 -> 
N®ToSk
){

78 
	`__deş¥ec
(
	`®ign
(64)è
»f_ÿche_l0
 [48];

79 
	`__deş¥ec
(
	`®ign
(64)è
»f_ÿche_l1
 [48];

80 
	`__deş¥ec
(
	`®ign
(64)è
mv_ÿche_l0
 [48][2];

81 
	`__deş¥ec
(
	`®ign
(64)è
mv_ÿche_l1
 [48][2];

82 
x_mbP¬tIdx
, 
y_mbP¬tIdx
;

83 
x_ba£
, 
y_ba£
, 
mbBa£Addr
;

85 
pic_·¿m‘”_id
 = 
N®
 ->…ic_·¿m‘”_id[N® -> 
Lay”Id
];

86 cÚ¡ 
PPS
 * 
Pps
 = &
ai_p¡Pps
[
pic_·¿m‘”_id
];

87 cÚ¡ 
SPS
 *
Sps
 = &
ai_p¡Sps
[
Pps
 -> 
£q_·¿m‘”_£t_id
 + 16];

89 cÚ¡ 
PicSizeInMbs
 = 
Sps
 -> PicSizeInMbs ;

90 cÚ¡ 
PicWiInMbs
 = 
Sps
 -> 
pic_width_š_mbs
;

91 cÚ¡ 
PicWidthInMbs
 = 
Sps
 -> 
pic_width_š_mbs
 + 2;

92 cÚ¡ 
PicHeightInMbs
 = 
Sps
 -> 
pic_height_š_m­_un™s
 + 2;

93 cÚ¡ 
PicWidthInPix
 = (
PicWidthInMbs
 << 4);

94 cÚ¡ 
off£t_L
 = (
PicWidthInMbs
 << 8) + 16;

95 cÚ¡ 
off£t_C
 = (
PicWidthInMbs
 << 6) + 8;

97 *
Y
 = &
DpbLuma
[
off£t_L
 + 
Cu¼’t_pic
 -> 
MemÜyAdd»ss
];

98 *
U
 = &
DpbCb
[
off£t_C
 + (
Cu¼’t_pic
 -> 
MemÜyAdd»ss
 >> 2)];

99 *
V
 = &
DpbCr
[
off£t_C
 + (
Cu¼’t_pic
 -> 
MemÜyAdd»ss
 >> 2)];

100 *
Ba£Y
 = &
DpbLuma
[(
N®
 -> 
Ba£MemÜyAdd»ss
è+ 16 + ((N® -> 
ba£_Width
 + 32) << 4)];

101 *
Ba£U
 = &
DpbCb
[(
N®
 -> 
Ba£MemÜyAdd»ss
 >> 2è+ 8 + ((N® -> 
ba£_Width
 + 32) << 2)];

102 *
Ba£V
 = &
DpbCr
[(
N®
 -> 
Ba£MemÜyAdd»ss
 >> 2è+ 8 + ((N® -> 
ba£_Width
 + 32) << 2)];

104 
MvMemÜyAdd»ss
 = 
N®
 -> 
Ba£MvMemÜyAdd»ss
;

106 
RESIDU
 *
Cu¼Residu
 = &
AÎResidu
[
N®
 -> 
Lay”Id
 * 
size_Mb
];

107 
RESIDU
 *
Ba£Residu
 = &
AÎResidu
[
N®
 -> 
Ba£Lay”Id
 * 
size_Mb
];

108 
REFPART
 
RefP¬t™iÚL0
[32];

111 *
mv_l0
 = &
aio_tiMv_l0
[
Cu¼’t_pic
 -> 
MvMemÜyAdd»ss
];

112 *
mv_l1
 = &
aio_tiMv_l1
[
Cu¼’t_pic
 -> 
MvMemÜyAdd»ss
];

113 *
»f_l0
 = &
aio_tiRef_l0
[
Cu¼’t_pic
 -> 
MvMemÜyAdd»ss
 >> 1];

114 *
»f_l1
 = &
aio_tiRef_l1
[
Cu¼’t_pic
 -> 
MvMemÜyAdd»ss
 >> 1];

117 *
mv_ba£_l0
 = &
aio_tiMv_l0
[
MvMemÜyAdd»ss
];

118 *
mv_ba£_l1
 = &
aio_tiMv_l1
[
MvMemÜyAdd»ss
];

119 *
»f_ba£_l0
 = &
aio_tiRef_l0
[
MvMemÜyAdd»ss
 >> 1];

120 *
»f_ba£_l1
 = &
aio_tiRef_l1
[
MvMemÜyAdd»ss
 >> 1];

122 *
Residu_Luma
 = &
Luma_Residu
[(
size_Mb
 << 8è* 
N®
 -> 
Lay”Id
];

123 *
Residu_Cb
 = &
Cb_Residu
[(
size_Mb
 << 6è* 
N®
 -> 
Lay”Id
];

124 *
Residu_Cr
 = &
Cr_Residu
[(
size_Mb
 << 6è* 
N®
 -> 
Lay”Id
];

126 
iCu¼MbAddr
 = 
Sliû
 -> 
fœ¡_mb_š_¦iû
 ;

128 
iMb_x
;

129 
iMb_y
;

132 
	`G‘MbPos™iÚ
(
iCu¼MbAddr
, 
PicWiInMbs
, &
iMb_x
, &
iMb_y
);

135 
	`G‘Ba£P»diùiÚ
(
N®
, 
Sliû
, 
ai_p¡Pps
, 
ai_p¡Sps
, 
Sps
, 
Cu¼Residu
, 
Ba£Residu
, 
size_Mb
,

136 
iCu¼MbAddr
, 
SliûTabË
, 
px
, 
py
, 
xk16
, 
xp16
, 
yk16
, 
yp16
, 
Up§m¶šg_tmp
,

137 
Ba£Y
, 
Ba£U
, 
Ba£V
, 
Luma_Residu
, 
Cb_Residu
, 
Cr_Residu
);

139 ; 
iCu¼MbAddr
 < 
PicSizeInMbs
 ;) {

140 
	`š™_»f_ÿche
(
»f_ÿche_l0
);

141 
	`š™_»f_ÿche
(
»f_ÿche_l1
);

142 
	`š™_mv_ÿche
(
mv_ÿche_l0
);

143 
	`š™_mv_ÿche
(
mv_ÿche_l1
);

147 
mbBa£Addr
 = 
	`G‘Ba£Pos™iÚB
(
Sps
 -> 
dœeù_8x8_šã»nû_æag
, 
iMb_x
 << 4,
iMb_y
 << 4, &
x_ba£
, &
y_ba£
,

148 &
x_mbP¬tIdx
, &
y_mbP¬tIdx
, 
N®
, 
RefP¬t™iÚL0
, &
TabBlock
 [
iCu¼MbAddr
], &
Cu¼Residu
[iCurrMbAddr],

149 
Ba£Residu
, 
mv_ba£_l0
, 
»f_ba£_l0
, 
mv_ba£_l1
, 
»f_ba£_l1
, 
mv_ÿche_l0
, 
mv_ÿche_l1
 );

152 iàĞ
	`IS_I_SVC
(
Cu¼Residu
 [
iCu¼MbAddr
] . 
MbTy³
)) {

154 
	`G‘Neighbour
(
iCu¼MbAddr
, 
iMb_x
, 
PicWiInMbs
, 
PicSizeInMbs
, 
SliûTabË
, 
Cu¼Residu
, 
Pps
 -> 
cÚ¡¿šed_šŒa_´ed_æag
);

157 
	`MbISVCDecodšg
(
Sps
, 
Pps
, 
N®
, 
Quªtif
, 
veùÜs
 -> 
ba£lše_veùÜs
, &
Cu¼Residu
 [
iCu¼MbAddr
], 
Ba£Residu
,

158 &
TabBlock
 [
iCu¼MbAddr
], 
PicWidthInPix
, 
iMb_x
, 
iMb_y
,

159 &
Y
[((
iMb_x
 + (
iMb_y
 * 
PicWidthInPix
)) << 4)],

160 &
U
[((
iMb_x
 + (
iMb_y
 * 
PicWidthInPix
 >> 1)) << 3)],

161 &
V
[((
iMb_x
 + (
iMb_y
 * 
PicWidthInPix
 >> 1)è<< 3)], 
Ba£Y
, 
Ba£U
, 
Ba£V
);

165 
	`fl_ÿches_mÙiÚ_veùÜ_B_fuÎ_»f
(
Sliû
, 
N®
 -> 
b_¡ride
, N® -> 
b8_¡ride
,

166 
»f_ÿche_l0
, 
»f_ÿche_l1
, 
mv_ÿche_l0
, 
mv_ÿche_l1
, 
SliûTabË
, 
Cu¼Residu
,

167 &
mv_l0
[
iMb_x
 * 8 + 
iMb_y
 * (
N®
 -> 
b_¡ride
 << 2)], &
mv_l1
[iMb_x * 8 + iMb_y * (Nal -> b_stride << 2)],

168 &
»f_l0
[
iMb_x
 * 4 + 
iMb_y
 * (
N®
 -> 
b_¡ride
 << 1)], &
»f_l1
[iMb_x * 4 + iMb_y * (N® -> b_¡rid<< 1)], 
iCu¼MbAddr
, iMb_x);

171 ià(
	`IS_BL
(
Cu¼Residu
 [
iCu¼MbAddr
] . 
MbTy³
)){

172 
	`Decode_B_BL
(
Pps
, 
Sps
, 
N®
, &
Cu¼Residu
[
iCu¼MbAddr
], 
Ba£Residu
, 
veùÜs
 -> 
ba£lše_veùÜs
, 
Quªtif
, 
RefPicLi¡L0
,

173 
RefPicLi¡L1
, 
iMb_x
, 
iMb_y
, 
x_ba£
, 
y_ba£
, 
x_mbP¬tIdx
, 
y_mbP¬tIdx
, 
PicWidthInMbs
 << 4, 
RefP¬t™iÚL0
,

174 
»f_ÿche_l0
, 
»f_ÿche_l1
, 
mv_ÿche_l0
, 
mv_ÿche_l1
, 
mv_ba£_l0
, 
mv_ba£_l1
, 
»f_ba£_l0
, 
»f_ba£_l1
,

175 
DpbLuma
, 
DpbCb
, 
DpbCr
, &
Y
[((
iMb_x
 + ( 
iMb_y
 * 
PicWidthInPix
)) << 4)],

176 &
U
[((
iMb_x
 + (
iMb_y
 * 
PicWidthInMbs
 << 3))<< 3)], &
V
[((iMb_x + (iMb_y * PicWidthInMbs << 3))<< 3)],

177 &
Residu_Luma
[((
iMb_x
 + ( 
iMb_y
 * 
PicWidthInPix
)è<< 4)] , &
Residu_Cb
[((iMb_x + (iMb_y * 
PicWidthInMbs
 << 3))<< 3)],

178 &
Residu_Cr
[((
iMb_x
 + (
iMb_y
 * 
PicWidthInMbs
 << 3))<< 3)]);

182 
svc_veùÜs
 -> 
B_veùÜs
 [
Cu¼Residu
 [
iCu¼MbAddr
] . 
Mode
](
mv_ÿche_l0
, 
mv_ÿche_l1
, 
»f_ÿche_l0
, 
»f_ÿche_l1
,

183 &
Cu¼Residu
 [
iCu¼MbAddr
], &
TabBlock
 [iCu¼MbAddr], 
svc_veùÜs
 -> 
B_sub_veùÜs
,

184 &
DpbLuma
[
off£t_L
], &
DpbCb
[
off£t_C
], &
DpbCr
[offset_C],

185 &
Y
[((
iMb_x
 + ( 
iMb_y
 * 
PicWidthInPix
)è<< 4)], &
U
[((iMb_x + (iMb_y * 
PicWidthInMbs
 << 3))<< 3)],

186 &
V
[((
iMb_x
 + (
iMb_y
 * 
PicWidthInMbs
 << 3))<< 3)], iMb_x << 4 , iMb_y << 4, PicWidthInMbs << 4,

187 
PicHeightInMbs
 << 4, 
N®
, 
RefPicLi¡L0
, 
RefPicLi¡L1
, 
mv_ba£_l0
, 
mv_ba£_l1
,

188 
»f_ba£_l0
, 
»f_ba£_l1
, 
veùÜs
 -> 
ba£lše_veùÜs
, 
RefP¬t™iÚL0
);

192 
	`AddResidu®
(
N®
, 
Pps
, &
Cu¼Residu
[
iCu¼MbAddr
], &
Ba£Residu
[
mbBa£Addr
], 
PicWidthInMbs
 << 4, 
Quªtif
,

193 &
Y
[((
iMb_x
 + (
iMb_y
 * 
PicWidthInPix
)è<< 4)], &
U
[((iMb_x + (iMb_y * 
PicWidthInMbs
 << 3))<< 3)],

194 &
V
[((
iMb_x
 + (
iMb_y
 * 
PicWidthInMbs
 << 3))<< 3)], &
Residu_Luma
[((iMb_x + (iMb_y * 
PicWidthInPix
)) << 4)],

195 &
Residu_Cb
[((
iMb_x
 + (
iMb_y
 * 
PicWidthInMbs
 << 3))<< 3)], &
Residu_Cr
[((iMb_x + (iMb_y * PicWidthInMbs << 3))<< 3)]);

200 
	`wr™e_back_mÙiÚ_fuÎ_»f
(
N®
 -> 
b_¡ride
, N® -> 
b8_¡ride
, &
mv_l0
[
iMb_x
 * 8 + 
iMb_y
 * (N® -> b_¡rid<< 2)], 
mv_ÿche_l0
,

201 &
»f_l0
[
iMb_x
 * 4 + 
iMb_y
 * (
N®
 -> 
b_¡ride
 << 1)], 
»f_ÿche_l0
 );

202 
	`wr™e_back_mÙiÚ_fuÎ_»f
(
N®
 -> 
b_¡ride
, N® -> 
b8_¡ride
, &
mv_l1
[
iMb_x
 * 8 + 
iMb_y
 * (N® -> b_¡rid<< 2)], 
mv_ÿche_l1
,

203 &
»f_l1
[
iMb_x
 * 4 + 
iMb_y
 * (
N®
 -> 
b_¡ride
 << 1)], 
»f_ÿche_l1
 );

206 
iCu¼MbAddr
 = 
	`Next_MbAdd»ss
(iCu¼MbAddr, 
PicSizeInMbs
,
PicWiInMbs
, 
SliûTabË
, &
iMb_x
, &
iMb_y
);

207 iàĞ
SliûTabË
 [
iCu¼MbAddr
] == 255 ) {

208 
iCu¼MbAddr
 = 
PicSizeInMbs
 ;

212 
	}
}

	@lib_svc/Slice_data_I_avc.c

35 
	~"ty³.h
"

36 
	~"d©a.h
"

37 
	~"decode_mb_I.h
"

38 
	~"SliûGroupM­.h
"

39 
	~"Ãighbourhood.h
"

44 
	~"svc_ty³.h
"

52 
	$Decode_I_avc
ĞcÚ¡ 
SPS
 *
Sps
, cÚ¡ 
PPS
 *
Pps
, cÚ¡ 
SLICE
 *
ai_p¡Sliû
, cÚ¡ *
SliûTabË
,

53 
RESIDU
 *
piùu»_»sidu
, cÚ¡ 
STRUCT_PF
 *
ai_¡ruù_pf
,

54 cÚ¡ 
W_TABLES
 *
quªtif
, 
NAL
 *
N®
, *
Y
, *
U
, *
V
)

57 ià(!
N®
 -> 
N®ToSk
){

58 cÚ¡ 
PicSizeInMbs
 = 
Sps
 -> PicSizeInMbs ;

59 cÚ¡ 
PicWiInMbs
 = 
Sps
 -> 
pic_width_š_mbs
;

60 cÚ¡ 
PicWidthInMbs
 = 
Sps
 -> 
pic_width_š_mbs
 + 2;

61 cÚ¡ 
off£t_L
 = (
PicWidthInMbs
 << 8) + 16;

62 cÚ¡ 
off£t_C
 = (
PicWidthInMbs
 << 6) + 8;

64 
iCu¼MbAddr
 = 
ai_p¡Sliû
 -> 
fœ¡_mb_š_¦iû
 ;

66 
iMb_x
;

67 
iMb_y
;

70 
	`G‘MbPos™iÚ
(
iCu¼MbAddr
, 
PicWiInMbs
, &
iMb_x
, &
iMb_y
);

72 
Y
 +ğ
off£t_L
;

73 
U
 +ğ
off£t_C
;

74 
V
 +ğ
off£t_C
;

77  ; 
iCu¼MbAddr
 < 
PicSizeInMbs
 ;) {

80 
	`G‘Neighbour
(
iCu¼MbAddr
, 
iMb_x
, 
PicWiInMbs
, 
PicSizeInMbs
, 
SliûTabË
, 
piùu»_»sidu
, 
Pps
 -> 
cÚ¡¿šed_šŒa_´ed_æag
);

83 
	`decode_MB_I
(&
Y
[(
iMb_x
 + (
iMb_y
 * 
PicWidthInMbs
 << 4)è<< 4], &
U
[(iMb_x + (iMb_y * PicWidthInMbs << 3)) << 3],

84 &
V
[(
iMb_x
 + (
iMb_y
 * 
PicWidthInMbs
 << 3)è<< 3], 
Pps
, &
piùu»_»sidu
[
iCu¼MbAddr
], PicWidthInMb << 4, 
quªtif
, 
ai_¡ruù_pf
);

87 
iCu¼MbAddr
 = 
	`Next_MbAdd»ss
(iCu¼MbAddr, 
PicSizeInMbs
, 
PicWiInMbs
, 
SliûTabË
, &
iMb_x
, &
iMb_y
);

88 iàĞ
SliûTabË
 [
iCu¼MbAddr
] == 255 ) {

89 
iCu¼MbAddr
 = 
PicSizeInMbs
 ;

93 
	}
}

	@lib_svc/Slice_data_P_avc.c

35 
	~"ty³.h
"

36 
	~"d©a.h
"

37 
	~"š™_d©a.h
"

39 
	~"decode_mb_I.h
"

40 
	~"decode_mb_P.h
"

41 
	~"fl_ÿches.h
"

42 
	~"SliûGroupM­.h
"

43 
	~"Ãighbourhood.h
"

44 
	~"š‹½Ş©iÚ.h
"

45 
	~"»sidu®_chroma.h
"

46 
	~"fl_ÿches_svc.h
"

47 
	~"š‹½Ş©iÚ_8x8.h
"

50 
	~"blk4x4.h
"

51 
	~"BL_»sidu®.h
"

52 
	~"»sidu®_4x4.h
"

53 
	~"»sidu®_8x8.h
"

54 
	~"Wr™eBackSVC.h
"

55 
	~"Sliû_d©a_avc.h
"

56 
	~"Residu®Proûssšg.h
"

62 
	$Decode_P_avc
ĞcÚ¡ 
SPS
 *
Sps
, cÚ¡ 
PPS
 *
Pps
, cÚ¡ 
SLICE
 *
ai_p¡Sliû
, cÚ¡ *
SliûTabË
,

63 
RESIDU
 *
piùu»_»sidu
, cÚ¡ 
STRUCT_PF
 *
ai_¡ruù_pf
, 
LIST_MMO
 *
ai_p¡RefPicLi¡L0
,

64 
LIST_MMO
 *
Cu¼’t_pic
, cÚ¡ 
W_TABLES
 *
Quªtif
, cÚ¡ 
NAL
 *
N®
, *
aio_tiMv
, *
aio_tiRef
,

65 *
DpbLuma
, *
DpbCb
, *
DpbCr
,

66 *
Residu_Luma
, *
Residu_Cb
, *
Residu_Cr
)

69 ià(!
N®
 -> 
N®ToSk
){

70 
	`__deş¥ec
(
	`®ign
(64)è
»f_ÿche_l0
 [48];

71 
	`__deş¥ec
(
	`®ign
(64)è
mv_ÿche_l0
 [48][2];

72 cÚ¡ 
PicSizeInMbs
 = 
Sps
 -> PicSizeInMbs ;

73 cÚ¡ 
PicWiInMbs
 = 
Sps
 -> 
pic_width_š_mbs
;

74 cÚ¡ 
PicWidthInMbs
 = 
Sps
 -> 
pic_width_š_mbs
 + 2;

75 cÚ¡ 
PicHeightInMbs
 = 
Sps
 -> 
pic_height_š_m­_un™s
 + 2;

76 cÚ¡ 
PicWidthInPix
 = (
PicWidthInMbs
 << 4);

77 cÚ¡ 
off£t_L
 = (
PicWidthInMbs
 << 8) + 16;

78 cÚ¡ 
off£t_C
 = (
PicWidthInMbs
 << 6) + 8;

80 *
Y
 = &
DpbLuma
[
off£t_L
 + 
Cu¼’t_pic
 -> 
MemÜyAdd»ss
];

81 *
U
 = &
DpbCb
[
off£t_C
 + (
Cu¼’t_pic
 -> 
MemÜyAdd»ss
 >> 2)];

82 *
V
 = &
DpbCr
[
off£t_C
 + (
Cu¼’t_pic
 -> 
MemÜyAdd»ss
 >> 2)];

84 
iCu¼MbAddr
 = 
ai_p¡Sliû
 -> 
fœ¡_mb_š_¦iû
;

86 
iMb_x
;

87 
iMb_y
;

91 
	`G‘MbPos™iÚ
(
iCu¼MbAddr
, 
PicWiInMbs
, &
iMb_x
, &
iMb_y
);

94  ; 
iCu¼MbAddr
 < 
PicSizeInMbs
 ;) {

98 iàĞ
	`IS_I
(
piùu»_»sidu
 [
iCu¼MbAddr
] . 
MbTy³
) ) {

100 
	`G‘Neighbour
(
iCu¼MbAddr
, 
iMb_x
, 
PicWiInMbs
, 
PicSizeInMbs
, 
SliûTabË
, 
piùu»_»sidu
, 
Pps
 -> 
cÚ¡¿šed_šŒa_´ed_æag
);

102 
	`decode_MB_I
(&
Y
[((
iMb_x
 + ( 
iMb_y
 * 
PicWidthInPix
)è<< 4)], &
U
[((iMb_x + ( iMb_y * PicWidthInPix >> 1)) << 3)],

103 &
V
[((
iMb_x
 + ( 
iMb_y
 * 
PicWidthInPix
 >> 1)è<< 3)], 
Pps
, &
piùu»_»sidu
[
iCu¼MbAddr
], PicWidthInPix, 
Quªtif
, 
ai_¡ruù_pf
);

105 
	`Re£tMbResidu
(&
Residu_Luma
[((
iMb_x
 + (
iMb_y
 * 
PicWidthInMbs
 << 4)) << 4)],

106 &
Residu_Cb
[((
iMb_x
 + (
iMb_y
 * 
PicWidthInMbs
 << 3)) << 3)],

107 &
Residu_Cr
[((
iMb_x
 + (
iMb_y
 * 
PicWidthInMbs
 << 3)) << 3)], PicWidthInMbs << 4);

111 ià(
N®
 -> 
PicToDi¥Ïy
){

112 ifĞ
piùu»_»sidu
 [
iCu¼MbAddr
] . 
Mode
 == 0){

113 
	`wr™e_back_fuÎ_»f
Ğ
ai_p¡Sliû
 -> 
b_¡ride
,‡i_p¡Sliû -> 
b8_¡ride
,

114 &
aio_tiMv
[
iMb_x
 * 8 + 
iMb_y
 * (
ai_p¡Sliû
 -> 
b_¡ride
 << 2)], 
mv_ÿche_l0
,

115 &
aio_tiRef
[
iMb_x
 * 4 + 
iMb_y
 * (
ai_p¡Sliû
 -> 
b_¡ride
 << 1)], 
»f_ÿche_l0
);

118 
	`§m¶e_š‹½Ş©iÚ
(&
DpbLuma
[
off£t_L
], &
DpbCb
[
off£t_C
],&
DpbCr
[offset_C],

119 &
Y
[((
iMb_x
 + ( 
iMb_y
 * 
PicWidthInPix
)è<< 4)], &
U
[((iMb_x + ( iMb_y * PicWidthInPix >> 1)) << 3)],

120 &
V
[((
iMb_x
 + ( 
iMb_y
 * 
PicWidthInPix
 >> 1)è<< 3)], 
mv_ÿche_l0
, 
»f_ÿche_l0
, iMb_x << 4 , iMb_y << 4,

121 
PicWidthInMbs
 << 4, 
PicHeightInMbs
 << 4, 
ai_p¡RefPicLi¡L0
, 
ai_¡ruù_pf
 -> 
PŒ_š‹½Ş_4x4
);

123 
	`wr™e_back_fuÎ_»f_8x8
(
ai_p¡Sliû
 -> 
b_¡ride
,‡i_p¡Sliû -> 
b8_¡ride
,

124 &
aio_tiMv
[
iMb_x
 * 8 + 
iMb_y
 * (
ai_p¡Sliû
 -> 
b_¡ride
 << 2)], 
mv_ÿche_l0
,

125 &
aio_tiRef
[
iMb_x
 * 4 + 
iMb_y
 * (
ai_p¡Sliû
 -> 
b_¡ride
 << 1)], 
»f_ÿche_l0
);

128 
	`Sam¶eIÁ”pŞ©iÚ8x8
(&
DpbLuma
[
off£t_L
], &
DpbCb
[
off£t_C
], &
DpbCr
[offset_C],

129 &
Y
[((
iMb_x
 + ( 
iMb_y
 * 
PicWidthInPix
)è<< 4)], &
U
[((iMb_x + ( iMb_y * PicWidthInPix >> 1)) << 3)],

130 &
V
[((
iMb_x
 + ( 
iMb_y
 * 
PicWidthInPix
 >> 1)è<< 3)], 
mv_ÿche_l0
, 
»f_ÿche_l0
, iMb_x << 4 , iMb_y << 4,

131 
PicWidthInMbs
 << 4, 
PicHeightInMbs
 << 4, 
ai_p¡RefPicLi¡L0
, 
ai_¡ruù_pf
 -> 
PŒ_š‹½Ş_8x8
);

136 
	`Compu‹Residu®
(
Pps
, &
piùu»_»sidu
 [
iCu¼MbAddr
], 
PicWidthInPix
,

137 &
Y
[((
iMb_x
 + ( 
iMb_y
 * 
PicWidthInPix
)) << 4)],

138 &
U
[((
iMb_x
 + ( 
iMb_y
 * 
PicWidthInPix
 >> 1)) << 3)],

139 &
V
[((
iMb_x
 + ( 
iMb_y
 * 
PicWidthInPix
 >> 1)è<< 3)], 
Quªtif
);

140 }ià(
N®
 -> 
PicToDecode
){

141 
	`Compu‹Residu®Image
(
Pps
, &
piùu»_»sidu
 [
iCu¼MbAddr
], 
PicWidthInPix
,

142 &
Residu_Luma
[((
iMb_x
 + (
iMb_y
 * 
PicWidthInMbs
 << 4)) << 4)],

143 &
Residu_Cb
[((
iMb_x
 + (
iMb_y
 * 
PicWidthInMbs
 << 3)) << 3)],

144 &
Residu_Cr
[((
iMb_x
 + (
iMb_y
 * 
PicWidthInMbs
 << 3)è<< 3)], 
Quªtif
);

147 
	`upd©e_blk4x4Res
(&
Residu_Luma
[((
iMb_x
 + (
iMb_y
 * 
PicWidthInMbs
 << 4)è<< 4)], &
piùu»_»sidu
 [
iCu¼MbAddr
], PicWidthInMbs << 4);

149 
	`Re£tMbResidu
(&
Residu_Luma
[((
iMb_x
 + (
iMb_y
 * 
PicWidthInMbs
 << 4)) << 4)],

150 &
Residu_Cb
[((
iMb_x
 + (
iMb_y
 * 
PicWidthInMbs
 << 3)) << 3)],

151 &
Residu_Cr
[((
iMb_x
 + (
iMb_y
 * 
PicWidthInMbs
 << 3)) << 3)], PicWidthInMbs << 4);

156 
iCu¼MbAddr
 = 
	`Next_MbAdd»ss
(iCu¼MbAddr, 
PicSizeInMbs
, 
PicWiInMbs
, 
SliûTabË
, &
iMb_x
, &
iMb_y
);

157 iàĞ
SliûTabË
 [
iCu¼MbAddr
] == 255 ) {

158 
iCu¼MbAddr
 = 
PicSizeInMbs
 ;

162 
	}
}

	@lib_svc/Slice_data_avc.h

35 #iâdeà
SLICE_DATA_AVC_H


36 
	#SLICE_DATA_AVC_H


	)

40 
	~"ty³.h
"

41 
	~"maš_d©a.h
"

45 
	~"svc_ty³.h
"

47 
Decode_I_avc
ĞcÚ¡ 
SPS
 * 
Sps
, cÚ¡ 
PPS
 * 
Pps
, cÚ¡ 
SLICE
 * 
ai_p¡Sliû
, cÚ¡ *
SliûTabË
,

48 
RESIDU
 *
piùu»_»sidu
, cÚ¡ 
STRUCT_PF
 * 
ai_¡ruù_pf
,

49 cÚ¡ 
W_TABLES
 *
quªtif
, 
NAL
 *
N®
, *
Y
, *
U
, *
V
);

51 
Decode_P_avc
ĞcÚ¡ 
SPS
 *
Sps
, cÚ¡ 
PPS
 *
Pps
, cÚ¡ 
SLICE
 *
ai_p¡Sliû
, cÚ¡ *
SliûTabË
,

52 
RESIDU
 *
piùu»_»sidu
, cÚ¡ 
STRUCT_PF
 * 
ai_¡ruù_pf
, 
LIST_MMO
 *
ai_p¡RefPicLi¡L0
,

53 
LIST_MMO
 * 
Cu¼’t_pic
, cÚ¡ 
W_TABLES
 *
quªtif
, cÚ¡ 
NAL
 *
N®
, *
aio_tiMv
, *
aio_tiRef
,

54 *
DpbLuma
, *
DpbCb
, *
DpbCr
,

55 *
Residu_Luma
, *
Residu_Cb
, *
Residu_Cr
);

58 
Decode_B_avc
 ( 
SPS
 *
ai_¡Sps
, 
PPS
 *
ai_¡Pps
, 
SLICE
 *
ai_¡Sliû
, *
ai_tSliûTabË
,

59 
RESIDU
 *
piùu»_»sidu
, 
MAIN_STRUCT_PF
 *
maš_veùÜs
, 
LIST_MMO
 *
ai_pRefPicLi¡L0
,

60 
LIST_MMO
 *
ai_pRefPicLi¡L1
, LIST_MMO *
Cu¼’t_pic
, cÚ¡ 
W_TABLES
 *
quªtif
,

61 cÚ¡ 
NAL
 *
N®
, 
Mv_l0
[], 
Mv_l1
[], 
»f_l0
[], 
»f_l1
[],

62 *
aio_tDpb_luma
, *
aio_tDpb_Cb
,*
aio_tDpb_Cr
,

63 *
Residu_Luma
, *
Residu_Cb
, *
Residu_Cr
);

	@lib_svc/SwitchAdress.c

36 
	~"ty³.h
"

39 
	~"svc_ty³.h
"

40 
	~"£t_Ïy”.h
"

41 
	~"Sw™chAd»ss.h
"

48 
	$sw™ch_Ïy”
(
NAL
 *
N®
)

51 if(
N®
 -> 
IdrFÏg
 =ğ1 && (N® -> 
ComDqId
 !ğN® -> 
DqIdWª‹d
)){

53 
i
 ;

54 
‹¡
 = 0;

55 
SaveDqId
 = 
N®
 -> 
ComDqId
;

57  
i
 = 0; i < 8; i++){

58 ià(
SaveDqId
 =ğ
N®
 -> 
Ïy”_id_bË
[
i
]){

61 } if(
i
 < 7 && 
SaveDqId
 > 
N®
 -> 
Ïy”_id_bË
[i] && Nal ->†ayer_id_table[i + 1] == -1){

63 
‹¡
 = 1;

65 }ià(
i
 < 7 && 
SaveDqId
 > 
N®
 -> 
Ïy”_id_bË
[i] && SaveDqId < Nal ->†ayer_id_table[i + 1]){

67 
‹¡
 = 2;

73 iàĞ
‹¡
 != 1){

74 ià(
‹¡
 == 2){

77 
N®
 -> 
DqIdWª‹d
 = N® -> 
Ïy”_id_bË
 [
i
 + 1];

80 
Wª‹dLay”
 = 
	`G‘Lay”Numb”
(
N®
, 
SaveDqId
);

82 ià(
Wª‹dLay”
 < 
N®
 -> 
MaxNumLay”
){

83 
N®
 -> 
DqIdWª‹d
 = N® -> 
Ïy”_id_bË
[
Wª‹dLay”
];

85 
N®
 -> 
DqIdWª‹d
 = N® -> 
Ïy”_id_bË
[N® -> 
MaxNumLay”
 - 1];

88 
SaveDqId
 = 
N®
 -> 
DqIdToDi¥Ïy
 = N® -> 
DqIdWª‹d
;

89 
N®
 -> 
FlushR’d””
 = 1;

91 
N®
 -> 
DqIdToDi¥Ïy
 = N® -> 
DqIdWª‹d
 = 
SaveDqId
;

92 
N®
 -> 
FlushR’d””
 = 1;

95 
N®
 -> 
DqIdToDi¥Ïy
 = N® -> 
DqIdWª‹d
;

99 if(
N®
 -> 
Ïy”_id_bË
[0] == -1){

100 
N®
 -> 
Ïy”_id_bË
 [0] = 0;

102 
	}
}

	@lib_svc/SwitchAdress.h

34 #iâdeà
SWITCH_ADDRESS_H


35 
	#SWITCH_ADDRESS_H


	)

38 
	~"ty³.h
"

43 
sw™ch_Ïy”
(
NAL
 *
Çl
);

	@lib_svc/VlcCabacSvc.c

35 
	~"ty³.h
"

36 
	~"maš_d©a.h
"

37 
	~"vlc_ÿbac.h
"

38 
	~"CabacMbP»d.h
"

39 
	~"CabacMvAndRef.h
"

42 
	~"VlcCabacSvc.h
"

50 
	$SubMbPCabacSVC
 ( *
dù_®lowed
, 
CABACCÚ‹xt
 *
c
, *
¡©e
, 
SLICE
 *
¦iû
, 
DATA
 *
maüoblock
,

51 
RESIDU
 *
Cu¼’tResidu
, 
mv_ÿche_l0
[][2], *
»f_ÿche_l0
)

54 
mbP¬tIdx
 ;

55 
subMbP¬tIdx
 ;

56 
compIdx
 ;

57 
mva
;

58 
mvb
;

62  
mbP¬tIdx
 = 0 ; mbPartIdx < 4 ; mbPartIdx++ ) {

63 
Cu¼’tResidu
 -> 
SubMbTy³
 [
mbP¬tIdx
] = 
	`decode_ÿbac_p_mb_sub_ty³
Ğ
c
, 
¡©e
);

66 #ifdeà
ERROR_DETECTION


68 if(
	`E¼ÜsCheckSubMbTy³
Ğ
Cu¼’tResidu
 -> 
SubMbTy³
, 
MaxPSubMbTy³
)){

74 if(
	`G‘CabacSVCPMÙiÚP»d
(
c
, 
¡©e
, 
¦iû
, 
maüoblock
, maüoblock -> 
MÙiÚP»dL0
, 
Cu¼’tResidu
 -> 
InCrİWšdow
, 
P»d_L1
, 0)){

79 ià(
¦iû
 -> 
num_RefIdxL0_aùive_mšus1
 > 0) {

80 if(
	`G‘CabacPSubRefIdx
(
c
, 
¡©e
, 
maüoblock
 -> 
RefIdxL0
, 
»f_ÿche_l0
, maüoblock -> 
MÙiÚP»dL0
,

81 
¦iû
 -> 
num_RefIdxL0_aùive_mšus1
)){

85 
»f_ÿche_l0
[12] =„ef_cache_l0[13] =„ef_cache_l0[14] =„ef_cache_l0[15] =

86 
»f_ÿche_l0
[20] =„ef_cache_l0[21] =„ef_cache_l0[22] =„ef_cache_l0[23] =

87 
»f_ÿche_l0
[28] =„ef_cache_l0[29] =„ef_cache_l0[30] =„ef_cache_l0[21] =

88 
»f_ÿche_l0
[36] =„ef_cache_l0[37] =„ef_cache_l0[38] =„ef_cache_l0[39] = 0;

93  
mbP¬tIdx
 = 0 ; mbPartIdx < 4 ; mbPartIdx++ ) {

94 
MvdL0
[2];

95 
sub_mb_ty³
 = 
Cu¼’tResidu
 -> 
SubMbTy³
 [
mbP¬tIdx
];

96  
subMbP¬tIdx
 = 0 ; subMbP¬tIdx < 
sub_num_p_·¹
[ 
sub_mb_ty³
] ; subMbPartIdx++ ) {

97 
šdex
 = 
	`SCAN8
(Ğ
mbP¬tIdx
 << 2è+ (
sub_mb_ty³
 =ğ1 ? 2 * 
subMbP¬tIdx
: subMbPartIdx));

98  
compIdx
 = 0 ; compIdx < 2 ; compIdx++ ) {

99 
	`g‘_mv_Ãighbourhood
(&
mva
, &
mvb
, 
mv_ÿche_l0
, 
sub_mb_ty³
, 
mbP¬tIdx
 , 
subMbP¬tIdx
 , 
compIdx
, 
¦iû
 -> 
¦iû_ty³
);

100 
maüoblock
 -> 
MvdL0
 [(
mbP¬tIdx
 << 2è+ 
subMbP¬tIdx
][
compIdx
] = MvdL0[compIdx] = 
	`decode_ÿbac_mb_mvd
Ğ
c
, 
¡©e
, 
mva
, 
mvb
, compIdx);

102 
	`FlSubMÙiÚVeùÜ
(
MvdL0
, &
mv_ÿche_l0
[
šdex
], 
sub_mb_ty³
, 
¦iû
 -> 
¦iû_ty³
);

106  
mbP¬tIdx
 = 0; mbP¬tIdx < 4 && *
dù_®lowed
; mbPartIdx ++){

107 iàĞ!(
sub_num_p_·¹
[
Cu¼’tResidu
 -> 
SubMbTy³
[
mbP¬tIdx
]] == 1) ){

108 *
dù_®lowed
 = 0;

112 
	}
}

119 
	$MbP»dPCabacSvc
 (
CABACCÚ‹xt
 *
c
, *
¡©e
, 
SLICE
 *
¦iû
, 
RESIDU
 *
Cu¼Residu
, 
DATA
 *
maüoblock
,

120 
mv_ÿche_l0
[][2], *
»f_ÿche_l0
){

122 
šdex
 = 14 * 
Cu¼Residu
 -> 
Mode
;

126 if(
	`G‘CabacSVCPMÙiÚP»d
(
c
, 
¡©e
, 
¦iû
, 
maüoblock
, maüoblock -> 
MÙiÚP»dL0
, 
Cu¼Residu
 -> 
InCrİWšdow
, 
P»d_L1
, 0)){

128 
»f_ÿche_l0
 [12] =„ef_cache_l0 [14] =„ef_cache_l0 [28] =„ef_cache_l0 [30] = 0;

133 if(
	`G‘CabacPRefLi¡
(
c
, 
¡©e
, 
maüoblock
 -> 
RefIdxL0
, 
»f_ÿche_l0
, maüoblock -> 
MÙiÚP»dL0
,

134 
Cu¼Residu
 -> 
Mode
, 
¦iû
 -> 
num_RefIdxL0_aùive_mšus1
, 
šdex
)){

139 ià(
Cu¼Residu
 -> 
Mode
 == 3){

140 
	`R—dCabacMÙiÚVeùÜ
(
c
, 
¡©e
, 
mv_ÿche_l0
, 
maüoblock
 -> 
MvdL0
[0], 3, 12);

141 }ià(
Cu¼Residu
 -> 
Mode
 == 1){

143 
	`R—dCabacMÙiÚVeùÜ
(
c
, 
¡©e
, 
mv_ÿche_l0
, 
maüoblock
 -> 
MvdL0
[0], 1, 12);

144 
	`R—dCabacMÙiÚVeùÜ
(
c
, 
¡©e
, 
mv_ÿche_l0
, 
maüoblock
 -> 
MvdL0
[4], 1, 14);

146 
	`R—dCabacMÙiÚVeùÜ
(
c
, 
¡©e
, 
mv_ÿche_l0
, 
maüoblock
 -> 
MvdL0
[0], 2, 12);

147 
	`R—dCabacMÙiÚVeùÜ
(
c
, 
¡©e
, 
mv_ÿche_l0
, 
maüoblock
 -> 
MvdL0
[4], 2, 28);

150 
	}
}

156 
	$R—dCabac8x8MÙiÚVeùÜ
(
CABACCÚ‹xt
 *
c
, *
¡©e
, 
RESIDU
 *
Cu¼’tResidu
, 
SLICE
 *
¦iû
,

157 
mv_ÿche_lx
[][2], 
MvdLx
[][2], 
P»d_Lx
)

160 
mbP¬tIdx
, 
subMbP¬tIdx
;

162  
mbP¬tIdx
 = 0 ; mbPartIdx < 4 ; mbPartIdx++ ) {

163 
SubMbTy³
 = 
Cu¼’tResidu
 -> SubMbTy³ [
mbP¬tIdx
];

164 iàĞ(
sub_mb_b_Çme
 [
SubMbTy³
] !ğ
B_dœeù
è&& (sub_mb_b_Çm[SubMbTy³] !ğ
P»d_Lx
 )) {

165  
subMbP¬tIdx
 = 0 ; subMbP¬tIdx < 
sub_num_b_·¹
[
SubMbTy³
] ; subMbPartIdx++ ) {

166 
x·¹
 = (
SubMbTy³
 < 5 || SubMbType == 6 || SubMbType == 8) ? 2:1;

167 
šdex
 = 
	`SCAN8
(Ğ
mbP¬tIdx
 << 2è+ 
subMbP¬tIdx
 * 
x·¹
);

169 
	`R—dCabacSubMÙiÚVeùÜ
(
c
, 
¡©e
, 
mv_ÿche_lx
, &
MvdLx
 [(
mbP¬tIdx
 << 2è+ 
subMbP¬tIdx
][0],

170 
mbP¬tIdx
, 
subMbP¬tIdx
, 
SubMbTy³
, 
šdex
, 
¦iû
 -> 
¦iû_ty³
);

174 
	}
}

181 
	$SubMbBCabacSVC
 ( *
dù_®lowed
, 
Dœ8x8šfFÏg
, 
CABACCÚ‹xt
 *
c
, *
¡©e
, 
SLICE
 *
¦iû
, 
DATA
 *
maüoblock
,

182 
RESIDU
 *
Cu¼’tResidu
, 
mv_ÿche_l0
[][2], *
»f_ÿche_l0
, 
mv_ÿche_l1
[][2], *
»f_ÿche_l1
)

185 
mbP¬tIdx
 ;

189  
mbP¬tIdx
 = 0 ; mbPartIdx < 4 ; mbPartIdx++ ) {

190 
Cu¼’tResidu
 -> 
SubMbTy³
 [
mbP¬tIdx
] = 
	`decode_ÿbac_b_mb_sub_ty³
Ğ
c
, 
¡©e
);

192 #ifdeà
ERROR_DETECTION


194 if(
	`E¼ÜsCheckSubMbTy³
Ğ
Cu¼’tResidu
 -> 
SubMbTy³
, 
MaxBSubMbTy³
)){

200 if(
	`G‘CabacSVCBSubMÙiÚP»d
(
c
, 
¡©e
, 
¦iû
, 
maüoblock
 -> 
MÙiÚP»dL0
, 
Cu¼’tResidu
 -> 
SubMbTy³
,

201 4, 
Cu¼’tResidu
 -> 
InCrİWšdow
, 0, 
P»d_L1
)){

204 if(
	`G‘CabacSVCBSubMÙiÚP»d
(
c
, 
¡©e
, 
¦iû
, 
maüoblock
 -> 
MÙiÚP»dL1
, 
Cu¼’tResidu
 -> 
SubMbTy³
,

205 4, 
Cu¼’tResidu
 -> 
InCrİWšdow
, 1, 
P»d_L0
)){

211 if(
	`G‘CabacBSubRefLi¡
(
c
, 
¡©e
, 
maüoblock
 -> 
RefIdxL0
, 
»f_ÿche_l0
, maüoblock -> 
MÙiÚP»dL0
,

212 
Cu¼’tResidu
 -> 
SubMbTy³
, 
¦iû
 -> 
num_RefIdxL0_aùive_mšus1
, 
P»d_L1
)){

215 if(
	`G‘CabacBSubRefLi¡
(
c
, 
¡©e
, 
maüoblock
 -> 
RefIdxL1
, 
»f_ÿche_l1
, maüoblock -> 
MÙiÚP»dL1
,

216 
Cu¼’tResidu
 -> 
SubMbTy³
, 
¦iû
 -> 
num_RefIdxL1_aùive_mšus1
, 
P»d_L0
)){

221 
	`R—dCabac8x8MÙiÚVeùÜ
(
c
, 
¡©e
, 
Cu¼’tResidu
, 
¦iû
, 
mv_ÿche_l0
, 
maüoblock
 -> 
MvdL0
, 
P»d_L1
);

222 
	`R—dCabac8x8MÙiÚVeùÜ
(
c
, 
¡©e
, 
Cu¼’tResidu
, 
¦iû
, 
mv_ÿche_l1
, 
maüoblock
 -> 
MvdL1
, 
P»d_L0
);

224  
mbP¬tIdx
 = 0; mbP¬tIdx < 4 && *
dù_®lowed
; mbPartIdx ++){

225 iàĞ!((
sub_num_b_·¹
[ 
Cu¼’tResidu
 -> 
SubMbTy³
[
mbP¬tIdx
]] == 1) ||

226 (
Dœ8x8šfFÏg
 && 
sub_mb_b_Çme
[
Cu¼’tResidu
 -> 
SubMbTy³
[
mbP¬tIdx
]] =ğ
B_dœeù
))){

227 *
dù_®lowed
 = 0;

231 
	}
}

237 
	$MbP»dBCabacSvc
 ( 
CABACCÚ‹xt
 *
c
, *
¡©e
, 
SLICE
 *
Sliû
, 
RESIDU
 *
Cu¼Residu
, 
DATA
 *
maüoblock
,

238 
mv_ÿche_l0
[][2], *
»f_ÿche_l0
 , 
mv_ÿche_l1
[][2], *
»f_ÿche_l1
)

241 
šdex
 = 14 * 
Cu¼Residu
 -> 
Mode
;

244 if(
	`G‘CabacSVCPMÙiÚP»d
(
c
, 
¡©e
, 
Sliû
, 
maüoblock
, maüoblock -> 
MÙiÚP»dL0
, 
Cu¼Residu
 -> 
InCrİWšdow
, 
P»d_L1
, 0)){

250 if(
	`G‘CabacSVCPMÙiÚP»d
(
c
, 
¡©e
, 
Sliû
, 
maüoblock
, maüoblock -> 
MÙiÚP»dL1
, 
Cu¼Residu
 -> 
InCrİWšdow
, 
P»d_L0
, 1)){

256 if(
	`G‘CabacBRefLi¡
(
c
, 
¡©e
, 
maüoblock
 -> 
RefIdxL0
, 
»f_ÿche_l0
, maüoblock -> 
MÙiÚP»dL0
, 
Cu¼Residu
 -> 
Mode
,

257 
Sliû
 -> 
num_RefIdxL0_aùive_mšus1
, 
maüoblock
 -> 
MbP¬tP»dMode
, 
P»d_L1
, 
šdex
)){

261 if(
	`G‘CabacBRefLi¡
(
c
, 
¡©e
, 
maüoblock
 -> 
RefIdxL1
, 
»f_ÿche_l1
, maüoblock -> 
MÙiÚP»dL1
, 
Cu¼Residu
 -> 
Mode
,

262 
Sliû
 -> 
num_RefIdxL1_aùive_mšus1
, 
maüoblock
 -> 
MbP¬tP»dMode
, 
P»d_L0
, 
šdex
)){

266 ià(
Cu¼Residu
 -> 
Mode
 == 3){

268 iàĞ
maüoblock
 -> 
MbP¬tP»dMode
 [0] !ğ
P»d_L1
 ) {

269 
	`R—dCabacMÙiÚVeùÜ
(
c
, 
¡©e
, 
mv_ÿche_l0
, &
maüoblock
 -> 
MvdL0
[0][0], 3, 12);

273 iàĞ
maüoblock
 -> 
MbP¬tP»dMode
 [0] !ğ
P»d_L0
 ) {

274 
	`R—dCabacMÙiÚVeùÜ
(
c
, 
¡©e
, 
mv_ÿche_l1
, &
maüoblock
 -> 
MvdL1
[0][0], 3, 12);

276 }ià(
Cu¼Residu
 -> 
Mode
 == 1){

281 iàĞ
maüoblock
 -> 
MbP¬tP»dMode
 [0] !ğ
P»d_L1
 ) {

282 
	`R—dCabacMÙiÚVeùÜ
(
c
, 
¡©e
, 
mv_ÿche_l0
, &
maüoblock
 -> 
MvdL0
[0][0], 1, 12);

285 iàĞ
maüoblock
 -> 
MbP¬tP»dMode
 [1] !ğ
P»d_L1
 ) {

286 
	`R—dCabacMÙiÚVeùÜ
(
c
, 
¡©e
, 
mv_ÿche_l0
, &
maüoblock
 -> 
MvdL0
[4][0], 1, 14);

291 iàĞ
maüoblock
 -> 
MbP¬tP»dMode
 [0] !ğ
P»d_L0
 ) {

292 
	`R—dCabacMÙiÚVeùÜ
(
c
, 
¡©e
, 
mv_ÿche_l1
, &
maüoblock
 -> 
MvdL1
[0][0], 1, 12);

295 iàĞ
maüoblock
 -> 
MbP¬tP»dMode
 [1] !ğ
P»d_L0
 ) {

296 
	`R—dCabacMÙiÚVeùÜ
(
c
, 
¡©e
, 
mv_ÿche_l1
, &
maüoblock
 -> 
MvdL1
[4][0], 1, 14);

300 iàĞ
maüoblock
 -> 
MbP¬tP»dMode
 [0] !ğ
P»d_L1
 ) {

301 
	`R—dCabacMÙiÚVeùÜ
(
c
, 
¡©e
, 
mv_ÿche_l0
, &
maüoblock
 -> 
MvdL0
[0][0], 2, 12);

304 iàĞ
maüoblock
 -> 
MbP¬tP»dMode
 [1] !ğ
P»d_L1
 ) {

305 
	`R—dCabacMÙiÚVeùÜ
(
c
, 
¡©e
, 
mv_ÿche_l0
, &
maüoblock
 -> 
MvdL0
[4][0], 2, 28);

309 iàĞ
maüoblock
 -> 
MbP¬tP»dMode
 [0] !ğ
P»d_L0
 ) {

310 
	`R—dCabacMÙiÚVeùÜ
(
c
, 
¡©e
, 
mv_ÿche_l1
, &
maüoblock
 -> 
MvdL1
[0][0], 2, 12);

312 iàĞ
maüoblock
 -> 
MbP¬tP»dMode
 [1] !ğ
P»d_L0
 ) {

313 
	`R—dCabacMÙiÚVeùÜ
(
c
, 
¡©e
, 
mv_ÿche_l1
, &
maüoblock
 -> 
MvdL1
[4][0], 2, 28);

318 
	}
}

	@lib_svc/VlcCabacSvc.h

37 #iâdeà
VLC_CABAC_SVC_H


38 
	#VLC_CABAC_SVC_H


	)

41 
	~"mb_´ed_maš.h
"

44 
SubMbPCabacSVC
 ( *
dù_®lowed
, 
CABACCÚ‹xt
 *
c
, *
¡©e
, 
SLICE
 *
¦iû
, 
DATA
 *
maüoblock
, 
RESIDU
 *
Cu¼’t_»sidu
, 
mv_ÿche_l0
[][2], *
»f_ÿche_l0
);

45 
SubMbBCabacSVC
 ( *
dù_®lowed
, 
Dœ8x8šfFÏg
, 
CABACCÚ‹xt
 *
c
, *
¡©e
, 
SLICE
 *
¦iû
, 
DATA
 *
maüoblock
,

46 
RESIDU
 *
Cu¼’tResidu
, 
mv_ÿche_l0
[][2], *
»f_ÿche_l0
, 
mv_ÿche_l1
[][2], *
»f_ÿche_l1
);

47 
MbP»dPCabacSvc
 ( 
CABACCÚ‹xt
 *
c
, *
¡©e
, 
SLICE
 *
¦iû
, 
RESIDU
 *
Cu¼Residu
, 
DATA
 *
maüoblock
, 
mv_ÿche_l0
[][2], *
»f_ÿche_l0
);

48 
MbP»dBCabacSvc
 ( 
CABACCÚ‹xt
 *
c
, *
¡©e
, 
SLICE
 *
Sliû
, 
RESIDU
 *
Cu¼Residu
, 
DATA
 *
maüoblock
, 
mv_ÿche_l0
[][2],

49 *
»f_ÿche_l0
, 
mv_ÿche_l1
[][2], *
»f_ÿche_l1
);

56 
__šlše
 
	$CabacG‘MÙiÚP»dFÏg
(
CABACCÚ‹xt
 *
c
, *
¡©e
, 
Idx
)

59  (è
	`g‘_ÿbac
Ğ
c
, &
¡©e
[463 + 
Idx
]);

60 
	}
}

67 
__šlše
 
	$G‘CabacSVCPMÙiÚP»d
(
CABACCÚ‹xt
 *
c
, *
¡©e
, 
SLICE
 *
¦iû
, 
DATA
 *
maüoblock
,

68 *
MÙiÚP»d
, 
InCrİInWšdow
, 
P»d_Lx
, 
Com±x
)

70 ifĞ
¦iû
 -> 
Ad­tiveMÙiÚP»diùiÚFÏg
 && 
InCrİInWšdow
) {

72 
mbP¬tIdx
;

73  
mbP¬tIdx
 = 0 ; mbP¬tIdx < 
maüoblock
 -> 
NumMbP¬t
 ; mbPartIdx++ ) {

74 ià(
maüoblock
 -> 
MbP¬tP»dMode
 [
mbP¬tIdx
] !ğ
P»d_Lx
) {

75 
MÙiÚP»d
 [
mbP¬tIdx
] = 
	`CabacG‘MÙiÚP»dFÏg
Ğ
c
, 
¡©e
, 
Com±x
);

79 
MÙiÚP»d
[0] = MÙiÚP»d[1] = MÙiÚP»d[2] = MÙiÚP»d[3] = 
¦iû
 -> 
DeçuÉMÙiÚP»diùiÚFÏg
;

81 #ifdeà
ERROR_DETECTION


83 if(
	`E¼ÜsCheckSubRefLx
(
MÙiÚP»d
, 1)){

88 
	}
}

95 
__šlše
 
	$G‘CabacSVCBSubMÙiÚP»d
(
CABACCÚ‹xt
 *
c
, *
¡©e
, 
SLICE
 *
¦iû
, *
MÙiÚP»d
,

96 *
SubMbTy³
, 
MbP¬t
, 
InCrİInWšdow
, 
Index
, 
P»dLx
)

98 ifĞ
¦iû
 -> 
Ad­tiveMÙiÚP»diùiÚFÏg
 && 
InCrİInWšdow
) {

100 
mbP¬tIdx
;

101  
mbP¬tIdx
 = 0 ; mbP¬tIdx < 
MbP¬t
 ; mbPartIdx++ ) {

102 
SubTy³
 = 
sub_mb_b_Çme
 [
SubMbTy³
 [
mbP¬tIdx
]];

103 iàĞ(
SubTy³
 !ğ
B_dœeù
è&& (SubTy³ !ğ
P»dLx
 )) {

104 
MÙiÚP»d
 [
mbP¬tIdx
] = 
	`CabacG‘MÙiÚP»dFÏg
Ğ
c
, 
¡©e
, 
Index
);

108 
MÙiÚP»d
[0] = MÙiÚP»d[1] = MÙiÚP»d[2] = MÙiÚP»d[3] = 
¦iû
 -> 
DeçuÉMÙiÚP»diùiÚFÏg
;

110 #ifdeà
ERROR_DETECTION


112 if(
	`E¼ÜsCheckSubRefLx
(
MÙiÚP»d
, 1)){

117 
	}
}

	@lib_svc/WriteBackSVC.c

36 
	~"ty³.h
"

37 
	~"d©a.h
"

38 
	~"š™_d©a.h
"

39 
	~"wr™e_back.h
"

40 
	~"fl_ÿches.h
"

43 
	~"svc_d©a.h
"

44 
	~"Wr™eBackSVC.h
"

52 
	$wr™e_back_mÙiÚ_ÿche_B_fuÎ_»f_C
ĞcÚ¡ 
ai_iB_¡ride
, cÚ¡ 
ai_iB8_¡ride
, cÚ¡ 
ai_iMb_xy
,

53 *
ai_tiMv_l0
, *
ai_tiMv_l1
, 
ai_tiMv_ÿche_l0
[ ][2],

54 
ai_tiMv_ÿche_l1
[ ][2], *
ai_tiRef_l0
, *
ai_tiRef_l1
,

55 *
aio_tiRef_ÿche_l0
, *
aio_tiRef_ÿche_l1
, 
mb_¡ride
)

59 cÚ¡ 
tİ_xy
 = 
ai_iMb_xy
 - 
mb_¡ride
 ;

60 cÚ¡ 
tİËá_xy
 = 
tİ_xy
 - 1 ;

61 cÚ¡ 
tİright_xy
 = 
tİ_xy
 >= 0 ?op_xy + 1:-1 ;

62 cÚ¡ 
Ëá_xy
 = 
ai_iMb_xy
 - 1 ;

65 *
MvdL0
 = 
ai_tiMv_l0
;

66 *
MvdL1
 = 
ai_tiMv_l1
;

67 *
RefL0
 = 
ai_tiRef_l0
;

68 *
RefL1
 = 
ai_tiRef_l1
;

69 
y
;

71 
y
 = 0; y < 4; y++, 
RefL0
 +ğ
ai_iB8_¡ride
, 
RefL1
 +=‡i_iB8_stride){

72 
	`FlFuÎRefCacheCu¼Pos™iÚ
(&
aio_tiRef_ÿche_l0
[12 + 8 * 
y
], 
RefL0
);

73 
	`FlFuÎRefCacheCu¼Pos™iÚ
(&
aio_tiRef_ÿche_l1
[12 + 8 * 
y
], 
RefL1
);

78 
y
 = 0; y < 4; y++, 
MvdL0
 +ğ
ai_iB_¡ride
, 
MvdL1
 +=‡i_iB_stride){

79 
	`FlMvCacheCu¼Pos™iÚ
(&
ai_tiMv_ÿche_l0
[8 * 
y
], 
MvdL0
);

80 
	`FlMvCacheCu¼Pos™iÚ
(&
ai_tiMv_ÿche_l1
[8 * 
y
], 
MvdL1
);

85 if(
tİ_xy
 >= 0) {

86 
	`FlMvCacheTİPos™iÚ
(
ai_tiMv_ÿche_l0
, &
ai_tiMv_l0
[- 
ai_iB_¡ride
]);

87 
	`FlMvCacheTİPos™iÚ
(
ai_tiMv_ÿche_l1
, &
ai_tiMv_l1
[- 
ai_iB_¡ride
]);

88 
	`FlFuÎRefCacheCu¼Pos™iÚ
(&
aio_tiRef_ÿche_l0
[4], &
ai_tiRef_l0
[- 
ai_iB8_¡ride
]);

89 
	`FlFuÎRefCacheCu¼Pos™iÚ
(&
aio_tiRef_ÿche_l1
[4], &
ai_tiRef_l1
[- 
ai_iB8_¡ride
]);

92 
	`FlRefCacheTİPos™iÚ
(
aio_tiRef_ÿche_l0
, 
PART_NOT_AVAILABLE
, PART_NOT_AVAILABLE);

93 
	`FlRefCacheTİPos™iÚ
(
aio_tiRef_ÿche_l1
, 
PART_NOT_AVAILABLE
, PART_NOT_AVAILABLE);

97 if(
Ëá_xy
 >= 0) {

98 
	`FlMvCacheLeáPos™iÚ
(
ai_tiMv_ÿche_l0
, &
ai_tiMv_l0
[-2], 
ai_iB_¡ride
);

99 
	`FlMvCacheLeáPos™iÚ
(
ai_tiMv_ÿche_l1
, &
ai_tiMv_l1
[-2], 
ai_iB_¡ride
);

101 
aio_tiRef_ÿche_l0
[11] = 
ai_tiRef_l0
[-1];

102 
aio_tiRef_ÿche_l0
[19] = 
ai_tiRef_l0
[-1 + 
ai_iB8_¡ride
];

103 
aio_tiRef_ÿche_l0
[27] = 
ai_tiRef_l0
[-1 + 2 * 
ai_iB8_¡ride
];

104 
aio_tiRef_ÿche_l0
[35] = 
ai_tiRef_l0
[-1 + 3 * 
ai_iB8_¡ride
];

106 
aio_tiRef_ÿche_l1
[11] = 
ai_tiRef_l1
[-1];

107 
aio_tiRef_ÿche_l1
[19] = 
ai_tiRef_l1
[-1 + 
ai_iB8_¡ride
];

108 
aio_tiRef_ÿche_l1
[27] = 
ai_tiRef_l1
[-1 + 2 * 
ai_iB8_¡ride
];

109 
aio_tiRef_ÿche_l1
[35] = 
ai_tiRef_l1
[-1 + 3 * 
ai_iB8_¡ride
];

114 
	`FlRefCacheLeáPos™iÚ
(
aio_tiRef_ÿche_l0
, 
PART_NOT_AVAILABLE
, PART_NOT_AVAILABLE);

115 
	`FlRefCacheLeáPos™iÚ
(
aio_tiRef_ÿche_l1
, 
PART_NOT_AVAILABLE
, PART_NOT_AVAILABLE);

120 if(
tİËá_xy
 >= 0){

121 
ai_tiMv_ÿche_l0
 [12 - 1 - 8][0] = 
ai_tiMv_l0
[-2 - 
ai_iB_¡ride
];

122 
ai_tiMv_ÿche_l0
 [12 - 1 - 8][1] = 
ai_tiMv_l0
[-1 - 
ai_iB_¡ride
];

124 
ai_tiMv_ÿche_l1
 [12 - 1 - 8][0] = 
ai_tiMv_l1
[-2 - 
ai_iB_¡ride
];

125 
ai_tiMv_ÿche_l1
 [12 - 1 - 8][1] = 
ai_tiMv_l1
[-1 - 
ai_iB_¡ride
];

127 
aio_tiRef_ÿche_l0
[12 - 1 - 8] = 
ai_tiRef_l0
[-1 - 
ai_iB8_¡ride
];

128 
aio_tiRef_ÿche_l1
[12 - 1 - 8] = 
ai_tiRef_l1
[-1 - 
ai_iB8_¡ride
];

131 
aio_tiRef_ÿche_l0
[12 - 1 - 8] = 
PART_NOT_AVAILABLE
;

132 
aio_tiRef_ÿche_l1
[12 - 1 - 8] = 
PART_NOT_AVAILABLE
;

137 if(
tİright_xy
 >= 0) {

138 
ai_tiMv_ÿche_l0
 [12 + 4 - 8][0] = 
ai_tiMv_l0
[8 - 
ai_iB_¡ride
];

139 
ai_tiMv_ÿche_l0
 [12 + 4 - 8][1] = 
ai_tiMv_l0
[9 - 
ai_iB_¡ride
];

141 
ai_tiMv_ÿche_l1
 [12 + 4 - 8][0] = 
ai_tiMv_l1
[8 - 
ai_iB_¡ride
];

142 
ai_tiMv_ÿche_l1
 [12 + 4 - 8][1] = 
ai_tiMv_l1
[9 - 
ai_iB_¡ride
];

144 
aio_tiRef_ÿche_l0
[12 + 4 - 8] = 
ai_tiRef_l0
[2 - 
ai_iB8_¡ride
];

145 
aio_tiRef_ÿche_l1
[12 + 4 - 8] = 
ai_tiRef_l1
[2 - 
ai_iB8_¡ride
];

148 
aio_tiRef_ÿche_l0
[12 + 4 - 8] = 
PART_NOT_AVAILABLE
;

149 
aio_tiRef_ÿche_l1
[12 + 4 - 8] = 
PART_NOT_AVAILABLE
;

151 
	}
}

154 #ifdeà
TI_OPTIM


155 
	$wr™e_back_mÙiÚ_ÿche_B_fuÎ_»f_TI
ĞcÚ¡ 
ai_iB_¡ride
, cÚ¡ 
ai_iB8_¡ride
, cÚ¡ 
ai_iMb_xy
,

156 
ai_tiMv_l0
[ ], 
ai_tiMv_l1
[ ], 
ai_tiMv_ÿche_l0
[ ][2],

157 
ai_tiMv_ÿche_l1
[ ][2], 
ai_tiRef_l0
[ ], 
ai_tiRef_l1
[ ],

158 
aio_tiRef_ÿche_l0
[ ], 
aio_tiRef_ÿche_l1
[ ],
mb_¡ride
)

162 cÚ¡ 
tİ_xy
 = 
ai_iMb_xy
 - 
mb_¡ride
 ;

163 cÚ¡ 
tİËá_xy
 = 
tİ_xy
 - 1 ;

164 cÚ¡ 
tİright_xy
 = 
tİ_xy
 >= 0 ?op_xy + 1:-1 ;

165 cÚ¡ 
Ëá_xy
 = 
ai_iMb_xy
 - 1 ;

168 
ai_iB8_¡ride_2
 = 
ai_iB8_¡ride
<<1;

169 
ai_iB8_¡ride_3
 = 
ai_iB8_¡ride_2
 + 
ai_iB8_¡ride
;

170 
ai_iB_¡ride_2
 = 
ai_iB_¡ride
<<1;

171 
ai_iB_¡ride_3
 = 
ai_iB_¡ride_2
 + 
ai_iB_¡ride
;

176 
	`_mem8
((*)
aio_tiRef_ÿche_l0
+6)=
	`_™Şl
(
	`_·ck2
(
	`_mem4
(
ai_tiRef_l0
+3),_mem4(ai_tiRef_l0+2)),_pack2(_mem4(ai_tiRef_l0+1),_mem4(ai_tiRef_l0)));

177 
	`_mem8
((*)
aio_tiRef_ÿche_l0
+10)=
	`_™Şl
(
	`_·ck2
(
	`_mem4
(
ai_tiRef_l0
+
ai_iB8_¡ride
+3),_mem4(ai_tiRef_l0+ai_iB8_stride+2)),_pack2(_mem4(ai_tiRef_l0+ai_iB8_stride+1),_mem4(ai_tiRef_l0+ai_iB8_stride)));

178 
	`_mem8
((*)
aio_tiRef_ÿche_l0
+14)=
	`_™Şl
(
	`_·ck2
(
	`_mem4
(
ai_tiRef_l0
+
ai_iB8_¡ride_2
+3),_mem4(ai_tiRef_l0+ai_iB8_stride_2+2)),_pack2(_mem4(ai_tiRef_l0+ai_iB8_stride_2+1),_mem4(ai_tiRef_l0+ai_iB8_stride_2)));

179 
	`_mem8
((*)
aio_tiRef_ÿche_l0
+18)=
	`_™Şl
(
	`_·ck2
(
	`_mem4
(
ai_tiRef_l0
+
ai_iB8_¡ride_3
+3),_mem4(ai_tiRef_l0+ai_iB8_stride_3+2)),_pack2(_mem4(ai_tiRef_l0+ai_iB8_stride_3+1),_mem4(ai_tiRef_l0+ai_iB8_stride_3)));

182 
	`_mem8
((*)
aio_tiRef_ÿche_l1
+6)=
	`_™Şl
(
	`_·ck2
(
	`_mem4
(
ai_tiRef_l1
+3),_mem4(ai_tiRef_l1+2)),_pack2(_mem4(ai_tiRef_l1+1),_mem4(ai_tiRef_l1)));

183 
	`_mem8
((*)
aio_tiRef_ÿche_l1
+10)=
	`_™Şl
(
	`_·ck2
(
	`_mem4
(
ai_tiRef_l1
+
ai_iB8_¡ride
+3),_mem4(ai_tiRef_l1+ai_iB8_stride+2)),_pack2(_mem4(ai_tiRef_l1+ai_iB8_stride+1),_mem4(ai_tiRef_l1+ai_iB8_stride)));

184 
	`_mem8
((*)
aio_tiRef_ÿche_l1
+14)=
	`_™Şl
(
	`_·ck2
(
	`_mem4
(
ai_tiRef_l1
+
ai_iB8_¡ride_2
+3),_mem4(ai_tiRef_l1+ai_iB8_stride_2+2)),_pack2(_mem4(ai_tiRef_l1+ai_iB8_stride_2+1),_mem4(ai_tiRef_l1+ai_iB8_stride_2)));

185 
	`_mem8
((*)
aio_tiRef_ÿche_l1
+18)=
	`_™Şl
(
	`_·ck2
(
	`_mem4
(
ai_tiRef_l1
+
ai_iB8_¡ride_3
+3),_mem4(ai_tiRef_l1+ai_iB8_stride_3+2)),_pack2(_mem4(ai_tiRef_l1+ai_iB8_stride_3+1),_mem4(ai_tiRef_l1+ai_iB8_stride_3)));

188 
	`_mem8
((*)
ai_tiMv_ÿche_l0
+12)=
	`_™Şl
(
	`_·ck2
(
	`_mem4
(
ai_tiMv_l0
+3),_mem4(ai_tiMv_l0+2)),_pack2(_mem4(ai_tiMv_l0+1),_mem4(ai_tiMv_l0)));

189 
	`_mem8
((*)
ai_tiMv_ÿche_l0
+14)=
	`_™Şl
(
	`_·ck2
(
	`_mem4
(
ai_tiMv_l0
+7),_mem4(ai_tiMv_l0+6)),_pack2(_mem4(ai_tiMv_l0+5),_mem4(ai_tiMv_l0+4)));

191 
	`_mem8
((*)
ai_tiMv_ÿche_l1
+12)=
	`_™Şl
(
	`_·ck2
(
	`_mem4
(
ai_tiMv_l1
+3),_mem4(ai_tiMv_l1+2)),_pack2(_mem4(ai_tiMv_l1+1),_mem4(ai_tiMv_l1)));

192 
	`_mem8
((*)
ai_tiMv_ÿche_l1
+14)=
	`_™Şl
(
	`_·ck2
(
	`_mem4
(
ai_tiMv_l1
+7),_mem4(ai_tiMv_l1+6)),_pack2(_mem4(ai_tiMv_l1+5),_mem4(ai_tiMv_l1+4)));

195 
	`_mem8
((*)
ai_tiMv_ÿche_l0
+20)=
	`_™Şl
(
	`_·ck2
(
	`_mem4
(
ai_tiMv_l0
+
ai_iB_¡ride
+3),_mem4(ai_tiMv_l0+ai_iB_stride+2)),_pack2(_mem4(ai_tiMv_l0+ai_iB_stride+1),_mem4(ai_tiMv_l0+ai_iB_stride)));

196 
	`_mem8
((*)
ai_tiMv_ÿche_l0
+22)=
	`_™Şl
(
	`_·ck2
(
	`_mem4
(
ai_tiMv_l0
+
ai_iB_¡ride
+7),_mem4(ai_tiMv_l0+ai_iB_stride+6)),_pack2(_mem4(ai_tiMv_l0+ai_iB_stride+5),_mem4(ai_tiMv_l0+ai_iB_stride+4)));

198 
	`_mem8
((*)
ai_tiMv_ÿche_l1
+20)=
	`_™Şl
(
	`_·ck2
(
	`_mem4
(
ai_tiMv_l1
+
ai_iB_¡ride
+3),_mem4(ai_tiMv_l1+ai_iB_stride+2)),_pack2(_mem4(ai_tiMv_l1+ai_iB_stride+1),_mem4(ai_tiMv_l1+ai_iB_stride)));

199 
	`_mem8
((*)
ai_tiMv_ÿche_l1
+22)=
	`_™Şl
(
	`_·ck2
(
	`_mem4
(
ai_tiMv_l1
+
ai_iB_¡ride
+7),_mem4(ai_tiMv_l1+ai_iB_stride+6)),_pack2(_mem4(ai_tiMv_l1+ai_iB_stride+5),_mem4(ai_tiMv_l1+ai_iB_stride+4)));

202 
	`_mem8
((*)
ai_tiMv_ÿche_l0
+28)=
	`_™Şl
(
	`_·ck2
(
	`_mem4
(
ai_tiMv_l0
+(
ai_iB_¡ride_2
)+3),_mem4(ai_tiMv_l0+(ai_iB_stride_2)+2)),_pack2(_mem4(ai_tiMv_l0+(ai_iB_stride_2)+1),_mem4(ai_tiMv_l0+(ai_iB_stride_2))));

203 
	`_mem8
((*)
ai_tiMv_ÿche_l0
+30)=
	`_™Şl
(
	`_·ck2
(
	`_mem4
(
ai_tiMv_l0
+(
ai_iB_¡ride_2
)+7),_mem4(ai_tiMv_l0+(ai_iB_stride_2)+6)),_pack2(_mem4(ai_tiMv_l0+(ai_iB_stride_2)+5),_mem4(ai_tiMv_l0+(ai_iB_stride_2)+4)));

205 
	`_mem8
((*)
ai_tiMv_ÿche_l1
+28)=
	`_™Şl
(
	`_·ck2
(
	`_mem4
(
ai_tiMv_l1
+(
ai_iB_¡ride_2
)+3),_mem4(ai_tiMv_l1+(ai_iB_stride_2)+2)),_pack2(_mem4(ai_tiMv_l1+(ai_iB_stride_2)+1),_mem4(ai_tiMv_l1+(ai_iB_stride_2))));

206 
	`_mem8
((*)
ai_tiMv_ÿche_l1
+30)=
	`_™Şl
(
	`_·ck2
(
	`_mem4
(
ai_tiMv_l1
+(
ai_iB_¡ride_2
)+7),_mem4(ai_tiMv_l1+(ai_iB_stride_2)+6)),_pack2(_mem4(ai_tiMv_l1+(ai_iB_stride_2)+5),_mem4(ai_tiMv_l1+(ai_iB_stride_2)+4)));

209 
	`_mem8
((*)
ai_tiMv_ÿche_l0
+36)=
	`_™Şl
(
	`_·ck2
(
	`_mem4
(
ai_tiMv_l0
+(
ai_iB_¡ride_3
)+3),_mem4(ai_tiMv_l0+(ai_iB_stride_3)+2)),_pack2(_mem4(ai_tiMv_l0+(ai_iB_stride_3)+1),_mem4(ai_tiMv_l0+(ai_iB_stride_3))));

210 
	`_mem8
((*)
ai_tiMv_ÿche_l0
+38)=
	`_™Şl
(
	`_·ck2
(
	`_mem4
(
ai_tiMv_l0
+(
ai_iB_¡ride_3
)+7),_mem4(ai_tiMv_l0+(ai_iB_stride_3)+6)),_pack2(_mem4(ai_tiMv_l0+(ai_iB_stride_3)+5),_mem4(ai_tiMv_l0+(ai_iB_stride_3)+4)));

212 
	`_mem8
((*)
ai_tiMv_ÿche_l1
+36)=
	`_™Şl
(
	`_·ck2
(
	`_mem4
(
ai_tiMv_l1
+(
ai_iB_¡ride_3
)+3),_mem4(ai_tiMv_l1+(ai_iB_stride_3)+2)),_pack2(_mem4(ai_tiMv_l1+(ai_iB_stride_3)+1),_mem4(ai_tiMv_l1+(ai_iB_stride_3))));

213 
	`_mem8
((*)
ai_tiMv_ÿche_l1
+38)=
	`_™Şl
(
	`_·ck2
(
	`_mem4
(
ai_tiMv_l1
+(
ai_iB_¡ride_3
)+7),_mem4(ai_tiMv_l1+(ai_iB_stride_3)+6)),_pack2(_mem4(ai_tiMv_l1+(ai_iB_stride_3)+5),_mem4(ai_tiMv_l1+(ai_iB_stride_3)+4)));

218 if(
tİ_xy
 >= 0) {

223 
	`_mem8
((*)
ai_tiMv_ÿche_l0
+4)=
	`_™Şl
(
	`_·ck2
(
	`_mem4
((&
ai_tiMv_l0
[- 
ai_iB_¡ride
])+3),_mem4((&ai_tiMv_l0[-‡i_iB_stride])+2)),_pack2(_mem4((&ai_tiMv_l0[-‡i_iB_stride])+1),_mem4((&ai_tiMv_l0[-‡i_iB_stride]))));

224 
	`_mem8
((*)
ai_tiMv_ÿche_l0
+6)=
	`_™Şl
(
	`_·ck2
(
	`_mem4
((&
ai_tiMv_l0
[- 
ai_iB_¡ride
])+7),_mem4((&ai_tiMv_l0[-‡i_iB_stride])+6)),_pack2(_mem4((&ai_tiMv_l0[-‡i_iB_stride])+5),_mem4((&ai_tiMv_l0[-‡i_iB_stride])+4)));

225 
	`_mem8
((*)
ai_tiMv_ÿche_l1
+4)=
	`_™Şl
(
	`_·ck2
(
	`_mem4
((&
ai_tiMv_l1
[- 
ai_iB_¡ride
])+3),_mem4((&ai_tiMv_l1[-‡i_iB_stride])+2)),_pack2(_mem4((&ai_tiMv_l1[-‡i_iB_stride])+1),_mem4((&ai_tiMv_l1[-‡i_iB_stride]))));

226 
	`_mem8
((*)
ai_tiMv_ÿche_l1
+6)=
	`_™Şl
(
	`_·ck2
(
	`_mem4
((&
ai_tiMv_l1
[- 
ai_iB_¡ride
])+7),_mem4((&ai_tiMv_l1[-‡i_iB_stride])+6)),_pack2(_mem4((&ai_tiMv_l1[-‡i_iB_stride])+5),_mem4((&ai_tiMv_l1[-‡i_iB_stride])+4)));

227 
	`_mem8
((*)
aio_tiRef_ÿche_l0
+2)=
	`_™Şl
(
	`_·ck2
(
	`_mem4
((&
ai_tiRef_l0
[- 
ai_iB8_¡ride
])+3),_mem4((&ai_tiRef_l0[-‡i_iB8_stride])+2)),_pack2(_mem4((&ai_tiRef_l0[-‡i_iB8_stride])+1),_mem4(&ai_tiRef_l0[-‡i_iB8_stride])));

228 
	`_mem8
((*)
aio_tiRef_ÿche_l1
+2)=
	`_™Şl
(
	`_·ck2
(
	`_mem4
((&
ai_tiRef_l1
[- 
ai_iB8_¡ride
])+3),_mem4((&ai_tiRef_l1[-‡i_iB8_stride])+2)),_pack2(_mem4((&ai_tiRef_l1[-‡i_iB8_stride])+1),_mem4((&ai_tiRef_l1[-‡i_iB8_stride]))));

237 
	`_mem8
((*)
aio_tiRef_ÿche_l0
+4)=0xFFFEFFFEFFFEFFFE;

238 
	`_mem8
((*)
aio_tiRef_ÿche_l1
+4)=0xFFFEFFFEFFFEFFFE;

242 if(
Ëá_xy
 >= 0)

245 
	`_mem4
(
ai_tiMv_ÿche_l0
+11)=
	`_·ck2
(_mem4(&
ai_tiMv_l0
[-2]+1),_mem4(&ai_tiMv_l0[-2]));

246 
	`_mem4
(
ai_tiMv_ÿche_l0
+19)=
	`_·ck2
(_mem4(&
ai_tiMv_l0
[-2]+
ai_iB_¡ride
+1),_mem4(&ai_tiMv_l0[-2]+ai_iB_stride));

247 
	`_mem4
(
ai_tiMv_ÿche_l0
+27)=
	`_·ck2
(_mem4(&
ai_tiMv_l0
[-2]+(
ai_iB_¡ride_2
)+1),_mem4(&ai_tiMv_l0[-2]+(ai_iB_stride_2)));

248 
	`_mem4
(
ai_tiMv_ÿche_l0
+35)=
	`_·ck2
(_mem4(&
ai_tiMv_l0
[-2]+(
ai_iB_¡ride_3
)+1),_mem4(&ai_tiMv_l0[-2]+(ai_iB_stride_3)));

251 
	`_mem4
(
ai_tiMv_ÿche_l1
+11)=
	`_·ck2
(_mem4(&
ai_tiMv_l1
[-2]+1),_mem4(&ai_tiMv_l1[-2]));

252 
	`_mem4
(
ai_tiMv_ÿche_l1
+19)=
	`_·ck2
(_mem4(&
ai_tiMv_l1
[-2]+
ai_iB_¡ride
+1),_mem4(&ai_tiMv_l1[-2]+ai_iB_stride));

253 
	`_mem4
(
ai_tiMv_ÿche_l1
+27)=
	`_·ck2
(_mem4(&
ai_tiMv_l1
[-2]+(
ai_iB_¡ride_2
)+1),_mem4(&ai_tiMv_l1[-2]+(ai_iB_stride_2)));

254 
	`_mem4
(
ai_tiMv_ÿche_l1
+35)=
	`_·ck2
(_mem4(&
ai_tiMv_l1
[-2]+(
ai_iB_¡ride_3
)+1),_mem4(&ai_tiMv_l1[-2]+(ai_iB_stride_3)));

257 
aio_tiRef_ÿche_l0
[11] = (è
ai_tiRef_l0
[-1];

258 
aio_tiRef_ÿche_l0
[19] = (è
ai_tiRef_l0
[-1 + 
ai_iB8_¡ride
];

259 
aio_tiRef_ÿche_l0
[27] = (è
ai_tiRef_l0
[-1 + 
ai_iB8_¡ride_2
];

260 
aio_tiRef_ÿche_l0
[35] = (è
ai_tiRef_l0
[-1 + 
ai_iB8_¡ride_3
];

262 
aio_tiRef_ÿche_l1
[11] = (è
ai_tiRef_l1
[-1];

263 
aio_tiRef_ÿche_l1
[19] = (è
ai_tiRef_l1
[-1 + 
ai_iB8_¡ride
];

264 
aio_tiRef_ÿche_l1
[27] = (è
ai_tiRef_l1
[-1 + 
ai_iB8_¡ride_2
];

265 
aio_tiRef_ÿche_l1
[35] = (è
ai_tiRef_l1
[-1 + 
ai_iB8_¡ride_3
];

272 
aio_tiRef_ÿche_l0
[12 - 1 + 16] =

273 
aio_tiRef_ÿche_l0
[12 - 1 + 24] =

274 
aio_tiRef_ÿche_l0
[12 - 1] =

275 
aio_tiRef_ÿche_l0
[12 - 1 + 8] = 
PART_NOT_AVAILABLE
;

278 
aio_tiRef_ÿche_l1
[12 - 1 + 16] =

279 
aio_tiRef_ÿche_l1
[12 - 1 + 24] =

280 
aio_tiRef_ÿche_l1
[12 - 1] =

281 
aio_tiRef_ÿche_l1
[12 - 1 + 8] = 
PART_NOT_AVAILABLE
;

286 if(
tİËá_xy
 >= 0)

289 
	`_mem4
(
ai_tiMv_ÿche_l0
+3)=
	`_·ck2
(_mem4(&
ai_tiMv_l0
[-2 - 
ai_iB_¡ride
]),_mem4(&ai_tiMv_l0[-1 -‡i_iB_stride]));

291 
	`_mem4
(
ai_tiMv_ÿche_l1
+3)=
	`_·ck2
(_mem4(&
ai_tiMv_l1
[-2 - 
ai_iB_¡ride
]),_mem4(&ai_tiMv_l1[-1 -‡i_iB_stride]));

293 
aio_tiRef_ÿche_l0
[12 - 1 - 8] = (è
ai_tiRef_l0
[-1 - 
ai_iB8_¡ride
];

294 
aio_tiRef_ÿche_l1
[12 - 1 - 8] = (è
ai_tiRef_l1
[-1 - 
ai_iB8_¡ride
];

298 
aio_tiRef_ÿche_l0
[12 - 1 - 8] = 
PART_NOT_AVAILABLE
;

299 
aio_tiRef_ÿche_l1
[12 - 1 - 8] = 
PART_NOT_AVAILABLE
;

304 if(
tİright_xy
 >= 0)

307 
	`_mem4
(
ai_tiMv_ÿche_l0
+8)=
	`_·ck2
(_mem4(&
ai_tiMv_l0
[9 - 
ai_iB_¡ride
]),_mem4(&ai_tiMv_l0[8 -‡i_iB_stride]));

309 
	`_mem4
(
ai_tiMv_ÿche_l1
+8)=
	`_·ck2
(_mem4(&
ai_tiMv_l1
[9 - 
ai_iB_¡ride
]),_mem4(&ai_tiMv_l1[8 -‡i_iB_stride]));

311 
aio_tiRef_ÿche_l0
[12 + 4 - 8] = (è
ai_tiRef_l0
[2 - 
ai_iB8_¡ride
];

312 
aio_tiRef_ÿche_l1
[12 + 4 - 8] = (è
ai_tiRef_l1
[2 - 
ai_iB8_¡ride
];

316 
aio_tiRef_ÿche_l0
[12 + 4 - 8] = 
PART_NOT_AVAILABLE
;

317 
aio_tiRef_ÿche_l1
[12 + 4 - 8] = 
PART_NOT_AVAILABLE
;

319 
	}
}

	@lib_svc/WriteBackSVC.h

38 #iâdeà
SVC_WRITE_BACK_H


39 
	#SVC_WRITE_BACK_H


	)

41 
	~"wr™e_back.h
"

44 #ifdeà
TI_OPTIM


45 
	#wr™e_back_fuÎ_»f
 
wr™e_back_fuÎ_»f_TI


	)

46 
	#wr™e_back_P_sk_mÙiÚ_fuÎ_»f
 
wr™e_back_P_sk_mÙiÚ_fuÎ_»f_TI


	)

47 
	#wr™e_back_mÙiÚ_ÿche_B_fuÎ_»f
 
wr™e_back_mÙiÚ_ÿche_B_fuÎ_»f_TI


	)

49 
	#wr™e_back_fuÎ_»f
 
wr™e_back_fuÎ_»f_C


	)

50 
	#wr™e_back_P_sk_mÙiÚ_fuÎ_»f
 
wr™e_back_P_sk_mÙiÚ_fuÎ_»f_C


	)

51 
	#wr™e_back_mÙiÚ_ÿche_B_fuÎ_»f
 
wr™e_back_mÙiÚ_ÿche_B_fuÎ_»f_C


	)

54 
wr™e_back_mÙiÚ_ÿche_B_fuÎ_»f
ĞcÚ¡ 
ai_iB_¡ride
, cÚ¡ 
ai_iB8_¡ride
, cÚ¡ 
ai_iMb_xy
,

55 
ai_tiMv_l0
[ ], 
ai_tiMv_l1
[ ], 
ai_tiMv_ÿche_l0
[ ][2],

56 
ai_tiMv_ÿche_l1
[ ][2], 
ai_tiRef_l0
[ ], 
ai_tiRef_l1
[ ],

57 
aio_tiRef_ÿche_l0
[ ], 
aio_tiRef_ÿche_l1
[ ],
mb_¡ride
);

60 #ifdeà
TI_OPTIM


61 
__šlše
 
	$wr™e_back_P_sk_mÙiÚ_fuÎ_»f_TI
ĞcÚ¡ 
ai_iB_¡ride
, cÚ¡ 
ai_iB8_¡ride
 , 
MvdL0
[ ], 
ai_tiMv_ÿche
[2], 
ao_tiRef
[ ])

65 
aux_ai_tiMv_ÿche
;

66 
aux_ai_tiMv_ÿche
=
	`_mem4
(
ai_tiMv_ÿche
);

67 
aux_ai_tiMv_ÿche
=
	`_™Şl
(aux_ai_tiMv_cache,aux_ai_tiMv_cache);

69 
	`_mem8
(
MvdL0
è=
aux_ai_tiMv_ÿche
;

70 
	`_mem8
(
MvdL0
+4)=
aux_ai_tiMv_ÿche
;

72 
MvdL0
 +ğ
ai_iB_¡ride
;

73 
	`_mem8
(
MvdL0
è=
aux_ai_tiMv_ÿche
;

74 
	`_mem8
(
MvdL0
+4)=
aux_ai_tiMv_ÿche
;

77 
MvdL0
 +ğ
ai_iB_¡ride
;

78 
	`_mem8
(
MvdL0
è=
aux_ai_tiMv_ÿche
;

79 
	`_mem8
(
MvdL0
+4)=
aux_ai_tiMv_ÿche
;

82 
MvdL0
 +ğ
ai_iB_¡ride
;

83 
	`_mem8
(
MvdL0
è=
aux_ai_tiMv_ÿche
;

84 
	`_mem8
(
MvdL0
+4)=
aux_ai_tiMv_ÿche
;

86 
	`_mem8
(
ao_tiRef
)=0;

87 
	`_mem8
(
ao_tiRef
+
ai_iB8_¡ride
)=0;

88 
	`_mem8
(
ao_tiRef
+(
ai_iB8_¡ride
<<1))=0;

89 
	`_mem8
(
ao_tiRef
+(
ai_iB8_¡ride
 * 3))=0;

91 
	}
}

93 
__šlše
 
	$wr™e_back_fuÎ_»f_TI
(cÚ¡ 
ai_iB_¡ride
 , cÚ¡ 
ai_iB8_¡ride
, 
ai_tiMv
[ ], 
ai_tiMv_ÿche
[ ][2], *
ai_tiRef
, 
aio_tiRef_ÿche
[ ]){

98 
	`_mem8
(
ai_tiMv_ÿche
+12)=_mem8(
ai_tiMv
);

99 
	`_mem8
(
ai_tiMv_ÿche
+14)=_mem8(
ai_tiMv
+4);

100 
ai_tiMv
 +ğ
ai_iB_¡ride
;

102 
	`_mem8
(
ai_tiMv_ÿche
+20)=_mem8(
ai_tiMv
);

103 
	`_mem8
(
ai_tiMv_ÿche
+22)=_mem8(
ai_tiMv
+4);

104 
ai_tiMv
 +ğ
ai_iB_¡ride
;

106 
	`_mem8
(
ai_tiMv_ÿche
+28)=_mem8(
ai_tiMv
);

107 
	`_mem8
(
ai_tiMv_ÿche
+30)=_mem8(
ai_tiMv
+4);

108 
ai_tiMv
 +ğ
ai_iB_¡ride
;

110 
	`_mem8
(
ai_tiMv_ÿche
+36)=_mem8(
ai_tiMv
);

111 
	`_mem8
(
ai_tiMv_ÿche
+38)=_mem8(
ai_tiMv
+4);

112 
ai_tiMv
 +ğ
ai_iB_¡ride
;

116 
	`_mem8
(
aio_tiRef_ÿche
+12)=_mem8(
ai_tiRef
);

117 
ai_tiRef
 +ğ
ai_iB8_¡ride
;

119 
	`_mem8
(
aio_tiRef_ÿche
+20)=_mem8(
ai_tiRef
);

120 
ai_tiRef
 +ğ
ai_iB8_¡ride
;

122 
	`_mem8
(
aio_tiRef_ÿche
+28)=_mem8(
ai_tiRef
);

123 
ai_tiRef
 +ğ
ai_iB8_¡ride
;

125 
	`_mem8
(
aio_tiRef_ÿche
+36)=_mem8(
ai_tiRef
);

126 
ai_tiRef
 +ğ
ai_iB8_¡ride
;

127 
	}
}

135 
__šlše
 
	$wr™e_back_P_sk_mÙiÚ_fuÎ_»f_C
ĞcÚ¡ 
ai_iB_¡ride
, cÚ¡ 
ai_iB8_¡ride
,

136 *
MvdL0
, *
ai_tiMv_ÿche
, *
ao_tiRef
)

139 
y
;

141 
y
 = 0; y < 4; y++, 
MvdL0
 +ğ
ai_iB_¡ride
 - 7){

142 *(
MvdL0
++èğ
ai_tiMv_ÿche
[0];

143 *(
MvdL0
++èğ
ai_tiMv_ÿche
[1];

144 *(
MvdL0
++èğ
ai_tiMv_ÿche
[0];

145 *(
MvdL0
++èğ
ai_tiMv_ÿche
[1];

146 *(
MvdL0
++èğ
ai_tiMv_ÿche
[0];

147 *(
MvdL0
++èğ
ai_tiMv_ÿche
[1];

148 *(
MvdL0
++èğ
ai_tiMv_ÿche
[0];

149 *(
MvdL0
èğ
ai_tiMv_ÿche
[1];

153 
ao_tiRef
[0] =‡o_tiRef[1] =‡o_tiRef[2] =‡o_tiRef[3] =

154 
ao_tiRef
[
ai_iB8_¡ride
] =‡o_tiRef[1 +‡i_iB8_stride] =

155 
ao_tiRef
[2 + 
ai_iB8_¡ride
] =‡o_tiRef[3 +‡i_iB8_stride] =

156 
ao_tiRef
[2 * 
ai_iB8_¡ride
] =‡o_tiRef[1 + 2 *‡i_iB8_stride] =

157 
ao_tiRef
[2 + 2 * 
ai_iB8_¡ride
] =‡o_tiRef[3 + 2 *‡i_iB8_stride] = 0;

158 
ao_tiRef
[3 * 
ai_iB8_¡ride
] =‡o_tiRef[1 + 3 *‡i_iB8_stride] =

159 
ao_tiRef
[2 + 3 * 
ai_iB8_¡ride
] =‡o_tiRef[3 + 3 *‡i_iB8_stride] = 0;

160 
	}
}

167 
__šlše
 
	$wr™e_back_fuÎ_»f_C
(cÚ¡ 
ai_iB_¡ride
, cÚ¡ 
ai_iB8_¡ride
, *
ai_tiMv
,

168 
ai_tiMv_ÿche
[][2], *
ai_tiRef
, *
aio_tiRef_ÿche
){

172 
y
;

176 
y
 = 0; y < 4; y++, 
ai_tiMv
 +ğ
ai_iB_¡ride
, 
ai_tiRef
 +ğ
ai_iB8_¡ride
){

177 
	`FlMvCacheCu¼Pos™iÚ
(&
ai_tiMv_ÿche
[8 * 
y
], 
ai_tiMv
);

178 
	`FlFuÎRefCacheCu¼Pos™iÚ
(&
aio_tiRef_ÿche
[12 + 8 * 
y
], 
ai_tiRef
);

180 
	}
}

188 
__šlše
 
	$wr™e_back_fuÎ_»f_8x8
(cÚ¡ 
ai_iB_¡ride
, cÚ¡ 
ai_iB8_¡ride
, *
ai_tiMv
,

189 
ai_tiMv_ÿche
[][2], *
ai_tiRef
, *
aio_tiRef_ÿche
){

194 
ai_tiMv_ÿche
[12][0] = 
ai_tiMv
[0];

195 
ai_tiMv_ÿche
[12][1] = 
ai_tiMv
[1];

196 
ai_tiMv_ÿche
[14][0] = 
ai_tiMv
[4];

197 
ai_tiMv_ÿche
[14][1] = 
ai_tiMv
[5];

199 
ai_tiMv_ÿche
[28][0] = 
ai_tiMv
[2 * 
ai_iB_¡ride
];

200 
ai_tiMv_ÿche
[28][1] = 
ai_tiMv
[2 * 
ai_iB_¡ride
 + 1];

201 
ai_tiMv_ÿche
[30][0] = 
ai_tiMv
[2 * 
ai_iB_¡ride
 + 4];

202 
ai_tiMv_ÿche
[30][1] = 
ai_tiMv
[2 * 
ai_iB_¡ride
 + 5];

205 
aio_tiRef_ÿche
[12] = 
ai_tiRef
[0];

206 
aio_tiRef_ÿche
[14 + 0] = 
ai_tiRef
[2];

208 
aio_tiRef_ÿche
[12 + 0 + 16] = 
ai_tiRef
[2 * 
ai_iB8_¡ride
];

209 
aio_tiRef_ÿche
[14 + 0 + 16] = 
ai_tiRef
[2 * 
ai_iB8_¡ride
 + 2];

210 
	}
}

217 
__šlše
 
	$wr™e_back_mÙiÚ_fuÎ_»f
ĞcÚ¡ 
ai_iB_¡ride
, cÚ¡ 
ai_iB8_¡ride
, *
MvdL0
,

218 
ai_tiMv_ÿche
[][2], *
ao_tiRef
, cÚ¡ *
ai_tiRef_ÿche
)

221 
y
;

223 
y
 = 0; y < 4; y++, 
MvdL0
 +ğ
ai_iB_¡ride
, 
ao_tiRef
 +ğ
ai_iB8_¡ride
){

224 
	`FlMvCu¼Pos™iÚ
(
MvdL0
, &
ai_tiMv_ÿche
[8 * 
y
]);

225 
	`FlFuÎRefCu¼Pos™iÚ
(
ao_tiRef
, &
ai_tiRef_ÿche
[12 + 8 * 
y
]);

227 
	}
}

	@lib_svc/blk4x4.h

34 #iâdeà
BLK4X4_H


35 
	#BLK4X4_H


	)

37 
	gPuis§nûBlock16
 [16] = {0, 1, 4, 5, 2, 3, 6, 7, 8, 9, 12, 13, 10, 11, 14, 15};

38 
	gPuis§nûBlock64
[4] = {0, 2, 8, 10};

40 #ifdeà
TI_OPTIM


41 
	#blk4x4_coded
 
blk4x4_coded_TI


	)

42 
	#blk8x8_coded
 
blk8x8_coded_TI


	)

43 
	#Upd©eCÛff16
 
Upd©eCÛff16_TI


	)

44 
	#Upd©eCÛff64
 
Upd©eCÛff64_TI


	)

50 
__šlše
 
	$blk4x4_coded_TI
(*
»sidu
, cÚ¡ 
PicWidthšPix
){

52 ià(
	`_mem8
(
»sidu
))  1;

53 ià(
	`_mem8
(
»sidu
+ 
PicWidthšPix
))  1;

54 ià(
	`_mem8
(
»sidu
+ 
PicWidthšPix
*2))  1;

55 ià(
	`_mem8
(
»sidu
+ 
PicWidthšPix
*3))  1;

58 
	}
}

63 
__šlše
 
	$Upd©eCÛff64_TI
(*
CÛffLev–
){

65 ià(
	`_mem8
(
CÛffLev–
))  1;

66 ià(
	`_mem8
(
CÛffLev–
+4))  1;

67 ià(
	`_mem8
(
CÛffLev–
+8))  1;

68 ià(
	`_mem8
(
CÛffLev–
+12))  1;

70 ià(
	`_mem8
(
CÛffLev–
+16))  1;

71 ià(
	`_mem8
(
CÛffLev–
+20))  1;

72 ià(
	`_mem8
(
CÛffLev–
+24))  1;

73 ià(
	`_mem8
(
CÛffLev–
+28))  1;

75 ià(
	`_mem8
(
CÛffLev–
+32))  1;

76 ià(
	`_mem8
(
CÛffLev–
+36))  1;

77 ià(
	`_mem8
(
CÛffLev–
+40))  1;

78 ià(
	`_mem8
(
CÛffLev–
+44))  1;

80 ià(
	`_mem8
(
CÛffLev–
+48))  1;

81 ià(
	`_mem8
(
CÛffLev–
+52))  1;

82 ià(
	`_mem8
(
CÛffLev–
+56))  1;

83 ià(
	`_mem8
(
CÛffLev–
+60))  1;

87 
	}
}

92 
__šlše
 
	$blk8x8_coded_TI
(*
»sidu
, cÚ¡ 
PicWidthšPix
){

94 ià(
	`_mem8
(
»sidu
))  1;

95 ià(
	`_mem8
(
»sidu
+ 4))  1;

96 ià(
	`_mem8
(
»sidu
+ 
PicWidthšPix
))  1;

97 ià(
	`_mem8
(
»sidu
+ 
PicWidthšPix
+4))  1;

98 ià(
	`_mem8
(
»sidu
+ 
PicWidthšPix
*2))  1;

99 ià(
	`_mem8
(
»sidu
+ 
PicWidthšPix
*2+4))  1;

100 ià(
	`_mem8
(
»sidu
+ 
PicWidthšPix
*3))  1;

101 ià(
	`_mem8
(
»sidu
+ 
PicWidthšPix
*3+4))  1;

104 
	}
}

110 
__šlše
 
	$Upd©eCÛff16_TI
(*
CÛffLev–
){

113 ià(
	`_mem8
(
CÛffLev–
))  1;

114 ià(
	`_mem8
(
CÛffLev–
+4))  1;

115 ià(
	`_mem8
(
CÛffLev–
+8))  1;

116 ià(
	`_mem8
(
CÛffLev–
+12))  1;

119 
	}
}

123 
	#blk4x4_coded
 
blk4x4_coded_C


	)

124 
	#blk8x8_coded
 
blk8x8_coded_C


	)

125 
	#Upd©eCÛff16
 
Upd©eCÛff16_C


	)

126 
	#Upd©eCÛff64
 
Upd©eCÛff64_C


	)

133 
__šlše
 
	$blk4x4_coded_C
(*
»sidu
, cÚ¡ 
PicWidthšPix
){

135 
i
,
j
;

136  
i
 = 0; i < 4; i++){

137  
j
 = 0; j < 4; j++){

138 ià(
»sidu
[
j
 + 
i
 * 
PicWidthšPix
]){

145 
	}
}

150 
__šlše
 
	$blk8x8_coded_C
(*
»sidu
, cÚ¡ 
PicWidthšPix
){

152 
i
,
j
;

153  
i
 = 0; i < 8; i++){

154  
j
 = 0; j < 8; j++){

155 ià(
»sidu
[
j
 + 
i
 * 
PicWidthšPix
]){

162 
	}
}

168 
__šlše
 
	$Upd©eCÛff16_C
(*
CÛffLev–
){

170 
i
;

171  
i
 = 0; i < 16; i++){

172 ifĞ
CÛffLev–
[
i
] != 0){

177 
	}
}

182 
__šlše
 
	$Upd©eCÛff64_C
(*
CÛffLev–
){

184 
i
;

185  
i
 = 0; i < 64; i++){

186 ifĞ
CÛffLev–
[
i
] != 0){

191 
	}
}

199 
__šlše
 
	$upd©e_blk4x4Res
(*
»sidu
, 
RESIDU
 *
Cu¼Residu
, cÚ¡ 
PicWidthšPix
){

202 
i
;

203 if(!
Cu¼Residu
 -> 
T¿nsfÜm8x8
){

204 
i
 = 0 ; i < 16; i++){

205 *
±r
 = &
»sidu
[((
i
 & 0x03è<< 2è+ ((˜>> 2è<< 2è* 
PicWidthšPix
];

206 
Cu¼Residu
 -> 
blk4x4_Res
 +ğ(
	`blk4x4_coded
(
±r
, 
PicWidthšPix
)è<< 
i
;

209 
i
 = 0 ; i < 4; i++){

210 *
±r
 = &
»sidu
[((
i
 & 0x01è<< 3è+ ((˜>> 1è<< 3è* 
PicWidthšPix
];

211 if(
	`blk8x8_coded
(
±r
, 
PicWidthšPix
)){

212 
Cu¼Residu
 -> 
blk4x4_Res
 +ğ(0x33 << 
Puis§nûBlock64
 [
i
]);

216 
	}
}

223 
__šlše
 
	$Upd©eBlk4x4
(
RESIDU
 *
Cu¼Residu
){

225 
i
;

226 
Cu¼Residu
 -> 
blk4x4
 = 0;

227 iàĞ
Cu¼Residu
 -> 
T¿nsfÜm8x8
){

228 
i
 = 0 ; i < 4; i++){

229 ifĞ
	`Upd©eCÛff64
(&
Cu¼Residu
 -> 
LumaLev–
 [
i
 << 6])){

230 
Cu¼Residu
 -> 
blk4x4
 +ğ(0x33 << 
Puis§nûBlock64
 [
i
]);

234 
i
 = 0 ; i < 16; i++){

235 ifĞ
	`Upd©eCÛff16
(&
Cu¼Residu
 -> 
LumaLev–
 [
i
 << 4])){

236 
Cu¼Residu
 -> 
blk4x4
 +ğ1 << 
Puis§nûBlock16
 [
i
];

240 
	}
}

	@lib_svc/cabac_svc.c

36 
	~"ty³.h
"

37 
	~"maš_d©a.h
"

38 
	~"ÿbac.h
"

39 
	~"maüoblock_ÿbac.h
"

40 
	~"mb_ÿbac_·¹iÚnšg.h
"

44 
	~"svc_d©a.h
"

45 
	~"ÿvlc_svc.h
"

46 
	~"ÿbac_svc.h
"

47 
	~"CoÜdÚ©es.h
"

48 
	~"CabacIMaüoblock.h
"

49 
	~"CabacPMaüoblock.h
"

50 
	~"CabacBMaüoblock.h
"

56 
	$CabacG‘Ba£ModeFÏg
Ğ
CABACCÚ‹xt
 *
c
, *
¡©e
, 
RESIDU
 *
Cu¼Residu
, *
SliûTabË
, 
mb_¡ride
) {

59 
AvaMask
 = 
Cu¼Residu
 -> AvailMask;

60 
ùx
 = 2;

62 ifĞ(
AvaMask
 & 0x01è&& 
SliûTabË
[0] =ğSliûTabË[- 1] && 
	`IS_BL
(
Cu¼Residu
 [-1] . 
MbTy³
)){

63 
ùx
--;

66 ifĞ((
AvaMask
 >> 1è& 0x01è&& 
SliûTabË
[0] =ğSliûTabË[- 
mb_¡ride
] && 
	`IS_BL
(
Cu¼Residu
 [- mb_¡ride] . 
MbTy³
)){

67 
ùx
--;

70  (è
	`g‘_ÿbac
Ğ
c
, &
¡©e
[
ùx
] );

71 
	}
}

84 
	$CabacIMaüoblockLay”
(
CABACCÚ‹xt
 *
ÿbac
, *
ÿbac_¡©e
, cÚ¡ 
NAL
 *
N®
, 
SLICE
 *
Sliû
,

85 
RESIDU
 *
TabResidu
, RESIDU *
Ba£Residu
, 
DATA
 *
Tab_Block
, 
CABAC_NEIGH
 *
Neigh
,

86 *
SliûTabË
, 
NÚZ”oCouÁCache
 [], cÚ¡ 
iMb_x
,

87 cÚ¡ 
iMb_y
, 
CÚsIÁ¿P»dFÏg
, 
DùAÎowed
, *
La¡QP
, *
MbQpD–
 )

93 cÚ¡ 
iCu¼MbAddr
 = 
iMb_x
 + 
iMb_y
 * 
Sliû
 -> 
mb_¡ride
;

94 
DATA
 *
Cu¼Block
 = &
Tab_Block
[
iCu¼MbAddr
];

95 
RESIDU
 *
Cu¼’tResidu
 = &
TabResidu
[
iCu¼MbAddr
];

98 
Ba£ModeFÏg
 = 0;

99 
InCrİWšdow
 = 
Cu¼’tResidu
 -> InCropWindow;

101 
Cu¼’tResidu
 -> 
T¿nsfÜm8x8
 = 0;

103 ifĞ
Sliû
 -> 
Ad­tiveBa£ModeFÏg
 && 
InCrİWšdow
) {

104 
Cu¼’tResidu
 -> 
Ba£ModeFÏg
 = Ba£ModeFÏg = 
	`CabacG‘Ba£ModeFÏg
(
ÿbac
, &
ÿbac_¡©e
[460],

105 
Cu¼’tResidu
, &
SliûTabË
[
iCu¼MbAddr
], 
Sliû
 -> 
mb_¡ride
);

106 }ià(
Sliû
 -> 
DeçuÉBa£ModeFÏg
){

107 
Cu¼’tResidu
 -> 
Ba£ModeFÏg
 = BaseModeFlag = 1;

111 if(!
Ba£ModeFÏg
){

112 
mb_ty³
 = 
	`decode_ÿbac_šŒa_mb_ty³
(
ÿbac
, &
ÿbac_¡©e
[3], 
Cu¼’tResidu
, 1, 
Sliû
 -> 
mb_¡ride
);

114 
Cu¼Block
 -> 
MbP¬tP»dMode
 [0] = 
i_mb_ty³_šfo
[
mb_ty³
].
ty³
 ;

115 
Cu¼’tResidu
 -> 
MbTy³
 = 
i_mb_ty³_šfo
[
mb_ty³
].
ty³
 ;

116 
Cu¼’tResidu
 -> 
Cbp
 = 
i_mb_ty³_šfo
[
mb_ty³
] . Cbp;

117 
Cu¼’tResidu
 -> 
IÁ¿16x16P»dMode
 = 
i_mb_ty³_šfo
[
mb_ty³
].
´ed_mode
;

120 
	`G‘Ba£MbAddr
(
N®
, 
Cu¼Block
, 
iMb_x
 << 4, 
iMb_y
 << 4);

123 
Cu¼Block
 -> 
MbP¬tP»dMode
 [0] = 
Cu¼’tResidu
 -> 
MbTy³
 = 
	`G‘Ba£Ty³
(
N®
, 
Ba£Residu
, Cu¼Block, 
iMb_x
, 
iMb_y
);

126  
	`CabacIP¬tiÚnšg
(
ÿbac
, 
ÿbac_¡©e
, 
Sliû
, 
N®
, 
Cu¼’tResidu
, 
Ba£Residu
, 
Tab_Block
, 
Neigh
, 
SliûTabË
,

127 
NÚZ”oCouÁCache
, 
iMb_x
, 
iMb_y
, 
CÚsIÁ¿P»dFÏg
, 
DùAÎowed
, 
La¡QP
, 
MbQpD–
);

128 
	}
}

136 
	$CabacPMaüoblockLay”
(
CABACCÚ‹xt
 *
ÿbac
, *
ÿbac_¡©e
, cÚ¡ 
NAL
 *
N®
, 
SLICE
 *
Sliû
,

137 
RESIDU
 *
TabResidu
, RESIDU *
Ba£Residu
, 
DATA
 *
Tab_Block
, 
CABAC_NEIGH
 *
Neigh
,

138 *
SliûTabË
, 
NÚZ”oCouÁCache
 [], 
mv_ÿche_l0
[][2],

139 *
»f_ÿche_l0
, cÚ¡ 
iMb_x
, cÚ¡ 
iMb_y
,

140 
CÚsIÁ¿P»dFÏg
, 
DùAÎowed
, *
La¡QP
, *
MbQpD–
)

146 cÚ¡ 
iCu¼MbAddr
 = 
iMb_x
 + 
iMb_y
 * 
Sliû
 -> 
mb_¡ride
;

147 
DATA
 *
Cu¼Block
 = &
Tab_Block
[
iCu¼MbAddr
];

148 
RESIDU
 *
Cu¼’tResidu
 = &
TabResidu
[
iCu¼MbAddr
];

151 
Ba£ModeFÏg
 = 0;

152 
InCrİWšdow
 = 
Cu¼’tResidu
 -> InCropWindow;

154 
Cu¼’tResidu
 -> 
T¿nsfÜm8x8
 = 0;

156 ifĞ
Sliû
 -> 
Ad­tiveBa£ModeFÏg
 && 
InCrİWšdow
) {

157 
Cu¼’tResidu
 -> 
Ba£ModeFÏg
 = Ba£ModeFÏg = 
	`CabacG‘Ba£ModeFÏg
(
ÿbac
, &
ÿbac_¡©e
[460],

158 
Cu¼’tResidu
, &
SliûTabË
[
iCu¼MbAddr
], 
Sliû
 -> 
mb_¡ride
);

159 }ià(
Sliû
 -> 
DeçuÉBa£ModeFÏg
){

160 
Cu¼’tResidu
 -> 
Ba£ModeFÏg
 = BaseModeFlag = 1;

164 if(!
Ba£ModeFÏg
){

165 
mb_ty³
 = 
	`decode_ÿbac_mb_ty³
(
ÿbac
, 
ÿbac_¡©e
, 
TabResidu
, 
SliûTabË
, 
iCu¼MbAddr
,

166 
Sliû
 -> 
¦iû_ty³
, Sliû -> 
mb_¡ride
);

167 #ifdeà
ERROR_DETECTION


169 if(
	`E¼ÜsCheckMbTy³
(
mb_ty³
, 5 + 27)){

174 ià(
mb_ty³
 < 5){

175 
Cu¼Block
 -> 
NumMbP¬t
 = 
p_mb_ty³_šfo
[
mb_ty³
] . 
·¹couÁ
 ;

176 
Cu¼Block
 -> 
MbP¬tP»dMode
 [0] = 
p_mb_ty³_šfo
[
mb_ty³
] . 
ty³_0
 ;

177 
Cu¼Block
 -> 
MbP¬tP»dMode
 [1] = 
p_mb_ty³_šfo
[
mb_ty³
] . 
ty³_1
 ;

178 
Cu¼’tResidu
 -> 
MbTy³
 = 
p_mb_ty³_šfo
[
mb_ty³
] . 
Çme
 ;

179 
Cu¼’tResidu
 -> 
Mode
 = 
p_mb_ty³_šfo
[
mb_ty³
] . Mode ;

181 
mb_ty³
 -= 5;

182 
Cu¼Block
 -> 
MbP¬tP»dMode
 [0] = 
i_mb_ty³_šfo
[
mb_ty³
] . 
ty³
 ;

183 
Cu¼’tResidu
 -> 
MbTy³
 = 
i_mb_ty³_šfo
[
mb_ty³
] . 
ty³
 ;

184 
Cu¼’tResidu
 -> 
Cbp
 = 
i_mb_ty³_šfo
[
mb_ty³
] . Cbp;

185 
Cu¼’tResidu
 -> 
IÁ¿16x16P»dMode
 = 
i_mb_ty³_šfo
[
mb_ty³
] . 
´ed_mode
;

188 
	`G‘Ba£MbAddr
(
N®
, 
Cu¼Block
, 
iMb_x
 << 4, 
iMb_y
 << 4);

190 
Cu¼Block
 -> 
MbP¬tP»dMode
 [0] = 
Cu¼’tResidu
 -> 
MbTy³
 = 
	`G‘Ba£Ty³
(
N®
, 
Ba£Residu
, Cu¼Block, 
iMb_x
, 
iMb_y
);

193 ià(
	`IS_I
(
Cu¼’tResidu
 -> 
MbTy³
)){

194  
	`CabacIP¬tiÚnšg
(
ÿbac
, 
ÿbac_¡©e
, 
Sliû
, 
N®
, 
Cu¼’tResidu
, 
Ba£Residu
, 
Tab_Block
, 
Neigh
, 
SliûTabË
,

195 
NÚZ”oCouÁCache
, 
iMb_x
, 
iMb_y
, 
CÚsIÁ¿P»dFÏg
, 
DùAÎowed
, 
La¡QP
, 
MbQpD–
);

197  
	`CabacPP¬tiÚnšg
(
ÿbac
, 
ÿbac_¡©e
, 
Sliû
, 
Cu¼’tResidu
, 
Tab_Block
, 
Neigh
, 
SliûTabË
,

198 
NÚZ”oCouÁCache
, 
mv_ÿche_l0
, 
»f_ÿche_l0
, 
iMb_x
, 
iMb_y
, 
DùAÎowed
, 
La¡QP
, 
MbQpD–
);

200 
	}
}

209 
	$CabacBMaüoblockLay”
(
CABACCÚ‹xt
 *
ÿbac
, *
ÿbac_¡©e
, cÚ¡ 
NAL
 *
N®
, 
SLICE
 *
Sliû
, 
RESIDU
 *
TabResidu
,

210 
RESIDU
 *
Ba£Residu
, 
DATA
 *
Tab_Block
, 
CABAC_NEIGH
 *
Neigh
, *
SliûTabË
, 
NÚZ”oCouÁCache
 [],

211 
mv_ÿche_l0
[][2], *
»f_ÿche_l0
, 
mv_ÿche_l1
[][2], *
»f_ÿche_l1
, cÚ¡ 
iMb_x
,

212 cÚ¡ 
iMb_y
, 
CÚsIÁ¿P»dFÏg
, 
DùAÎowed
, 
Dœeù8x8InãrFÏg
, *
La¡QP
, *
MbQpD–
)

218 cÚ¡ 
iCu¼MbAddr
 = 
iMb_x
 + 
iMb_y
 * 
Sliû
 -> 
mb_¡ride
;

219 
DATA
 *
Cu¼Block
 = &
Tab_Block
[
iCu¼MbAddr
];

220 
RESIDU
 *
Cu¼’tResidu
 = &
TabResidu
[
iCu¼MbAddr
];

222 
Ba£ModeFÏg
 = 0;

223 
InCrİWšdow
 = 
Cu¼’tResidu
 -> InCropWindow;

225 
Cu¼’tResidu
 -> 
T¿nsfÜm8x8
 = 0;

227 ifĞ
Sliû
 -> 
Ad­tiveBa£ModeFÏg
 && 
InCrİWšdow
) {

228 
Cu¼’tResidu
 -> 
Ba£ModeFÏg
 = Ba£ModeFÏg = 
	`CabacG‘Ba£ModeFÏg
(
ÿbac
, &
ÿbac_¡©e
[460], Cu¼’tResidu, &
SliûTabË
[
iCu¼MbAddr
], 
Sliû
 -> 
mb_¡ride
);

229 }ià(
Sliû
 -> 
DeçuÉBa£ModeFÏg
){

230 
Cu¼’tResidu
 -> 
Ba£ModeFÏg
 = BaseModeFlag = 1;

234 if(!
Ba£ModeFÏg
){

235 
mb_ty³
 = 
	`decode_ÿbac_mb_ty³
(
ÿbac
, 
ÿbac_¡©e
, 
Cu¼’tResidu
, 
SliûTabË
, 
iCu¼MbAddr
, 
Sliû
 -> 
¦iû_ty³
, Sliû -> 
mb_¡ride
);

236 #ifdeà
ERROR_DETECTION


238 if(
	`E¼ÜsCheckMbTy³
(
mb_ty³
, 23 + 27)){

242 ià(
mb_ty³
 < 23){

243 
Cu¼Block
 -> 
NumMbP¬t
 = 
b_mb_ty³_šfo
[
mb_ty³
] . 
·¹couÁ
;

244 
Cu¼Block
 -> 
MbP¬tP»dMode
 [0] = 
b_mb_ty³_šfo
[
mb_ty³
] . 
ty³_0
;

245 
Cu¼Block
 -> 
MbP¬tP»dMode
 [1] = 
b_mb_ty³_šfo
[
mb_ty³
] . 
ty³_1
;

246 
Cu¼’tResidu
 -> 
MbTy³
 = 
b_mb_ty³_šfo
[
mb_ty³
] . 
Çme
;

247 
Cu¼’tResidu
 -> 
Mode
 = 
b_mb_ty³_šfo
[
mb_ty³
] . Mode;

249 iàĞ
Cu¼’tResidu
 -> 
MbTy³
 =ğ
B_dœeù
){

250 
Cu¼’tResidu
 -> 
Mode
 = 4;

253 
mb_ty³
 -= 23;

254 
Cu¼Block
 -> 
MbP¬tP»dMode
 [0] = 
i_mb_ty³_šfo
[
mb_ty³
] . 
ty³
 ;

255 
Cu¼’tResidu
 -> 
MbTy³
 = 
i_mb_ty³_šfo
[
mb_ty³
] . 
ty³
 ;

256 
Cu¼’tResidu
 -> 
Cbp
 = 
i_mb_ty³_šfo
[
mb_ty³
] . Cbp;

257 
Cu¼’tResidu
 -> 
IÁ¿16x16P»dMode
 = 
i_mb_ty³_šfo
[
mb_ty³
] . 
´ed_mode
;

260 
	`G‘Ba£MbAddr
(
N®
, 
Cu¼Block
, 
iMb_x
 << 4, 
iMb_y
 << 4);

262 
Cu¼Block
 -> 
MbP¬tP»dMode
 [0] = 
Cu¼’tResidu
 -> 
MbTy³
 = 
	`G‘Ba£Ty³
(
N®
, 
Ba£Residu
, Cu¼Block, 
iMb_x
, 
iMb_y
);

265 ià(
	`IS_I
(
Cu¼’tResidu
 -> 
MbTy³
)){

266  
	`CabacIP¬tiÚnšg
(
ÿbac
, 
ÿbac_¡©e
, 
Sliû
, 
N®
, 
Cu¼’tResidu
, 
Ba£Residu
, 
Tab_Block
, 
Neigh
, 
SliûTabË
,

267 
NÚZ”oCouÁCache
, 
iMb_x
, 
iMb_y
, 
CÚsIÁ¿P»dFÏg
, 
DùAÎowed
, 
La¡QP
, 
MbQpD–
);

269  
	`CabacBP¬tiÚnšg
(
ÿbac
, 
ÿbac_¡©e
, 
Sliû
, 
Cu¼’tResidu
, 
Tab_Block
, 
Neigh
, 
SliûTabË
, 
NÚZ”oCouÁCache
,

270 
mv_ÿche_l0
, 
»f_ÿche_l0
, 
mv_ÿche_l1
, 
»f_ÿche_l1
, 
iMb_x
, 
iMb_y
, 
DùAÎowed
, 
Dœeù8x8InãrFÏg
, 
La¡QP
, 
MbQpD–
);

272 
	}
}

	@lib_svc/cabac_svc.h

34 #iâdeà
CABAC_SVC_H


35 
	#CABAC_SVC_H


	)

38 
CabacIMaüoblockLay”
(
CABACCÚ‹xt
 *
ÿbac
, *
ÿbac_¡©e
, cÚ¡ 
NAL
 *
N®
, 
SLICE
 *
Sliû
,

39 
RESIDU
 *
TabResidu
, RESIDU *
Ba£Residu
, 
DATA
 *
Tab_Block
, 
CABAC_NEIGH
 *
Neigh
,

40 *
SliûTabË
, 
NÚZ”oCouÁCache
 [], cÚ¡ 
iMb_x
,

41 cÚ¡ 
iMb_y
, 
CÚsIÁ¿P»dFÏg
, 
DùAÎowed
, *
La¡QP
, *
MbQpD–
 );

44 
CabacPMaüoblockLay”
(
CABACCÚ‹xt
 *
ÿbac
, *
ÿbac_¡©e
, cÚ¡ 
NAL
 *
N®
, 
SLICE
 *
Sliû
,

45 
RESIDU
 *
TabResidu
, RESIDU *
Ba£Residu
, 
DATA
 *
Tab_Block
, 
CABAC_NEIGH
 *
Neigh
,

46 *
SliûTabË
, 
NÚZ”oCouÁCache
 [], 
mv_ÿche_l0
[][2],

47 *
»f_ÿche_l0
, cÚ¡ 
iMb_x
 , cÚ¡ 
iMb_y
,

48 
CÚsIÁ¿P»dFÏg
, 
DùAÎowed
, *
La¡QP
, *
MbQpD–
);

50 
CabacBMaüoblockLay”
(
CABACCÚ‹xt
 *
ÿbac
, *
ÿbac_¡©e
, cÚ¡ 
NAL
 *
N®
, 
SLICE
 *
Sliû
, 
RESIDU
 *
TabResidu
,

51 
RESIDU
 *
Ba£Residu
, 
DATA
 *
Tab_Block
, 
CABAC_NEIGH
 *
Neigh
, *
SliûTabË
, 
NÚZ”oCouÁCache
 [],

52 
mv_ÿche_l0
[][2], *
»f_ÿche_l0
, 
mv_ÿche_l1
[][2], *
»f_ÿche_l1
, cÚ¡ 
iMb_x
,

53 cÚ¡ 
iMb_y
, 
CÚsIÁ¿P»dFÏg
, 
DùAÎowed
, 
Dœeù8x8InãrFÏg
, *
La¡QP
, *
MbQpD–
);

59 
__šlše
 
	$CabacG‘ResP»dFÏg
(
CABACCÚ‹xt
 *
ÿbac
, *
ÿbac_¡©e
, 
IsBl
){

61  (è
	`g‘_ÿbac
Ğ
ÿbac
, &
ÿbac_¡©e
[465 + !
IsBl
]);

62 
	}
}

	@lib_svc/cavlc_svc.c

34 
	~"ty³.h
"

35 
	~"d©a.h
"

36 
	~"ÿvlc.h
"

37 
	~"mb_´ed.h
"

38 
	~"E¼ÜsD‘eùiÚ.h
"

39 
	~"maüoblock_·¹™iÚnšg.h
"

43 
	~"svc_d©a.h
"

44 
	~"ÿvlc_svc.h
"

45 
	~"CoÜdÚ©es.h
"

49 cÚ¡ 
	gsub_mb_ty³_Çme
[2][13]={{
P»d_L0
 , P»d_L0, P»d_L0, P»d_L0, P»d_L0, 
NA
, NA, NA, NA, NA, NA, NA, NA}, {
B_dœeù
, P»d_L0, 
P»d_L1
, 
B_Bi
 , Pred_L0, Pred_L0, Pred_L1, Pred_L1, B_Bi, B_Bi, Pred_L0, Pred_L1, B_Bi}};

50 cÚ¡ 
	gsub_num_·¹
[2][13]={{1, 2, 2, 4, 0, 0, 0, 0, 0, 0, 0, 0, 0}, {4, 1, 1, 1, 2, 2, 2, 2, 2, 2, 4, 4, 4}};

62 
	$sub_mb_´ed_svc
 ( cÚ¡ *
ai_pcD©a
, *
pos™iÚ
, cÚ¡ 
SLICE
 *
ai_p¡Sliû
,

63 
DATA
 *
aio_p¡Maüoblock
, 
RESIDU
 *
Cu¼’t_»sidu
)

65 
mbP¬tIdx
 ;

66 
subMbP¬tIdx
 ;

70 
	`G‘CavlcSubMbTy³
(
ai_pcD©a
, 
pos™iÚ
, 
Cu¼’t_»sidu
);

72 #ifdeà
ERROR_DETECTION


74 if(
	`E¼ÜsCheckSubMbTy³
Ğ
Cu¼’t_»sidu
 -> 
SubMbTy³
, 
ai_p¡Sliû
 -> 
¦iû_ty³
? 
MaxBSubMbTy³
:
MaxPSubMbTy³
)){

80 ifĞ
ai_p¡Sliû
 -> 
Ad­tiveMÙiÚP»diùiÚFÏg
 && 
Cu¼’t_»sidu
 -> 
InCrİWšdow
 ) {

81  
mbP¬tIdx
 = 0 ; mbPartIdx < 4 ; mbPartIdx++ ) {

82 ià(
sub_mb_ty³_Çme
[
ai_p¡Sliû
 -> 
¦iû_ty³
][
Cu¼’t_»sidu
 -> 
SubMbTy³
 [
mbP¬tIdx
]] !ğ
P»d_L1
 &&

83 
sub_mb_ty³_Çme
[
ai_p¡Sliû
 -> 
¦iû_ty³
][
Cu¼’t_»sidu
 -> 
SubMbTy³
 [
mbP¬tIdx
]] !ğ
B_dœeù
) {

84 
aio_p¡Maüoblock
 -> 
MÙiÚP»dL0
 [
mbP¬tIdx
] = 
	`g‘Nb™s
(
ai_pcD©a
, 
pos™iÚ
, 1);

89  
mbP¬tIdx
 = 0 ; mbPartIdx < 4 ; mbPartIdx++ ) {

90 iàĞ
sub_mb_ty³_Çme
[
ai_p¡Sliû
 -> 
¦iû_ty³
][
Cu¼’t_»sidu
 -> 
SubMbTy³
 [
mbP¬tIdx
]] !ğ
P»d_L0
 &&

91 
sub_mb_ty³_Çme
[
ai_p¡Sliû
 -> 
¦iû_ty³
][
Cu¼’t_»sidu
 -> 
SubMbTy³
 [
mbP¬tIdx
]] !ğ
B_dœeù
) {

92 
aio_p¡Maüoblock
 -> 
MÙiÚP»dL1
 [
mbP¬tIdx
] = 
	`g‘Nb™s
(
ai_pcD©a
, 
pos™iÚ
, 1);

96 
aio_p¡Maüoblock
 -> 
MÙiÚP»dL0
[0] =‡io_pstMacroblock -> MotionPredL0[1] =

97 
aio_p¡Maüoblock
 -> 
MÙiÚP»dL0
[2] =‡io_pstMacroblock -> MotionPredL0[3] =

98 
aio_p¡Maüoblock
 -> 
MÙiÚP»dL1
[0] =‡io_pstMacroblock -> MotionPredL1[1] =

99 
aio_p¡Maüoblock
 -> 
MÙiÚP»dL1
[2] =‡io_p¡Maüoblock -> MÙiÚP»dL1[3] = 
ai_p¡Sliû
 -> 
DeçuÉMÙiÚP»diùiÚFÏg
;

103 ià(
ai_p¡Sliû
 -> 
num_RefIdxL0_aùive_mšus1
 != 0){

104  
mbP¬tIdx
 = 0 ; mbPartIdx < 4 ; mbPartIdx++ ) {

105 ià((
Cu¼’t_»sidu
 -> 
MbTy³
 !ğ
P_8x8»f0
è&& (!
aio_p¡Maüoblock
 -> 
MÙiÚP»dL0
[
mbP¬tIdx
]) &&

106 (
sub_mb_ty³_Çme
[
ai_p¡Sliû
 -> 
¦iû_ty³
][
Cu¼’t_»sidu
 -> 
SubMbTy³
 [
mbP¬tIdx
]] !ğ
B_dœeù
) &&

107 (
sub_mb_ty³_Çme
[
ai_p¡Sliû
 -> 
¦iû_ty³
][
Cu¼’t_»sidu
 -> 
SubMbTy³
 [
mbP¬tIdx
]] !ğ
P»d_L1
)) {

108 
aio_p¡Maüoblock
 -> 
RefIdxL0
 [
mbP¬tIdx
] = 
	`»ad_‹
(
ai_pcD©a
, 
pos™iÚ
, 
ai_p¡Sliû
 -> 
num_RefIdxL0_aùive_mšus1
);

112 #ifdeà
ERROR_DETECTION


114 if(
	`E¼ÜsCheckSubRefLx
(
aio_p¡Maüoblock
 -> 
RefIdxL0
, 
ai_p¡Sliû
 -> 
num_RefIdxL0_aùive_mšus1
)){

120 ià(
ai_p¡Sliû
 -> 
num_RefIdxL1_aùive_mšus1
 != 0){

121  
mbP¬tIdx
 = 0 ; mbPartIdx < 4 ; mbPartIdx++ ) {

122 ià((
sub_mb_ty³_Çme
[
ai_p¡Sliû
 -> 
¦iû_ty³
][
Cu¼’t_»sidu
 -> 
SubMbTy³
 [
mbP¬tIdx
]] !ğ
B_dœeù
) &&

123 (
sub_mb_ty³_Çme
[
ai_p¡Sliû
 -> 
¦iû_ty³
][
Cu¼’t_»sidu
 -> 
SubMbTy³
 [
mbP¬tIdx
]] !ğ
P»d_L0
) &&

124 (!
aio_p¡Maüoblock
 -> 
MÙiÚP»dL1
[
mbP¬tIdx
])) {

125 
aio_p¡Maüoblock
 -> 
RefIdxL1
 [
mbP¬tIdx
] = 
	`»ad_‹
(
ai_pcD©a
, 
pos™iÚ
, 
ai_p¡Sliû
 -> 
num_RefIdxL1_aùive_mšus1
);

130 #ifdeà
ERROR_DETECTION


132 if(
	`E¼ÜsCheckSubRefLx
(
aio_p¡Maüoblock
 -> 
RefIdxL1
, 
ai_p¡Sliû
 -> 
num_RefIdxL1_aùive_mšus1
)){

138  
mbP¬tIdx
 = 0 ; mbPartIdx < 4 ; mbPartIdx++ ) {

139 iàĞ
sub_mb_ty³_Çme
[
ai_p¡Sliû
 -> 
¦iû_ty³
][
Cu¼’t_»sidu
 -> 
SubMbTy³
 [
mbP¬tIdx
]] !ğ
B_dœeù


140 && 
sub_mb_ty³_Çme
[
ai_p¡Sliû
 -> 
¦iû_ty³
][
Cu¼’t_»sidu
 -> 
SubMbTy³
 [
mbP¬tIdx
]] !ğ
P»d_L1
 )

142  
subMbP¬tIdx
 = 0 ; subMbP¬tIdx < 
sub_num_·¹
[ 
ai_p¡Sliû
 -> 
¦iû_ty³
][ 
Cu¼’t_»sidu
 -> 
SubMbTy³
 [
mbP¬tIdx
]] ; subMbPartIdx++ ) {

143 
šdex
 = ( 
mbP¬tIdx
 << 2è+ 
subMbP¬tIdx
;

144 
aio_p¡Maüoblock
 -> 
MvdL0
 [
šdex
][0] = 
	`»ad_£
(
ai_pcD©a
, 
pos™iÚ
);

145 
aio_p¡Maüoblock
 -> 
MvdL0
 [
šdex
][1] = 
	`»ad_£
(
ai_pcD©a
, 
pos™iÚ
);

151  
mbP¬tIdx
 = 0 ; mbPartIdx < 4 ; mbPartIdx++ ) {

152 iàĞ
sub_mb_ty³_Çme
[
ai_p¡Sliû
 -> 
¦iû_ty³
][
Cu¼’t_»sidu
 -> 
SubMbTy³
 [
mbP¬tIdx
]] !ğ
B_dœeù


153 && 
sub_mb_ty³_Çme
[
ai_p¡Sliû
 -> 
¦iû_ty³
][
Cu¼’t_»sidu
 -> 
SubMbTy³
 [
mbP¬tIdx
]] !ğ
P»d_L0
 )

155  
subMbP¬tIdx
 = 0 ; subMbP¬tIdx < 
sub_num_·¹
[ 
ai_p¡Sliû
 -> 
¦iû_ty³
][ 
Cu¼’t_»sidu
 -> 
SubMbTy³
 [
mbP¬tIdx
]] ; subMbPartIdx++ )

157 
šdex
 = ( 
mbP¬tIdx
 << 2è+ 
subMbP¬tIdx
;

158 
aio_p¡Maüoblock
 -> 
MvdL1
 [
šdex
][0] = 
	`»ad_£
(
ai_pcD©a
, 
pos™iÚ
);

159 
aio_p¡Maüoblock
 -> 
MvdL1
 [
šdex
][1] = 
	`»ad_£
(
ai_pcD©a
, 
pos™iÚ
);

164 
	}
}

182 
	$mb_´ed_svc
ĞcÚ¡ *
ai_pcD©a
, *
pos™iÚ
, cÚ¡ 
SLICE
 *
ai_p¡Sliû
,

183 
DATA
 *
aio_p¡Maüoblock
, 
RESIDU
 *
Cu¼’t_»sidu
, *
šŒa4x4_´ed_mode_ÿche
)

188 
mbP¬tIdx
 ;

193 if(
	`IS_I
(
aio_p¡Maüoblock
 -> 
MbP¬tP»dMode
 [0])){

194 if(
	`mb_´ed_I
(
ai_pcD©a
, 
pos™iÚ
, 
Cu¼’t_»sidu
, Cu¼’t_»sidu -> 
IÁ¿16x16DCLev–
, 
šŒa4x4_´ed_mode_ÿche
)){

198 iàĞ
aio_p¡Maüoblock
 -> 
MbP¬tP»dMode
 [0] !ğ
B_dœeù
 ) {

199 ifĞ
ai_p¡Sliû
 -> 
Ad­tiveMÙiÚP»diùiÚFÏg
 && 
Cu¼’t_»sidu
 -> 
InCrİWšdow
 ) {

200 if(
	`R—dMÙiÚP»dSVC
(
ai_pcD©a
, 
pos™iÚ
, 
aio_p¡Maüoblock
 -> 
MÙiÚP»dL0
,‡io_p¡Maüoblock, 
P»d_L1
))  1;

201 if(
	`R—dMÙiÚP»dSVC
(
ai_pcD©a
, 
pos™iÚ
, 
aio_p¡Maüoblock
 -> 
MÙiÚP»dL1
,‡io_p¡Maüoblock, 
P»d_L0
))  1;

203 
aio_p¡Maüoblock
 -> 
MÙiÚP»dL0
[0] =‡io_pstMacroblock -> MotionPredL0[1] =

204 
aio_p¡Maüoblock
 -> 
MÙiÚP»dL0
[2] =‡io_pstMacroblock -> MotionPredL0[3] =

205 
aio_p¡Maüoblock
 -> 
MÙiÚP»dL1
[0] =‡io_pstMacroblock -> MotionPredL1[1] =

206 
aio_p¡Maüoblock
 -> 
MÙiÚP»dL1
[2] =‡io_p¡Maüoblock -> MÙiÚP»dL1[3] = 
ai_p¡Sliû
 -> 
DeçuÉMÙiÚP»diùiÚFÏg
;

211 iàĞ
ai_p¡Sliû
 -> 
num_RefIdxL0_aùive_mšus1
 != 0 ){

212  
mbP¬tIdx
 = 0 ; mbP¬tIdx < 
aio_p¡Maüoblock
 -> 
NumMbP¬t
 ; mbPartIdx++ ) {

213 iàĞ(
aio_p¡Maüoblock
 -> 
MbP¬tP»dMode
 [
mbP¬tIdx
] !ğ
P»d_L1
 ) && (!aio_p¡Maüoblock -> 
MÙiÚP»dL0
[mbPartIdx])) {

214 
aio_p¡Maüoblock
 -> 
RefIdxL0
 [
mbP¬tIdx
] = 
	`»ad_‹
(
ai_pcD©a
, 
pos™iÚ
, 
ai_p¡Sliû
 -> 
num_RefIdxL0_aùive_mšus1
);

219 #ifdeà
ERROR_DETECTION


221 if(
	`E¼ÜsCheckRefLx
(
aio_p¡Maüoblock
 -> 
RefIdxL0
, 
ai_p¡Sliû
 -> 
num_RefIdxL0_aùive_mšus1
)){

227 iàĞ
ai_p¡Sliû
 -> 
num_RefIdxL1_aùive_mšus1
 != 0 ){

228  
mbP¬tIdx
 = 0 ; mbP¬tIdx < 
aio_p¡Maüoblock
 -> 
NumMbP¬t
 ; mbPartIdx++ ) {

229 ià((
aio_p¡Maüoblock
 -> 
MbP¬tP»dMode
 [
mbP¬tIdx
] !ğ
P»d_L0
è&& (!aio_p¡Maüoblock -> 
MÙiÚP»dL1
[mbPartIdx])) {

230 
aio_p¡Maüoblock
 -> 
RefIdxL1
 [
mbP¬tIdx
] = 
	`»ad_‹
(
ai_pcD©a
, 
pos™iÚ
, 
ai_p¡Sliû
 -> 
num_RefIdxL1_aùive_mšus1
);

235 #ifdeà
ERROR_DETECTION


237 if(
	`E¼ÜsCheckRefLx
(
aio_p¡Maüoblock
 -> 
RefIdxL1
, 
ai_p¡Sliû
 -> 
num_RefIdxL1_aùive_mšus1
)){

243  
mbP¬tIdx
 = 0 ; mbP¬tIdx < 
aio_p¡Maüoblock
 -> 
NumMbP¬t
 ; mbPartIdx++ ) {

245 iàĞ
aio_p¡Maüoblock
 -> 
MbP¬tP»dMode
 [
mbP¬tIdx
] !ğ
P»d_L1
 ) {

246 
aio_p¡Maüoblock
 -> 
MvdL0
 [
mbP¬tIdx
 << 2][0] = 
	`»ad_£
(
ai_pcD©a
, 
pos™iÚ
);

247 
aio_p¡Maüoblock
 -> 
MvdL0
 [
mbP¬tIdx
 << 2][1] = 
	`»ad_£
(
ai_pcD©a
, 
pos™iÚ
);

252  
mbP¬tIdx
 = 0 ; mbP¬tIdx < 
aio_p¡Maüoblock
 -> 
NumMbP¬t
 ; mbPartIdx++ ) {

253 iàĞ
aio_p¡Maüoblock
 -> 
MbP¬tP»dMode
 [
mbP¬tIdx
] !ğ
P»d_L0
 ) {

254 
aio_p¡Maüoblock
 -> 
MvdL1
 [ 
mbP¬tIdx
 << 2][0] = 
	`»ad_£
(
ai_pcD©a
, 
pos™iÚ
);

255 
aio_p¡Maüoblock
 -> 
MvdL1
 [ 
mbP¬tIdx
 << 2][1] = 
	`»ad_£
(
ai_pcD©a
, 
pos™iÚ
);

259 
Cu¼’t_»sidu
 -> 
Mode
 = 4;

260 
mbP¬tIdx
 = 0; mbPartIdx < 4; mbPartIdx++){

261 
Cu¼’t_»sidu
 -> 
SubMbTy³
 [
mbP¬tIdx
] = 3;

265 
	}
}

273 
	$maüoblock_Ïy”_š_sÿÏbË_ex‹nsiÚ
(cÚ¡ 
NAL
 *
N®
, cÚ¡ 
PPS
 *
Pps
, 
RESIDU
 *
Cu¼’t_»sidu
, RESIDU *
Ba£Residu
,

274 cÚ¡ *
ai_pcD©a
, *
pos™iÚ
, cÚ¡ 
SLICE
 *
ai_p¡Sliû
,

275 
DATA
 *
Tab_Block
, cÚ¡ 
VLC_TABLES
 *
vlc
, *
NÚZ”oCouÁCache
,

276 *
SliûTabË
, cÚ¡ 
iMb_x
, cÚ¡ 
iMb_y
,

277 
dœeù_8x8_šã»nû_æag
, *
Ï¡_QP
)

284 
noSubMbP¬tSizeLessThª8x8
;

285 
Ba£ModeFÏg
 = 0;

286 cÚ¡ 
iCu¼MbAddr
 = 
iMb_x
 + 
iMb_y
 * ()(
ai_p¡Sliû
 -> 
mb_¡ride
);

287 
šŒa4x4_´ed_mode_ÿche
[40];

288 
DATA
 * 
aio_p¡Block
 = &
Tab_Block
[
iCu¼MbAddr
];

291 ifĞ
ai_p¡Sliû
 -> 
Ad­tiveBa£ModeFÏg
 && 
Cu¼’t_»sidu
 -> 
InCrİWšdow
) {

292 
Cu¼’t_»sidu
 -> 
Ba£ModeFÏg
 = Ba£ModeFÏg = 
	`g‘Nb™s
(
ai_pcD©a
, 
pos™iÚ
, 1);

293 }ià(
ai_p¡Sliû
 -> 
DeçuÉBa£ModeFÏg
){

294 
Cu¼’t_»sidu
 -> 
Ba£ModeFÏg
 = BaseModeFlag = 1;

297 if(!
Ba£ModeFÏg
){

298 
mb_ty³
 = 
	`»ad_ue
(
ai_pcD©a
, 
pos™iÚ
);

302  
ai_p¡Sliû
 -> 
¦iû_ty³
 )

304 
EI
 :

305 #ifdeà
ERROR_DETECTION


307 if(
	`E¼ÜsCheckMbTy³
(
mb_ty³
, 
I_BL
)){

311 
aio_p¡Block
 -> 
MbP¬tP»dMode
 [0] = 
i_mb_ty³_šfo
[
mb_ty³
] . 
ty³
;

312 
Cu¼’t_»sidu
 -> 
MbTy³
 = 
i_mb_ty³_šfo
[
mb_ty³
] . 
ty³
;

313 
Cu¼’t_»sidu
 -> 
Cbp
 = 
i_mb_ty³_šfo
[
mb_ty³
] . Cbp;

314 
Cu¼’t_»sidu
 -> 
IÁ¿16x16P»dMode
 = 
i_mb_ty³_šfo
[
mb_ty³
] . 
´ed_mode
;

316 
EP
 :

317 ià(
mb_ty³
 < 5){

318 #ifdeà
ERROR_DETECTION


320 if(
	`E¼ÜsCheckMbTy³
(
mb_ty³
, 
P_BL
)){

324 
aio_p¡Block
 -> 
NumMbP¬t
 = 
p_mb_ty³_šfo
[
mb_ty³
] . 
·¹couÁ
;

325 
aio_p¡Block
 -> 
MbP¬tP»dMode
 [0] = 
p_mb_ty³_šfo
[
mb_ty³
] . 
ty³_0
;

326 
aio_p¡Block
 -> 
MbP¬tP»dMode
 [1] = 
p_mb_ty³_šfo
[
mb_ty³
] . 
ty³_1
;

327 
Cu¼’t_»sidu
 -> 
MbTy³
 = 
p_mb_ty³_šfo
[
mb_ty³
] . 
Çme
;

328 
Cu¼’t_»sidu
 -> 
Mode
 = 
p_mb_ty³_šfo
[
mb_ty³
] . Mode;

331 
mb_ty³
 -= 5;

332 #ifdeà
ERROR_DETECTION


334 if(
	`E¼ÜsCheckMbTy³
(
mb_ty³
, 
I_BL
)){

338 
aio_p¡Block
 -> 
MbP¬tP»dMode
 [0] = 
i_mb_ty³_šfo
[
mb_ty³
] . 
ty³
;

339 
Cu¼’t_»sidu
 -> 
MbTy³
 = 
i_mb_ty³_šfo
[
mb_ty³
] . 
ty³
;

340 
Cu¼’t_»sidu
 -> 
Cbp
 = 
i_mb_ty³_šfo
[
mb_ty³
] . Cbp;

341 
Cu¼’t_»sidu
 -> 
IÁ¿16x16P»dMode
 = 
i_mb_ty³_šfo
[
mb_ty³
] . 
´ed_mode
;

344 
EB
 :

345 ià(
mb_ty³
 < 23) {

346 #ifdeà
ERROR_DETECTION


348 if(
	`E¼ÜsCheckMbTy³
(
mb_ty³
, 
B_BL
)){

352 
aio_p¡Block
 -> 
NumMbP¬t
 = 
b_mb_ty³_šfo
[
mb_ty³
] . 
·¹couÁ
;

353 
aio_p¡Block
 -> 
MbP¬tP»dMode
 [0] = 
b_mb_ty³_šfo
[
mb_ty³
] . 
ty³_0
;

354 
aio_p¡Block
 -> 
MbP¬tP»dMode
 [1] = 
b_mb_ty³_šfo
[
mb_ty³
] . 
ty³_1
;

355 
Cu¼’t_»sidu
 -> 
MbTy³
 = 
b_mb_ty³_šfo
[
mb_ty³
] . 
Çme
;

356 
Cu¼’t_»sidu
 -> 
Mode
 = 
b_mb_ty³_šfo
[
mb_ty³
] . Mode;

359 
mb_ty³
 -= 23;

360 #ifdeà
ERROR_DETECTION


362 if(
	`E¼ÜsCheckMbTy³
(
mb_ty³
, 
I_BL
)){

366 
aio_p¡Block
 -> 
MbP¬tP»dMode
 [0] = 
i_mb_ty³_šfo
[
mb_ty³
] . 
ty³
;

367 
Cu¼’t_»sidu
 -> 
MbTy³
 = 
i_mb_ty³_šfo
[
mb_ty³
] . 
ty³
;

368 
Cu¼’t_»sidu
 -> 
Cbp
 = 
i_mb_ty³_šfo
[
mb_ty³
] . Cbp;

369 
Cu¼’t_»sidu
 -> 
IÁ¿16x16P»dMode
 = 
i_mb_ty³_šfo
[
mb_ty³
] . 
´ed_mode
;

374 
	`G‘Ba£MbAddr
(
N®
, 
aio_p¡Block
, 
iMb_x
 << 4, 
iMb_y
 << 4);

377 
aio_p¡Block
 -> 
MbP¬tP»dMode
 [0] = 
Cu¼’t_»sidu
 -> 
MbTy³
 = 
	`G‘Ba£Ty³
(
N®
, 
Ba£Residu
,‡io_p¡Block, 
iMb_x
, 
iMb_y
);

382 
Cu¼’t_»sidu
 -> 
SliûNum
 = 
SliûTabË
 [
iCu¼MbAddr
] = 
ai_p¡Sliû
 -> 
¦iû_num
 ;

385 iàĞ!
Ba£ModeFÏg
 && 
Cu¼’t_»sidu
 -> 
MbTy³
 =ğ
INTRA_PCM
 ) {

386  !
	`by‹s_®igÃd
(*
pos™iÚ
) ) {

387 
	`g‘Nb™s
(
ai_pcD©a
, 
pos™iÚ
, 1);

389 
	`P¬£IPCM
(
ai_pcD©a
, 
pos™iÚ
, 
Cu¼’t_»sidu
, 
NÚZ”oCouÁCache
);

393 
	`fl_ÿches_svc
(
ai_p¡Sliû
, 
Cu¼’t_»sidu
, 
Ba£Residu
, 0, 
NÚZ”oCouÁCache
, 
SliûTabË
,

394 
aio_p¡Block
, 
šŒa4x4_´ed_mode_ÿche
, 
iMb_x
, 
iMb_y
, 
Pps
 -> 
cÚ¡¿šed_šŒa_´ed_æag
, 
N®
 -> 
TCÛffP»diùiÚ
);

396 ià(!
Ba£ModeFÏg
){

398 iàĞ!
	`IS_I
(
Cu¼’t_»sidu
 -> 
MbTy³
è&& (
aio_p¡Block
 -> 
NumMbP¬t
 == 4)) {

399 
mbP¬tIdx
;

400 if(
	`sub_mb_´ed_svc
(
ai_pcD©a
, 
pos™iÚ
, 
ai_p¡Sliû
, 
aio_p¡Block
, 
Cu¼’t_»sidu
)){

403 
noSubMbP¬tSizeLessThª8x8
 = 0;

404 iàĞ
dœeù_8x8_šã»nû_æag
 ){

405 
noSubMbP¬tSizeLessThª8x8
 = 1;

407  
mbP¬tIdx
 = 0; mbPartIdx < 4; mbPartIdx ++){

408 iàĞ
sub_mb_ty³_Çme
[
ai_p¡Sliû
 -> 
¦iû_ty³
][
Cu¼’t_»sidu
 -> 
SubMbTy³
[
mbP¬tIdx
]] !ğ
B_dœeù
){

409 iàĞ
sub_num_·¹
[
ai_p¡Sliû
 -> 
¦iû_ty³
][
Cu¼’t_»sidu
 -> 
SubMbTy³
[
mbP¬tIdx
]] > 1 )

410 
noSubMbP¬tSizeLessThª8x8
 = 0;

416 
noSubMbP¬tSizeLessThª8x8
 = 1;

417 iàĞ
Pps
 -> 
ŒªsfÜm_8x8_mode_æag
 && 
Cu¼’t_»sidu
 -> 
MbTy³
 =ğ
INTRA_4x4
 && 
	`g‘Nb™s
(
ai_pcD©a
, 
pos™iÚ
, 1)){

418 
Cu¼’t_»sidu
 -> 
MbTy³
 = Cu¼’t_»sidu -> 
T¿nsfÜm8x8
 = 
aio_p¡Block
 -> T¿nsfÜm8x8 =‡io_p¡Block -> 
MbP¬tP»dMode
[0] = 
INTRA_8x8
;

422 if(
	`mb_´ed_svc
(
ai_pcD©a
, 
pos™iÚ
, 
ai_p¡Sliû
, 
aio_p¡Block
, 
Cu¼’t_»sidu
, 
šŒa4x4_´ed_mode_ÿche
)){

429 ifĞ
ai_p¡Sliû
 -> 
Ad­tiveResidu®P»diùiÚFÏg
 &&‡i_p¡Sliû -> 
¦iû_ty³
 !ğ
EI
 && (
Ba£ModeFÏg
 || ( !
	`IS_I
Ğ
Cu¼’t_»sidu
 -> 
MbTy³
è&& Cu¼’t_»sidu -> 
InCrİWšdow
 ))){

430 
Cu¼’t_»sidu
 -> 
Residu®P»diùiÚFÏg
 = 
	`g‘Nb™s
(
ai_pcD©a
, 
pos™iÚ
, 1);

432 
Cu¼’t_»sidu
 -> 
Residu®P»diùiÚFÏg
 = 
ai_p¡Sliû
 -> 
DeçuÉResidu®P»diùiÚFÏg
;

436 iàĞ
Ba£ModeFÏg
 || 
aio_p¡Block
 -> 
MbP¬tP»dMode
[0] !ğ
INTRA_16x16
){

437 if(
	`»ad_me_svc
(
ai_pcD©a
, 
pos™iÚ
, 
aio_p¡Block
 -> 
MbP¬tP»dMode
[0], 
Cu¼’t_»sidu
, 
iCu¼MbAddr
, 
ai_p¡Sliû
, 
iMb_x
)){

441 iàĞ(
Cu¼’t_»sidu
 -> 
Cbp
 & 15è&& 
Pps
 -> 
ŒªsfÜm_8x8_mode_æag
 && (
Ba£ModeFÏg
 || (!
	`IS_I
(Cu¼’t_»sidu -> 
MbTy³
) &&

442 
noSubMbP¬tSizeLessThª8x8
 && ( 
Cu¼’t_»sidu
 -> 
MbTy³
 =ğ
B_dœeù
 || 
dœeù_8x8_šã»nû_æag
))) &&

443 
	`g‘Nb™s
(
ai_pcD©a
, 
pos™iÚ
, 1)){

444 
Cu¼’t_»sidu
 -> 
T¿nsfÜm8x8
 = 
aio_p¡Block
 -> T¿nsfÜm8x8 = 
INTRA_8x8
;

449 iàĞ
Cu¼’t_»sidu
 -> 
Cbp
 > 0 || (Cu¼’t_»sidu -> 
MbTy³
 =ğ
INTRA_16x16
)) {

450 
mb_qp_d–
 = 
	`»ad_£
(
ai_pcD©a
, 
pos™iÚ
);

452 
	`»sidu®
(
ai_pcD©a
, 
pos™iÚ
, 
Cu¼’t_»sidu
, 
vlc
, 
NÚZ”oCouÁCache
);

455 ià(
Cu¼’t_»sidu
 -> 
Cbp
 =ğ0 && 
NÚZ”oCouÁCache
[0] != 0){

456 
Cu¼’t_»sidu
 -> 
Cbp
 = 15;

459 iàĞ
Cu¼’t_»sidu
 -> 
MbTy³
 =ğ
INTRA_16x16
 && !(Cu¼’t_»sidu -> 
Cbp
 & 15è&& (Cu¼’t_»sidu -> Cb°& 0x30è&& 
NÚZ”oCouÁCache
[0]){

460 
Cu¼’t_»sidu
 -> 
Cbp
 += 15;

463 #ifdeà
TI_OPTIM


464 *
Ï¡_QP
 = 
Cu¼’t_»sidu
 -> 
Qp
 = 
	`divide
(*Ï¡_QP + 
mb_qp_d–
 + 52, 52) >> 8 ;

466 *
Ï¡_QP
 = 
Cu¼’t_»sidu
 -> 
Qp
 = (*Ï¡_QP + 
mb_qp_d–
 + 52) % 52;

470 
NÚZ”oCouÁCache
 [12] = NonZeroCountCache [13] = NonZeroCountCache [14] = NonZeroCountCache [15] =

471 
NÚZ”oCouÁCache
 [20] = NonZeroCountCache [21] = NonZeroCountCache [22] = NonZeroCountCache [23] =

472 
NÚZ”oCouÁCache
 [28] = NonZeroCountCache [29] = NonZeroCountCache [30] = NonZeroCountCache [31] =

473 
NÚZ”oCouÁCache
 [36] = NonZeroCountCache [37] = NonZeroCountCache [38] = NonZeroCountCache [39] =

474 
NÚZ”oCouÁCache
 [ 9] = NonZeroCountCache [10] = NonZeroCountCache [17] = NonZeroCountCache [18] =

475 
NÚZ”oCouÁCache
 [33] = NonZeroCountCache [34] = NonZeroCountCache [41] = NonZeroCountCache [42] = 0;

476 
Cu¼’t_»sidu
 -> 
Qp
 = *
Ï¡_QP
;

480 
	}
}

	@lib_svc/cavlc_svc.h

35 #iâdeà
CAVLC_SVC_H


36 
	#CAVLC_SVC_H


	)

39 
	~"svc_ty³.h
"

40 
	~"E¼ÜsD‘eùiÚ.h
"

41 
	~"fl_ÿches_svc.h
"

44 
sub_mb_´ed_svc
 ( cÚ¡ *
ai_pcD©a
, *
aio_piPos™iÚ
, cÚ¡ 
SLICE
 *
ai_p¡Sliû
,

45 
DATA
 * 
aio_p¡Maüoblock
, 
RESIDU
 *
Cu¼’t_»sidu
);

46 
mb_´ed_svc
ĞcÚ¡ *
ai_pcD©a
, *
aio_piPos™iÚ
, cÚ¡ 
SLICE
 *
ai_p¡Sliû
,

47 
DATA
 *
aio_p¡Maüoblock
, 
RESIDU
 *
Cu¼’t_»sidu
 , * 
šŒa4x4_´ed_mode_ÿche
);

49 
maüoblock_Ïy”_š_sÿÏbË_ex‹nsiÚ
(cÚ¡ 
NAL
 *
N®
, cÚ¡ 
PPS
 *
Pps
, 
RESIDU
 *
Cu¼’t_»sidu
, RESIDU *
Ba£Residu
,

50 cÚ¡ *
ai_pcD©a
, *
pos™iÚ
, cÚ¡ 
SLICE
 *
ai_p¡Sliû
,

51 
DATA
 *
Tab_Block
, cÚ¡ 
VLC_TABLES
 *
vlc
, 
NÚZ”oCouÁCache
 [ ],

52 *
SliûTabË
, cÚ¡ 
ai_iMb_x
 , cÚ¡ 
ai_iMb_y
,

53 
dœeù_8x8_šã»nû_æag
, *
Ï¡_QP
);

56 cÚ¡ 
gŞomb_to_šŒa4x4
 [48];

57 cÚ¡ 
gŞomb_to_š‹r
 [48];

70 
__šlše
 
	$»ad_me_svc
 ( cÚ¡ *
b
, *
pos
, 
mode
, 
RESIDU
 *
Cu¼Residu
, cÚ¡ 
mb_xy
, cÚ¡ 
SLICE
 *
¦iû
, cÚ¡ 
x
)

72 
v®
 = 
	`»ad_ue
(
b
, 
pos
);

74 #ifdeà
ERROR_DETECTION


75 ifĞ
v®
 > 47){

80 ià(
¦iû
 -> 
nÙDeçuÉSÿnIdx
){

81 if(!
v®
){

83 ià((
x
 - 1) >= 0){

84 
Cu¼Residu
 -> 
Cbp
 = CurrResidu[-1] . Cbp;

88 if((
mb_xy
 - 
¦iû
 -> 
mb_¡ride
) >= 0){

89 
Cu¼Residu
 -> 
Cbp
 = Cu¼Residu[- 
¦iû
 -> 
mb_¡ride
] . Cbp;

93 
Cu¼Residu
 -> 
Cbp
 = 0;

95 iàĞ
mode
 < 4) {

97 
Cu¼Residu
 -> 
Cbp
 = 
gŞomb_to_šŒa4x4
 [
v®
 - 1];

101 
Cu¼Residu
 -> 
Cbp
 = 
gŞomb_to_š‹r
 [
v®
 - 1];

103 }iàĞ
mode
 < 4) {

105 
Cu¼Residu
 -> 
Cbp
 = 
gŞomb_to_šŒa4x4
 [
v®
];

109 
Cu¼Residu
 -> 
Cbp
 = 
gŞomb_to_š‹r
 [
v®
];

112 
	}
}

117 
__šlše
 
	$R—dMÙiÚP»dSVC
ĞcÚ¡ *
ai_pcD©a
, *
pos™iÚ
, *
MÙiÚP»Lx
, 
DATA
 *
Maüoblock
, 
P»d_Lx
){

119 
mbP¬tIdx
;

121  
mbP¬tIdx
 = 0 ; mbP¬tIdx < 
Maüoblock
 -> 
NumMbP¬t
 ; mbPartIdx++ ) {

122 ià(
Maüoblock
 -> 
MbP¬tP»dMode
 [
mbP¬tIdx
] !ğ
P»d_Lx
) {

123 
MÙiÚP»Lx
 [
mbP¬tIdx
] = (è
	`g‘Nb™s
(
ai_pcD©a
, 
pos™iÚ
, 1);

126 #ifdeà
ERROR_DETECTION


128 if(
	`E¼ÜsCheckSubRefLx
(
MÙiÚP»Lx
, 1)){

133 
	}
}

	@lib_svc/edge_boundary.h

35 #iâdeà
EDGE_BOUNDARY_H


36 
	#EDGE_BOUNDARY_H


	)

39 
ex‹º®_edge
(cÚ¡ 
mb_ty³
, cÚ¡ 
mbn_ty³
, cÚ¡ 
mb_xy
, cÚ¡ 
mbn_xy
, 
bS
[4],

40 
ProfeIdc
, 
dœ
, 
edge
,
¦iû_ty³
, 
¥©Ÿl_sÿÏb™y
,
RESIDU
 *
»sidu
,

41 
mv_ÿche_l0
[][2], *
»f_ÿche_l0
, 
poc_l0
[],

42 
mv_ÿche_l1
[][2], *
»f_ÿche_l1
, 
poc_l1
[] );

45 
š‹º®_edge
(cÚ¡ 
mb_ty³
, 
bS
[4], 
dœ
, 
edge
, 
¦iû_ty³
, 
¥©Ÿl_sÿÏb™y
,

46 
ProfeIdc
, 
RESIDU
 *
»sidu
, 
mv_ÿche_l0
[][2], *
»f_ÿche_l0
,

47 
poc_l0
[], 
mv_ÿche_l1
[][2], *
»f_ÿche_l1
, 
poc_l1
[]);

49 
IÁ”Ex‹º®Edge
(cÚ¡ 
mb_ty³
, cÚ¡ 
mbn_ty³
, cÚ¡ 
mb_xy
, cÚ¡ 
mbn_xy
, 
bS
[4], 
dœ
,

50 
edge
, 
¥©Ÿl_sÿÏb™y
, 
DeblockšgF‹rIdc
, cÚ¡ 
RESIDU
 *
»sidu
 );

51 
IÁ”IÁ”ÇlEdge
(cÚ¡ 
mb_ty³
, 
bS
[4], 
dœ
, 
edge
, 
¥©Ÿl_sÿÏb™y
, cÚ¡ 
RESIDU
 *
»sidu
);

	@lib_svc/egde_boundary.c

34 
	~"m©h.h
"

38 
	~"symbŞ.h
"

39 
	~"ty³.h
"

40 
	~"Loİ_F‹r_B.h
"

47 
	~"svc_d©a.h
"

48 
	~"edge_bound¬y.h
"

55 
__šlše
 
	$CheckNeighbourBlock
(
dœ
, 
edge
, 
add
, 
block1
, 
block2
, 
bS
[4]){

57 
i
;

58  
i
 = 0; i < 4; i++ ) {

59 
x_pos
 = 
dœ
 =ğ0 ? 
edge
 : 
i
;

60 
y_pos
 = 
dœ
 =ğ0 ? 
i
 : 
edge
;

61 
xn_pos
 = 
dœ
 =ğ0 ? (
x_pos
 + 4 - 1) % 4 : x_pos;

62 
yn_pos
 = 
dœ
 =ğ0 ? 
y_pos
: (y_pos + 4 - 1) % 4;

64 
bS
[
i
] = 
add
;

65 if(((
block1
 & (1 << (
x_pos
 + 4 * 
y_pos
))è!ğ0è|| ((
block2
 & (1 << (
xn_pos
 + 4 * 
yn_pos
))) != 0)) {

66 
bS
[
i
] ++;

69 
	}
}

75 
	$ex‹º®_edge
(cÚ¡ 
mb_ty³
, cÚ¡ 
mbn_ty³
, cÚ¡ 
mb_xy
, cÚ¡ 
mbn_xy
, 
bS
[4],

76 
ProfeIdc
, 
dœ
, 
edge
,
¦iû_ty³
, 
¥©Ÿl_sÿÏb™y
,

77 
RESIDU
 *
»sidu
, 
mv_ÿche_l0
[][2], *
»f_ÿche_l0
, 
poc_l0
[],

78 
mv_ÿche_l1
[][2], *
»f_ÿche_l1
, 
poc_l1
[])

82 
i
;

84 iàĞ
¥©Ÿl_sÿÏb™y
 && ( 
	`IS_I_SVC
(
mb_ty³
è|| IS_I_SVC(
mbn_ty³
))){

86 ifĞ
	`IS_I
(
mb_ty³
è|| IS_I(
mbn_ty³
)){

87 
bS
[0] = bS[1] = bS[2] = bS[3] = 4;

88 }ià(
	`IS_I_SVC
(
mb_ty³
è&& IS_I_SVC(
mbn_ty³
)){

89 
	`CheckNeighbourBlock
(
dœ
, 
edge
, 0, 
»sidu
[
mb_xy
] . 
blk4x4
,„esidu[
mbn_xy
] . blk4x4, 
bS
);

91 
	`CheckNeighbourBlock
(
dœ
, 
edge
, 1, 
»sidu
[
mb_xy
] . 
blk4x4_Res
,„esidu[
mbn_xy
] . blk4x4_Res, 
bS
);

94 ifĞ
	`IS_I_SVC
(
mb_ty³
è|| IS_I_SVC(
mbn_ty³
)){

95 
bS
[0] = bS[1] = bS[2] = bS[3] = 4;

97  
i
 = 0; i < 4; i++ ) {

98 
x_pos
 = 
dœ
 =ğ0 ? 
edge
 : 
i
;

99 
y_pos
 = 
dœ
 =ğ0 ? 
i
 : 
edge
;

100 
xn_pos
 = 
dœ
 =ğ0 ? (
x_pos
 + 4 - 1) % 4 : x_pos;

101 
yn_pos
 = 
dœ
 =ğ0 ? 
y_pos
: (y_pos + 4 - 1) % 4;

102 
BMask
 = (1 << (
x_pos
 + 4 * 
y_pos
));

103 
BnMask
 = (1 << (
xn_pos
 + 4 * 
yn_pos
));

106 if((
ProfeIdc
 =ğ83 && ((
»sidu
[
mb_xy
] . 
blk4x4
 & 
BMask
è|| (»sidu[
mbn_xy
] . blk4x4 & 
BnMask
))è||„esidu[mb_xy] . 
blk4x4_Res
 & BMask ||„esidu[mbn_xy] . blk4x4_Res & BnMask) {

107 
bS
[
i
] = 2;

109 
b_idx
 = 8 + 4 + 
x_pos
 + (
y_pos
 << 3);

110 
bn_idx
 = 
b_idx
 - (
dœ
 ? 8: 1);

111 
bS
[
i
] = 
	`G‘Boud¬ySŒ’ght
(
mv_ÿche_l0
, 
mv_ÿche_l1
, 
»f_ÿche_l0
, 
»f_ÿche_l1
, 
poc_l0
, 
poc_l1
, 
b_idx
, 
bn_idx
, 
¦iû_ty³
, 
mb_ty³
, 
mbn_ty³
);

116 
	}
}

126 
	$š‹º®_edge
(cÚ¡ 
mb_ty³
, 
bS
[4], 
dœ
, 
edge
, 
¦iû_ty³
, 
¥©Ÿl_sÿÏb™y
,

127 
ProfeIdc
, 
RESIDU
 *
»sidu
, 
mv_ÿche_l0
[][2], *
»f_ÿche_l0
,

128 
poc_l0
[], 
mv_ÿche_l1
[][2], *
»f_ÿche_l1
, 
poc_l1
[])

132 
i
;

135 ifĞ
	`IS_I
(
mb_ty³
)){

136 
bS
[0] = bS[1] = bS[2] = bS[3] = 3;

137 }ià(
	`IS_I_SVC
(
mb_ty³
) ){

139 if(
¥©Ÿl_sÿÏb™y
 ){

140 
	`CheckNeighbourBlock
(
dœ
, 
edge
, 0, 
»sidu
 -> 
blk4x4
,„esidu -> blk4x4, 
bS
);

142 
bS
[0] = bS[1] = bS[2] = bS[3] = 3;

146  
i
 = 0; i < 4; i++ ) {

147 
x_pos
 = 
dœ
 =ğ0 ? 
edge
 : 
i
;

148 
y_pos
 = 
dœ
 =ğ0 ? 
i
 : 
edge
;

149 
xn_pos
 = 
dœ
 =ğ0 ? (
x_pos
 + 4 - 1) % 4 : x_pos;

150 
yn_pos
 = 
dœ
 =ğ0 ? 
y_pos
: (y_pos + 4 - 1) % 4;

151 
BMask
 = (1 << (
x_pos
 + 4 * 
y_pos
));

152 
BnMask
 = (1 << (
xn_pos
 + 4 * 
yn_pos
));

154 if((
ProfeIdc
 =ğ83 && ((
»sidu
 -> 
blk4x4
 & 
BMask
è|| (»sidu -> blk4x4 & 
BnMask
))è|| (»sidu -> 
blk4x4_Res
 & BMask) || (residu -> blk4x4_Res & BnMask)) {

155 
bS
[
i
] = 2;

157 
b_idx
 = 8 + 4 + 
x_pos
 + (
y_pos
 << 3);

158 
bn_idx
 = 
b_idx
 - (
dœ
 ? 8:1);

159 
bS
[
i
] = 
	`G‘Boud¬ySŒ’ght
(
mv_ÿche_l0
, 
mv_ÿche_l1
, 
»f_ÿche_l0
, 
»f_ÿche_l1
, 
poc_l0
, 
poc_l1
, 
b_idx
, 
bn_idx
, 
¦iû_ty³
, 
mb_ty³
, mb_type);

163 
	}
}

170 
	$IÁ”Ex‹º®Edge
(cÚ¡ 
mb_ty³
, cÚ¡ 
mbn_ty³
, cÚ¡ 
mb_xy
, cÚ¡ 
mbn_xy
,

171 
bS
[4], 
dœ
, 
edge
, 
¥©Ÿl_sÿÏb™y
,

172 
DeblockšgF‹rIdc
, cÚ¡ 
RESIDU
 *
»sidu
 ){

175 
i
;

177 ià(!
	`IS_I_SVC
(
mbn_ty³
)){

178 
bS
[0] = bS[1] = bS[2] = bS[3] = 0;

180 iàĞ
DeblockšgF‹rIdc
 =ğ1 && (!
	`IS_I_SVC
(
mb_ty³
è|| !IS_I_SVC(
mbn_ty³
))){

181 
bS
[0] = bS[1] = bS[2] = bS[3] = 0;

182 }iàĞ
¥©Ÿl_sÿÏb™y
 && ( 
	`IS_I_SVC
(
mb_ty³
è|| IS_I_SVC(
mbn_ty³
))){

184 ifĞ
	`IS_I
(
mb_ty³
è|| IS_I(
mbn_ty³
)){

185 
bS
[0] = bS[1] = bS[2] = bS[3] = 4;

186 }ià(
	`IS_I_SVC
(
mb_ty³
è&& IS_I_SVC(
mbn_ty³
)){

187 
	`CheckNeighbourBlock
(
dœ
, 
edge
, 0, 
»sidu
[
mb_xy
] . 
blk4x4
,„esidu[
mbn_xy
] . blk4x4, 
bS
);

189 
	`CheckNeighbourBlock
(
dœ
, 
edge
, 1, 
»sidu
[
mb_xy
] . 
blk4x4_Res
,„esidu[
mbn_xy
] . blk4x4_Res, 
bS
);

193 ifĞ
	`IS_I_SVC
(
mb_ty³
è|| IS_I_SVC(
mbn_ty³
)){

194 
bS
[0] = bS[1] = bS[2] = bS[3] = 4;

196  
i
 = 0; i < 4; i++ ) {

197 
x_pos
 = 
dœ
 =ğ0 ? 
edge
 : 
i
;

198 
y_pos
 = 
dœ
 =ğ0 ? 
i
 : 
edge
;

199 
xn_pos
 = 
dœ
 =ğ0 ? (
x_pos
 + 4 - 1) % 4 : x_pos;

200 
yn_pos
 = 
dœ
 =ğ0 ? 
y_pos
: (y_pos + 4 - 1) % 4;

201 
BMask
 = (1 << (
x_pos
 + 4 * 
y_pos
));

202 
BnMask
 = (1 << (
xn_pos
 + 4 * 
yn_pos
));

204 if((
»sidu
[
mb_xy
] . 
blk4x4
 & 
BMask
è|| (»sidu[
mbn_xy
] . blk4x4 & 
BnMask
è|| (»sidu[mb_xy] . 
blk4x4_Res
 & BMask) || (residu[mbn_xy] . blk4x4_Res & BnMask)) {

205 
bS
[
i
] = 2;

207 
bS
[
i
] = 0;

213 
	}
}

222 
	$IÁ”IÁ”ÇlEdge
(cÚ¡ 
mb_ty³
, 
bS
[4], 
dœ
, 
edge
, 
¥©Ÿl_sÿÏb™y
, cÚ¡ 
RESIDU
 *
»sidu
){

225 ifĞ
	`IS_I
(
mb_ty³
)){

226 
bS
[0] = bS[1] = bS[2] = bS[3] = 3;

227 }ià(
	`IS_I_SVC
(
mb_ty³
) ){

229 if(
¥©Ÿl_sÿÏb™y
 ){

230 
	`CheckNeighbourBlock
(
dœ
, 
edge
, 0, 
»sidu
 -> 
blk4x4
,„esidu -> blk4x4, 
bS
);

232 
bS
[0] = bS[1] = bS[2] = bS[3] = 3;

235 
i
;

236  
i
 = 0; i < 4; i++ ) {

237 
x_pos
 = 
dœ
 =ğ0 ? 
edge
 : 
i
;

238 
y_pos
 = 
dœ
 =ğ0 ? 
i
 : 
edge
;

239 
xn_pos
 = 
dœ
 =ğ0 ? (
x_pos
 + 4 - 1) % 4 : x_pos;

240 
yn_pos
 = 
dœ
 =ğ0 ? 
y_pos
: (y_pos + 4 - 1) % 4;

241 
BMask
 = (1 << (
x_pos
 + 4 * 
y_pos
));

242 
BnMask
 = (1 << (
xn_pos
 + 4 * 
yn_pos
));

244 if((
»sidu
 -> 
blk4x4
 & 
BMask
)|| (»sidu -> blk4x4 & 
BnMask
è|| (»sidu -> 
blk4x4_Res
 & BMask) || (residu -> blk4x4_Res & BnMask)) {

245 
bS
[
i
] = 2;

247 
bS
[
i
] = 0;

251 
	}
}

	@lib_svc/fill_caches_svc.h

35 #iâdeà
FILL_H


36 
	#FILL_H


	)

42 
fl_ÿches_svc
 ( cÚ¡ 
SLICE
 *
ai_p¡Sliû
, cÚ¡ 
RESIDU
 *
»sidu
, cÚ¡ RESIDU *
Ba£Residu
, cÚ¡ 
EÁrİyCodšgModeFlog
,

43 
NÚZ”oCouÁCache
 [], cÚ¡ *
SliûTabË
, cÚ¡ 
DATA
 *
Cu¼Block
,

44 
aio_tiIÁ¿4x4_´ed_mode_ÿche
[], cÚ¡ 
ai_iMb_x
 , cÚ¡ 
ai_iMb_y
,

45 cÚ¡ 
ai_iCÚ¡¿šed_šŒa_´ed
, cÚ¡ 
Ëv–_´ediùiÚ_æag
);

47 
fl_ÿches_mÙiÚ_veùÜ_fuÎ_»f
ĞcÚ¡ 
SLICE
 *
ai_p¡Sliû
, cÚ¡ 
ai_iB_¡ride
, cÚ¡ 
ai_iB8_¡ride
,

48 
aio_tiRef_ÿche_l0
 [ ], 
aio_tiMv_ÿche_l0
[ ][2],

49 cÚ¡ *
SliûTabË
, cÚ¡ 
RESIDU
 
Cu¼Residu
 [ ], 
ai_tiMv
[ ],

50 cÚ¡ *
ai_tiRef
, cÚ¡ 
ai_iX
, cÚ¡ 
ai_iY
);

52 
fl_ÿches_fuÎ_»f
ĞcÚ¡ 
SLICE
 *
ai_p¡Sliû
, cÚ¡ 
ai_iB_¡ride
, cÚ¡ 
ai_iB8_¡ride
, 
aio_tiRef_ÿche_l0
 [ ],

53 
aio_tiMv_ÿche_l0
[ ][2], cÚ¡ *
SliûTabË
, cÚ¡ 
RESIDU
 
Cu¼Residu
 [ ],

54 
ai_tiMv
[ ], cÚ¡ *
ai_tiRef
, cÚ¡ 
ai_iX
, cÚ¡ 
ai_iY
);

57 
fl_ÿches_mÙiÚ_veùÜ_B_fuÎ_»f
Ğ
SLICE
 *
¦iû
, 
b_¡ride
, 
b8_¡ride
, 
»f_ÿche_l0
 [], 
»f_ÿche_l1
 [],

58 
mv_ÿche_l0
[][2], 
mv_ÿche_l1
[][2], *
SliûTabË
, cÚ¡ 
RESIDU
 
Cu¼Residu
 [ ],

59 *
mv_l0
, 
mv_l1
[], 
»f_l0
[], 
»f_l1
[], 
iCu¼MbAddr
, 
ai_iX
);

61 
m”geMÙiÚD©a
(*
mb_mode
, 
maüoblock_mode
[4], *
mv_l0
, *
»f_l0
, 
ba£_šdex_l0
[], 
mv_šc
, 
mv_ÿche_l0
[][2]);

70 
	~"symbŞ.h
"

71 
	~<m©h.h
>

72 
	~"svc_ty³.h
"

73 
	~"svc_d©a.h
"

75 
	#ABS_MV
(
X
,
Y
è(
	`abs
(X[0] - Y[0]è+‡bs(X[1] - Y[1]))

	)

84 
__šlše
 
	$£t_maüoblock_mode
(*
mode
, 
maüoblock_mode
[4], 
aui4x4Idx
[16]){

87 
bR1
 = (
maüoblock_mode
[0] =ğmaüoblock_mode[1]è&& (maüoblock_mode[0] =ğ
BLK_8x8
è&& (
aui4x4Idx
[0] ==‡ui4x4Idx[4]);

88 
bR2
 = (
maüoblock_mode
[2] =ğmaüoblock_mode[3]è&& (maüoblock_mode[2] =ğ
BLK_8x8
è&& (
aui4x4Idx
[8] ==‡ui4x4Idx[12]);

89 
bC1
 = (
maüoblock_mode
[0] =ğmaüoblock_mode[2]è&& (maüoblock_mode[0] =ğ
BLK_8x8
è&& (
aui4x4Idx
[0] ==‡ui4x4Idx[8]);

90 
bC2
 = (
maüoblock_mode
[1] =ğmaüoblock_mode[3]è&& (maüoblock_mode[1] =ğ
BLK_8x8
è&& (
aui4x4Idx
[4] ==‡ui4x4Idx[12]);

92 *
mode
 = 
MBLK_16x16
;

94 ifĞ! 
bC1
 || ! 
bC2
 ) {

95 *
mode
 = 
MBLK_16x8
 ;

98 ifĞ! 
bR1
 || ! 
bR2
 ) {

99 *
mode
 = ( *mod=ğ
MBLK_16x16
 ) ? 
MBLK_8x16
 : 
MBLK_8x8
;

101 
	}
}

	@lib_svc/ict_svc.h

35 #iâdeà
ICT_SVC


36 
	#ICT_SVC


	)

38 #ifdeà
TI_OPTIM


39 
	#SVC4x4Add
 
SVC4x4Add_TI


	)

41 
	#SVC4x4Add
 
SVC4x4Add_C


	)

47 
ba£_4x4_chroma
ĞcÚ¡ * 
RESTRICT
 
block
, * RESTRICT 
d¡
,cÚ¡ 
PicWidthInPix
);

49 #ifdeà
TI_OPTIM


50 
__šlše
 
	$SVC4x4Add_TI
 ( * 
RESTRICT
 
block
, *
image
,cÚ¡ 
PicWidthInPix
)

52 
uiTabTmp0
,
uiTabTmp1
,
uiTabTmp2
,
uiTabTmp3
,
uiTabTmp4
,
uiTabTmp5
,
uiTabTmp6
,
uiTabTmp7
;

54 
block
 [0] += 32;

57 
uiB1B0
,
uiB3B2
,
uiZ3Z0
,
uiZ2Z1
,
uiZ0Z1
,
uiZ3Z2
;

58 * 
psBlock
 = 
block
;

61 
uiB1B0
 = 
	`_amem4
(
psBlock
);

62 
psBlock
 += 2;

63 
uiB3B2
 = 
	`_amem4
(
psBlock
);

64 
psBlock
 += 2;

66 
uiZ3Z0
 = 
	`_add2
(
uiB1B0
,
	`_extu
(
uiB3B2
,16,16)+(((()uiB3B2)>>1)&0xffff0000));

67 
uiZ2Z1
 = 
	`_sub2
(
	`_extu
(
uiB1B0
,16,16)+(((()uiB1B0)>>1)&0xffff0000),
uiB3B2
);

68 
uiZ0Z1
 = 
	`_·ck2
(
uiZ3Z0
,
uiZ2Z1
);

69 
uiZ3Z2
 = 
	`_·ckh2
(
uiZ3Z0
,
uiZ2Z1
);

71 
uiTabTmp0
 = 
	`_add2
(
uiZ0Z1
,
uiZ3Z2
);

72 
uiTabTmp0
 = 
	`_·cklh2
(uiTabTmp0,uiTabTmp0);

73 
uiTabTmp1
 = 
	`_sub2
(
uiZ0Z1
,
uiZ3Z2
);

76 
uiB1B0
 = 
	`_amem4
(
psBlock
);

77 
psBlock
 += 2;

78 
uiB3B2
 = 
	`_amem4
(
psBlock
);

79 
psBlock
 += 2;

81 
uiZ3Z0
 = 
	`_add2
(
uiB1B0
,
	`_extu
(
uiB3B2
,16,16)+(((()uiB3B2)>>1)&0xffff0000));

82 
uiZ2Z1
 = 
	`_sub2
(
	`_extu
(
uiB1B0
,16,16)+(((()uiB1B0)>>1)&0xffff0000),
uiB3B2
);

83 
uiZ0Z1
 = 
	`_·ck2
(
uiZ3Z0
,
uiZ2Z1
);

84 
uiZ3Z2
 = 
	`_·ckh2
(
uiZ3Z0
,
uiZ2Z1
);

86 
uiTabTmp2
 = 
	`_add2
(
uiZ0Z1
,
uiZ3Z2
);

87 
uiTabTmp2
 = 
	`_·cklh2
(uiTabTmp2,uiTabTmp2);

88 
uiTabTmp3
 = 
	`_sub2
(
uiZ0Z1
,
uiZ3Z2
);

91 
uiB1B0
 = 
	`_amem4
(
psBlock
);

92 
psBlock
 += 2;

93 
uiB3B2
 = 
	`_amem4
(
psBlock
);

94 
psBlock
 += 2;

96 
uiZ3Z0
 = 
	`_add2
(
uiB1B0
,
	`_extu
(
uiB3B2
,16,16)+(((()uiB3B2)>>1)&0xffff0000));

97 
uiZ2Z1
 = 
	`_sub2
(
	`_extu
(
uiB1B0
,16,16)+(((()uiB1B0)>>1)&0xffff0000),
uiB3B2
);

98 
uiZ0Z1
 = 
	`_·ck2
(
uiZ3Z0
,
uiZ2Z1
);

99 
uiZ3Z2
 = 
	`_·ckh2
(
uiZ3Z0
,
uiZ2Z1
);

101 
uiTabTmp4
 = 
	`_add2
(
uiZ0Z1
,
uiZ3Z2
);

102 
uiTabTmp4
 = 
	`_·cklh2
(uiTabTmp4,uiTabTmp4);

103 
uiTabTmp5
 = 
	`_sub2
(
uiZ0Z1
,
uiZ3Z2
);

106 
uiB1B0
 = 
	`_amem4
(
psBlock
);

107 
psBlock
 += 2;

108 
uiB3B2
 = 
	`_amem4
(
psBlock
);

109 
psBlock
 += 2;

111 
uiZ3Z0
 = 
	`_add2
(
uiB1B0
,
	`_extu
(
uiB3B2
,16,16)+(((()uiB3B2)>>1)&0xffff0000));

112 
uiZ2Z1
 = 
	`_sub2
(
	`_extu
(
uiB1B0
,16,16)+(((()uiB1B0)>>1)&0xffff0000),
uiB3B2
);

113 
uiZ0Z1
 = 
	`_·ck2
(
uiZ3Z0
,
uiZ2Z1
);

114 
uiZ3Z2
 = 
	`_·ckh2
(
uiZ3Z0
,
uiZ2Z1
);

116 
uiTabTmp6
 = 
	`_add2
(
uiZ0Z1
,
uiZ3Z2
);

117 
uiTabTmp6
 = 
	`_·cklh2
(uiTabTmp6,uiTabTmp6);

118 
uiTabTmp7
 = 
	`_sub2
(
uiZ0Z1
,
uiZ3Z2
);

122 
AH
,
AL
,
BH
,
BL2
,
CH
,
CL
,
DH
,
DL
;

124 
šc
 = 
PicWidthInPix
>>1;

125 * 
pImg
 = ((*)&
image
 [0]);

127 
uiZ0Z0
,
uiZ3Z3
,
uiZ1Z1
,
uiZ2Z2
;

128 
ATmp
,
BTmp
,
CTmp
,
DTmp
;

130 
ATmp
 = 
	`_amem4
(
pImg
+1);

131 
BTmp
 = 
	`_amem4
(
pImg
+1+
šc
);

132 
CTmp
 = 
	`_amem4
(
pImg
+1+2*
šc
);

133 
DTmp
 = 
	`_amem4
(
pImg
+1+3*
šc
);

135 
uiZ0Z0
 = 
	`_add2
(
uiTabTmp0
,
uiTabTmp4
);

136 
uiZ3Z3
 = 
	`_add2
(
uiTabTmp2
,
	`_shr2
(
uiTabTmp6
,1));

137 
uiZ1Z1
 = 
	`_sub2
(
uiTabTmp0
,
uiTabTmp4
);

138 
uiZ2Z2
 = 
	`_sub2
(
	`_shr2
(
uiTabTmp2
,1),
uiTabTmp6
);

140 
AL
 = 
	`_shr2
(
	`_add2
(
uiZ0Z0
,
uiZ3Z3
),6);

141 
BL2
 = 
	`_shr2
(
	`_add2
(
uiZ1Z1
,
uiZ2Z2
),6);

142 
CL
 = 
	`_shr2
(
	`_sub2
(
uiZ1Z1
,
uiZ2Z2
),6);

143 
DL
 = 
	`_shr2
(
	`_sub2
(
uiZ0Z0
,
uiZ3Z3
),6);

146 
AL
 = 
	`_add2
(AL,
ATmp
);

147 
BL2
 = 
	`_add2
(BL2,
BTmp
);

148 
CL
 = 
	`_add2
(CL,
CTmp
);

149 
DL
 = 
	`_add2
(DL,
DTmp
);

151 
uiZ0Z0
 = 
	`_add2
(
uiTabTmp1
,
uiTabTmp5
);

152 
uiZ3Z3
 = 
	`_add2
(
uiTabTmp3
,
	`_shr2
(
uiTabTmp7
,1));

153 
uiZ1Z1
 = 
	`_sub2
(
uiTabTmp1
,
uiTabTmp5
);

154 
uiZ2Z2
 = 
	`_sub2
(
	`_shr2
(
uiTabTmp3
,1),
uiTabTmp7
);

156 
AH
 = 
	`_shr2
(
	`_add2
(
uiZ0Z0
,
uiZ3Z3
),6);

157 
BH
 = 
	`_shr2
(
	`_add2
(
uiZ1Z1
,
uiZ2Z2
),6);

158 
CH
 = 
	`_shr2
(
	`_sub2
(
uiZ1Z1
,
uiZ2Z2
),6);

159 
DH
 = 
	`_shr2
(
	`_sub2
(
uiZ0Z0
,
uiZ3Z3
),6);

161 
ATmp
 = 
	`_amem4
(
pImg
);

162 
BTmp
 = 
	`_amem4
(
pImg
+
šc
);

163 
CTmp
 = 
	`_amem4
(
pImg
+2*
šc
);

164 
DTmp
 = 
	`_amem4
(
pImg
+3*
šc
);

167 
AH
 = 
	`_add2
(AH,
ATmp
);

168 
BH
 = 
	`_add2
(BH,
BTmp
);

169 
CH
 = 
	`_add2
(CH,
CTmp
);

170 
DH
 = 
	`_add2
(DH,
DTmp
);

173 
	`_amem4
(
pImg
)=
AL
;

174 
	`_amem4
(
pImg
+1)=
AH
;

175 
	`_amem4
(
pImg
+
šc
)=
BL2
;

176 
	`_amem4
(
pImg
+
šc
+1)=
BH
;

177 
	`_amem4
(
pImg
+2*
šc
)=
CL
;

178 
	`_amem4
(
pImg
+2*
šc
+1)=
CH
;

179 
	`_amem4
(
pImg
+3*
šc
)=
DL
;

180 
	`_amem4
(
pImg
+3*
šc
+1)=
DH
;

182 
	}
}

185 
__šlše
 
	$SVC4x4Add_C
 ( * 
RESTRICT
 
block
, *
image
,cÚ¡ 
PicWidthInPix
)

188 
	`__deş¥ec
(
	`®ign
(16)è
BlockTemp
[16];

190 
i
, 
j
 = 0 ;

192 
block
 [0] += 32;

195  
i
 = 0 ; i < 4 ; i++ ) {

196 cÚ¡ 
z0
 = 
block
 [
j
] + block [2 + j];

197 cÚ¡ 
z1
 = 
block
 [
j
] - block [2 + j];

198 cÚ¡ 
z2
 = (
block
 [1 + 
j
] >> 1) - block [3 + j];

199 cÚ¡ 
z3
 = 
block
 [1 + 
j
] + (block [3 + j] >> 1);

200 
BlockTemp
 [
j
 + 0] = 
z0
 + 
z3
 ;

201 
BlockTemp
 [
j
 + 1] = 
z1
 + 
z2
 ;

202 
BlockTemp
 [
j
 + 2] = 
z1
 - 
z2
 ;

203 
BlockTemp
 [
j
 + 3] = 
z0
 - 
z3
 ;

204 
j
 += 4 ;

207  
i
 = 0 ; i < 4 ; i++ ) {

208 cÚ¡ 
z0
 = 
BlockTemp
 [
i
] + BlockTemp [8 + i];

209 cÚ¡ 
z1
 = 
BlockTemp
 [
i
] - BlockTemp [8 + i];

210 cÚ¡ 
z2
 = (
BlockTemp
 [4 + 
i
] >> 1) - BlockTemp [12 + i];

211 cÚ¡ 
z3
 = 
BlockTemp
 [4 + 
i
] + (BlockTemp [12 + i] >> 1);

212 
image
 [
i
] +ğ((
z0
 + 
z3
) >> 6);

213 
image
 [
PicWidthInPix
 + 
i
] +ğ((
z1
 + 
z2
) >> 6);

214 
image
 [2*
PicWidthInPix
 + 
i
] +ğ((
z1
 - 
z2
) >> 6);

215 
image
 [3*
PicWidthInPix
 + 
i
] +ğ((
z0
 - 
z3
) >> 6);

217 
	}
}

222 
__šlše
 
	$SVC4x4StÜe
 (* 
RESTRICT
 
block
, *
image
,cÚ¡ 
PicWidthInPix
)

224 
	`__deş¥ec
(
	`®ign
(16)è
BlockTemp
[16];

226 
i
, 
j
 = 0 ;

228 
block
 [0] += 32;

231  
i
 = 0 ; i < 4 ; i++ ) {

232 cÚ¡ 
z0
 = 
block
 [
j
] + block [2 + j];

233 cÚ¡ 
z1
 = 
block
 [
j
] - block [2 + j];

234 cÚ¡ 
z2
 = (
block
 [1 + 
j
] >> 1) - block [3 + j];

235 cÚ¡ 
z3
 = 
block
 [1 + 
j
] + (block [3 + j] >> 1);

236 
BlockTemp
 [
j
 + 0] = 
z0
 + 
z3
 ;

237 
BlockTemp
 [
j
 + 1] = 
z1
 + 
z2
 ;

238 
BlockTemp
 [
j
 + 2] = 
z1
 - 
z2
 ;

239 
BlockTemp
 [
j
 + 3] = 
z0
 - 
z3
 ;

240 
j
 += 4 ;

243  
i
 = 0 ; i < 4 ; i++ ) {

244 cÚ¡ 
z0
 = 
BlockTemp
 [
i
] + BlockTemp [8 + i];

245 cÚ¡ 
z1
 = 
BlockTemp
 [
i
] - BlockTemp [8 + i];

246 cÚ¡ 
z2
 = (
BlockTemp
 [4 + 
i
] >> 1) - BlockTemp [12 + i];

247 cÚ¡ 
z3
 = 
BlockTemp
 [4 + 
i
] + (BlockTemp [12 + i] >> 1);

248 
image
 [
i
] = ((
z0
 + 
z3
) >> 6);

249 
image
 [
PicWidthInPix
 + 
i
] = ((
z1
 + 
z2
) >> 6);

250 
image
 [2*
PicWidthInPix
 + 
i
] = ((
z1
 - 
z2
) >> 6);

251 
image
 [3*
PicWidthInPix
 + 
i
] = ((
z0
 - 
z3
) >> 6);

253 
	}
}

259 
__šlše
 
	$SVC8x8Add
(*
block
, *
image
, cÚ¡ 
PicWidthInPix
){

260 
i
,
j
 = 0;

263 
block
[0] += 32;

265  
i
 = 0; i < 8; i++ )

267 cÚ¡ 
a0
 = 
block
[
j
] + block[j + 4];

268 cÚ¡ 
a2
 = 
block
[
j
] - block[j + 4];

269 cÚ¡ 
a4
 = (
block
[
j
 + 2]>>1) - block[j + 6];

270 cÚ¡ 
a6
 = (
block
[
j
 + 6]>>1) + block[j + 2];

272 cÚ¡ 
b0
 = 
a0
 + 
a6
;

273 cÚ¡ 
b2
 = 
a2
 + 
a4
;

274 cÚ¡ 
b4
 = 
a2
 - 
a4
;

275 cÚ¡ 
b6
 = 
a0
 - 
a6
;

277 cÚ¡ 
a1
 = -
block
[
j
 + 3] + block[j + 5] - block[j + 7] - (block[j + 7]>>1);

278 cÚ¡ 
a3
 = 
block
[
j
 + 1] + block[j + 7] - block[j + 3] - (block[j + 3]>>1);

279 cÚ¡ 
a5
 = -
block
[
j
 + 1] + block[j + 7] + block[j + 5] + (block[j + 5]>>1);

280 cÚ¡ 
a7
 = 
block
[
j
 + 3] + block[j + 5] + block[j + 1] + (block[j + 1]>>1);

282 cÚ¡ 
b1
 = (
a7
>>2è+ 
a1
;

283 cÚ¡ 
b3
 = 
a3
 + (
a5
>>2);

284 cÚ¡ 
b5
 = (
a3
>>2è- 
a5
;

285 cÚ¡ 
b7
 = 
a7
 - (
a1
>>2);

287 
block
[
j
 + 0] = 
b0
 + 
b7
;

288 
block
[
j
 + 7] = 
b0
 - 
b7
;

289 
block
[
j
 + 1] = 
b2
 + 
b5
;

290 
block
[
j
 + 6] = 
b2
 - 
b5
;

291 
block
[
j
 + 2] = 
b4
 + 
b3
;

292 
block
[
j
 + 5] = 
b4
 - 
b3
;

293 
block
[
j
 + 3] = 
b6
 + 
b1
;

294 
block
[
j
 + 4] = 
b6
 - 
b1
;

296 
j
 += 8;

300  
i
 = 0; i < 8; i++ )

302 cÚ¡ 
a0
 = 
block
[0 + 
i
] + block[4*8 + i];

303 cÚ¡ 
a2
 = 
block
[0 + 
i
] - block[4*8 + i];

304 cÚ¡ 
a4
 = (
block
[2*8 + 
i
]>>1) - block[6*8 + i];

305 cÚ¡ 
a6
 = (
block
[6*8 + 
i
]>>1) + block[2*8 + i];

307 cÚ¡ 
b0
 = 
a0
 + 
a6
;

308 cÚ¡ 
b2
 = 
a2
 + 
a4
;

309 cÚ¡ 
b4
 = 
a2
 - 
a4
;

310 cÚ¡ 
b6
 = 
a0
 - 
a6
;

312 cÚ¡ 
a1
 = -
block
[3*8 + 
i
] + block[5*8 + i] - block[7*8 + i] - (block[7*8 + i]>>1);

313 cÚ¡ 
a3
 = 
block
[1*8 + 
i
] + block[7*8 + i] - block[3*8 + i] - (block[3*8 + i]>>1);

314 cÚ¡ 
a5
 = -
block
[1*8 + 
i
] + block[7*8 + i] + block[5*8 + i] + (block[5*8 + i]>>1);

315 cÚ¡ 
a7
 = 
block
[3*8 + 
i
] + block[5*8 + i] + block[1*8 + i] + (block[1*8 + i]>>1);

317 cÚ¡ 
b1
 = (
a7
>>2è+ 
a1
;

318 cÚ¡ 
b3
 = 
a3
 + (
a5
>>2);

319 cÚ¡ 
b5
 = (
a3
>>2è- 
a5
;

320 cÚ¡ 
b7
 = 
a7
 - (
a1
>>2);

322 
image
 [
i
] +ğ((
b0
 + 
b7
) >> 6);

323 
image
 [
PicWidthInPix
 + 
i
] +ğ((
b2
 + 
b5
) >> 6);

324 
image
 [(
PicWidthInPix
 << 1è+ 
i
] +ğ((
b4
 + 
b3
) >> 6);

325 
image
 [3 * 
PicWidthInPix
 + 
i
] +ğ((
b6
 + 
b1
) >> 6);

326 
image
 [(
PicWidthInPix
 << 2è+ 
i
] +ğ((
b6
 - 
b1
) >> 6);

327 
image
 [5 * 
PicWidthInPix
 + 
i
] +ğ((
b4
 - 
b3
) >> 6);

328 
image
 [6 * 
PicWidthInPix
 + 
i
] +ğ((
b2
 - 
b5
) >> 6);

329 
image
 [7 * 
PicWidthInPix
 + 
i
] +ğ((
b0
 - 
b7
) >> 6);

331 
	}
}

337 
__šlše
 
	$SVC8x8StÜe
(*
block
, *
image
, cÚ¡ 
PicWidthInPix
){

338 
i
,
j
 = 0;

341 
block
[0] += 32;

343  
i
 = 0; i < 8; i++ )

345 cÚ¡ 
a0
 = 
block
[
j
] + block[j + 4];

346 cÚ¡ 
a2
 = 
block
[
j
] - block[j + 4];

347 cÚ¡ 
a4
 = (
block
[
j
 + 2]>>1) - block[j + 6];

348 cÚ¡ 
a6
 = (
block
[
j
 + 6]>>1) + block[j + 2];

350 cÚ¡ 
b0
 = 
a0
 + 
a6
;

351 cÚ¡ 
b2
 = 
a2
 + 
a4
;

352 cÚ¡ 
b4
 = 
a2
 - 
a4
;

353 cÚ¡ 
b6
 = 
a0
 - 
a6
;

355 cÚ¡ 
a1
 = -
block
[
j
 + 3] + block[j + 5] - block[j + 7] - (block[j + 7]>>1);

356 cÚ¡ 
a3
 = 
block
[
j
 + 1] + block[j + 7] - block[j + 3] - (block[j + 3]>>1);

357 cÚ¡ 
a5
 = -
block
[
j
 + 1] + block[j + 7] + block[j + 5] + (block[j + 5]>>1);

358 cÚ¡ 
a7
 = 
block
[
j
 + 3] + block[j + 5] + block[j + 1] + (block[j + 1]>>1);

360 cÚ¡ 
b1
 = (
a7
>>2è+ 
a1
;

361 cÚ¡ 
b3
 = 
a3
 + (
a5
>>2);

362 cÚ¡ 
b5
 = (
a3
>>2è- 
a5
;

363 cÚ¡ 
b7
 = 
a7
 - (
a1
>>2);

365 
block
[
j
 + 0] = 
b0
 + 
b7
;

366 
block
[
j
 + 7] = 
b0
 - 
b7
;

367 
block
[
j
 + 1] = 
b2
 + 
b5
;

368 
block
[
j
 + 6] = 
b2
 - 
b5
;

369 
block
[
j
 + 2] = 
b4
 + 
b3
;

370 
block
[
j
 + 5] = 
b4
 - 
b3
;

371 
block
[
j
 + 3] = 
b6
 + 
b1
;

372 
block
[
j
 + 4] = 
b6
 - 
b1
;

374 
j
 += 8;

376  
i
 = 0; i < 8; i++ )

378 cÚ¡ 
a0
 = 
block
[0 + 
i
] + block[4*8 + i];

379 cÚ¡ 
a2
 = 
block
[0 + 
i
] - block[4*8 + i];

380 cÚ¡ 
a4
 = (
block
[2*8 + 
i
]>>1) - block[6*8 + i];

381 cÚ¡ 
a6
 = (
block
[6*8 + 
i
]>>1) + block[2*8 + i];

383 cÚ¡ 
b0
 = 
a0
 + 
a6
;

384 cÚ¡ 
b2
 = 
a2
 + 
a4
;

385 cÚ¡ 
b4
 = 
a2
 - 
a4
;

386 cÚ¡ 
b6
 = 
a0
 - 
a6
;

388 cÚ¡ 
a1
 = -
block
[3*8 + 
i
] + block[5*8 + i] - block[7*8 + i] - (block[7*8 + i]>>1);

389 cÚ¡ 
a3
 = 
block
[1*8 + 
i
] + block[7*8 + i] - block[3*8 + i] - (block[3*8 + i]>>1);

390 cÚ¡ 
a5
 = -
block
[1*8 + 
i
] + block[7*8 + i] + block[5*8 + i] + (block[5*8 + i]>>1);

391 cÚ¡ 
a7
 = 
block
[3*8 + 
i
] + block[5*8 + i] + block[1*8 + i] + (block[1*8 + i]>>1);

393 cÚ¡ 
b1
 = (
a7
>>2è+ 
a1
;

394 cÚ¡ 
b3
 = 
a3
 + (
a5
>>2);

395 cÚ¡ 
b5
 = (
a3
>>2è- 
a5
;

396 cÚ¡ 
b7
 = 
a7
 - (
a1
>>2);

398 
image
 [
i
] = ((
b0
 + 
b7
) >> 6);

399 
image
 [
PicWidthInPix
 + 
i
] = ((
b2
 + 
b5
) >> 6);

400 
image
 [(
PicWidthInPix
 << 1è+ 
i
] = ((
b4
 + 
b3
) >> 6);

401 
image
 [3 * 
PicWidthInPix
 + 
i
] = ((
b6
 + 
b1
) >> 6);

402 
image
 [(
PicWidthInPix
 << 2è+ 
i
] = ((
b6
 - 
b1
) >> 6);

403 
image
 [5 * 
PicWidthInPix
 + 
i
] = ((
b4
 - 
b3
) >> 6);

404 
image
 [6 * 
PicWidthInPix
 + 
i
] = ((
b2
 - 
b5
) >> 6);

405 
image
 [7 * 
PicWidthInPix
 + 
i
] = ((
b0
 - 
b7
) >> 6);

407 
	}
}

	@lib_svc/macroblock_filter.c

37 
	~<m©h.h
>

40 
	~"ty³.h
"

41 
	~"d©a.h
"

42 
	~"symbŞ.h
"

43 
	~"edge_f‹r.h
"

44 
	~"Loİ_F‹r_B.h
"

47 
	~"svc_d©a.h
"

48 
	~"edge_bound¬y.h
"

49 
	~"maüoblock_f‹r.h
"

56 
	$Up§m¶šfF‹rMb
Ğ*
image
, *
image_Cb
 , *
image_Cr
, cÚ¡ 
PPS
 *
µs
,

57 
mb_xy
, 
PicWidthInMbs
, cÚ¡ 
ŒªsfÜm_8x8_size
, 
¥©Ÿl_sÿÏbË_æg
,

58 
DeblockšgF‹rIdc
, 
AÍhaOff£t
, 
B‘aOff£t
, cÚ¡ 
x
, cÚ¡ 
y
, cÚ¡ 
RESIDU
 *
»sidu
)

62 
dœ
;

63 
edge
;

65 
qp
, 
qp_mbn_xy
;

66 
mbm_ty³
;

68 cÚ¡ 
tİ_mb_xy
 = 
mb_xy
 - 
PicWidthInMbs
 + 2;

69 
mb_ty³
 = 
»sidu
[
mb_xy
] . 
MbTy³
;

70 
qp_mb_xy
 = 
»sidu
[
mb_xy
] . 
Qp
;

71 
mbm_xy
 = 
mb_xy
 - 1;

73 
bS
[4];

76  
dœ
 = 0; dir < 2; dir++ )

78 
¡¬t
 = 0;

80 ià(
mbm_xy
 >= 0){

81 
mbm_ty³
 = 
»sidu
[
mbm_xy
] . 
MbTy³
;

83 
mbm_ty³
 = 0;

86 ià((!
dœ
 && (
x
 =ğ0)è|| (dœ && 
y
 == 0)){

87 
¡¬t
 = 1;

90 ià(
DeblockšgF‹rIdc
 =ğ2 && 
»sidu
[
mbm_xy
] . 
SliûNum
 !ğ»sidu[
mb_xy
] . SliceNum){

91 
¡¬t
 = 1;

95  
edge
 = 
¡¬t
;ƒdge < 4;ƒdge++ ) {

98 iàĞ
ŒªsfÜm_8x8_size
 && (
edge
 & 1))

102 ià(
edge
 > 0){

105 
mbm_xy
 = 
mb_xy
;

106 
qp
 = 
qp_mbn_xy
 = 
qp_mb_xy
;

107 
	`IÁ”IÁ”ÇlEdge
(
mb_ty³
, 
bS
, 
dœ
, 
edge
, 
¥©Ÿl_sÿÏbË_æg
, &
»sidu
[
mb_xy
]);

109 
qp_mbn_xy
 = 
»sidu
[
mbm_xy
] . 
Qp
;

110 
qp
 = (
qp_mb_xy
 + 
qp_mbn_xy
 + 1) >> 1;

111 
	`IÁ”Ex‹º®Edge
(
mb_ty³
, 
mbm_ty³
, 
mb_xy
, 
mbm_xy
, 
bS
, 
dœ
, 
edge
, 
¥©Ÿl_sÿÏbË_æg
, 
DeblockšgF‹rIdc
, 
»sidu
);

114 if(
bS
[0] + bS[1] + bS[2] + bS[3] == 0)

119 if(!
dœ
){

120 
qPCb
 = (
qP_b
[
qp_mb_xy
 + 
µs
 -> 
chroma_qp_šdex_off£t
] + qP_b[
qp_mbn_xy
 +…ps -> chroma_qp_index_offset] + 1) >> 1;

121 
qPCr
 = (
qP_b
[
qp_mb_xy
 + 
µs
 -> 
£cÚd_chroma_qp_šdex_off£t
] + qP_b[
qp_mbn_xy
 +…ps -> second_chroma_qp_index_offset] + 1) >> 1;

122 
	`HÜizÚlEdgeF‹r
(
DeblockšgF‹rIdc
, 
edge
, 
PicWidthInMbs
, 
qp
, 
qPCb
, 
qPCr
, 
bS
, 
AÍhaOff£t
, 
B‘aOff£t
, 
image
, 
image_Cb
, 
image_Cr
);

124 
qPCb
 = (
qP_b
[
qp_mb_xy
 + 
µs
 -> 
chroma_qp_šdex_off£t
] + qP_b[
qp_mbn_xy
 +…ps -> chroma_qp_index_offset] + 1) >> 1;

125 
qPCr
 = (
qP_b
[
qp_mb_xy
 + 
µs
 -> 
£cÚd_chroma_qp_šdex_off£t
] + qP_b[
qp_mbn_xy
 +…ps -> second_chroma_qp_index_offset] + 1) >> 1;

126 
	`V”tiÿlEdgeF‹r
(
DeblockšgF‹rIdc
, 
edge
, 
PicWidthInMbs
, 
qp
, 
qPCb
, 
qPCr
, 
bS
, 
AÍhaOff£t
, 
B‘aOff£t
, 
image
, 
image_Cb
, 
image_Cr
);

129 
mbm_xy
 = 
tİ_mb_xy
;

131 
	}
}

140 
	$f‹r_mb_svc
Ğ*
image
, *
image_Cb
, *
image_Cr
, 
SLICE
 *
¦iû
, 
PPS
 *
µs
,

141 *
SliûTabË
, 
mv_ÿche_l0
[][2], 
mv_ÿche_l1
[][2], *
»f_ÿche_l0
,

142 *
»f_ÿche_l1
, 
mb_xy
, 
PicWidthInMbs
, *
poc_l0
, *
poc_l1
,

143 cÚ¡ 
x
, cÚ¡ 
y
, 
RESIDU
 *
»sidu
, cÚ¡ 
NAL
 *
N®
, 
Pass
, 
ProfeIdc
)

147 
dœ
;

149 
qp
;

150 
mbm_ty³
;

151 
qp_mbn_xy
;

153 cÚ¡ 
tİ_mb_xy
 = 
mb_xy
 - 
¦iû
 -> 
mb_¡ride
 ;

154 cÚ¡ 
mb_ty³
 = 
»sidu
 [
mb_xy
] . 
MbTy³
;

155 cÚ¡ 
qp_mb_xy
 = 
»sidu
 [
mb_xy
] . 
QpLf
;

156 
mbm_xy
 = 
mb_xy
 - 1;

159  
dœ
 = 0; dir < 2; dir++ ){

160 
edge
;

161 
¡¬t
 = 0;

162 
bS
[4];

164 ià(
mbm_xy
 >= 0){

165 
mbm_ty³
 = 
»sidu
 [
mbm_xy
] . 
MbTy³
;

167 
mbm_ty³
 = 0;

170 ià((!
dœ
 && (
x
 =ğ0)è|| (dœ && 
y
 == 0)){

171 
¡¬t
 = 1;

174 ià((
¦iû
 -> 
di§bË_deblockšg_f‹r_idc
 =ğ2 || sliû -> di§bË_deblockšg_f‹r_idø=ğ5 ) && 
SliûTabË
[
mbm_xy
] !ğSliûTabË[
mb_xy
]){

175 
¡¬t
 = 1;

178 ià((
Pass
 =ğ1è&& 
SliûTabË
[
mbm_xy
] !ğSliûTabË[
mb_xy
]){

179 
¡¬t
 = 1;

183  
edge
 = 
¡¬t
;ƒdge < 4;ƒdge++ ) {

186 iàĞ
»sidu
 [
mb_xy
] . 
T¿nsfÜm8x8
 && (
edge
 & 1))

190 ià(
edge
 > 0){

193 ifĞ
Pass
 == 2){

194 
bS
[0] = bS[1] = bS[2] = bS[3] = 0;

196 
qp
 = 
qp_mbn_xy
 = 
qp_mb_xy
;

197 
	`š‹º®_edge
(
mb_ty³
, 
bS
, 
dœ
, 
edge
, 
¦iû
 -> 
¦iû_ty³
, 
N®
 -> 
S·tŸlSÿÏb™y
, 
ProfeIdc
,

198 &
»sidu
[
mb_xy
], 
mv_ÿche_l0
, 
»f_ÿche_l0
, 
poc_l0
, 
mv_ÿche_l1
, 
»f_ÿche_l1
, 
poc_l1
);

201 ià((
Pass
 =ğ2è&& 
SliûTabË
[
mbm_xy
] =ğSliûTabË[
mb_xy
]){

202 
bS
[0] = bS[1] = bS[2] = bS[3] = 0;

204 
qp_mbn_xy
 = 
»sidu
[
mbm_xy
] . 
QpLf
;

205 
qp
 = (
qp_mb_xy
 + 
qp_mbn_xy
 + 1) >> 1;

206 
	`ex‹º®_edge
(
mb_ty³
, 
mbm_ty³
, 
mb_xy
, 
mbm_xy
, 
bS
, 
ProfeIdc
, 
dœ
, 
edge
, 
¦iû
 -> 
¦iû_ty³
, 
N®
 -> 
S·tŸlSÿÏb™y
,

207 
»sidu
, 
mv_ÿche_l0
, 
»f_ÿche_l0
, 
poc_l0
, 
mv_ÿche_l1
, 
»f_ÿche_l1
, 
poc_l1
);

212 if(
bS
[0] + bS[1] + bS[2] + bS[3] == 0)

216 if(!
dœ
){

217 
qPCb
 = (
qP_b
[
qp_mb_xy
 + 
µs
 -> 
chroma_qp_šdex_off£t
] + qP_b[
qp_mbn_xy
 +…ps -> chroma_qp_index_offset] + 1) >> 1;

218 
qPCr
 = (
qP_b
[
qp_mb_xy
 + 
µs
 -> 
£cÚd_chroma_qp_šdex_off£t
] + qP_b[
qp_mbn_xy
 +…ps -> second_chroma_qp_index_offset] + 1) >> 1;

219 
	`HÜizÚlEdgeF‹r
(
¦iû
 -> 
di§bË_deblockšg_f‹r_idc
, 
edge
, 
PicWidthInMbs
, 
qp
, 
qPCb
, 
qPCr
,

220 
bS
, 
µs
 -> 
AÍhaOff£t
,…p -> 
B‘aOff£t
, 
image
, 
image_Cb
, 
image_Cr
);

222 
qPCb
 = (
qP_b
[
qp_mb_xy
 + 
µs
 -> 
chroma_qp_šdex_off£t
] + qP_b[
qp_mbn_xy
 +…ps -> chroma_qp_index_offset] + 1) >> 1;

223 
qPCr
 = (
qP_b
[
qp_mb_xy
 + 
µs
 -> 
£cÚd_chroma_qp_šdex_off£t
] + qP_b[
qp_mbn_xy
 +…ps -> second_chroma_qp_index_offset] + 1) >> 1;

224 
	`V”tiÿlEdgeF‹r
(
¦iû
 -> 
di§bË_deblockšg_f‹r_idc
, 
edge
, 
PicWidthInMbs
, 
qp
, 
qPCb
, 
qPCr
,

225 
bS
, 
µs
 -> 
AÍhaOff£t
,…p -> 
B‘aOff£t
, 
image
, 
image_Cb
, 
image_Cr
);

228 
mbm_xy
 = 
tİ_mb_xy
;

230 
	}
}

	@lib_svc/macroblock_filter.h

35 #iâdeà
MACRO_FILTER_H


36 
	#MACRO_FILTER_H


	)

39 
	~"svc_ty³.h
"

43 
Up§m¶šfF‹rMb
Ğ*
image
, *
image_Cb
 , *
image_Cr
, cÚ¡ 
PPS
 *
µs
,

44 
mb_xy
, 
PicWidthInMbs
, cÚ¡ 
ŒªsfÜm_8x8_size
 , 
¥©Ÿl_sÿÏbË_æg
,

45 
DeblockšgF‹rIdc
, 
AÍhaOff£t
, 
B‘aOff£t
, cÚ¡ 
x
, cÚ¡ 
y
, cÚ¡ 
RESIDU
 *
»sidu
) ;

50 
f‹r_mb_svc
Ğ*
image
, *
image_Cb
 , *
image_Cr
, 
SLICE
 *
¦iû
, 
PPS
 *
µs
,

51 *
SliûTabË
, 
mv_ÿche_l0
[][2], 
mv_ÿche_l1
[][2], *
»f_ÿche_l0
,

52 *
»f_ÿche_l1
, 
mb_xy
, 
PicWidthInMbs
, 
poc_l0
[], 
poc_l1
[],

53 cÚ¡ 
x
, cÚ¡ 
y
, 
RESIDU
 *
»sidu
, cÚ¡ 
NAL
 *
N®
, 
Pass
, 
ProfeIdc
);

	@lib_svc/mb_padding.c

36 
	~"ty³.h
"

40 
	~"svc_ty³.h
"

41 
	~"BackEdge.h
"

42 
	~"mb_·ddšg.h
"

47 
	$edges_lim™
ĞcÚ¡ 
NAL
 *
N®
, 
AvaMask
, 
x_mbP¬tIdx
, 
y_mbP¬tIdx
, 
tmp_luma
[], 
ba£_luma
[],

48 
tmp_Cb
[], 
ba£_Cb
[], 
tmp_Cr
[], 
ba£_Cr
[])

51 
ba£_L
 = 
N®
 -> 
ba£_Width
 + 32;

52 
ba£_C
 = (
N®
 -> 
ba£_Width
 + 32) >> 1;

55 
	`cİy_2d
(
LumaBlockSize
, LumaBlockSize, (
N®
 -> 
ba£_Width
 + 32), 
LumaSŒide
, 
ba£_luma
, &
tmp_luma
[
TİBÜd”
 * LumaSŒid+ 
LeáBÜd”
]);

56 
	`cİy_2d
(
ChromaBlockSize
, ChromaBlockSize, 
ba£_C
, 
ChromaSŒide
, 
ba£_Cb
, &
tmp_Cb
[
TİBÜd”
 * ChromaSŒid+ (
LeáBÜd”
 >> 1)]);

57 
	`cİy_2d
(
ChromaBlockSize
, ChromaBlockSize, 
ba£_C
, 
ChromaSŒide
, 
ba£_Cr
, &
tmp_Cr
[
TİBÜd”
 * ChromaSŒid+ (
LeáBÜd”
 >> 1)]);

61 iàĞ!
x_mbP¬tIdx
){

63 
	`BackLeáEdge
(
N®
, 
AvaMask
, &
tmp_luma
[
TİBÜd”
 * 
LumaSŒide
], 
ba£_luma
, &
tmp_Cb
[TİBÜd” * 
ChromaSŒide
],

64 
ba£_Cb
, &
tmp_Cr
[
TİBÜd”
 * 
ChromaSŒide
], 
ba£_Cr
);

65 ià(!
y_mbP¬tIdx
){

67 
	`BackTİEdge
(
N®
, 
AvaMask
, &
tmp_luma
[
LeáBÜd”
], 
ba£_luma
, &
tmp_Cb
[LeáBÜd” >> 1], 
ba£_Cb
, &
tmp_Cr
[LeáBÜd” >> 1], 
ba£_Cr
);

70 
	`BackTİLeáEdge
(
N®
, 
AvaMask
, 
tmp_luma
, 
ba£_luma
, 
tmp_Cb
, 
ba£_Cb
, 
tmp_Cr
, 
ba£_Cr
);

73 
	`BackBÙtomEdge
(
N®
, 
AvaMask
, &
tmp_luma
[
LeáBÜd”
 + (
TİBÜd”
 + 
LumaBlockSize
è* 
LumaSŒide
], &
ba£_luma
[15 * 
ba£_L
],

74 &
tmp_Cb
[(
LeáBÜd”
 >> 1è+ (
TİBÜd”
 + 
ChromaBlockSize
è* 
ChromaSŒide
], &
ba£_Cb
[7 * 
ba£_C
],

75 &
tmp_Cr
[(
LeáBÜd”
 >> 1è+ (
TİBÜd”
 + 
ChromaBlockSize
è* 
ChromaSŒide
], &
ba£_Cr
[7 * 
ba£_C
]);

78 
	`BackBÙtomLeáEdge
(
N®
, 
AvaMask
, &
tmp_luma
[(
TİBÜd”
 + 
LumaBlockSize
è* 
LumaSŒide
], &
ba£_luma
[15 * 
ba£_L
],

79 &
tmp_Cb
[(
TİBÜd”
 + 
ChromaBlockSize
è* 
ChromaSŒide
], &
ba£_Cb
[7 * 
ba£_C
],

80 &
tmp_Cr
[(
TİBÜd”
 + 
ChromaBlockSize
è* 
ChromaSŒide
], &
ba£_Cr
[7 * 
ba£_C
]);

84 
	`BackRightEdge
(
N®
, 
AvaMask
, &
tmp_luma
[(
LeáBÜd”
 + 
LumaBlockSize
è+ 
TİBÜd”
 * 
LumaSŒide
], &
ba£_luma
[15],

85 &
tmp_Cb
[((
LeáBÜd”
 >> 1è+ 
ChromaBlockSize
è+ 
TİBÜd”
 * 
ChromaSŒide
], &
ba£_Cb
[7],

86 &
tmp_Cr
[((
LeáBÜd”
 >> 1è+ 
ChromaBlockSize
è+ 
TİBÜd”
 * 
ChromaSŒide
], &
ba£_Cr
[7]);

87 ià(!
y_mbP¬tIdx
){

89 
	`BackTİEdge
(
N®
, 
AvaMask
, &
tmp_luma
[
LeáBÜd”
], 
ba£_luma
, &
tmp_Cb
[LeáBÜd” >> 1], 
ba£_Cb
, &
tmp_Cr
[LeáBÜd” >> 1], 
ba£_Cr
);

92 
	`BackTİRightEdge
(
N®
, 
AvaMask
, &
tmp_luma
[
LeáBÜd”
 + 
LumaBlockSize
], &
ba£_luma
[15],

93 &
tmp_Cb
[(
LeáBÜd”
 >> 1è+ 
ChromaBlockSize
], &
ba£_Cb
[7],

94 &
tmp_Cr
[(
LeáBÜd”
 >> 1è+ 
ChromaBlockSize
], &
ba£_Cr
[7]);

97 
	`BackBÙtomEdge
(
N®
, 
AvaMask
, &
tmp_luma
[
LeáBÜd”
 + (
TİBÜd”
 + 
LumaBlockSize
è* 
LumaSŒide
], &
ba£_luma
[15 * 
ba£_L
],

98 &
tmp_Cb
[(
LeáBÜd”
 >> 1è+ (
TİBÜd”
 + 
ChromaBlockSize
è* 
ChromaSŒide
], &
ba£_Cb
[7 * 
ba£_C
],

99 &
tmp_Cr
[(
LeáBÜd”
 >> 1è+ (
TİBÜd”
 + 
ChromaBlockSize
è* 
ChromaSŒide
], &
ba£_Cr
[7 * 
ba£_C
]);

102 
	`BackBÙtomRightEdge
(
N®
, 
AvaMask
, &
tmp_luma
[(
LeáBÜd”
 + 
LumaBlockSize
è+ (
TİBÜd”
 + LumaBlockSizeè* 
LumaSŒide
], &
ba£_luma
[15 + 15 * 
ba£_L
],

103 &
tmp_Cb
[((
LeáBÜd”
 >> 1è+ 
ChromaBlockSize
è+ (
TİBÜd”
 + ChromaBlockSizeè* 
ChromaSŒide
], &
ba£_Cb
[7 + 7 * 
ba£_C
],

104 &
tmp_Cr
[((
LeáBÜd”
 >> 1è+ 
ChromaBlockSize
è+ (
TİBÜd”
 + ChromaBlockSizeè* 
ChromaSŒide
], &
ba£_Cr
[7 + 7 * 
ba£_C
]);

107 
	}
}

	@lib_svc/mb_padding.h

34 #iâdeà
MB_PAD


35 
	#MB_PAD


	)

37 
	~"ş.h
"

38 
	~"svc_ty³.h
"

41 
	#LumaBlockSize
 16

	)

42 
	#ChromaBlockSize
 8

	)

45 
	#LeáBÜd”
 8

	)

46 
	#RightBÜd”
 8

	)

47 
	#TİBÜd”
 4

	)

48 
	#BÙtomBÜd”
 8

	)

49 
	#LumaSŒide
 (
LeáBÜd”
 + 
LumaBlockSize
 + 
RightBÜd”
)

	)

50 
	#ChromaSŒide
 ((
LeáBÜd”
 >> 1è+ 
ChromaBlockSize
 + (
RightBÜd”
 >> 1))

	)

55 
edges_lim™
(cÚ¡ 
NAL
 *
N®
, 
AvaMask
, 
x_mbP¬tIdx
, 
y_mbP¬tIdx
,

56 
tmp_luma
[], 
ba£_luma
[],

57 
tmp_Cb
[], 
ba£_Cb
[],

58 
tmp_Cr
[], 
ba£_Cr
[]);

61 
__šlše
 
	$m”ge
(
ysize
, 
xsize
, 
PicWidthInPix
, 
pix
[], 
d¡
[], 
cÜÃr
, 
¡ride
, 
add
){

64 
x
, 
y
, 
xo
;

65 
pP–H
[
RightBÜd”
 + 1];

66 
pP–V
[
BÙtomBÜd”
 + 1];

68  
x
 = 0; x <ğ
xsize
; x++ ){

69 
pP–H
[
x
] = 
pix
[(x - 1è* 
add
];

72  
y
 = 0; y <ğ
ysize
; y++ ){

73 
pP–V
[
y
] = 
pix
[y*
PicWidthInPix
 - 
add
];

76 ifĞ!
cÜÃr
 ){

77 
pP–V
[0] = 
pP–H
[0] = (pPelH[1] +…PelV[1] + 1) >> 1;

80  
y
 = 0; y < 
ysize
; y++, 
d¡
 +ğ
¡ride
 ) {

81  
xo
 = 0, 
x
 = 0; x < 
xsize
; x++, xØ+ğ
add
 ) {

82 cÚ¡ 
iOff£t
 = 
x
 - 
y
;

83 ifĞ
iOff£t
 > 0 ) {

84 
d¡
[
xo
] = (
pP–H
[
iOff£t
 - 1] + 2*pPelH[iOffset] +…PelH[iOffset + 1] + 2) >> 2;

86 } ifĞ
iOff£t
 < 0 ) {

87 
d¡
[
xo
] = (
pP–V
[-
iOff£t
 - 1] + 2*pPelV[-iOffset] +…PelV[-iOffset + 1] + 2) >> 2;

91 
d¡
[
xo
] = (
pP–H
[1] + 2*
pP–V
[0] +…PelV[1] + 2) >> 2;

95 
	}
}

100 
__šlše
 
	$cİy_1d
(
y_size
, 
x_size
, 
¤c_width
, 
d¡_width
, 
¤c_šc
, *
¤c
, *
d¡
){

102 
i
,
j
;

103 
i
 = 0; i < 
y_size
; i++){

104 
j
 = 0; j < 
x_size
; j++){

105 
d¡
[
i
 * 
d¡_width
 + 
j
] = 
¤c
[˜* 
¤c_width
 + j * 
¤c_šc
];

108 
	}
}

110 
__šlše
 
	$cİy_2d
(
y_size
, 
x_size
, 
¤c_width
, 
d¡_width
, *
¤c
, *
d¡
){

112 
i
,
j
;

113 
i
 = 0; i < 
y_size
; i++){

114 
j
 = 0; j < 
x_size
; j++){

115 
d¡
[
i
 * 
d¡_width
 + 
j
] = 
¤c
[j + i * 
¤c_width
];

118 
	}
}

121 
__šlše
 
	$add_ş_2d
(
y_size
, 
x_size
, 
¤c_width
, 
d¡_width
, *
¤c
, *
d¡
){

123 
i
,
j
;

124 
i
 = 0; i < 
y_size
; i++){

125 
j
 = 0; j < 
x_size
; j++){

126 
d¡
[
i
 * 
d¡_width
 + 
j
] = (è
	`CLIP255
Ğd¡[˜* d¡_width + j] + 
¤c
[j + i * 
¤c_width
]);

129 
	}
}

	@lib_svc/mb_upsample_filter.c

39 
	~<¡dio.h
>

42 
	~"ty³.h
"

43 
	~"d©a.h
"

44 
	~"ş.h
"

47 
	~"svc_ty³.h
"

48 
	~"svc_d©a.h
"

49 
	~"mb_·ddšg.h
"

50 
	~"mb_up§m¶e_f‹r.h
"

53 #iâdeà
TI_OPTIM


55 cÚ¡ 
	gf‹r16
[16][4] = {{0,32,0,0},

73 cÚ¡ 
	gf‹r16_chroma
[16][2] = {

97 
	$up§m¶e_mb_lunšªû
(cÚ¡ 
SPS
 *
¥s
, cÚ¡ 
NAL
 *
N®
, *
Y
, *
aio_tucImage
,

98 cÚ¡ 
x_ba£
, cÚ¡ 
y_ba£
, cÚ¡ 
x
, cÚ¡ 
y
)

102 
i
, 
j
;

103 
px
 [32];

104 
py
 [32];

105 
‹mp
 [25 * 32];

106 cÚ¡ 
ba£_PicWidthInPix
 = 
N®
 -> 
down_Width
;

107 cÚ¡ 
Cu¼_PicWidthInPix
 = 
N®
 -> 
up_Width
;

108 cÚ¡ 
ba£_PicHeightInPix
 = 
N®
 -> 
down_Height
;

109 cÚ¡ 
Cu¼_PicHeightInPix
 = 
N®
 -> 
up_Height
;

112 cÚ¡ 
shiáX
 = 
	`ShiáC®cuÏtiÚ
(
¥s
 -> 
Ëv–_idc
, 
ba£_PicWidthInPix
);

113 cÚ¡ 
shiáY
 = 
	`ShiáC®cuÏtiÚ
(
¥s
 -> 
Ëv–_idc
, 
ba£_PicHeightInPix
);

114 cÚ¡ 
Xd–a
 = ((
ba£_PicWidthInPix
 << 
shiáX
è+ (
Cu¼_PicWidthInPix
 >> 1)) / Curr_PicWidthInPix;

115 cÚ¡ 
Yd–a
 = ((
ba£_PicHeightInPix
 << 
shiáY
è+ (
Cu¼_PicHeightInPix
 >> 1)) / Curr_PicHeightInPix;

116 cÚ¡ 
Xd–b
 = (((
ba£_PicWidthInPix
 * 2è<< (
shiáX
 - 2)è+ (
Cu¼_PicWidthInPix
 >> 1)) / Curr_PicWidthInPix + (1 << (shiftX - 5));

117 cÚ¡ 
Yd–b
 = (((
ba£_PicHeightInPix
 * 2è<< (
shiáY
 - 2)è+ (
Cu¼_PicHeightInPix
 >> 1)) / Curr_PicHeightInPix + (1 << (shiftY - 5));

119 
i
 = 0; i < 32; i++){

120 
px
[
i
] = (è((((˜+ 
x
 - (
¥s
 -> 
sÿËd_ba£_Ëá_off£t
 << 1)è* 
Xd–a
 + 
Xd–b
è>> (
shiáX
 - 4)) - 8);

121 
py
[
i
] = (è((((˜+ 
y
 - (
¥s
 -> 
sÿËd_ba£_tİ_off£t
 << 1)è* 
Yd–a
 + 
Yd–b
è>> (
shiáY
 - 4)) - 8);

127  
j
 = 0; j < 24; j++ ) {

128 *
±r
 = &
aio_tucImage
[
j
 * 
LumaSŒide
];

129 *
Tmp
 = &
‹mp
[
j
 * 32];

131  
i
 = 0; i < 24; i++ ){

132 cÚ¡ 
pos16
 = 
px
[
i
] & 0x0f;

133 cÚ¡ 
pos
 = (
px
[
i
] >> 4è- 1 - 
x_ba£
;

134 cÚ¡ *
F‹r
 = &
f‹r16
[
pos16
][0];

136 cÚ¡ 
m
 = 
	`CLIP3
(-4, 31, 
pos
);

137 
Tmp
[
i
] = 
F‹r
[0] * 
±r
[
m
] + Filter[1] *…tr[m + 1] + Filter[2] *…tr[m + 2] + Filter[3] *…tr[m + 3];

142  
i
 = 0; i < 16; i++ ) {

143 *
Tmp
 = &
‹mp
[
i
 + 4 * 32];

144 *
±r_img
 = &
Y
[
i
];

145  
j
 = 0; j < 16; j++ ){

146 cÚ¡ 
pos16
 = 
py
[
j
] & 0x0f;

147 cÚ¡ 
pos
 = (
py
[
j
] >> 4è- 1 - 
y_ba£
;

148 cÚ¡ *
F‹r
 = &
f‹r16
[
pos16
][0];

150 cÚ¡ 
m
 = 
	`CLIP3
(-4, 17, 
pos
);

151 
tmp_»suÉ
 = 
F‹r
[0] * 
Tmp
[
m
 * 32] + Filter[1] * Tmp[(m + 1) * 32] + Filter[2] * Tmp[(m + 2) * 32] + Filter[3] * Tmp[(m + 3) * 32];

152 
±r_img
[
j
 * (
N®
 -> 
cu¼_Width
 + 32)] = (è
	`CLIP255
((
tmp_»suÉ
 + 512) >> 10);

155 
	}
}

162 
	$up§m¶e_mb_chroma
(cÚ¡ 
SPS
 *
¥s
,cÚ¡ 
NAL
 *
N®
, *
Y
, *
aio_tucImage
,

163 cÚ¡ 
x_ba£
, cÚ¡ 
y_ba£
, cÚ¡ 
x
, cÚ¡ 
y
)

166 
i
, 
j
;

167 
px
 [16];

168 
py
 [16];

169 
‹mp
 [12 * 16];

171 cÚ¡ 
ba£_PicWidthInPix
 = 
N®
 -> 
down_Width
 >> 1;

172 cÚ¡ 
Cu¼_PicWidthInPix
 = 
N®
 -> 
up_Width
 >> 1;

173 cÚ¡ 
ba£_PicHeightInPix
 = 
N®
 -> 
down_Height
 >> 1;

174 cÚ¡ 
Cu¼_PicHeightInPix
 = 
N®
 -> 
up_Height
 >> 1;

176 cÚ¡ 
shiáX
 = 
	`ShiáC®cuÏtiÚ
(
¥s
 -> 
Ëv–_idc
, 
ba£_PicWidthInPix
);

177 cÚ¡ 
shiáY
 = 
	`ShiáC®cuÏtiÚ
(
¥s
 -> 
Ëv–_idc
, 
ba£_PicHeightInPix
);

179 cÚ¡ 
Xd–a
 = ((
ba£_PicWidthInPix
 << 
shiáX
è+ (
Cu¼_PicWidthInPix
 >> 1)) / Curr_PicWidthInPix;

180 cÚ¡ 
Yd–a
 = ((
ba£_PicHeightInPix
 << 
shiáY
è+ (
Cu¼_PicHeightInPix
 >> 1)) / Curr_PicHeightInPix;

181 cÚ¡ 
Xd–b
 = (((
ba£_PicWidthInPix
 * (2 + 
¥s
 -> 
chroma_pha£_x
)è<< (
shiáX
 - 2)è+ (
Cu¼_PicWidthInPix
 >> 1)) / Curr_PicWidthInPix + (1 << (shiftX - 5));

182 cÚ¡ 
Yd–b
 = (((
ba£_PicHeightInPix
 * (2 + 
¥s
 -> 
chroma_pha£_y
)è<< (
shiáY
 - 2)è+ (
Cu¼_PicHeightInPix
 >> 1)) / Curr_PicHeightInPix + (1 << (shiftY - 5));

184 
i
 = 0; i < 16; i++){

185 
px
[
i
] = (è((((˜+ 
x
 - 
¥s
 -> 
sÿËd_ba£_Ëá_off£t
è* 
Xd–a
 + 
Xd–b
è>> (
shiáX
 - 4)è- 4 * (2 + sp -> 
chroma_pha£_x
));

186 
py
[
i
] = (è((((˜+ 
y
 - 
¥s
 -> 
sÿËd_ba£_tİ_off£t
è* 
Yd–a
 + 
Yd–b
è>> (
shiáY
 - 4)è- 4 * (2 + sp -> 
chroma_pha£_y
));

193  
j
 = 0; j < 11; j++ ) {

194 *
±r
 = &
aio_tucImage
[
j
 * 
ChromaSŒide
];

195 *
tmp
 = &
‹mp
[
j
 * 16];

197  
i
 = 0; i < 16; i++ ){

198 cÚ¡ 
pos16
 = 
px
[
i
] & 0x0f;

199 cÚ¡ 
pos
 = (
px
[
i
] >> 4è- 
x_ba£
;

200 cÚ¡ 
m
 = 
	`CLIP3
(-4, 15, 
pos
 );

201 cÚ¡ *
f‹r
 = &
f‹r16_chroma
[
pos16
][0];

202 
tmp
[
i
] = 
f‹r
[0] * 
±r
[
m
] + filter[1] *…tr[m + 1];

206  
i
 = 0; i < 8; i++ ) {

207 * 
tmp
 = &
‹mp
[
i
 + 4 * 16];

208 *
±r_img
 = &
Y
[
i
];

209  
j
 = 0; j < 8; j++ ){

210 cÚ¡ 
pos16
 = 
py
[
j
] & 0x0f;

211 cÚ¡ 
pos
 = (
py
[
j
] >> 4è- 
y_ba£
;

212 cÚ¡ 
m
 = 
	`CLIP3
(-4, 15, 
pos
);

213 cÚ¡ *
f‹r
 = &
f‹r16_chroma
[
pos16
][0];

214 cÚ¡ 
tmp_»suÉ
 = 
f‹r
[0] * 
tmp
[
m
 * 16] + filter[1] *mp[m * 16 + 16];

216 
±r_img
[
j
 * ((
N®
 -> 
cu¼_Width
 + 32è>> 1)] = (è
	`CLIP255
((
tmp_»suÉ
 + 512) >> 10);

219 
	}
}

225 
	gf‹r16_İtim
[16][2] = {{0x00000020,0},

244 
	gf‹r16_chroma_İtim
[16]= {

267 
	$up§m¶e_mb_lunšªû
(cÚ¡ 
SPS
 *
¥s
, cÚ¡ 
NAL
 *
N®
, *
Y
, *
aio_tucImage
,

268 cÚ¡ 
x_ba£
, cÚ¡ 
y_ba£
, cÚ¡ 
x
, cÚ¡ 
y
)

271 
px
 [32];

272 
py
 [32];

273 
‹mp
 [25 * 32];

274 cÚ¡ 
ba£_PicWidthInPix
 = 
N®
 -> 
down_Width
;

275 cÚ¡ 
Cu¼_PicWidthInPix
 = 
N®
 -> 
up_Width
;

276 cÚ¡ 
ba£_PicHeightInPix
 = 
N®
 -> 
down_Height
;

277 cÚ¡ 
Cu¼_PicHeightInPix
 = 
N®
 -> 
up_Height
;

278 
d–a
,
i
, 
j
;

280 
v®Ü_š‹r
=0;

281 * 
dœ_px_py
ğ(*)
px
;

282 
Çl_İtim
=(
N®
 -> 
cu¼_Width
 + 32);

284 
shiáX
 = 
	`ShiáC®cuÏtiÚ
(
¥s
 -> 
Ëv–_idc
, 
ba£_PicWidthInPix
);

285 
shiáX4
=
shiáX
-4;

289 
d–a
 = ((
ba£_PicWidthInPix
 << 
shiáX
è+ (
Cu¼_PicWidthInPix
 >> 1)) / Curr_PicWidthInPix;

291 
v®Ü_š‹r
=(
x
 - (
¥s
 -> 
sÿËd_ba£_Ëá_off£t
 << 1)è* 
d–a
 + ((((
ba£_PicWidthInPix
 <<1è<< (
shiáX
 - 2)è+ (
Cu¼_PicWidthInPix
 >> 1)) / Curr_PicWidthInPix + (1 << (shiftX - 5)));

295 
	`_mem8
(
dœ_px_py
èğ
	`_™Şl
(
	`_sub2
(
	`_·ck2
((è((
v®Ü_š‹r
 + (
d–a
 * 3)>> 
shiáX4
)),() ((valor_inter + (deltaa<<1)>> shiftX4))),0x00080008),_sub2(_pack2(() ((valor_inter + deltaa>> shiftX4)),() ((valor_inter >> shiftX4))),0x00080008));

296 
	`_mem8
(
dœ_px_py
+2èğ
	`_™Şl
(
	`_sub2
(
	`_·ck2
((è((
v®Ü_š‹r
 + (
d–a
 * 7)>> 
shiáX4
)),() ((valor_inter + (deltaa * 6)>> shiftX4))),0x00080008),_sub2(_pack2(() ((valor_inter + (deltaa * 5)>> shiftX4)),() ((valor_inter + (deltaa<<2)>> shiftX4))),0x00080008));

297 
	`_mem8
(
dœ_px_py
+4èğ
	`_™Şl
(
	`_sub2
(
	`_·ck2
((è((
v®Ü_š‹r
 + (
d–a
 * 11)>> 
shiáX4
)),() ((valor_inter + (deltaa * 10)>> shiftX4))),0x00080008),_sub2(_pack2(() ((valor_inter + (deltaa * 9)>> shiftX4)),() ((valor_inter + (deltaa <<3)>> shiftX4))),0x00080008));

298 
	`_mem8
(
dœ_px_py
+6èğ
	`_™Şl
(
	`_sub2
(
	`_·ck2
((è((
v®Ü_š‹r
 + (
d–a
 * 15)>> 
shiáX4
)),() ((valor_inter + (deltaa * 14)>> shiftX4))),0x00080008),_sub2(_pack2(() ((valor_inter + (deltaa * 13)>> shiftX4)),() ((valor_inter + (deltaa * 12)>> shiftX4))),0x00080008));

299 
	`_mem8
(
dœ_px_py
+8èğ
	`_™Şl
(
	`_sub2
(
	`_·ck2
((è((
v®Ü_š‹r
 + (
d–a
 * 19)>> 
shiáX4
)),() ((valor_inter + (deltaa * 18)>> shiftX4))),0x00080008),_sub2(_pack2(() ((valor_inter + (deltaa * 17)>> shiftX4)),() ((valor_inter + (deltaa <<4)>> shiftX4))),0x00080008));

300 
	`_mem8
(
dœ_px_py
+10)ğ
	`_™Şl
(
	`_sub2
(
	`_·ck2
((è((
v®Ü_š‹r
 + (
d–a
 * 23)>> 
shiáX4
)),() ((valor_inter + (deltaa * 22)>> shiftX4))),0x00080008),_sub2(_pack2(() ((valor_inter + (deltaa * 21)>> shiftX4)),() ((valor_inter + (deltaa * 20)>> shiftX4))),0x00080008));

301 
	`_mem8
(
dœ_px_py
+12)ğ
	`_™Şl
(
	`_sub2
(
	`_·ck2
((è((
v®Ü_š‹r
 + (
d–a
 * 27)>> 
shiáX4
)),() ((valor_inter + (deltaa * 26)>> shiftX4))),0x00080008),_sub2(_pack2(() ((valor_inter + (deltaa * 25)>> shiftX4)),() ((valor_inter + (deltaa * 24)>> shiftX4))),0x00080008));

302 
	`_mem8
(
dœ_px_py
+14)ğ
	`_™Şl
(
	`_sub2
(
	`_·ck2
((è((
v®Ü_š‹r
 + (
d–a
 * 31)>> 
shiáX4
)),() ((valor_inter + (deltaa * 30)>> shiftX4))),0x00080008),_sub2(_pack2(() ((valor_inter + (deltaa * 29)>> shiftX4)),() ((valor_inter + (deltaa * 28)>> shiftX4))),0x00080008));

306 
shiáX
 = 
	`ShiáC®cuÏtiÚ
(
¥s
 -> 
Ëv–_idc
, 
ba£_PicHeightInPix
);

307 
shiáX4
ğ
shiáX
-4;

308 
d–a
 = ((
ba£_PicHeightInPix
 << 
shiáX
è+ (
Cu¼_PicHeightInPix
 >> 1)) / Curr_PicHeightInPix;

311 
v®Ü_š‹r
ğ(
y
 - (
¥s
 -> 
sÿËd_ba£_tİ_off£t
 << 1)è* 
d–a
 + ((((
ba£_PicHeightInPix
 <<1è<< (
shiáX
 - 2)è+ (
Cu¼_PicHeightInPix
 >> 1)) / Curr_PicHeightInPix + (1 << (shiftX - 5)));

315 
dœ_px_py
ğ(*)
py
;

317 
	`_mem8
(
dœ_px_py
èğ
	`_™Şl
(
	`_sub2
(
	`_·ck2
((è((
v®Ü_š‹r
 + (
d–a
 * 3)>> 
shiáX4
)),() ((valor_inter + (deltaa<<1)>> shiftX4))),0x00080008),_sub2(_pack2(() ((valor_inter + deltaa>> shiftX4)),() ((valor_inter >> shiftX4))),0x00080008));

318 
	`_mem8
(
dœ_px_py
+2èğ
	`_™Şl
(
	`_sub2
(
	`_·ck2
((è((
v®Ü_š‹r
 + (
d–a
 * 7)>> 
shiáX4
)),() ((valor_inter + (deltaa * 6)>> shiftX4))),0x00080008),_sub2(_pack2(() ((valor_inter + (deltaa * 5)>> shiftX4)),() ((valor_inter + (deltaa<<2)>> shiftX4))),0x00080008));

319 
	`_mem8
(
dœ_px_py
+4èğ
	`_™Şl
(
	`_sub2
(
	`_·ck2
((è((
v®Ü_š‹r
 + (
d–a
 * 11)>> 
shiáX4
)),() ((valor_inter + (deltaa * 10)>> shiftX4))),0x00080008),_sub2(_pack2(() ((valor_inter + (deltaa * 9)>> shiftX4)),() ((valor_inter + (deltaa <<3)>> shiftX4))),0x00080008));

320 
	`_mem8
(
dœ_px_py
+6èğ
	`_™Şl
(
	`_sub2
(
	`_·ck2
((è((
v®Ü_š‹r
 + (
d–a
 * 15)>> 
shiáX4
)),() ((valor_inter + (deltaa * 14)>> shiftX4))),0x00080008),_sub2(_pack2(() ((valor_inter + (deltaa * 13)>> shiftX4)),() ((valor_inter + (deltaa * 12)>> shiftX4))),0x00080008));

321 
	`_mem8
(
dœ_px_py
+8èğ
	`_™Şl
(
	`_sub2
(
	`_·ck2
((è((
v®Ü_š‹r
 + (
d–a
 * 19)>> 
shiáX4
)),() ((valor_inter + (deltaa * 18)>> shiftX4))),0x00080008),_sub2(_pack2(() ((valor_inter + (deltaa * 17)>> shiftX4)),() ((valor_inter + (deltaa <<4)>> shiftX4))),0x00080008));

322 
	`_mem8
(
dœ_px_py
+10èğ
	`_™Şl
(
	`_sub2
(
	`_·ck2
((è((
v®Ü_š‹r
 + (
d–a
 * 23)>> 
shiáX4
)),() ((valor_inter + (deltaa * 22)>> shiftX4))),0x00080008),_sub2(_pack2(() ((valor_inter + (deltaa * 21)>> shiftX4)),() ((valor_inter + (deltaa * 20)>> shiftX4))),0x00080008));

323 
	`_mem8
(
dœ_px_py
+12èğ
	`_™Şl
(
	`_sub2
(
	`_·ck2
((è((
v®Ü_š‹r
 + (
d–a
 * 27)>> 
shiáX4
)),() ((valor_inter + (deltaa * 26)>> shiftX4))),0x00080008),_sub2(_pack2(() ((valor_inter + (deltaa * 25)>> shiftX4)),() ((valor_inter + (deltaa * 24)>> shiftX4))),0x00080008));

324 
	`_mem8
(
dœ_px_py
+14èğ
	`_™Şl
(
	`_sub2
(
	`_·ck2
((è((
v®Ü_š‹r
 + (
d–a
 * 31)>> 
shiáX4
)),() ((valor_inter + (deltaa * 30)>> shiftX4))),0x00080008),_sub2(_pack2(() ((valor_inter + (deltaa * 29)>> shiftX4)),() ((valor_inter + (deltaa * 28)>> shiftX4))),0x00080008));

327  
j
 = 0; j < 737; j=j+32 )

329 *
±r
 = &
aio_tucImage
[
j
];

330 * 
»¡riù
 
Tmp
 = &
‹mp
[
j
];

331 
dœ_px_py
ğ(*)
Tmp
;

334 #´agm¨
	`MUST_ITERATE
(6,6,);

335  
i
 = 0; i < 24; i+=4 )

337 *
fŒo
ğ&
f‹r16_İtim
[
px
[
i
] & 0x0f][0];

339 
m
 = 
	`CLIP3
(-4,31,(
px
[
i
] >> 4è- 1 - 
x_ba£
);

341 * 
fŒo2
ğ&
f‹r16_İtim
[
px
[
i
+1] & 0x0f][0];

342 
m2
 = 
	`CLIP3
(-4,31,(
px
[
i
+1] >> 4è- 1 - 
x_ba£
);

344 *
fŒo3
ğ&
f‹r16_İtim
[
px
[
i
+2] & 0x0f][0];

345 *
fŒo4
ğ&
f‹r16_İtim
[
px
[
i
+3] & 0x0f][0];

346 
m3
ğ
	`CLIP3
(-4,31,(
px
[
i
+2] >> 4è- 1 - 
x_ba£
);

347 
m4
ğ
	`CLIP3
(-4,31,(
px
[
i
+3] >> 4è- 1 - 
x_ba£
);

350 
	`_mem8
(
dœ_px_py
èğ
	`_™Şl
(

351 
	`_·ck2
((
	`_dÙp2
(* 
fŒo4
,_·ck2(
±r
[
m4
],ptr[m4+1]))

352 +
	`_dÙp2
(* (
fŒo4
+1),
	`_·ck2
(
±r
[
m4
+2],ptr[m4+3]))),

353 (
	`_dÙp2
(* 
fŒo3
,
	`_·ck2
(
±r
[
m3
],ptr[m3+1]))

354 +
	`_dÙp2
(* (
fŒo3
+1),
	`_·ck2
(
±r
[
m3
+2],ptr[m3+3])))),

356 
	`_·ck2
((
	`_dÙp2
(* 
fŒo2
,_·ck2(
±r
[
m2
],ptr[m2+1]))

357 +
	`_dÙp2
(* (
fŒo2
+1),
	`_·ck2
(
±r
[
m2
+2],ptr[m2+3]))),

358 (
	`_dÙp2
(* 
fŒo
,
	`_·ck2
(
±r
[
m
],ptr[m+1]))

359 +
	`_dÙp2
(* (
fŒo
+1),
	`_·ck2
(
±r
[
m
+2],ptr[m+3])))));

363 
dœ_px_py
+=2;

371  
i
 = 0; i < 16; i++ )

374 *
Tmp
 = &
‹mp
[
i
 + 128];

375 * 
»¡riù
 
±r_img
 = &
Y
[
i
];

376  
j
 = 0; j < 16; j+=2 )

379 *
fŒo
ğ&
f‹r16_İtim
[
py
[
j
] & 0x0f][0];

381 
m
 = 
	`CLIP3
(-4,17, (
py
[
j
] >> 4è- 1 - 
y_ba£
);

384 
tmp_»suÉ
 = 
	`_dÙp2
(* 
fŒo
,
	`_·ck2
(
Tmp
[
m
 <<5],Tmp[(m + 1) <<5]))

385 +
	`_dÙp2
(* (
fŒo
+1),
	`_·ck2
(
Tmp
[(
m
 + 2) <<5],Tmp[(m + 3) <<5]));

388 
±r_img
[
j
 * (
Çl_İtim
)] = (è
	`CLIP255
((
tmp_»suÉ
 + 512) >> 10);

391 
fŒo
ğ&
f‹r16_İtim
[
py
[
j
+1] & 0x0f][0];

392 
m
 = 
	`CLIP3
(-4,17, (
py
[
j
+1] >> 4è- 1 - 
y_ba£
);

394 
tmp_»suÉ
 = 
	`_dÙp2
(* 
fŒo
,
	`_·ck2
(
Tmp
[
m
 <<5],Tmp[(m + 1) <<5]))

395 +
	`_dÙp2
(* (
fŒo
+1),
	`_·ck2
(
Tmp
[(
m
 + 2) <<5],Tmp[(m + 3) <<5]));

396 
±r_img
[(
j
+1è* (
Çl_İtim
)] = (è
	`CLIP255
((
tmp_»suÉ
 + 512) >> 10);

400 
	}
}

407 
	$up§m¶e_mb_chroma
(cÚ¡ 
SPS
 *
¥s
,cÚ¡ 
NAL
 *
N®
, *
Y
, *
aio_tucImage
,

408 cÚ¡ 
x_ba£
, cÚ¡ 
y_ba£
, cÚ¡ 
x
, cÚ¡ 
y
)

412 
i
, 
j
;

414 
m
;

415 
px
 [16];

416 
py
 [16];

417 
‹mp
 [12 * 16];

419 
tmp_»suÉ
;

421 cÚ¡ 
ba£_PicWidthInPix
 = 
N®
 -> 
down_Width
 >> 1;

422 cÚ¡ 
Cu¼_PicWidthInPix
 = 
N®
 -> 
up_Width
 >> 1;

423 cÚ¡ 
ba£_PicHeightInPix
 = 
N®
 -> 
down_Height
 >> 1;

424 cÚ¡ 
Cu¼_PicHeightInPix
 = 
N®
 -> 
up_Height
 >> 1;

427 
shiáX
 = 
	`ShiáC®cuÏtiÚ
(
¥s
 -> 
Ëv–_idc
, 
ba£_PicWidthInPix
);

428 
shiáX4
 = 
shiáX
-4;

430 
d–a
 = ((
ba£_PicWidthInPix
 << 
shiáX
è+ (
Cu¼_PicWidthInPix
 >> 1)) / Curr_PicWidthInPix;

431 
d–b
 = (((
ba£_PicWidthInPix
 * (2 + 
¥s
 -> 
chroma_pha£_x
)è<< (
shiáX
 - 2)è+ (
Cu¼_PicWidthInPix
 >> 1)) / Curr_PicWidthInPix + (1 << (shiftX - 5));

433 
pha£_üoma
 = 
	`_·ck2
(()((2 + 
¥s
 -> 
chroma_pha£_x
)<<2),(()(2 + sps -> chroma_phase_x)<<2));

434 
v®Ü_š‹rmedio
 =(
x
 - 
¥s
 -> 
sÿËd_ba£_Ëá_off£t
è* 
d–a
 + 
d–b
;

435 * 
dœ_px_py
ğ(*)
px
;

437 
Çl_İtim
 = ((
N®
 -> 
cu¼_Width
 + 32) >> 1);

440 
	`_mem8
(
dœ_px_py
èğ
	`_™Şl
(
	`_sub2
(
	`_·ck2
(()(
v®Ü_š‹rmedio
+(
d–a
 * 3è>> (
shiáX4
)),()(v®Ü_š‹rmedio+(d–¨<<1è>> (shiáX4))),
pha£_üoma
),_sub2(_pack2(()(valor_intermedio+ deltaa >> (shiftX4)),()(valor_intermedio >> (shiftX4))),phase_croma));

441 
	`_mem8
(
dœ_px_py
+2èğ
	`_™Şl
(
	`_sub2
(
	`_·ck2
(()(
v®Ü_š‹rmedio
+(
d–a
 * 7è>> (
shiáX4
)),()(v®Ü_š‹rmedio+(d–¨* 6è>> (shiáX4))),
pha£_üoma
),_sub2(_pack2(()(valor_intermedio+(deltaa * 5) >> (shiftX4)),()(valor_intermedio+(deltaa <<2) >> (shiftX4))),phase_croma));

442 
	`_mem8
(
dœ_px_py
+4èğ
	`_™Şl
(
	`_sub2
(
	`_·ck2
(()(
v®Ü_š‹rmedio
+(
d–a
 * 11è>> (
shiáX4
)),()(v®Ü_š‹rmedio+(d–¨* 10è>> (shiáX4))),
pha£_üoma
),_sub2(_pack2(()(valor_intermedio+(deltaa * 9) >> (shiftX4)),()(valor_intermedio+(deltaa <<3) >> (shiftX4))),phase_croma));

443 
	`_mem8
(
dœ_px_py
+6èğ
	`_™Şl
(
	`_sub2
(
	`_·ck2
(()(
v®Ü_š‹rmedio
+(
d–a
 * 15è>> (
shiáX4
)),()(v®Ü_š‹rmedio+(d–¨* 14è>> (shiáX4))),
pha£_üoma
),_sub2(_pack2(()(valor_intermedio+(deltaa * 13) >> (shiftX4)),()(valor_intermedio+(deltaa * 12) >> (shiftX4))),phase_croma));

445 
shiáX
 = 
	`ShiáC®cuÏtiÚ
(
¥s
 -> 
Ëv–_idc
, 
ba£_PicHeightInPix
);

446 
shiáX4
 = 
shiáX
-4;

448 
d–a
 = ((
ba£_PicHeightInPix
 << 
shiáX
è+ (
Cu¼_PicHeightInPix
 >> 1)) / Curr_PicHeightInPix;

449 
d–b
 = (((
ba£_PicHeightInPix
 * (2 + 
¥s
 -> 
chroma_pha£_y
)è<< (
shiáX
 - 2)è+ (
Cu¼_PicHeightInPix
 >> 1)) / Curr_PicHeightInPix + (1 << (shiftX - 5));

451 
pha£_üoma
 = 
	`_·ck2
(()((2 + 
¥s
 -> 
chroma_pha£_y
)<<2),(()(2 + sps -> chroma_phase_y)<<2));

452 
v®Ü_š‹rmedio
 =(
y
 - 
¥s
 -> 
sÿËd_ba£_tİ_off£t
è* 
d–a
 + 
d–b
;

454 
dœ_px_py
ğ(*)
py
;

457 
	`_mem8
(
dœ_px_py
èğ
	`_™Şl
(
	`_sub2
(
	`_·ck2
(()(
v®Ü_š‹rmedio
+(
d–a
 * 3è>> (
shiáX4
)),()(v®Ü_š‹rmedio+(d–¨<<1è>> (shiáX4))),
pha£_üoma
),_sub2(_pack2(()(valor_intermedio+ deltaa >> (shiftX4)),()(valor_intermedio >> (shiftX4))),phase_croma));

458 
	`_mem8
(
dœ_px_py
+2èğ
	`_™Şl
(
	`_sub2
(
	`_·ck2
(()(
v®Ü_š‹rmedio
+(
d–a
 * 7è>> (
shiáX4
)),()(v®Ü_š‹rmedio+(d–¨* 6è>> (shiáX4))),
pha£_üoma
),_sub2(_pack2(()(valor_intermedio+(deltaa * 5) >> (shiftX4)),()(valor_intermedio+(deltaa <<2) >> (shiftX4))),phase_croma));

459 
	`_mem8
(
dœ_px_py
+4èğ
	`_™Şl
(
	`_sub2
(
	`_·ck2
(()(
v®Ü_š‹rmedio
+(
d–a
 * 11è>> (
shiáX4
)),()(v®Ü_š‹rmedio+(d–¨* 10è>> (shiáX4))),
pha£_üoma
),_sub2(_pack2(()(valor_intermedio+(deltaa * 9) >> (shiftX4)),()(valor_intermedio+(deltaa <<3) >> (shiftX4))),phase_croma));

460 
	`_mem8
(
dœ_px_py
+6èğ
	`_™Şl
(
	`_sub2
(
	`_·ck2
(()(
v®Ü_š‹rmedio
+(
d–a
 * 15è>> (
shiáX4
)),()(v®Ü_š‹rmedio+(d–¨* 14è>> (shiáX4))),
pha£_üoma
),_sub2(_pack2(()(valor_intermedio+(deltaa * 13) >> (shiftX4)),()(valor_intermedio+(deltaa * 12) >> (shiftX4))),phase_croma));

464  
j
 = 0; j <177 ; j+=16 )

466 * 
±r
 = &
aio_tucImage
[
j
];

467 * 
»¡riù
 
tmp
 = &
‹mp
[
j
];

469 
dœ_px_py
ğ(*)
tmp
;

472 
	`_mem8
(
dœ_px_py
èğ
	`_™Şl
(
	`_·ck2
(
	`_dÙp2
(
f‹r16_chroma_İtim
[
px
[3] & 0x0f],_·ck2(
±r
[
	`CLIP3
(-4, 15,Õx[3] >> 4è- 
x_ba£
)],ptr[CLIP3(-4, 15,(px[3] >> 4) - x_base) + 1])),_dotp2(filter16_chroma_optim[px[2] & 0x0f],_pack2(ptr[CLIP3(-4, 15,(px[2] >> 4) - x_base)],ptr[CLIP3(-4, 15,(px[2] >> 4) - x_base) + 1]))),_pack2(_dotp2(filter16_chroma_optim[px[1] & 0x0f],_pack2(ptr[CLIP3(-4, 15,(px[1] >> 4) - x_base)],ptr[CLIP3(-4, 15,(px[1] >> 4) - x_base) + 1])),_dotp2(filter16_chroma_optim[px[0] & 0x0f],_pack2(ptr[CLIP3(-4, 15,(px[0] >> 4) - x_base)],ptr[CLIP3(-4, 15,(px[0] >> 4) - x_base) + 1]))));

473 
	`_mem8
(
dœ_px_py
+2èğ
	`_™Şl
(
	`_·ck2
(
	`_dÙp2
(
f‹r16_chroma_İtim
[
px
[7] & 0x0f],_·ck2(
±r
[
	`CLIP3
(-4, 15,Õx[7] >> 4è- 
x_ba£
)],ptr[CLIP3(-4, 15,(px[7] >> 4) - x_base) + 1])),_dotp2(filter16_chroma_optim[px[6] & 0x0f],_pack2(ptr[CLIP3(-4, 15,(px[6] >> 4) - x_base)],ptr[CLIP3(-4, 15,(px[6] >> 4) - x_base) + 1]))),_pack2(_dotp2(filter16_chroma_optim[px[5] & 0x0f],_pack2(ptr[CLIP3(-4, 15,(px[5] >> 4) - x_base)],ptr[CLIP3(-4, 15,(px[5] >> 4) - x_base) + 1])),_dotp2(filter16_chroma_optim[px[4] & 0x0f],_pack2(ptr[CLIP3(-4, 15,(px[4] >> 4) - x_base)],ptr[CLIP3(-4, 15,(px[4] >> 4) - x_base) + 1]))));

474 
	`_mem8
(
dœ_px_py
+4èğ
	`_™Şl
(
	`_·ck2
(
	`_dÙp2
(
f‹r16_chroma_İtim
[
px
[11] & 0x0f],_·ck2(
±r
[
	`CLIP3
(-4, 15,Õx[11] >> 4è- 
x_ba£
)],ptr[CLIP3(-4, 15,(px[11] >> 4) - x_base) + 1])),_dotp2(filter16_chroma_optim[px[10] & 0x0f],_pack2(ptr[CLIP3(-4, 15,(px[10] >> 4) - x_base)],ptr[CLIP3(-4, 15,(px[10] >> 4) - x_base) + 1]))),_pack2(_dotp2(filter16_chroma_optim[px[9] & 0x0f],_pack2(ptr[CLIP3(-4, 15,(px[9] >> 4) - x_base)],ptr[CLIP3(-4, 15,(px[9] >> 4) - x_base) + 1])),_dotp2(filter16_chroma_optim[px[8] & 0x0f],_pack2(ptr[CLIP3(-4, 15,(px[8] >> 4) - x_base)],ptr[CLIP3(-4, 15,(px[8] >> 4) - x_base) + 1]))));

475 
	`_mem8
(
dœ_px_py
+6èğ
	`_™Şl
(
	`_·ck2
(
	`_dÙp2
(
f‹r16_chroma_İtim
[
px
[15] & 0x0f],_·ck2(
±r
[
	`CLIP3
(-4, 15,Õx[15] >> 4è- 
x_ba£
)],ptr[CLIP3(-4, 15,(px[15] >> 4) - x_base) + 1])),_dotp2(filter16_chroma_optim[px[14] & 0x0f],_pack2(ptr[CLIP3(-4, 15,(px[14] >> 4) - x_base)],ptr[CLIP3(-4, 15,(px[14] >> 4) - x_base) + 1]))),_pack2(_dotp2(filter16_chroma_optim[px[13] & 0x0f],_pack2(ptr[CLIP3(-4, 15,(px[13] >> 4) - x_base)],ptr[CLIP3(-4, 15,(px[13] >> 4) - x_base) + 1])),_dotp2(filter16_chroma_optim[px[12] & 0x0f],_pack2(ptr[CLIP3(-4, 15,(px[12] >> 4) - x_base)],ptr[CLIP3(-4, 15,(px[12] >> 4) - x_base) + 1]))));

478  
i
 = 0; i < 8; i++ )

481 * 
tmp
 = &
‹mp
[
i
 + 64];

482 * 
»¡riù
 
±r_img
 = &
Y
[
i
];

484 
m
 = 
	`CLIP3
(-4, 15,(
py
[0] >> 4è- 
y_ba£
);

485 
tmp_»suÉ
 = 
	`_dÙp2
(
f‹r16_chroma_İtim
[
py
[0] & 0x0f],
	`_·ck2
(
tmp
[
m
<<4],tmp[(m<<4) + 16]));

486 
±r_img
[0] = (è
	`CLIP255
((
tmp_»suÉ
 + 512) >> 10);

488 
m
 = 
	`CLIP3
(-4, 15,(
py
[1] >> 4è- 
y_ba£
);

489 
tmp_»suÉ
 = 
	`_dÙp2
(
f‹r16_chroma_İtim
[
py
[1] & 0x0f],
	`_·ck2
(
tmp
[
m
<<4],tmp[(m<<4) + 16]));

490 
±r_img
[
Çl_İtim
] = (è
	`CLIP255
((
tmp_»suÉ
 + 512) >> 10);

492 
m
 = 
	`CLIP3
(-4, 15,(
py
[2] >> 4è- 
y_ba£
);

493 
tmp_»suÉ
 = 
	`_dÙp2
(
f‹r16_chroma_İtim
[
py
[2] & 0x0f],
	`_·ck2
(
tmp
[
m
<<4],tmp[(m<<4) + 16]));

494 
±r_img
[
Çl_İtim
<<1] = (è
	`CLIP255
((
tmp_»suÉ
 + 512) >> 10);

496 
m
 = 
	`CLIP3
(-4, 15,(
py
[3] >> 4è- 
y_ba£
);

497 
tmp_»suÉ
 = 
	`_dÙp2
(
f‹r16_chroma_İtim
[
py
[3] & 0x0f],
	`_·ck2
(
tmp
[
m
<<4],tmp[(m<<4) + 16]));

498 
±r_img
[3 * 
Çl_İtim
] = (è
	`CLIP255
((
tmp_»suÉ
 + 512) >> 10);

500 
m
 = 
	`CLIP3
(-4, 15,(
py
[4] >> 4è- 
y_ba£
);

501 
tmp_»suÉ
 = 
	`_dÙp2
(
f‹r16_chroma_İtim
[
py
[4] & 0x0f],
	`_·ck2
(
tmp
[
m
<<4],tmp[(m<<4) + 16]));

502 
±r_img
[
Çl_İtim
<<2] = (è
	`CLIP255
((
tmp_»suÉ
 + 512) >> 10);

504 
m
 = 
	`CLIP3
(-4, 15,(
py
[5] >> 4è- 
y_ba£
);

505 
tmp_»suÉ
 = 
	`_dÙp2
(
f‹r16_chroma_İtim
[
py
[5] & 0x0f],
	`_·ck2
(
tmp
[
m
<<4],tmp[(m<<4) + 16]));

506 
±r_img
[5 * 
Çl_İtim
] = (è
	`CLIP255
((
tmp_»suÉ
 + 512) >> 10);

508 
m
 = 
	`CLIP3
(-4, 15,(
py
[6] >> 4è- 
y_ba£
);

509 
tmp_»suÉ
 = 
	`_dÙp2
(
f‹r16_chroma_İtim
[
py
[6] & 0x0f],
	`_·ck2
(
tmp
[
m
<<4],tmp[(m<<4) + 16]));

510 
±r_img
[6 * 
Çl_İtim
] = (è
	`CLIP255
((
tmp_»suÉ
 + 512) >> 10);

512 
m
 = 
	`CLIP3
(-4, 15,(
py
[7] >> 4è- 
y_ba£
);

513 
tmp_»suÉ
 = 
	`_dÙp2
(
f‹r16_chroma_İtim
[
py
[7] & 0x0f],
	`_·ck2
(
tmp
[
m
<<4],tmp[(m<<4) + 16]));

514 
±r_img
[7 * 
Çl_İtim
] = (è
	`CLIP255
((
tmp_»suÉ
 + 512) >> 10);

516 
	}
}

	@lib_svc/mb_upsample_filter.h

35 #iâdeà
MB_UP_FILTER_H


36 
	#MB_UP_FILTER_H


	)

38 #ifdeà
INTEL


39 #´agm¨
w¬nšg
(
di§bË
:177)

43 
up§m¶e_mb_lunšªû
(cÚ¡ 
SPS
 *
¥s
, cÚ¡ 
NAL
 *
N®
, *
Y
 , *
aio_tucImage
,

44 cÚ¡ 
x_ba£
, cÚ¡ 
y_ba£
, cÚ¡ 
x
, cÚ¡ 
y
);

45 
up§m¶e_mb_chroma
(cÚ¡ 
SPS
 *
¥s
,cÚ¡ 
NAL
 *
N®
, *
Y
, *
aio_tucImage
,

46 cÚ¡ 
x_ba£
,cÚ¡ 
y_ba£
, cÚ¡ 
x
,cÚ¡ 
y
);

49 
__šlše
 
	$ShiáC®cuÏtiÚ
(
Ëv–_idc
, 
PicWidthInPix
){

52 ià(
Ëv–_idc
 > 30){

53 
t
 = 
PicWidthInPix
 - 1;

54 
shiáX
 = 0;

55 
t
 > 0) {

56 
shiáX
++;

57 
t
 >>= 1;

59  31 - 
shiáX
;

65 
	}
}

	@lib_svc/motion_vector_svc.c

36 
	~"mÙiÚ_veùÜ.h
"

37 
	~"š‹½Ş©iÚ.h
"

38 
	~"š‹½Ş©iÚ_maš.h
"

41 
	~"svc_d©a.h
"

42 
	~"mÙiÚ_veùÜ_svc.h
"

45 
	#SIGN
(
X
è(X > 0 ? 1: -1)

	)

56 
	$g‘_ba£_P_dyadic
(
mv_ÿche
 [][2], *
»f_ÿche
, *
DpbLuma
, *
DpbCb
, *
DpbCr
,

57 *
Y
, *
U
, *
V
, 
x
, 
y
, 
PicWidthInPix
, 
PicHeightInPix
,

58 
LIST_MMO
 *
RefPicLi¡L0
, *
mv_l0
, *
»f_ba£
, 
REFPART
 *
RefP¬t™iÚ
, cÚ¡ 
NAL
 *
N®
, cÚ¡ 
š‹½Ş_4x4
 *interpol_4x4)

62 
Idx
;

63  
Idx
 = 0 ; Idx < 16 ; Idx++ ) {

64 
šdex_mv
 = 
RefP¬t™iÚ
 [
Idx
] . 
MvIndex
;

65 
»f_šdex
 = 
RefP¬t™iÚ
 [
Idx
] . 
RefIndex
;

66 
šdex
 = 12 + (
Idx
 & 0x03) + ((Idx >> 2) << 3);

67 
»f_ÿche
 [
šdex
] = 
»f_ba£
[
»f_šdex
];

68 
mv_ÿche
 [
šdex
][0] = 
	`MV_CAL
(
mv_l0
[
šdex_mv
] , 
N®
 -> 
MvC®x
 [N® -> 
Lay”Id
]);

69 
mv_ÿche
 [
šdex
][1] = 
	`MV_CAL
(
mv_l0
[
šdex_mv
 + 1], 
N®
 -> 
MvC®y
 [N® -> 
Lay”Id
]);

73 iàĞ
N®
 -> 
PicToDi¥Ïy
){

75 
	`§m¶e_š‹½Ş©iÚ
(
DpbLuma
, 
DpbCb
, 
DpbCr
, 
Y
, 
U
, 
V
, 
mv_ÿche
, 
»f_ÿche
, 
x
, 
y
, 
PicWidthInPix
, 
PicHeightInPix
, 
RefPicLi¡L0
, 
š‹½Ş_4x4
);

77 
	}
}

87 
	$g‘_ba£_P_nÚ_dyadic
(
mv_ÿche
 [][2], *
»f_ÿche
, *
DpbLuma
, *
DpbCb
, *
DpbCr
,

88 *
image
, *
image_Cb
, *
image_Cr
, 
x
, 
y
,

89 
PicWidthInPix
, 
PicHeightInPix
, 
LIST_MMO
 *
RefPicLi¡L0
, *
»f_ba£
, cÚ¡ 
NAL
 *
N®
,

90 cÚ¡ 
š‹½Ş_4x4
 *š‹½Ş_4x4, 
REFPART
 *
RefP¬t™iÚ
)

95 
Idx
;

97  
Idx
 = 0 ; Idx < 16 ; Idx++ ) {

98 
»f_šdex
 = 
RefP¬t™iÚ
 [
Idx
] . 
RefIndex
;

99 
šdex
 = 12 + (
Idx
 & 0x03) + ((Idx >> 2) << 3);

100 
»f_ÿche
 [
šdex
] = 
»f_ba£
[
»f_šdex
];

103 iàĞ
N®
 -> 
PicToDi¥Ïy
){

105 
	`§m¶e_š‹½Ş©iÚ
(
DpbLuma
, 
DpbCb
,
DpbCr
, 
image
, 
image_Cb
, 
image_Cr
, 
mv_ÿche
, 
»f_ÿche
, 
x
 , 
y
, 
PicWidthInPix
, 
PicHeightInPix
, 
RefPicLi¡L0
, 
š‹½Ş_4x4
);

107 
	}
}

116 
	$g‘_ba£_B_mv
(
mv_ÿche_l0
 [][2], 
mv_ÿche_l1
 [][2], 
»f_ÿche_l0
 [], 
»f_ÿche_l1
 [],

117 *
DpbLuma
, *
DpbCb
, *
DpbCr
,

118 *
image
, *
image_Cb
, *
image_Cr
,

119 cÚ¡ 
x
, cÚ¡ 
y
, cÚ¡ 
PicWidthInPix
, cÚ¡ 
PicHeightInPix
,

120 
LIST_MMO
 *
RefPicLi¡L0
, LIST_MMO *
RefPicLi¡L1
, 
REFPART
 *
RefP¬t™iÚL0
, *
mv_l0
, 
mv_l1
[],

121 *
»f_l0
, *
»f_l1
, cÚ¡ 
NAL
 *
N®
, cÚ¡ 
š‹½Ş_4x4
 *interpol_4x4)

126 
image_l0
[256];

127 
image_l1
[256];

128 
image_Cb_l0
[64];

129 
image_Cb_l1
[64];

130 
image_Cr_l0
[64];

131 
image_Cr_l1
[64];

132 
Idx
, 
Sub_Idx
;

134 
REFPART
 *
RefP¬t™iÚL1
 = &
RefP¬t™iÚL0
[16];

136  
Idx
 = 0 ; Idx < 4 ; Idx++ ) {

137 
Sub_Idx
 = 0; Sub_Idx < 4; Sub_Idx++){

138 
šdex
 = 12 + 8 * 
Idx
 + 
Sub_Idx
;

139 
šdex_mv_l0
 = 
RefP¬t™iÚL0
 [
Sub_Idx
 + (
Idx
 << 2)] . 
MvIndex
;

140 
šdex_mv_l1
 = 
RefP¬t™iÚL1
 [
Sub_Idx
 + (
Idx
 << 2)] . 
MvIndex
;

141 
»f_šdex_l1
 = 
RefP¬t™iÚL1
 [
Sub_Idx
 + (
Idx
 << 2)] . 
RefIndex
;

142 
»f_šdex_l0
 = 
RefP¬t™iÚL0
 [
Sub_Idx
 + (
Idx
 << 2)] . 
RefIndex
;

143 
»f_ÿche_l0
 [
šdex
] = 
»f_l0
[
»f_šdex_l0
];

144 
»f_ÿche_l1
 [
šdex
] = 
»f_l1
[
»f_šdex_l1
];

145 ià(
»f_ÿche_l0
 [
šdex
] >= 0){

146 
mv_ÿche_l0
 [
šdex
][0] = 
	`MV_CAL
(
mv_l0
[
šdex_mv_l0
] , 
N®
 -> 
MvC®x
 [N® -> 
Lay”Id
]);

147 
mv_ÿche_l0
 [
šdex
][1] = 
	`MV_CAL
(
mv_l0
[
šdex_mv_l0
 + 1], 
N®
 -> 
MvC®y
 [N® -> 
Lay”Id
]);

150 ià(
»f_ÿche_l1
 [
šdex
] >= 0){

151 
mv_ÿche_l1
 [
šdex
][0] = 
	`MV_CAL
(
mv_l1
[
šdex_mv_l1
] , 
N®
 -> 
MvC®x
 [N® -> 
Lay”Id
]);

152 
mv_ÿche_l1
 [
šdex
][1] = 
	`MV_CAL
(
mv_l1
[
šdex_mv_l1
 + 1], 
N®
 -> 
MvC®y
 [N® -> 
Lay”Id
]);

158 iàĞ
N®
 -> 
PicToDi¥Ïy
){

159 
	`§m¶e_š‹½Ş©iÚ_maš
(
DpbLuma
, 
DpbCb
, 
DpbCr
, 
image_l0
, 
image_l1
, 
image_Cb_l0
, 
image_Cb_l1
,

160 
image_Cr_l0
, 
image_Cr_l1
, 
mv_ÿche_l0
, 
mv_ÿche_l1
, 
»f_ÿche_l0
, 
»f_ÿche_l1
,

161 
x
, 
y
, 
PicWidthInPix
, 
PicHeightInPix
 , 
RefPicLi¡L0
, 
RefPicLi¡L1
, 
š‹½Ş_4x4
);

163 
	`£t_image_4x4
(
image
, 
image_Cb
, 
image_Cr
, 
image_l0
, 
image_l1
, 
image_Cb_l0
, 
image_Cb_l1
,

164 
image_Cr_l0
, 
image_Cr_l1
, 
»f_ÿche_l0
, 
»f_ÿche_l1
, 
PicWidthInPix
);

166 
	}
}

175 
	$G‘Ba£BMvNÚDŸdic
(
mv_ÿche_l0
 [][2], 
mv_ÿche_l1
 [][2], 
»f_ÿche_l0
 [], 
»f_ÿche_l1
 [],

176 *
DpbLuma
, *
DpbCb
, *
DpbCr
,

177 *
image
, *
image_Cb
, *
image_Cr
,

178 cÚ¡ 
x
, cÚ¡ 
y
, cÚ¡ 
PicWidthInPix
, cÚ¡ 
PicHeightInPix
,

179 
LIST_MMO
 *
RefPicLi¡L0
, LIST_MMO *
RefPicLi¡L1
, 
REFPART
 *
RefP¬t™iÚL0
,

180 *
»f_l0
, *
»f_l1
, cÚ¡ 
NAL
 *
N®
, cÚ¡ 
š‹½Ş_4x4
 *interpol_4x4)

185 
image_l0
[256];

186 
image_l1
[256];

187 
image_Cb_l0
[64];

188 
image_Cb_l1
[64];

189 
image_Cr_l0
[64];

190 
image_Cr_l1
[64];

191 
Idx
, 
Sub_Idx
;

193 
REFPART
 *
RefP¬t™iÚL1
 = &
RefP¬t™iÚL0
[16];

195  
Idx
 = 0 ; Idx < 4 ; Idx++ ) {

196 
Sub_Idx
 = 0; Sub_Idx < 4; Sub_Idx++){

197 
šdex
 = 12 + 8 * 
Idx
 + 
Sub_Idx
;

198 
»f_šdex_l1
 = 
RefP¬t™iÚL1
 [
Sub_Idx
 + (
Idx
 << 2)] . 
RefIndex
;

199 
»f_šdex_l0
 = 
RefP¬t™iÚL0
 [
Sub_Idx
 + (
Idx
 << 2)] . 
RefIndex
;

200 
»f_ÿche_l0
 [
šdex
] = 
»f_l0
[
»f_šdex_l0
];

201 
»f_ÿche_l1
 [
šdex
] = 
»f_l1
[
»f_šdex_l1
];

206 iàĞ
N®
 -> 
PicToDi¥Ïy
){

207 
	`§m¶e_š‹½Ş©iÚ_maš
(
DpbLuma
, 
DpbCb
, 
DpbCr
, 
image_l0
, 
image_l1
, 
image_Cb_l0
, 
image_Cb_l1
,

208 
image_Cr_l0
, 
image_Cr_l1
, 
mv_ÿche_l0
, 
mv_ÿche_l1
, 
»f_ÿche_l0
, 
»f_ÿche_l1
,

209 
x
, 
y
, 
PicWidthInPix
, 
PicHeightInPix
 , 
RefPicLi¡L0
, 
RefPicLi¡L1
, 
š‹½Ş_4x4
);

211 
	`£t_image_4x4
(
image
 , 
image_Cb
, 
image_Cr
, 
image_l0
, 
image_l1
, 
image_Cb_l0
, 
image_Cb_l1
, 
image_Cr_l0
, 
image_Cr_l1
, 
»f_ÿche_l0
, 
»f_ÿche_l1
, 
PicWidthInPix
);

213 
	}
}

221 
	$SvcSkMÙiÚVeùÜ
(
mv_ÿche
[][2], cÚ¡ 
MvdLX
[2], cÚ¡ *
»f_ÿche
, 
mvLX
[2], 
šdex8
, 
·¹width
)

224 
RefC
, 
RefX
;

225 
RefA
 = 
»f_ÿche
[
šdex8
 - 1] > 
LIST_NOT_USED
 ?„ef_cache[index8 - 1]: 255;

226 
RefB
 = 
»f_ÿche
[
šdex8
 - 8] > 
LIST_NOT_USED
 ?„ef_cache[index8 - 8]: 255;

228 iàĞ
»f_ÿche
[
šdex8
 - 8 + 
·¹width
] =ğ
PART_NOT_AVAILABLE
){

229 
RefC
 = 
»f_ÿche
[
šdex8
 - 8 - 1] > 
LIST_NOT_USED
 ?„ef_cache[index8 - 8 - 1]: 255;

231 
RefC
 = 
»f_ÿche
[
šdex8
 - 8 + 
·¹width
] > 
LIST_NOT_USED
 ?„ef_cache[index8 - 8 +…artwidth]: 255;

234 
RefX
 = 
	`MIN
(
RefA
, MIN(
RefB
, 
RefC
));

236 ià(
RefX
 != 255){

237 
	`mÙiÚ_veùÜ
(
mv_ÿche
, 
MvdLX
, 
»f_ÿche
, 
mvLX
, 
RefX
, 
šdex8
, 
·¹width
);

238  
RefX
;

240 
mvLX
 [0] = mvLX [1] = 0;

243 
	}
}

	@lib_svc/motion_vector_svc.h

36 #iâdeà
MOTION_H


37 
	#MOTION_H


	)

40 
	~"svc_ty³.h
"

43 
SvcSkMÙiÚVeùÜ
(
mv_ÿche
[][2], cÚ¡ 
MvdLX
[2], cÚ¡ *
»f_ÿche
, 
mvLX
[2], 
šdex8
, 
·¹width
);

46 
g‘_ba£_P_dyadic
(
mv_ÿche
 [][2], *
»f_ÿche
, *
DpbLuma
, *
DpbCb
, *
DpbCr
,

47 *
image
, *
image_Cb
, *
image_Cr
, 
x
, 
y
,

48 
PicWidthInPix
, 
PicHeightInPix
, 
LIST_MMO
 *
RefPicLi¡L0
, *
mv_l0
, *
»f_ba£
,

49 
REFPART
 *
RefP¬t™iÚ
, cÚ¡ 
NAL
 *
N®
, cÚ¡ 
š‹½Ş_4x4
 *interpol_4x4);

51 
g‘_ba£_P_nÚ_dyadic
(
mv_ÿche
 [][2], *
»f_ÿche
, *
DpbLuma
, *
DpbCb
, *
DpbCr
,

52 *
image
, *
image_Cb
, *
image_Cr
, 
x
, 
y
,

53 
PicWidthInPix
, 
PicHeightInPix
, 
LIST_MMO
 * 
RefPicLi¡L0
, *
»f_ba£
, cÚ¡ 
NAL
 *
N®
,

54 cÚ¡ 
š‹½Ş_4x4
 *š‹½Ş_4x4, 
REFPART
 *
RefP¬t™iÚ
);

57 
g‘_ba£_B_mv
(
mv_ÿche_l0
 [][2], 
mv_ÿche_l1
 [][2], 
»f_ÿche_l0
 [], 
»f_ÿche_l1
 [],

58 *
DpbLuma
, *
DpbCb
, *
DpbCr
,

59 *
image
, *
image_Cb
, *
image_Cr
,

60 cÚ¡ 
x
, cÚ¡ 
y
, cÚ¡ 
PicWidthInPix
, cÚ¡ 
PicHeightInPix
,

61 
LIST_MMO
 *
RefPicLi¡L0
, LIST_MMO *
RefPicLi¡L1
, 
REFPART
 *
RefP¬t™iÚL0
,

62 *
mv_l0
, 
mv_l1
[], *
»f_l0
, *
»f_l1
, cÚ¡ 
NAL
 *
N®
,cÚ¡ 
š‹½Ş_4x4
 *interpol_4x4);

64 
G‘Ba£BMvNÚDŸdic
(
mv_ÿche_l0
 [][2], 
mv_ÿche_l1
 [][2], 
»f_ÿche_l0
 [], 
»f_ÿche_l1
 [],

65 *
DpbLuma
, *
DpbCb
, *
DpbCr
,

66 *
image
, *
image_Cb
, *
image_Cr
,

67 cÚ¡ 
x
, cÚ¡ 
y
, cÚ¡ 
PicWidthInPix
, cÚ¡ 
PicHeightInPix
,

68 
LIST_MMO
 *
RefPicLi¡L0
, LIST_MMO *
RefPicLi¡L1
, 
REFPART
 *
RefP¬t™iÚL0
,

69 *
»f_l0
, *
»f_l1
, cÚ¡ 
NAL
 *
N®
,cÚ¡ 
š‹½Ş_4x4
 *interpol_4x4);

	@lib_svc/nal_unit_header_svc_extension.c

34 
	~<¡ršg.h
>

38 
	~"ty³.h
"

39 
	~"Çl.h
"

40 
	~"b™¡»am.h
"

41 
	~"¦iû_d©a_vlc.h
"

45 
	~"svc_ty³.h
"

46 
	~"£t_Ïy”.h
"

47 
	~"Sw™chAd»ss.h
"

48 
	~"pic_li¡_svc.h
"

49 
	~"Çl_un™_h—d”_svc_ex‹nsiÚ.h
"

53 
RemašBy‹s
 ;

55 
	$RemoveEmuÏtiÚBy‹s
(*
d©a
, *
rb¥_by‹
, *
By‹sR—d
)

57 
i
;

58 
off£t
;

59 
N®InRb¥
 = 0;

60 
N®L’ght
 = 
	`£¬ch_¡¬t_code
(
d©a
, &
off£t
);

63  
i
 = 
off£t
 ; i < 
N®L’ght
 + offset; i++ ) {

64 
rb¥_by‹
 [
N®InRb¥
++] = 
d©a
 [
i
];

65 iàĞ
i
 + 2 < (
N®L’ght
 + 
off£t
è&& 
	`show3By‹s_N®
(
d©a
, i) == 3 ) {

66 
rb¥_by‹
 [
N®InRb¥
++] = 
d©a
 [
i
++] ;

67 
i
 ++ ;

71 
rb¥_by‹
 [
N®InRb¥
] = 
d©a
 [
i
];

72 *
By‹sR—d
 = 
N®L’ght
 + 
off£t
;

73  
N®InRb¥
;

74 
	}
}

89 
	$G‘N®By‹sInN®un™
 (*
d©a
, *
rb¥_by‹
, *
NumBy‹sInRBSP
, 
CÚfigSVC
 *
SŒ—mTy³
)

92 
i
;

93 
off£t
;

94 
Çl_un™_ty³
;

95 *
NextN®
;

96 
NBInRBSP
 = 0;

97 
N®InRBSP
 = 
	`£¬ch_¡¬t_code
(
d©a
, &
off£t
);

99  
i
 = 
off£t
 ; i < 
N®InRBSP
 + offset; i++ ) {

100 
rb¥_by‹
 [
NBInRBSP
++] = 
d©a
 [
i
];

101 iàĞ
i
 + 2 < (
N®InRBSP
 + 
off£t
è&& 
	`show3By‹s_N®
(
d©a
, i) == 3 ) {

102 
rb¥_by‹
 [
NBInRBSP
++] = 
d©a
 [
i
++] ;

103 
i
 ++ ;

107 
rb¥_by‹
 [
NBInRBSP
] = 
d©a
 [
i
];

108 *
NumBy‹sInRBSP
 = 
N®InRBSP
 + 
off£t
;

111 if(*
NumBy‹sInRBSP
 < 
RemašBy‹s
){

112 
N®InRBSP
 = 0;

115 
off£t
 = 0 ; 
N®InRBSP
 != 1 ; offset++ )

116 
N®InRBSP
 = 
	`show3By‹s_N®
(
d©a
, 
off£t
);

118 
off£t
 += 2;

121 
NextN®
 = &
d©a
[
i
 + 
off£t
];

122 
Çl_un™_ty³
 = 
NextN®
[0] & 0x1F;

125 iàĞ
Çl_un™_ty³
 == 14 ||‚al_unit_type == 20){

126 
Pos™iÚ
 = 8;

127 
Re£rvedOÃB™s
 = 
	`g‘Nb™s
(
NextN®
, &
Pos™iÚ
, 9) ;

128 
D•’d’cyId
 = 
	`g‘Nb™s
(
NextN®
, &
Pos™iÚ
, 3) ;

129 
Qu®™yId
 = 
	`g‘Nb™s
(
NextN®
, &
Pos™iÚ
, 4) ;

130 
SŒ—mTy³
 -> 
NextDqId
 = (
D•’d’cyId
 << 4 ) + 
Qu®™yId
;

134  
NBInRBSP
 ;

135 
	}
}

143 
	$Sw­Rb¥Bufãr
(*
rb¥_by‹
, 
NALSTREAMER
 *
N®SŒ—m”
)

145 
La¡N®Size
 = 
N®SŒ—m”
 -> 
N®Size
[N®SŒ—m” -> 
N®ToSŒ—m
 - 1];

146 
N®SŒ—m”
 -> 
TÙ®AuSize
 -ğ
La¡N®Size
;

147 
	`memmove
(
rb¥_by‹
, &rb¥_by‹[
La¡N®Size
], 
N®SŒ—m”
 -> 
TÙ®AuSize
 * ());

148 
	}
}

154 
	$G‘N®By‹sAuSVC
 (*
d©a
, *
rb¥_by‹
, *
R—dNewBy‹
, 
CÚfigSVC
 *
SŒ—mTy³
,

155 
NALSTREAMER
 *
N®SŒ—m”
, 
SPS
 *
Sps
, 
PPS
 *
Pps
)

158 if(*
R—dNewBy‹
){

159 
By‹R—d
 = 0;

160 *
N®Size
 = 
N®SŒ—m”
 -> NalSize;

161 
AuCom¶‘e
 = 0;

162 *
NbN®
 = &
N®SŒ—m”
 -> NbNal;

163 *
Rb¥
 = 
rb¥_by‹
;

164 
NAL
 
N®
[1];

166 
	`š™_Çl_¡ruù
(
N®
, 4);

167 if(
N®SŒ—m”
 -> 
TÙ®AuSize
){

168 
N®SŒ—m”
 -> 
TÙ®AuSize
 = 0;

169 
N®SŒ—m”
 -> 
NbN®
 = 0;

170 
N®SŒ—m”
 -> 
N®ToSŒ—m
 = 0;

171 
N®SŒ—m”
 -> 
TÙ®DecodedBy‹s
 = 0;

172 
N®SŒ—m”
 -> 
F¿meCouÁ
 = 0;

176 !
AuCom¶‘e
){

177 
N®Size
 [*
NbN®
] = 
	`RemoveEmuÏtiÚBy‹s
(
d©a
, 
Rb¥
, &
By‹R—d
);

178 
AuCom¶‘e
 = 
	`IsAuCom¶‘e
(
Rb¥
, 
N®Size
[*
NbN®
], 
Pps
, 
Sps
, 
N®
, *NbN®, &
N®SŒ—m”
 -> 
Poc
, &N®SŒ—m” -> 
F¿meCouÁ
);

179 
d©a
 +ğ
By‹R—d
;

180 
Rb¥
 +ğ
N®Size
[*
NbN®
];

181 
N®SŒ—m”
 -> 
TÙ®AuSize
 +ğ
N®Size
[*
NbN®
];

182 if(!
AuCom¶‘e
){

183 
N®SŒ—m”
 -> 
TÙ®DecodedBy‹s
 +ğ
By‹R—d
;

185 (*
NbN®
)++;

187 
SŒ—mTy³
 -> 
DqIdMax
 = 
N®
 -> DqIdMax;

188 *
R—dNewBy‹
 = 0;

189 if(
AuCom¶‘e
 == 2){

191 
N®SŒ—m”
 -> 
N®Size
[(*
NbN®
) - 1] = 0;

192 
N®SŒ—m”
 -> 
NbN®
++;

193 
N®SŒ—m”
 -> 
EndOfSequ’û
 = N®SŒ—m” -> 
NbN®
;

196 
	`Sw­Rb¥Bufãr
(
rb¥_by‹
, 
N®SŒ—m”
);

198 if((
N®SŒ—m”
 -> 
NbN®
 <ğN®SŒ—m” -> 
N®ToSŒ—m
 + 2è&& !N®SŒ—m” -> 
EndOfSequ’û
){

199 *
R—dNewBy‹
 = 
N®SŒ—m”
 -> 
TÙ®DecodedBy‹s
;

200  
N®SŒ—m”
 -> 
N®Size
[N®SŒ—m” -> 
N®ToSŒ—m
++];

201 }if((
N®SŒ—m”
 -> 
EndOfSequ’û
 <ğN®SŒ—m” -> 
N®ToSŒ—m
 + 2) && NalStreamer -> EndOfSequence){

202 if(
N®SŒ—m”
 -> 
EndOfSequ’û
 =ğN®SŒ—m” -> 
N®ToSŒ—m
 + 2){

203  
N®SŒ—m”
 -> 
N®Size
[N®SŒ—m” -> 
N®ToSŒ—m
++];

205  
N®SŒ—m”
 -> 
N®Size
[N®SŒ—m” -> 
N®ToSŒ—m
];

208  
N®SŒ—m”
 -> 
N®Size
[N®SŒ—m” -> 
N®ToSŒ—m
++];

209 
	}
}

218 
	$š™_Çl_¡ruù
(
NAL
 *
N®
, 
MaxLay”
){

219 
	`mem£t
(
N®
, '\0',(
NAL
));

220 
	`mem£t
(&
N®
 -> 
Ïy”_id_bË
, -1, 8 * ());

221 
	`mem£t
(&
N®
 -> 
U£dS·tŸl
, -1, 64 * ());

222 
N®
 -> 
DqId
 = 0;

223 
N®
 -> 
MaxNumLay”
 = 
MaxLay”
;

224 
N®
 -> 
TempToDi¥Ïy
 = 255;

225 
	}
}

232 
	$N®Un™SVC
(*
d©a_š
, *
Çl_un™_ty³
, *
Çl_»f_idc
, 
NAL
 *
N®
)

236 
tmp
 = 
d©a_š
[0];

237 
N®
 -> 
N®RefIdc
 = *
Çl_»f_idc
 = 
tmp
 >> 5 ;

238 
N®
 -> 
N®Un™Ty³
 = *
Çl_un™_ty³
 = 
tmp
 & 0x1F ;

241 
N®
 -> 
no_š‹r_Ïy”_´ed_æag
 = 1;

242 iàĞ*
Çl_un™_ty³
 == 5){

243 
N®
 -> 
IdrFÏg
 = 1;

245 
N®
 -> 
IdrFÏg
 = 0;

249 if(
N®
 -> 
N®Un™Ty³
 < 6){

250 
N®
 -> 
Lay”Id
 = 0;

252 
	}
}

258 
	$Upd©eTempTodi¥Ïy
(
NAL
 *
N®
)

260 ià(
N®
 -> 
ComTempId
){

262 ià(
N®
 -> 
ComTempId
 == 3){

264 if(
N®
 -> 
TempWª‹d
 <ğN® -> 
MaxTempÜ®Id
){

265 
N®
 -> 
TempToDi¥Ïy
 = N® -> 
TempWª‹d
;

267 }if(
N®
 -> 
ComTempId
 == 2){

269 if(
N®
 -> 
TempToDi¥Ïy
 < N® -> 
MaxTempÜ®Id
){

270 
N®
 -> 
TempToDi¥Ïy
++;

272 }if(
N®
 -> 
ComTempId
 == 1){

274 if(
N®
 -> 
TempToDi¥Ïy
 > N® -> 
MaxTempÜ®Id
){

275 
N®
 -> 
TempToDi¥Ïy
 = N® -> 
MaxTempÜ®Id
;

277 if(
N®
 -> 
TempToDi¥Ïy
 > 0){

278 
N®
 -> 
TempToDi¥Ïy
--;

281 
N®
 -> 
ComTempId
 = 0;

283 
	}
}

289 
	$S‘PicToDi¥Ïy
(
NAL
 *
N®
)

292 
	`Upd©eTempTodi¥Ïy
(
N®
);

294 ià(
N®
 -> 
TempÜ®Id
 <ğN® -> 
TempToDi¥Ïy
){

296 
N®
 -> 
N®ToSk
 = 0;

298 
N®
 -> 
N®ToSk
 = 1;

302 ifĞ(
N®
 -> 
DqId
 < N® -> 
DqIdToDi¥Ïy
 && N® -> 
DisÿrdabËFÏg
) || (Nal -> DqId > Nal -> DqIdToDisplay) ){

305 
N®
 -> 
PicToDi¥Ïy
 = 0;

306 
N®
 -> 
N®ToSk
 = 1;

307 }ià(
N®
 -> 
DqId
 < N® -> 
DqIdToDi¥Ïy
 && N® -> DqId !ğN® -> 
DqIdMax
){

308 
N®
 -> 
PicToDi¥Ïy
 = 0;

310 
N®
 -> 
PicToDi¥Ïy
 = !N® -> 
N®ToSk
;

314 if(!
N®
 -> 
N®ToSk
){

315 
N®
 -> 
La¡DecodedId
 = N® -> 
Lay”Id
;

317 
	}
}

324 
	$N®Un™D©a
(*
D©a
, *
pos™iÚ
, 
NAL
 *
N®
, *
EndOfSliû
)

327 
	`g‘Nb™s
(
D©a
, 
pos™iÚ
, 1) ;

328 
N®
 -> 
IdrFÏg
 = 
	`g‘Nb™s
(
D©a
, 
pos™iÚ
, 1) ;

329 
	`g‘Nb™s
(
D©a
, 
pos™iÚ
, 6) ;

330 
N®
 -> 
no_š‹r_Ïy”_´ed_æag
 = 
	`g‘Nb™s
(
D©a
, 
pos™iÚ
, 1) ;

331 
N®
 -> 
D•’d’cyId
 = 
	`g‘Nb™s
(
D©a
, 
pos™iÚ
, 3) ;

332 
N®
 -> 
Qu®™yId
 = 
	`g‘Nb™s
(
D©a
, 
pos™iÚ
, 4) ;

333 
N®
 -> 
DqId
 = ( N® -> 
D•’d’cyId
 << 4 ) + N® -> 
Qu®™yId
;

334 
N®
 -> 
TempÜ®Id
 = 
	`g‘Nb™s
(
D©a
, 
pos™iÚ
, 3) ;

335 
N®
 -> 
U£RefBa£PicFÏg
 = 
	`g‘Nb™s
(
D©a
, 
pos™iÚ
, 1) ;

336 
N®
 -> 
DisÿrdabËFÏg
 = 
	`g‘Nb™s
(
D©a
, 
pos™iÚ
, 1) ;

337 
	`g‘Nb™s
(
D©a
, 
pos™iÚ
, 1) ;

338 
	`g‘Nb™s
(
D©a
, 
pos™iÚ
, 2) ;

340 
N®
 -> 
Lay”Id
 = 
	`G‘Lay”Numb”
(N®, N® -> 
DqId
);

343 ià(
N®
 -> 
D•’d’cyIdMax
 < N® -> 
D•’d’cyId
){

344 
N®
 -> 
D•’d’cyIdMax
 = N® -> 
D•’d’cyId
;

348 ià(
N®
 -> 
DqIdMax
 < N® -> 
DqId
){

349 
N®
 -> 
DqIdMax
 = N® -> 
DqId
;

350 
N®
 -> 
DqIdToDi¥Ïy
 = N® -> 
DqIdWª‹d
;

354 ià(
N®
 -> 
MaxTempÜ®Id
 < N® -> 
TempÜ®Id
){

355 
N®
 -> 
MaxTempÜ®Id
 = N® -> 
TempÜ®Id
;

358 
N®
 -> 
E¼ÜD‘eùed
 = 0;

359 if(
N®
 -> 
La¡DqId
 !ğN® -> 
DqId
 && *
EndOfSliû
){

361 
N®
 -> 
E¼ÜD‘eùed
 = 1;

363 
	}
}

370 
	$P»fixN®Un™
(*
D©a
, *
N®InRb¥
, 
NAL
 *
N®
, 
MMO
 *
Mmo
, 
SPS
 *
Sps
, *
EndOfSliû
)

373 
pos™iÚ
 = 8;

377 
	`N®Un™D©a
(
D©a
, &
pos™iÚ
, 
N®
, 
EndOfSliû
);

380 ià(
N®
 -> 
DqIdMax
 < N® -> 
DqId
){

381 
N®
 -> 
DqIdMax
 = N® -> 
DqId
;

382 
N®
 -> 
DqIdToDi¥Ïy
 = N® -> 
DqIdWª‹d
;

386 ià(
N®
 -> 
D•’d’cyIdMax
 < N® -> 
D•’d’cyId
){

387 
N®
 -> 
D•’d’cyIdMax
 = N® -> 
D•’d’cyId
;

391 
N®
 -> 
Ïy”_id_bË
 [0] = N® -> 
DqId
;

393 ifĞ
N®
 -> 
N®RefIdc
 != 0 ) {

394 
N®
 -> 
StÜeRefBa£PicFÏg
 = 
	`g‘Nb™s
(
D©a
, &
pos™iÚ
, 1) ;

395 ifĞĞ
N®
 -> 
U£RefBa£PicFÏg
 || N® -> 
StÜeRefBa£PicFÏg
 ) && !N® -> 
IdrFÏg
){

396 
	`DecRefBa£PicM¬kšg
(
D©a
, &
pos™iÚ
, 
Mmo
, 
Sps
, 
N®
);

399 ifĞ
	`g‘Nb™s
(
D©a
, &
pos™iÚ
, 1) == 1 ){

400  
	`mÜe_rb¥_d©a
(
D©a
, &
pos™iÚ
, 
N®InRb¥
 ) ){

401 
	`g‘Nb™s
(
D©a
, &
pos™iÚ
, 1);

405 
	}
}

420 
	$N®Un™H—d”
 (*
D©a
, *
pos™iÚ
, 
NAL
 *
N®
, *
EndOfSliû
)

423 
i
, 
j
;

426 *
pos™iÚ
 = 8;

427 
N®
 -> 
La¡Lay”Id
 = N® -> 
Lay”Id
;

428 
N®
 -> 
La¡DqId
 = N® -> 
DqId
;

429 
N®
 -> 
La¡TempÜ®Id
 = N® -> 
TempÜ®Id
;

432 
	`N®Un™D©a
(
D©a
, 
pos™iÚ
, 
N®
, 
EndOfSliû
);

435  
i
 = 1; i < 8; i++){

436 iàĞ
N®
 -> 
Ïy”_id_bË
[
i
] == -1){

437 
N®
 -> 
Ïy”_id_bË
[
i
] = N® -> 
DqId
;

438 
N®
 -> 
Lay”Id
 = 
i
;

441 if(
N®
 -> 
Ïy”_id_bË
[
i
] =ğN® -> 
DqId
){

442 
N®
 -> 
Lay”Id
 = 
i
;

445 if(
N®
 -> 
Ïy”_id_bË
[
i
] > N® -> 
DqId
){

446 
N®
 -> 
Lay”Id
 = 
i
;

447  
j
 = 
i
; j < 7; j ++){

448 
N®
 -> 
Ïy”_id_bË
[
i
 + 1] = Nal ->†ayer_id_table[i];

450 
N®
 -> 
Ïy”_id_bË
[
i
] = N® -> 
DqId
;

456 ià(
N®
 -> 
DqIdMax
 =ğ255 && N® -> 
Lay”Id
 > N® -> 
MaxNumLay”
 - 1){

457 
N®
 -> 
Lay”Id
 = N® -> 
MaxNumLay”
 - 1;

459 
	}
}

468 
	$NextN®DqId
(
CÚfigSVC
 *
SŒ—mTy³
, 
NAL
 *
N®
)

472 
N®
 -> 
DqIdMax
 = 
SŒ—mTy³
 -> DqIdMax;

475 
N®
 -> 
ComDqId
 = 
SŒ—mTy³
 -> 
S‘Lay”
;

476 
N®
 -> 
ComTempId
 = 
SŒ—mTy³
 -> 
TempÜ®Com
;

477 ifĞ
SŒ—mTy³
 -> 
TempÜ®Com
 == 3){

478 
N®
 -> 
TempWª‹d
 = 
SŒ—mTy³
 -> 
TempÜ®Id
;

482 ià(
N®
 -> 
Ïy”_id_bË
 [0] == -1){

484 
	`memıy
(
N®
 -> 
Ïy”_id_bË
, 
SŒ—mTy³
 ->†ayer_id_table, 8 * ());

485 
	`memıy
(
N®
 -> 
U£dS·tŸl
, 
SŒ—mTy³
 -> UsedSpatial, 64 * ());

487 
	}
}

495 
	$NextN®DqIdPÏy”
(
CÚfigSVC
 *
SŒ—mTy³
, 
NAL
 *
N®
, *
CommªdLay”
)

499 if(
N®
 -> 
DqIdMax
 < 
CommªdLay”
[0]){

502 
N®
 -> 
DqIdToDi¥Ïy
 = N® -> 
DqIdWª‹d
;

504 
N®
 -> 
DqIdMax
 = 
CommªdLay”
[0];

506 
N®
 -> 
ComDqId
 = 
CommªdLay”
[1];

507 if(!
N®
 -> 
ComTempId
){

508 
N®
 -> 
ComTempId
 = 
CommªdLay”
[2];

509 
CommªdLay”
[2] = 0;

511 ifĞ
N®
 -> 
ComTempId
 == 3){

512 
N®
 -> 
TempWª‹d
 = 
CommªdLay”
[3];

514 
	}
}

524 
	$IsPicToDecode
(
NAL
 *
N®
){

526 
Wª‹dLay”Numb”
 = 
	`G‘Lay”Numb”
 (
N®
, N® -> 
DqIdToDi¥Ïy
);

527 
N®
 -> 
PicToDecode
 = N® -> 
PicToDi¥Ïy
 || (N® -> 
U£dS·tŸl
 [N® -> 
Lay”Id
] [
Wª‹dLay”Numb”
] > 0);

528 
	}
}

	@lib_svc/nal_unit_header_svc_extension.h

34 #iâdeà
NAL_UNIT_H


35 
	#NAL_UNIT_H


	)

38 
	~"svc_ty³.h
"

40 
š™_Çl_¡ruù
(
NAL
 *
N®
, 
MaxNumLay”
);

41 
IsPicToDecode
(
NAL
 *
N®
);

42 
S‘DefRecPic
(
NAL
 *
N®
, *
do_dec_»f_pic_m¬kšg_ba£
);

43 
S‘PicToDi¥Ïy
(
NAL
 *
N®
);

44 
CheckSkPicToDi¥Ïy
(
NAL
 *
N®
, 
EndOfSliû
);

45 
NextN®DqId
(
CÚfigSVC
 *
SŒ—mTy³
, 
NAL
 *
N®
);

46 
NextN®DqIdPÏy”
(
CÚfigSVC
 *
SŒ—mTy³
, 
NAL
 *
N®
, *
CommªdLay”
);

47 
P»fixN®Un™
(*
D©a
, *
N®InRb¥
, 
NAL
 *
N®
, 
MMO
 *
Mmo
, 
SPS
 *
Sps
, *
EndOfSliû
);

48 
N®Un™SVC
(*
d©a_š
, *
Çl_un™_ty³
, *
Çl_»f_idc
, 
NAL
 *
N®
);

49 
sub£t_¥s
 (*
d©a
, *
N®InRb¥
, 
SPS
 *
¥s
, 
NAL
 *
N®
);

50 
N®Un™H—d”
 (*
D©a
, *
pos™iÚ
, 
NAL
 *
N®
, *
EndOfSliû
);

51 
N®Un™D©a
(*
D©a
, *
pos™iÚ
, 
NAL
 *
N®
, *
EndOfSliû
);

52 
IsAuCom¶‘e
(*
N®InRb¥
, 
N®InRBSP
, 
PPS
 *
Pps
, 
SPS
 *
Sps
, 
NAL
 *
N®
,

53 
N®CouÁ
, *
Poc
, *
F¿meCouÁ
);

	@lib_svc/pic_list_svc.c

34 
	~<¡ršg.h
>

37 
	~"ty³.h
"

38 
	~"pic_li¡.h
"

39 
	~"piùu»_mªagem’t.h
"

40 
	~"b™¡»am.h
"

41 
	~"¦iû_h—d”.h
"

44 
	~"svc_d©a.h
"

45 
	~"£t_Ïy”.h
"

46 
	~"pic_li¡_svc.h
"

51 
	$S‘DecRefLay”
(
NAL
 *
N®
, 
MMO
 *
Mmo
, 
LAYER_MMO
 *
Lay”Mmo
, 
Ba£D•’d’cy
 )

53 
i
;

54 
Lay”Id
 = 
	`G‘Lay”Numb”
(
N®
, 
Ba£D•’d’cy
 << 4);

57 
i
 = 
Lay”Id
; (
N®
 -> 
Ïy”_id_bË
 [i] >> 4è=ğ
Ba£D•’d’cy
; i++){

58 
Mmo
 -> 
Lay”MMO
 [
i
] . 
šdex
 = 
Lay”Mmo
 -> index;

59 if(
Lay”Mmo
 -> 
šdex
){

60 
	`memıy
(
Mmo
 -> 
Lay”MMO
 [
i
] . 
Mmco
, 
Lay”Mmo
 -> Mmco, Lay”MmØ-> 
šdex
 * (
MMCO
));

63 
	}
}

67 
	$DecRefBa£PicM¬kšg
(*
d©a
, *
pos™iÚ
, 
MMO
 *
Mmo
, 
SPS
 *
¥s
, 
NAL
 *
N®
) {

70 ià(
	`g‘Nb™s
(
d©a
, 
pos™iÚ
, 1) ) {

71 
Ba£D•’d’cy
 = (
N®
 -> 
DqId
 >> 4) - 1;

72 
Lay”Id
 = 
	`G‘Lay”Numb”
(
N®
, 
Ba£D•’d’cy
 << 4);

73 
LAYER_MMO
 *
Lay”Mmo
 = &
Mmo
 -> 
Lay”MMO
 [
Lay”Id
];

74 
	`G‘MMCOO³¿tiÚCode
(
¥s
, 
Lay”Mmo
, 
d©a
, 
pos™iÚ
);

75 
	`S‘DecRefLay”
(
N®
, 
Mmo
, 
Lay”Mmo
, 
Ba£D•’d’cy
);

77 
	}
}

	@lib_svc/pic_list_svc.h

34 #iâdeà
PIC_LIST_SVC_H


35 
	#PIC_LIST_SVC_H


	)

37 
	~"ty³.h
"

38 
	~"svc_ty³.h
"

40 
DecRefBa£PicM¬kšg
(*
d©a
, * 
pos™iÚ
, 
MMO
 *
Mmo
, 
SPS
 *
¥s
, 
NAL
 *
N®
) ;

41 
S‘DecRefLay”
(
NAL
 *
N®
, 
MMO
 *
Mmo
, 
LAYER_MMO
 *
Lay”Mmo
, 
Ba£D•’d’cy
 ) ;

	@lib_svc/residual_4x4.c

34 
	~"¡ršg.h
"

37 
	~"T¿nsfÜm.h
"

38 
	~"quªtiz©iÚ.h
"

42 
	~"iù_svc.h
"

43 
	~"»sidu®_4x4.h
"

44 
	~"Residu®Proûssšg.h
"

51 
	$AddRes4x4
 ( *
image
, cÚ¡ 
RESIDU
 *
Cu¼Residu
, cÚ¡ 
PicWidthInPix
, cÚ¡ 
W4x4_š‹r
 [6][16])

53 
i8x8
 ;

54 
luma_cÛff
 [16];

57  
i8x8
 = 0 ; i8x8 < 4 ; i8x8++ ) {

58 ià(
Cu¼Residu
 -> 
Cbp
 & (1 << 
i8x8
)){

60 
locx
 = ((
i8x8
 & 1) << 3);

61 
locy
 = ((
i8x8
 & 2) << 2);

64 
šdex
 = 
i8x8
 << 6;

65 
	`»sÿË_4x4_»sidu®
(
Cu¼Residu
 -> 
Qp
, &Cu¼Residu -> 
LumaLev–
 [
šdex
], 
luma_cÛff
, 
W4x4_š‹r
);

66 
	`SVC4x4Add
(
luma_cÛff
, &
image
[
locx
 + 
locy
 * 
PicWidthInPix
], PicWidthInPix);

68 
šdex
 += 16;

69 
	`»sÿË_4x4_»sidu®
(
Cu¼Residu
 -> 
Qp
, &Cu¼Residu -> 
LumaLev–
 [
šdex
], 
luma_cÛff
, 
W4x4_š‹r
);

70 
	`SVC4x4Add
(
luma_cÛff
, &
image
[
locx
 + 4 + 
locy
 * 
PicWidthInPix
], PicWidthInPix);

72 
šdex
 += 16;

73 
	`»sÿË_4x4_»sidu®
(
Cu¼Residu
 -> 
Qp
, &Cu¼Residu -> 
LumaLev–
 [
šdex
], 
luma_cÛff
, 
W4x4_š‹r
);

74 
	`SVC4x4Add
(
luma_cÛff
, &
image
[
locx
 + (
locy
 + 4è* 
PicWidthInPix
], PicWidthInPix);

76 
šdex
 += 16;

77 
	`»sÿË_4x4_»sidu®
(
Cu¼Residu
 -> 
Qp
, &Cu¼Residu -> 
LumaLev–
 [
šdex
], 
luma_cÛff
, 
W4x4_š‹r
);

78 
	`SVC4x4Add
(
luma_cÛff
, &
image
[4 + 
locx
 + (
locy
 + 4è* 
PicWidthInPix
], PicWidthInPix);

81 
	}
}

88 
	$StÜeRes4x4
 ( *
image
, cÚ¡ 
RESIDU
 *
Cu¼Residu
, cÚ¡ 
PicWidthInPix
, cÚ¡ 
W4x4_š‹r
 [6][16])

90 
i8x8
, 
i
, 
j
 ;

91 
šdex
 ;

92 
luma_cÛff
 [16];

95  
i8x8
 = 0 ; i8x8 < 4 ; i8x8++ ) {

96 ià(
Cu¼Residu
 -> 
Cbp
 & (1 << 
i8x8
)) {

98 
locx
 = ((
i8x8
 & 1) << 3);

99 
locy
 = ((
i8x8
 & 2) << 2);

102 
šdex
 = 
i8x8
 << 6;

103 
	`»sÿË_4x4_»sidu®
(
Cu¼Residu
 -> 
Qp
, &Cu¼Residu -> 
LumaLev–
 [
šdex
], 
luma_cÛff
, 
W4x4_š‹r
);

104 
	`SVC4x4StÜe
(
luma_cÛff
, &
image
[
locx
 + 
locy
 * 
PicWidthInPix
], PicWidthInPix);

106 
šdex
 += 16;

107 
	`»sÿË_4x4_»sidu®
(
Cu¼Residu
 -> 
Qp
, &Cu¼Residu -> 
LumaLev–
 [
šdex
], 
luma_cÛff
, 
W4x4_š‹r
);

108 
	`SVC4x4StÜe
(
luma_cÛff
, &
image
[
locx
 + 4 + 
locy
 * 
PicWidthInPix
], PicWidthInPix);

110 
šdex
 += 16;

111 
	`»sÿË_4x4_»sidu®
(
Cu¼Residu
 -> 
Qp
, &Cu¼Residu -> 
LumaLev–
 [
šdex
], 
luma_cÛff
, 
W4x4_š‹r
);

112 
	`SVC4x4StÜe
(
luma_cÛff
, &
image
[
locx
 + (
locy
 + 4è* 
PicWidthInPix
], PicWidthInPix);

114 
šdex
 += 16;

115 
	`»sÿË_4x4_»sidu®
(
Cu¼Residu
 -> 
Qp
, &Cu¼Residu -> 
LumaLev–
 [
šdex
], 
luma_cÛff
, 
W4x4_š‹r
);

116 
	`SVC4x4StÜe
(
luma_cÛff
, &
image
[4 + 
locx
 + (
locy
 + 4è* 
PicWidthInPix
], PicWidthInPix);

119 
locx
 = ((
i8x8
 & 1) << 3);

120 
locy
 = ((
i8x8
 & 2) << 2);

121  
i
 = 0; i < 8; i++){

122  
j
 = 0; j < 8; j++){

123 
image
[
locx
 + 
i
 + (
j
 + 
locy
è* 
PicWidthInPix
] = 0;

128 
	}
}

136 
	$SCÛff4x4AddRes
 (*
image
, 
RESIDU
 *
Cu¼Residu
, cÚ¡ 
PicWidthInPix
)

138 
i8x8
;

141  
i8x8
 = 0 ; i8x8 < 4 ; i8x8++ ) {

143 
locx
 = ((
i8x8
 & 1) << 3);

144 
locy
 = ((
i8x8
 & 2) << 2);

147 
šdex
 = 
i8x8
 << 6;

148 
	`SVC4x4Add
(&
Cu¼Residu
 -> 
LumaLev–
 [
šdex
], &
image
[
locx
 + 
locy
 * 
PicWidthInPix
], PicWidthInPix);

151 
šdex
 += 16;

152 
	`SVC4x4Add
(&
Cu¼Residu
 -> 
LumaLev–
 [
šdex
], &
image
[
locx
 + 4 + 
locy
 * 
PicWidthInPix
], PicWidthInPix);

154 
šdex
 += 16;

155 
	`SVC4x4Add
(&
Cu¼Residu
 -> 
LumaLev–
 [
šdex
], &
image
[
locx
 + (
locy
 + 4è* 
PicWidthInPix
], PicWidthInPix);

157 
šdex
 += 16;

158 
	`SVC4x4Add
(&
Cu¼Residu
 -> 
LumaLev–
 [
šdex
], &
image
[4 + 
locx
 + (
locy
 + 4è* 
PicWidthInPix
], PicWidthInPix);

160 
	}
}

169 
	$SCÛff4x4AddPic
 ( *
image
, 
RESIDU
 *
Cu¼Residu
, cÚ¡ 
PicWidthInPix
)

171 
i8x8
;

174  
i8x8
 = 0 ; i8x8 < 4 ; i8x8++ ) {

176 
locx
 = ((
i8x8
 & 1) << 3);

177 
locy
 = ((
i8x8
 & 2) << 2);

180 
šdex
 = 
i8x8
 << 6;

181 
	`iù_4x4_»sidu®
(&
Cu¼Residu
 -> 
LumaLev–
 [
šdex
], &
image
[
locx
 + 
locy
 * 
PicWidthInPix
], PicWidthInPix);

184 
šdex
 += 16;

185 
	`iù_4x4_»sidu®
(&
Cu¼Residu
 -> 
LumaLev–
 [
šdex
], &
image
[
locx
 + 4 + 
locy
 * 
PicWidthInPix
], PicWidthInPix);

187 
šdex
 += 16;

188 
	`iù_4x4_»sidu®
(&
Cu¼Residu
 -> 
LumaLev–
 [
šdex
], &
image
[
locx
 + (
locy
 + 4è* 
PicWidthInPix
], PicWidthInPix);

190 
šdex
 += 16;

191 
	`iù_4x4_»sidu®
(&
Cu¼Residu
 -> 
LumaLev–
 [
šdex
], &
image
[4 + 
locx
 + (
locy
 + 4è* 
PicWidthInPix
], PicWidthInPix);

193 
	}
}

	@lib_svc/residual_4x4.h

34 #iâdeà
RES_4x4_H


35 
	#RES_4x4_H


	)

37 
	~"svc_ty³.h
"

44 
StÜeRes4x4
 ( *
image
, cÚ¡ 
RESIDU
 *
Cu¼Residu
, cÚ¡ 
PicWidthInPix
, cÚ¡ 
W4x4_š‹r
 [6][16]);

45 
AddRes4x4
 ( *
image
, cÚ¡ 
RESIDU
 *
Cu¼Residu
, cÚ¡ 
PicWidthInPix
, cÚ¡ 
W4x4_š‹r
 [6][16]);

46 
SCÛff4x4AddRes
 ( *
image
, 
RESIDU
 *
Cu¼Residu
, cÚ¡ 
PicWidthInPix
);

47 
SCÛff4x4AddPic
 ( *
image
, 
RESIDU
 *
Cu¼Residu
, cÚ¡ 
PicWidthInPix
);

	@lib_svc/residual_8x8.c

34 
	~"¡ršg.h
"

37 
	~"ŒªsfÜm_8x8.h
"

38 
	~"quªtiz©iÚ.h
"

43 
	~"iù_svc.h
"

44 
	~"»sidu®_8x8.h
"

45 
	~"Residu®Proûssšg.h
"

54 
	$AddRes8x8
 ( *
image
, cÚ¡ 
RESIDU
 *
Cu¼Residu
, cÚ¡ 
PicWidthInPix
, cÚ¡ 
W8x8_š‹r
 [6][64])

56 
i8x8
 ;

58 
luma_cÛff
 [64];

61  
i8x8
 = 0 ; i8x8 < 4 ; i8x8++ ) {

62 ià(
Cu¼Residu
 -> 
Cbp
 & (1 << 
i8x8
)){

65 
locx
 =((
i8x8
 & 1) << 3);

66 
locy
 =((
i8x8
 & 2) << 2);

68 
	`»sÿË_8x8_»sidu®
(
Cu¼Residu
 -> 
Qp
, &Cu¼Residu -> 
LumaLev–
 [
i8x8
 << 6], 
luma_cÛff
, 
W8x8_š‹r
);

69 
	`SVC8x8Add
(
luma_cÛff
, &
image
[
locx
 + 
locy
 * 
PicWidthInPix
], PicWidthInPix );

72 
	}
}

80 
	$StÜeRes8x8
 ( *
image
, cÚ¡ 
RESIDU
 *
Cu¼Residu
, cÚ¡ 
PicWidthInPix
, cÚ¡ 
W8x8_š‹r
 [6][64])

82 
i8x8
, 
i
, 
j
 ;

84 
luma_cÛff
 [64];

87  
i8x8
 = 0 ; i8x8 < 4 ; i8x8++ ) {

88 ià(
Cu¼Residu
 -> 
Cbp
 & (1 << 
i8x8
)){

90 
locx
 =((
i8x8
 & 1) << 3);

91 
locy
 =((
i8x8
 & 2) << 2);

93 
	`»sÿË_8x8_»sidu®
(
Cu¼Residu
 -> 
Qp
, &Cu¼Residu -> 
LumaLev–
 [
i8x8
 << 6], 
luma_cÛff
, 
W8x8_š‹r
);

94 
	`SVC8x8StÜe
(
luma_cÛff
, &
image
[
locx
 + 
locy
 * 
PicWidthInPix
], PicWidthInPix );

96 
locx
 =((
i8x8
 & 1) << 3);

97 
locy
 =((
i8x8
 & 2) << 2);

98  
i
 = 0; i < 8; i++)

99  
j
 = 0; j < 8; j++){

100 
image
[
locx
 + 
i
 + (
j
 + 
locy
è* 
PicWidthInPix
] = 0;

104 
	}
}

112 
	$SCÛff8x8AddRes
 (*
image
, cÚ¡ 
RESIDU
 *
Cu¼Residu
, cÚ¡ 
PicWidthInPix
)

114 
i8x8
;

116 
luma_cÛff
 [64];

119  
i8x8
 = 0 ; i8x8 < 4 ; i8x8++ ) {

121 
locx
 =((
i8x8
 & 1) << 3);

122 
locy
 =((
i8x8
 & 2) << 2);

124 
	`memıy
(
luma_cÛff
, &
Cu¼Residu
 -> 
LumaLev–
 [
i8x8
 << 6], 64 * ());

125 
	`SVC8x8Add
(
luma_cÛff
, &
image
[
locx
 + 
locy
 * 
PicWidthInPix
], PicWidthInPix );

127 
	}
}

134 
	$SCÛff8x8AddPic
 ( *
Y
, cÚ¡ 
RESIDU
 *
Cu¼Residu
, cÚ¡ 
PicWidthInPix
)

136 
i8x8
;

138 
luma_cÛff
 [64];

141  
i8x8
 = 0 ; i8x8 < 4 ; i8x8++ ) {

143 
locx
 =((
i8x8
 & 1) << 3);

144 
locy
 =((
i8x8
 & 2) << 2);

146 
	`memıy
(
luma_cÛff
, &
Cu¼Residu
 -> 
LumaLev–
 [
i8x8
 << 6], 64 * ());

147 
	`iù_8x8
(
luma_cÛff
, &
Y
[
locx
 + 
locy
 * 
PicWidthInPix
], PicWidthInPix );

149 
	}
}

161 
	$SCÛffIÁ¿8x8
 ( *
Y
, cÚ¡ 
RESIDU
 *
Cu¼Residu
, cÚ¡ 
PicWidthInPix
, cÚ¡ 
W8x8_š‹r
 [6][64])

163 
i8x8
;

165 
luma_cÛff
 [64];

168  
i8x8
 = 0 ; i8x8 < 4 ; i8x8++ ) {

169 ià(
Cu¼Residu
 -> 
Cbp
 & (1 << 
i8x8
)){

171 
locx
 =((
i8x8
 & 1) << 3);

172 
locy
 =((
i8x8
 & 2) << 2);

174 
	`»sÿË_8x8_»sidu®
(
Cu¼Residu
 -> 
Qp
, &Cu¼Residu -> 
LumaLev–
 [
i8x8
 << 6], 
luma_cÛff
, 
W8x8_š‹r
);

175 
	`iù_8x8
(
luma_cÛff
, &
Y
[
locx
 + 
locy
 * 
PicWidthInPix
], PicWidthInPix );

178 
	}
}

	@lib_svc/residual_8x8.h

35 #iâdeà
RES_8x8_H


36 
	#RES_8x8_H


	)

39 
	~"svc_ty³.h
"

45 
StÜeRes8x8
 ( *
image
, cÚ¡ 
RESIDU
 *
Cu¼Residu
, cÚ¡ 
PicWidthInPix
, cÚ¡ 
W8x8_š‹r
 [6][64]);

46 
AddRes8x8
 ( *
image
, cÚ¡ 
RESIDU
 *
Cu¼Residu
, cÚ¡ 
PicWidthInPix
, cÚ¡ 
W8x8_š‹r
 [6][64]);

48 
SCÛffIÁ¿8x8
 ( *
Y
, cÚ¡ 
RESIDU
 *
Cu¼Residu
, cÚ¡ 
PicWidthInPix
, cÚ¡ 
W8x8_š‹r
 [6][64]);

49 
SCÛff8x8AddPic
 ( *
Y
, cÚ¡ 
RESIDU
 *
Cu¼Residu
, cÚ¡ 
PicWidthInPix
);

50 
SCÛff8x8AddRes
 ( *
image
, cÚ¡ 
RESIDU
 *
Cu¼Residu
, cÚ¡ 
PicWidthInPix
);

	@lib_svc/residual_chroma.c

34 
	~"¡ršg.h
"

37 
	~"d©a.h
"

38 
	~"T¿nsfÜm.h
"

39 
	~"quªtiz©iÚ.h
"

42 
	~"iù_svc.h
"

43 
	~"»sidu®_chroma.h
"

44 
	~"Residu®Proûssšg.h
"

54 
	$StÜeResChroma
 (*
image_Cb
, *
image_Cr
, cÚ¡ 
RESIDU
 *
Cu¼Residu
, cÚ¡ 
PPS
 *
Pps
, cÚ¡ 
PicWidthInPix
, cÚ¡ 
W_TABLES
 *
Quªtif
)

57 
DC_cÛff
 [4];

58 
AC_cÛff
 [16];

62 iàĞ
Cu¼Residu
 -> 
Cbp
 & 0x30){

64 
QPc
 = 
qP_b
 [
Cu¼Residu
 -> 
Qp
 + 
Pps
 -> 
chroma_qp_šdex_off£t
];

65 
	`iù_4x4_dc_chroma
(&
Cu¼Residu
 -> 
ChromaDCLev–_Cb
 [0], 
DC_cÛff
);

66 
	`»sÿË_4x4_dc_chr
(
QPc
, 
DC_cÛff
, DC_cÛff, 
Quªtif
 -> 
W4x4_Cb_š‹r
);

68 
	`»sÿË_4x4_»sidu®
(
QPc
, &
Cu¼Residu
 -> 
ChromaACLev–_Cb
 [0], 
AC_cÛff
, 
Quªtif
 -> 
W4x4_Cb_š‹r
);

69 
AC_cÛff
 [0] = 
DC_cÛff
 [0];

70 
	`SVC4x4StÜe
(
AC_cÛff
, 
image_Cb
, 
PicWidthInPix
);

72 
	`»sÿË_4x4_»sidu®
(
QPc
, &
Cu¼Residu
 -> 
ChromaACLev–_Cb
 [16], 
AC_cÛff
, 
Quªtif
 -> 
W4x4_Cb_š‹r
);

73 
AC_cÛff
 [0] = 
DC_cÛff
 [1];

74 
	`SVC4x4StÜe
(
AC_cÛff
, &
image_Cb
[4],
PicWidthInPix
);

76 
	`»sÿË_4x4_»sidu®
(
QPc
, &
Cu¼Residu
 -> 
ChromaACLev–_Cb
 [32], 
AC_cÛff
, 
Quªtif
 -> 
W4x4_Cb_š‹r
);

77 
AC_cÛff
 [0] = 
DC_cÛff
 [2];

78 
	`SVC4x4StÜe
(
AC_cÛff
, &
image_Cb
[
PicWidthInPix
 << 2],PicWidthInPix);

80 
	`»sÿË_4x4_»sidu®
(
QPc
, &
Cu¼Residu
 -> 
ChromaACLev–_Cb
 [48], 
AC_cÛff
, 
Quªtif
 -> 
W4x4_Cb_š‹r
);

81 
AC_cÛff
 [0] = 
DC_cÛff
 [3];

82 
	`SVC4x4StÜe
(
AC_cÛff
, &
image_Cb
[(1 + 
PicWidthInPix
) << 2], PicWidthInPix);

84 
QPc
 = 
qP_b
 [
Cu¼Residu
 -> 
Qp
 + 
Pps
 ->
£cÚd_chroma_qp_šdex_off£t
];

85 
	`iù_4x4_dc_chroma
(&
Cu¼Residu
 -> 
ChromaDCLev–_Cr
 [0], 
DC_cÛff
);

86 
	`»sÿË_4x4_dc_chr
(
QPc
, 
DC_cÛff
, DC_cÛff, 
Quªtif
 -> 
W4x4_Cr_š‹r
);

89 
	`»sÿË_4x4_»sidu®
(
QPc
, &
Cu¼Residu
 -> 
ChromaACLev–_Cr
 [0], 
AC_cÛff
, 
Quªtif
 -> 
W4x4_Cr_š‹r
);

90 
AC_cÛff
 [0] = 
DC_cÛff
 [0];

91 
	`SVC4x4StÜe
(
AC_cÛff
, 
image_Cr
,
PicWidthInPix
);

93 
	`»sÿË_4x4_»sidu®
(
QPc
, &
Cu¼Residu
 -> 
ChromaACLev–_Cr
 [16], 
AC_cÛff
, 
Quªtif
 -> 
W4x4_Cr_š‹r
);

94 
AC_cÛff
 [0] = 
DC_cÛff
 [1];

95 
	`SVC4x4StÜe
(
AC_cÛff
, &
image_Cr
[4],
PicWidthInPix
);

97 
	`»sÿË_4x4_»sidu®
(
QPc
, &
Cu¼Residu
 -> 
ChromaACLev–_Cr
 [32], 
AC_cÛff
, 
Quªtif
 -> 
W4x4_Cr_š‹r
);

98 
AC_cÛff
 [0] = 
DC_cÛff
 [2];

99 
	`SVC4x4StÜe
(
AC_cÛff
, &
image_Cr
[
PicWidthInPix
 << 2],PicWidthInPix);

101 
	`»sÿË_4x4_»sidu®
(
QPc
, &
Cu¼Residu
 -> 
ChromaACLev–_Cr
 [48], 
AC_cÛff
, 
Quªtif
 -> 
W4x4_Cr_š‹r
);

102 
AC_cÛff
 [0] = 
DC_cÛff
 [3];

103 
	`SVC4x4StÜe
(
AC_cÛff
, &
image_Cr
[(1 + 
PicWidthInPix
) << 2], PicWidthInPix);

105 
i
,
j
;

107  
i
 = 0; i < 8; i++){

108  
j
 = 0; j < 8; j++){

109 
image_Cb
[
i
 * 
PicWidthInPix
 + 
j
] = 0;

110 
image_Cr
[
i
 * 
PicWidthInPix
 + 
j
] = 0;

114 
	}
}

123 
	$AddResChroma
 (*
image_Cb
, *
image_Cr
, cÚ¡ 
RESIDU
 *
Cu¼Residu
, cÚ¡ 
PPS
 *
Pps
, cÚ¡ 
PicWidthInPix
, cÚ¡ 
W_TABLES
 *
Quªtif
)

126 
DC_cÛff
 [4];

127 
AC_cÛff
 [16];

131 iàĞ
Cu¼Residu
 -> 
Cbp
 & 0x30){

133 
qP
 = 
Cu¼Residu
 -> 
Qp
 + 
Pps
 -> 
chroma_qp_šdex_off£t
 ;

134 
QPc
 = 
qP_b
 [
qP
];

135 
	`iù_4x4_dc_chroma
(&
Cu¼Residu
 -> 
ChromaDCLev–_Cb
 [0], 
DC_cÛff
);

136 
	`»sÿË_4x4_dc_chr
(
QPc
, 
DC_cÛff
, DC_cÛff, 
Quªtif
 -> 
W4x4_Cb_š‹r
);

138 
	`»sÿË_4x4_»sidu®
(
QPc
, &
Cu¼Residu
 -> 
ChromaACLev–_Cb
 [0], 
AC_cÛff
, 
Quªtif
 -> 
W4x4_Cb_š‹r
);

139 
AC_cÛff
 [0] = 
DC_cÛff
 [0];

140 
	`SVC4x4Add
(
AC_cÛff
, 
image_Cb
, 
PicWidthInPix
);

142 
	`»sÿË_4x4_»sidu®
(
QPc
, &
Cu¼Residu
 -> 
ChromaACLev–_Cb
 [16], 
AC_cÛff
, 
Quªtif
 -> 
W4x4_Cb_š‹r
);

143 
AC_cÛff
 [0] = 
DC_cÛff
 [1];

144 
	`SVC4x4Add
(
AC_cÛff
, &
image_Cb
[4],
PicWidthInPix
);

146 
	`»sÿË_4x4_»sidu®
(
QPc
, &
Cu¼Residu
 -> 
ChromaACLev–_Cb
 [32], 
AC_cÛff
, 
Quªtif
 -> 
W4x4_Cb_š‹r
);

147 
AC_cÛff
 [0] = 
DC_cÛff
 [2];

148 
	`SVC4x4Add
(
AC_cÛff
, &
image_Cb
[
PicWidthInPix
 << 2],PicWidthInPix);

150 
	`»sÿË_4x4_»sidu®
(
QPc
, &
Cu¼Residu
 -> 
ChromaACLev–_Cb
 [48], 
AC_cÛff
, 
Quªtif
 -> 
W4x4_Cb_š‹r
);

151 
AC_cÛff
 [0] = 
DC_cÛff
 [3];

152 
	`SVC4x4Add
(
AC_cÛff
, &
image_Cb
[(1 + 
PicWidthInPix
) << 2], PicWidthInPix);

154 
qP
 = 
Cu¼Residu
 -> 
Qp
 + 
Pps
 -> 
£cÚd_chroma_qp_šdex_off£t
 ;

155 
QPc
 = 
qP_b
 [
qP
];

156 
	`iù_4x4_dc_chroma
(&
Cu¼Residu
 -> 
ChromaDCLev–_Cr
 [0], 
DC_cÛff
);

157 
	`»sÿË_4x4_dc_chr
(
QPc
, 
DC_cÛff
, DC_cÛff, 
Quªtif
 -> 
W4x4_Cr_š‹r
);

160 
	`»sÿË_4x4_»sidu®
(
QPc
, &
Cu¼Residu
 -> 
ChromaACLev–_Cr
 [0], 
AC_cÛff
, 
Quªtif
 -> 
W4x4_Cr_š‹r
);

161 
AC_cÛff
 [0] = 
DC_cÛff
 [0];

162 
	`SVC4x4Add
(
AC_cÛff
, 
image_Cr
,
PicWidthInPix
);

164 
	`»sÿË_4x4_»sidu®
(
QPc
, &
Cu¼Residu
 -> 
ChromaACLev–_Cr
 [16], 
AC_cÛff
, 
Quªtif
 -> 
W4x4_Cr_š‹r
);

165 
AC_cÛff
 [0] = 
DC_cÛff
 [1];

166 
	`SVC4x4Add
(
AC_cÛff
, &
image_Cr
[4],
PicWidthInPix
);

168 
	`»sÿË_4x4_»sidu®
(
QPc
, &
Cu¼Residu
 -> 
ChromaACLev–_Cr
 [32], 
AC_cÛff
, 
Quªtif
 -> 
W4x4_Cr_š‹r
);

169 
AC_cÛff
 [0] = 
DC_cÛff
 [2];

170 
	`SVC4x4Add
(
AC_cÛff
, &
image_Cr
[
PicWidthInPix
 << 2],PicWidthInPix);

172 
	`»sÿË_4x4_»sidu®
(
QPc
, &
Cu¼Residu
 -> 
ChromaACLev–_Cr
 [48], 
AC_cÛff
, 
Quªtif
 -> 
W4x4_Cr_š‹r
);

173 
AC_cÛff
 [0] = 
DC_cÛff
 [3];

174 
	`SVC4x4Add
(
AC_cÛff
, &
image_Cr
[(1 + 
PicWidthInPix
) << 2], PicWidthInPix);

176 
	}
}

186 
	$SCÛffChromaAddRes
 (*
image_Cb
, *
image_Cr
, cÚ¡ 
RESIDU
 *
Cu¼Residu
, cÚ¡ 
PicWidthInPix
)

189 
AC_cÛff
 [16];

191 
	`memıy
(
AC_cÛff
, &
Cu¼Residu
 -> 
ChromaACLev–_Cb
 [0], 16 * ());

192 
	`SVC4x4Add
(
AC_cÛff
, 
image_Cb
, 
PicWidthInPix
);

195 
	`memıy
(
AC_cÛff
, &
Cu¼Residu
 -> 
ChromaACLev–_Cb
 [16], 16 * ());

196 
	`SVC4x4Add
(
AC_cÛff
, &
image_Cb
[4],
PicWidthInPix
);

198 
	`memıy
(
AC_cÛff
, &
Cu¼Residu
 -> 
ChromaACLev–_Cb
 [32], 16 * ());

199 
	`SVC4x4Add
(
AC_cÛff
, &
image_Cb
[
PicWidthInPix
 << 2],PicWidthInPix);

201 
	`memıy
(
AC_cÛff
, &
Cu¼Residu
 -> 
ChromaACLev–_Cb
 [48], 16 * ());

202 
	`SVC4x4Add
(
AC_cÛff
, &
image_Cb
[(1 + 
PicWidthInPix
) << 2], PicWidthInPix);

205 
	`memıy
(
AC_cÛff
, &
Cu¼Residu
 -> 
ChromaACLev–_Cr
 [0], 16 * ());

206 
	`SVC4x4Add
(
AC_cÛff
, 
image_Cr
, 
PicWidthInPix
);

209 
	`memıy
(
AC_cÛff
, &
Cu¼Residu
 -> 
ChromaACLev–_Cr
 [16], 16 * ());

210 
	`SVC4x4Add
(
AC_cÛff
, &
image_Cr
[4],
PicWidthInPix
);

212 
	`memıy
(
AC_cÛff
, &
Cu¼Residu
 -> 
ChromaACLev–_Cr
 [32], 16 * ());

213 
	`SVC4x4Add
(
AC_cÛff
, &
image_Cr
[
PicWidthInPix
 << 2],PicWidthInPix);

215 
	`memıy
(
AC_cÛff
, &
Cu¼Residu
 -> 
ChromaACLev–_Cr
 [48], 16 * ());

216 
	`SVC4x4Add
(
AC_cÛff
, &
image_Cr
[(1 + 
PicWidthInPix
) << 2], PicWidthInPix);

217 
	}
}

227 
	$SCÛffChromaAddPic
 (*
image_Cb
, *
image_Cr
, cÚ¡ 
RESIDU
 *
Cu¼Residu
, cÚ¡ 
PicWidthInPix
)

230 
AC_cÛff
 [16];

232 
	`memıy
(
AC_cÛff
, &
Cu¼Residu
 -> 
ChromaACLev–_Cb
 [0], 16 * ());

233 
	`iù_4x4_»sidu®
(
AC_cÛff
, 
image_Cb
, 
PicWidthInPix
);

236 
	`memıy
(
AC_cÛff
, &
Cu¼Residu
 -> 
ChromaACLev–_Cb
 [16], 16 * ());

237 
	`iù_4x4_»sidu®
(
AC_cÛff
, &
image_Cb
[4],
PicWidthInPix
);

239 
	`memıy
(
AC_cÛff
, &
Cu¼Residu
 -> 
ChromaACLev–_Cb
 [32], 16 * ());

240 
	`iù_4x4_»sidu®
(
AC_cÛff
, &
image_Cb
[
PicWidthInPix
 << 2],PicWidthInPix);

242 
	`memıy
(
AC_cÛff
, &
Cu¼Residu
 -> 
ChromaACLev–_Cb
 [48], 16 * ());

243 
	`iù_4x4_»sidu®
(
AC_cÛff
, &
image_Cb
[(1 + 
PicWidthInPix
) << 2], PicWidthInPix);

246 
	`memıy
(
AC_cÛff
, &
Cu¼Residu
 -> 
ChromaACLev–_Cr
 [0], 16 * ());

247 
	`iù_4x4_»sidu®
(
AC_cÛff
, 
image_Cr
, 
PicWidthInPix
);

250 
	`memıy
(
AC_cÛff
, &
Cu¼Residu
 -> 
ChromaACLev–_Cr
 [16], 16 * ());

251 
	`iù_4x4_»sidu®
(
AC_cÛff
, &
image_Cr
[4],
PicWidthInPix
);

253 
	`memıy
(
AC_cÛff
, &
Cu¼Residu
 -> 
ChromaACLev–_Cr
 [32], 16 * ());

254 
	`iù_4x4_»sidu®
(
AC_cÛff
, &
image_Cr
[
PicWidthInPix
 << 2],PicWidthInPix);

256 
	`memıy
(
AC_cÛff
, &
Cu¼Residu
 -> 
ChromaACLev–_Cr
 [48], 16 * ());

257 
	`iù_4x4_»sidu®
(
AC_cÛff
, &
image_Cr
[(1 + 
PicWidthInPix
) << 2], PicWidthInPix);

258 
	}
}

	@lib_svc/residual_chroma.h

35 #iâdeà
RESIDU_H


36 
	#RESIDU_H


	)

38 
	~"ty³.h
"

39 
	~"svc_ty³.h
"

41 
StÜeResChroma
 (*
image_Cb
, *
image_Cr
, cÚ¡ 
RESIDU
 *
Cu¼Residu
, cÚ¡ 
PPS
 *
Pps
, cÚ¡ 
PicWidthInPix
, cÚ¡ 
W_TABLES
 *
Quªtif
);

42 
AddResChroma
 (*
image_Cb
, *
image_Cr
, cÚ¡ 
RESIDU
 *
Cu¼Residu
, cÚ¡ 
PPS
 *
Pps
, cÚ¡ 
PicWidthInPix
, cÚ¡ 
W_TABLES
 *
Quªtif
);

43 
SCÛffChromaAddRes
 (*
image_Cb
, *
image_Cr
, cÚ¡ 
RESIDU
 *
Cu¼Residu
, cÚ¡ 
PicWidthInPix
);

44 
SCÛffChromaAddPic
 (*
Cb
, *
Cr
, cÚ¡ 
RESIDU
 *
Cu¼Residu
, cÚ¡ 
PicWidthInPix
);

	@lib_svc/seq_parameter_set_svc_extension.c

34 
	~<¡ršg.h
>

37 
	~"ty³.h
"

38 
	~"¥s.h
"

39 
	~"ş.h
"

40 
	~"b™¡»am.h
"

41 
	~"sÿlšg_m©rix.h
"

42 
	~"¦iû_d©a_vlc.h
"

46 
	~"£t_Ïy”.h
"

52 
	$£q_·¿m‘”_£t_svc_ex‹nsiÚ
 (*
d©a
, *
pos™iÚ
, 
SPS
 *
¥s_id
)

55 
¥s_id
 -> 
IÁ”Lay”DeblockšgF‹rFÏg
 = 
	`g‘Nb™s
(
d©a
, 
pos™iÚ
, 1) ;

56 
¥s_id
 -> 
ex‹nded_¥©Ÿl_sÿÏb™y
 = 
	`g‘Nb™s
(
d©a
, 
pos™iÚ
, 2) ;

58 iàĞ
¥s_id
 -> 
chroma_fÜm©_idc
 > 0 ) {

59 
¥s_id
 -> 
chroma_pha£_x
 = (è(
	`g‘Nb™s
(
d©a
, 
pos™iÚ
, 1) - 1);

60 
¥s_id
 -> 
chroma_pha£_y
 = (è(
	`g‘Nb™s
(
d©a
, 
pos™iÚ
, 2) - 1);

62 
¥s_id
 -> 
chroma_pha£_x
 = - 1;

63 
¥s_id
 -> 
chroma_pha£_y
 = - 1;

68 ifĞ
¥s_id
 -> 
ex‹nded_¥©Ÿl_sÿÏb™y
 == 1 ) {

69 ifĞ
¥s_id
 -> 
chroma_fÜm©_idc
 > 0 ) {

70 
	`g‘Nb™s
(
d©a
, 
pos™iÚ
, 1);

71 
	`g‘Nb™s
(
d©a
, 
pos™iÚ
, 2);

74 
¥s_id
 -> 
sÿËd_ba£_Ëá_off£t
 = (è(
	`»ad_£
(
d©a
, 
pos™iÚ
));

75 
¥s_id
 -> 
sÿËd_ba£_tİ_off£t
 = (è(
	`»ad_£
(
d©a
, 
pos™iÚ
));

76 
¥s_id
 -> 
sÿËd_ba£_right_off£t
 = (è(
	`»ad_£
(
d©a
, 
pos™iÚ
));

77 
¥s_id
 -> 
sÿËd_ba£_bÙtom_off£t
 = (è(
	`»ad_£
(
d©a
, 
pos™iÚ
));

80 if(
	`g‘Nb™s
(
d©a
, 
pos™iÚ
, 1)) {

81 
¥s_id
 -> 
tcÛff_Ëv–_´ediùiÚ_æag
 = 1;

82 
¥s_id
 -> 
ad­tive_tcÛff_Ëv–_´ediùiÚ_æag
 = 
	`g‘Nb™s
(
d©a
, 
pos™iÚ
, 1);

85 
¥s_id
 -> 
¦iû_h—d”_»¡riùiÚ_æag
 = 
	`g‘Nb™s
(
d©a
, 
pos™iÚ
, 1);

86 
	}
}

95 
	$svc_vui_·¿m‘”s_ex‹nsiÚ
(*
d©a
, *
pos™iÚ
, 
SPS
 *
¥s_id
 ) {

97 
i
;

98 
Çl_hrd_·¿m‘”s_´e£Á_æag
, 
vş_hrd_·¿m‘”s_´e£Á_æag
;

99 
num_Ïy”s_mšus1
 = 
	`»ad_ue
(
d©a
, 
pos™iÚ
) + 1;

101  
i
 = 0; i <ğ
num_Ïy”s_mšus1
; i++ ) {

102 
	`g‘Nb™s
(
d©a
, 
pos™iÚ
, 3);

103 
	`g‘Nb™s
(
d©a
, 
pos™iÚ
, 4);

104 
	`g‘Nb™s
(
d©a
, 
pos™iÚ
, 3);

105 ifĞ
	`g‘Nb™s
(
d©a
, 
pos™iÚ
, 1)) {

106 
	`g‘Nb™s
(
d©a
, 
pos™iÚ
, 32);

107 
	`g‘Nb™s
(
d©a
, 
pos™iÚ
, 32);

108 
	`g‘Nb™s
(
d©a
, 
pos™iÚ
, 1);

111 
Çl_hrd_·¿m‘”s_´e£Á_æag
 = 
	`g‘Nb™s
(
d©a
, 
pos™iÚ
, 1);

112 if(
Çl_hrd_·¿m‘”s_´e£Á_æag
 ){

113 
	`hrd_·¿m‘”s
(
d©a
, 
pos™iÚ
, 
¥s_id
);

116 
vş_hrd_·¿m‘”s_´e£Á_æag
 = 
	`g‘Nb™s
(
d©a
, 
pos™iÚ
, 1);

117 if(
vş_hrd_·¿m‘”s_´e£Á_æag
){

118 
	`hrd_·¿m‘”s
(
d©a
, 
pos™iÚ
, 
¥s_id
);

121 ifĞ
Çl_hrd_·¿m‘”s_´e£Á_æag
 || 
vş_hrd_·¿m‘”s_´e£Á_æag
){

122 
	`g‘Nb™s
(
d©a
, 
pos™iÚ
, 1);

125 
	`g‘Nb™s
(
d©a
, 
pos™iÚ
, 1);

127 
	}
}

136 
	$sub£t_¥s
 (*
d©a
, *
N®InRb¥
, 
SPS
 *
¥s
, 
NAL
 *
N®
)

139 
pos™iÚ
 = 8;

140 
svc_vui_·¿m‘”s_´e£Á_æag
;

141 
´ofe_idc
 = 
	`g‘Nb™s
(
d©a
, &
pos™iÚ
, 8);

142 
cÚ¡¿št
 = 
	`g‘Nb™s
(
d©a
, &
pos™iÚ
, 8);

143 
Ëv–_idc
 = 
	`g‘Nb™s
(
d©a
, &
pos™iÚ
, 8);

145 ià(
´ofe_idc
 && !(
cÚ¡¿št
 & 0xf)){

146 
Sps_id
 = 
	`»ad_ue
(
d©a
, &
pos™iÚ
) + 16;

147 
£q_·¿m‘”_£t_id
 = 
	`CLIP3
(0, 
SPS_BUF_SIZE
 - 1, 
Sps_id
);

148 
SPS
 *
±_¥s
 = &
¥s
 [
£q_·¿m‘”_£t_id
];

151 
b_¡ride
 = 
±_¥s
 -> b_stride;

152 
b8_¡ride
 = 
±_¥s
 -> b8_stride;

153 
MaxDpbWa™
 = 
±_¥s
 -> 
nb_img_di¥
;

156 if(
£q_·¿m‘”_£t_id
 > 
¥s
[0] . 
MaxSpsId
){

157 
¥s
[0] . 
MaxSpsId
 = 
£q_·¿m‘”_£t_id
;

161 
	`mem£t
(
±_¥s
, 0, (
SPS
));

162 
±_¥s
 -> 
b_¡ride
 = b_stride;

163 
±_¥s
 -> 
b8_¡ride
 = b8_stride;

164 
±_¥s
 -> 
´ofe_idc
 =…rofile_idc;

165 
±_¥s
 -> 
Ëv–_idc
 =†evel_idc;

167 
	`£q_·¿m‘”_£t_d©a
(
d©a
, &
pos™iÚ
, 
±_¥s
);

169 ifĞ
±_¥s
 -> 
´ofe_idc
 == 83 ||…t_sps ->…rofile_idc == 86 ) {

170 
	`£q_·¿m‘”_£t_svc_ex‹nsiÚ
(
d©a
, &
pos™iÚ
, 
±_¥s
 );

171 
svc_vui_·¿m‘”s_´e£Á_æag
 = 
	`g‘Nb™s
(
d©a
, &
pos™iÚ
, 1);

172 ifĞ
svc_vui_·¿m‘”s_´e£Á_æag
 == 1 )

173 
	`svc_vui_·¿m‘”s_ex‹nsiÚ
(
d©a
, &
pos™iÚ
, 
±_¥s
 );

175 if(
MaxDpbWa™
){

176 
±_¥s
 -> 
nb_img_di¥
 = 
MaxDpbWa™
;

179 ifĞ
	`g‘Nb™s
(
d©a
, &
pos™iÚ
, 1) ){

180  
	`mÜe_rb¥_d©a
(
d©a
, &
pos™iÚ
, 
N®InRb¥
)){

181 
	`g‘Nb™s
(
d©a
, &
pos™iÚ
, 1);

185 
	}
}

	@lib_svc/set_layer.h

35 #iâdeà
SETLAYER_H


36 
	#SETLAYER_H


	)

38 
	~"svc_ty³.h
"

42 #iâdeà
TI_OPTIM


43 #ifdeà
WIN32


44 
	~<wšdows.h
>

49 
g‘_Ïy”
(
¬gc
, **
¬gv
, 
CÚfigSVC
 *
CÚfig
);

50 
choo£_Ïy”
 (
CÚfigSVC
 *
CÚfig
);

54 
__šlše
 
	$G‘Lay”Numb”
(
NAL
 *
N®
, 
DQId
){

56 
i
;

59 
i
 = 0 ; i < 8; i++){

60 iàĞ
N®
 -> 
Ïy”_id_bË
[
i
] =ğ
DQId
){

61  
i
;

66 
i
 = 0 ; i < 8; i++){

67 iàĞ
i
 < 7 && 
N®
 -> 
Ïy”_id_bË
[i] < 
DQId
 && Nal ->†ayer_id_table[i + 1] > DQId){

74 iàĞ
i
 == 8){

78  
i
;

79 
	}
}

	@lib_svc/slice_data_B_svc.h

37 #iâdeà
SLICE_B_H


38 
	#SLICE_B_H


	)

41 
	~"svc_ty³.h
"

42 
	~"svc_d©a.h
"

45 
Decode_B_svc
 ( cÚ¡ 
size_Mb
, 
SPS
 *
ai_p¡Sps
, 
PPS
 *
ai_p¡Pps
, 
SLICE
 *
Sliû
, 
NAL
 *
N®
, *
SliûTabË
,

46 cÚ¡ 
DATA
 *
ai_t¡Tab_Block
, 
RESIDU
 *
AÎResidu
, cÚ¡ 
MAIN_STRUCT_PF
 *
veùÜs
, 
LIST_MMO
 *
ai_p¡RefPicLi¡L0
,

47 
LIST_MMO
 *
ai_p¡RefPicLi¡L1
, LIST_MMO *
Cu¼’t_pic
, 
W_TABLES
 *
quªtif
, 
SVC_VECTORS
 *
svc_veùÜs
, *
px
,

48 *
py
, *
Up§m¶šg_tmp
, *
xk16
, *
xp16
, *
yk16
, *
yp16
, *
aio_tiMv_l0
,

49 *
aio_tiMv_l1
, *
aio_tiRef_l0
, *
aio_tiRef_l1
, *
DpbLuma
,

50 *
DpbCb
, *
DpbCr
, *
luma_»sidu
, *
Cb_»sidu
, *
Cr_»sidu
);

	@lib_svc/slice_data_I_svc.c

35 
	~<¡dio.h
>

36 
	~<¡ršg.h
>

39 
	~"ty³.h
"

40 
	~"Ãighbourhood.h
"

41 
	~"SliûGroupM­.h
"

45 
	~"svc_d©a.h
"

46 
	~"Mb_I_svc.h
"

47 
	~"Loİ_f‹r_ext.h
"

48 
	~"¦iû_d©a_I_svc.h
"

49 
	~"svc_Ãighbourhood.h
"

50 
	~"IÁ”Lay”P»diùiÚ.h
"

57 
	$Decode_I_svc
 (cÚ¡ 
size_Mb
, cÚ¡ 
SPS
 *
ai_p¡Sps
, cÚ¡ 
PPS
 *
ai_p¡Pps
, cÚ¡ 
SLICE
 *
Sliû
,

58 cÚ¡ 
NAL
 * 
N®
, cÚ¡ *
SliûTabË
, 
DATA
 *
Block
, 
RESIDU
 *
®l_»sidu
,

59 
STRUCT_PF
 *
ba£lše_veùÜ
, 
LIST_MMO
 *
Cu¼’t_pic
, cÚ¡ 
W_TABLES
 *
quªtif
,

60 *
DpbLuma
, *
DpbCb
, *
DpbCr
)

65 ià(!
N®
 -> 
N®ToSk
){

66 
RESIDU
 *
Cu¼Residu
 = &
®l_»sidu
[
N®
 -> 
Lay”Id
 * 
size_Mb
];

67 
RESIDU
 *
Ba£Residu
 = &
®l_»sidu
[
N®
 -> 
Ba£Lay”Id
 * 
size_Mb
];

69 
pic_·¿m‘”_id
 = 
N®
 ->…ic_·¿m‘”_id[N® -> 
Lay”Id
];

70 cÚ¡ 
PPS
 *
Pps
 = &
ai_p¡Pps
[
pic_·¿m‘”_id
];

71 cÚ¡ 
SPS
 *
Sps
 = &
ai_p¡Sps
[
Pps
 -> 
£q_·¿m‘”_£t_id
 + 16];

72 
MemÜyAdd»ss
 = 
N®
 -> 
Ba£MemÜyAdd»ss
;

73 
iCu¼MbAddr
 = 
Sliû
 -> 
fœ¡_mb_š_¦iû
;

74 cÚ¡ 
PicSizeInMbs
 = 
Sps
 -> PicSizeInMbs;

75 cÚ¡ 
PicWiInMbs
 = 
Sps
 -> 
pic_width_š_mbs
;

76 cÚ¡ 
PicWidthInMbs
 = 
Sps
 -> 
pic_width_š_mbs
 + 2;

77 cÚ¡ 
PicWidthInPix
 = 
PicWidthInMbs
 * 16 ;

78 cÚ¡ 
off£t_L
 = (
PicWidthInMbs
 << 8) + 16;

79 cÚ¡ 
off£t_C
 = (
PicWidthInMbs
 << 6) + 8;

81 
iMb_x
;

82 
iMb_y
;

84 *
Y
 = &
DpbLuma
[
off£t_L
 + 
Cu¼’t_pic
 -> 
MemÜyAdd»ss
];

85 *
U
 = &
DpbCb
[
off£t_C
 + (
Cu¼’t_pic
 -> 
MemÜyAdd»ss
 >> 2)];

86 *
V
 = &
DpbCr
[
off£t_C
 + (
Cu¼’t_pic
 -> 
MemÜyAdd»ss
 >> 2)];

87 *
Ba£Y
 = &
DpbLuma
[
MemÜyAdd»ss
 + 16 + ((
N®
 -> 
ba£_Width
 + 32) << 4)];

88 *
Ba£U
 = &
DpbCb
[(
MemÜyAdd»ss
 >> 2è+ 8 + ((
N®
 -> 
ba£_Width
 + 32) << 2)];

89 *
Ba£V
 = &
DpbCr
[(
MemÜyAdd»ss
 >> 2è+ 8 + ((
N®
 -> 
ba£_Width
 + 32) << 2)];

93 
	`G‘MbPos™iÚ
(
iCu¼MbAddr
, 
PicWiInMbs
, &
iMb_x
, &
iMb_y
);

96 
	`G‘Ba£F‹r
(
N®
, 
Sliû
, 
ai_p¡Pps
, 
ai_p¡Sps
, 
Ba£Residu
, 
Ba£Y
, 
Ba£U
, 
Ba£V
);

99  ; 
iCu¼MbAddr
 < 
PicSizeInMbs
 ;) {

101 ià(
	`IS_I
(
Cu¼Residu
 [
iCu¼MbAddr
] . 
MbTy³
è|| !
N®
 -> 
S·tŸlSÿÏb™y
) {

104 
	`G‘Neighbour
(
iCu¼MbAddr
, 
iMb_x
, 
PicWiInMbs
, 
PicSizeInMbs
, 
SliûTabË
, 
Cu¼Residu
, 
Pps
 -> 
cÚ¡¿šed_šŒa_´ed_æag
);

106 
	`MbISÄ
(
Pps
, 
N®
, 
quªtif
, 
ba£lše_veùÜ
, &
Cu¼Residu
 [
iCu¼MbAddr
], &
Ba£Residu
 [iCu¼MbAddr], 
PicWidthInPix
,

107 &
Y
[((
iMb_x
 + (
iMb_y
 * 
PicWidthInPix
)) << 4)],

108 &
U
[((
iMb_x
 + (
iMb_y
 * 
PicWidthInPix
 >> 1)) << 3)],

109 &
V
[((
iMb_x
 + (
iMb_y
 * 
PicWidthInPix
 >> 1)) << 3)],

110 &
Ba£Y
[((
iMb_x
 + (
iMb_y
 * 
PicWidthInPix
)) << 4)],

111 &
Ba£U
[((
iMb_x
 + (
iMb_y
 * 
PicWidthInPix
 >> 1)) << 3)],

112 &
Ba£V
[((
iMb_x
 + (
iMb_y
 * 
PicWidthInPix
 >> 1)) << 3)]);

115 
	`MbIS·tŸl
 (
N®
, 
Sps
, 
Pps
, 
PicWidthInPix
, 
quªtif
, 
iMb_x
, 
iMb_y
, &
Block
 [
iCu¼MbAddr
], &
Cu¼Residu
 [iCu¼MbAddr], 
Ba£Residu
,

116 &
Y
[((
iMb_x
 + (
iMb_y
 * 
PicWidthInPix
)è<< 4)], &
U
[((iMb_x + (iMb_y * PicWidthInPix >> 1)) << 3)],

117 &
V
[((
iMb_x
 + (
iMb_y
 * 
PicWidthInPix
 >> 1)è<< 3)], 
Ba£Y
, 
Ba£U
, 
Ba£V
);

121 
iCu¼MbAddr
 = 
	`Next_MbAdd»ss
(iCu¼MbAddr, 
PicSizeInMbs
, 
PicWiInMbs
, 
SliûTabË
, &
iMb_x
, &
iMb_y
);

123 iàĞ
SliûTabË
 [
iCu¼MbAddr
] == 255 ) {

124 
iCu¼MbAddr
 = 
PicSizeInMbs
 ;

129 
	}
}

	@lib_svc/slice_data_I_svc.h

34 #iâdeà
SLICE_I_H


35 
	#SLICE_I_H


	)

37 
	~"svc_ty³.h
"

40 
Decode_I_svc
 ( cÚ¡ 
size_Mb
 , cÚ¡ 
SPS
 *
ai_p¡Sps
, cÚ¡ 
PPS
 *
ai_p¡Pps
, cÚ¡ 
SLICE
 *
Sliû
,

41 cÚ¡ 
NAL
 *
N®
, cÚ¡ *
SliûTabË
, 
DATA
 *
Block
, 
RESIDU
 *
®l_»sidu
,

42 
STRUCT_PF
 *
ba£lše_veùÜ
, 
LIST_MMO
 *
Cu¼’t_pic
, cÚ¡ 
W_TABLES
 *
quªtif
,

43 *
DpbLuma
, *
DpbCb
, *
DpbCr
);

	@lib_svc/slice_data_P_svc.c

33 
	~<¡dio.h
>

38 
	~"d©a.h
"

39 
	~"š™_d©a.h
"

40 
	~"decode_mb_I.h
"

41 
	~"Ãighbourhood.h
"

42 
	~"SliûGroupM­.h
"

47 
	~"svc_ty³.h
"

48 
	~"I_BL.h
"

49 
	~"P_BL.h
"

50 
	~"Mb_I_svc.h
"

51 
	~"svc_d©a.h
"

52 
	~"CoÜdÚ©es.h
"

53 
	~"Wr™eBackSVC.h
"

54 
	~"fl_ÿches_svc.h
"

55 
	~"Residu®Proûssšg.h
"

56 
	~"IÁ”Lay”P»diùiÚ.h
"

65 
	$Decode_P_svc
 ( cÚ¡ 
size_Mb
, cÚ¡ 
SPS
 *
ai_p¡Sps
, cÚ¡ 
PPS
 *
ai_p¡Pps
,cÚ¡ 
SLICE
 *
Sliû
, cÚ¡ 
NAL
 *
N®
,

66 cÚ¡ *
SliûTabË
, 
DATA
 *
TabBlock
, 
RESIDU
 *
®l_»sidu
,

67 cÚ¡ 
STRUCT_PF
 *
ba£lše_veùÜ
, 
LIST_MMO
 *
ai_p¡RefPicLi¡L0
, LIST_MMO *
Cu¼’t_pic
,

68 cÚ¡ 
W_TABLES
 *
Quªtif
, 
SVC_VECTORS
 *
svc_veùÜs
, *
px
, *
py
, *
Up§m¶šg_tmp
, *
xk16
,

69 *
xp16
, *
yk16
, *
yp16
, *
aio_tiMv
, *
aio_tiRef
,

70 *
DpbLuma
, *
DpbCb
, *
DpbCr
,

71 *
Luma_Residu
, *
Cb_Residu
, *
Cr_Residu
)

75 iàĞ!
N®
 -> 
N®ToSk
){

76 
REFPART
 
RefP¬t™iÚ
[16];

77 
x_mbP¬tIdx
, 
y_mbP¬tIdx
;

78 
x_ba£
, 
y_ba£
, 
mbBa£Addr
;

80 
	`__deş¥ec
(
	`®ign
(64)è
»f_ÿche_l0
 [48];

81 
	`__deş¥ec
(
	`®ign
(64)è
mv_ÿche_l0
 [48][2];

83 
pic_·¿m‘”_id
 = 
N®
 ->…ic_·¿m‘”_id[N® -> 
Lay”Id
];

84 cÚ¡ 
PPS
 * 
Pps
 = &
ai_p¡Pps
[
pic_·¿m‘”_id
];

85 cÚ¡ 
SPS
 * 
Sps
 = &
ai_p¡Sps
[
Pps
 -> 
£q_·¿m‘”_£t_id
 + 16];

87 cÚ¡ 
PicSizeInMbs
 = 
Sps
 -> PicSizeInMbs ;

88 cÚ¡ 
PicWiInMbs
 = 
Sps
 -> 
pic_width_š_mbs
;

89 cÚ¡ 
PicWidthInMbs
 = 
Sps
 -> 
pic_width_š_mbs
 + 2;

90 cÚ¡ 
PicHeightInMbs
 = 
Sps
 -> 
pic_height_š_m­_un™s
 + 2;

91 cÚ¡ 
PicWidthInPix
 = (
PicWidthInMbs
 << 4);

93 cÚ¡ 
off£t_L
 = (
PicWidthInMbs
 << 8) + 16;

94 cÚ¡ 
off£t_C
 = (
PicWidthInMbs
 << 6) + 8;

96 *
Residu_Luma
 = &
Luma_Residu
[(
size_Mb
 << 8è* 
N®
 -> 
Lay”Id
];

97 *
Residu_Cb
 = &
Cb_Residu
[(
size_Mb
 << 6è* 
N®
 -> 
Lay”Id
];

98 *
Residu_Cr
 = &
Cr_Residu
[(
size_Mb
 << 6è* 
N®
 -> 
Lay”Id
];

100 
iCu¼MbAddr
 = 
Sliû
 -> 
fœ¡_mb_š_¦iû
 ;

102 
RESIDU
 *
Cu¼Residu
 = &
®l_»sidu
[
N®
 -> 
Lay”Id
 * 
size_Mb
];

103 
RESIDU
 *
Ba£Residu
 = &
®l_»sidu
[
N®
 -> 
Ba£Lay”Id
 * 
size_Mb
];

105 *
aio_tiMv_l0
 = &
aio_tiMv
 [
Cu¼’t_pic
 -> 
MvMemÜyAdd»ss
];

106 *
aio_tiRef_l0
 = &
aio_tiRef
 [
Cu¼’t_pic
 -> 
MvMemÜyAdd»ss
 >> 1];

109 *
Y
 = &
DpbLuma
[
off£t_L
 + 
Cu¼’t_pic
 -> 
MemÜyAdd»ss
];

110 *
U
 = &
DpbCb
[
off£t_C
 + (
Cu¼’t_pic
 -> 
MemÜyAdd»ss
 >> 2)];

111 *
V
 = &
DpbCr
[
off£t_C
 + (
Cu¼’t_pic
 -> 
MemÜyAdd»ss
 >> 2)];

112 *
Ba£Y
 = &
DpbLuma
[(
N®
 -> 
Ba£MemÜyAdd»ss
è+ 16 + ((N® -> 
ba£_Width
 + 32) << 4)];

113 *
Ba£U
 = &
DpbCb
[(
N®
 -> 
Ba£MemÜyAdd»ss
 >> 2è+ 8 + ((N® -> 
ba£_Width
 + 32) << 2)];

114 *
Ba£V
 = &
DpbCr
[(
N®
 -> 
Ba£MemÜyAdd»ss
 >> 2è+ 8 + ((N® -> 
ba£_Width
 + 32) << 2)];

118 *
mv
;

119 *
»f_ba£
;

121 
iMb_x
;

122 
iMb_y
;

125 
	`G‘MbPos™iÚ
(
iCu¼MbAddr
, 
PicWiInMbs
, &
iMb_x
, &
iMb_y
);

130 iàĞ
N®
 -> 
Ba£MemÜyAdd»ss
 != -1){

131 
mv
 = &
aio_tiMv
[
N®
 -> 
Ba£MvMemÜyAdd»ss
];

132 
»f_ba£
 = &
aio_tiRef
[
N®
 -> 
Ba£MvMemÜyAdd»ss
 >> 1];

136 
mv
 = &
aio_tiMv
[0];

137 
»f_ba£
 = &
aio_tiRef
[0];

141 
	`G‘Ba£P»diùiÚ
(
N®
, 
Sliû
, 
ai_p¡Pps
, 
ai_p¡Sps
, 
Sps
, 
Cu¼Residu
, 
Ba£Residu
, 
size_Mb
, 
iCu¼MbAddr
,

142 
SliûTabË
, 
px
, 
py
, 
xk16
, 
xp16
, 
yk16
, 
yp16
, 
Up§m¶šg_tmp
,

143 
Ba£Y
, 
Ba£U
, 
Ba£V
, 
Luma_Residu
, 
Cb_Residu
, 
Cr_Residu
);

146 ; 
iCu¼MbAddr
 < 
PicSizeInMbs
 ;) {

147 
	`š™_»f_ÿche
(
»f_ÿche_l0
);

148 
	`š™_mv_ÿche
(
mv_ÿche_l0
);

151 
mbBa£Addr
 = 
	`G‘Ba£Pos™iÚ
(
iMb_x
 << 4, 
iMb_y
 << 4, &
x_ba£
, &
y_ba£
, &
x_mbP¬tIdx
, &
y_mbP¬tIdx
, 
N®
,

152 
RefP¬t™iÚ
, &
TabBlock
 [
iCu¼MbAddr
], &
Cu¼Residu
[iCu¼MbAddr], 
Ba£Residu
, 
mv
, 
»f_ba£
, 
mv_ÿche_l0
);

155 iàĞ
	`IS_I_SVC
(
Cu¼Residu
 [
iCu¼MbAddr
] . 
MbTy³
)) {

157 
	`G‘Neighbour
(
iCu¼MbAddr
, 
iMb_x
, 
PicWiInMbs
, 
PicSizeInMbs
, 
SliûTabË
, 
Cu¼Residu
, 
Pps
 -> 
cÚ¡¿šed_šŒa_´ed_æag
);

160 
	`MbISVCDecodšg
(
Sps
, 
Pps
, 
N®
, 
Quªtif
, 
ba£lše_veùÜ
, &
Cu¼Residu
 [
iCu¼MbAddr
], 
Ba£Residu
,

161 &
TabBlock
 [
iCu¼MbAddr
], 
PicWidthInPix
, 
iMb_x
, 
iMb_y
,

162 &
Y
[((
iMb_x
 + (
iMb_y
 * 
PicWidthInPix
)) << 4)],

163 &
U
[((
iMb_x
 + (
iMb_y
 * 
PicWidthInPix
 >> 1)) << 3)],

164 &
V
[((
iMb_x
 + (
iMb_y
 * 
PicWidthInPix
 >> 1)è<< 3)], 
Ba£Y
, 
Ba£U
, 
Ba£V
);

168 
	`fl_ÿches_fuÎ_»f
(
Sliû
, 
N®
 -> 
b_¡ride
, N® -> 
b8_¡ride
, 
»f_ÿche_l0
, 
mv_ÿche_l0
,

169 
SliûTabË
, 
Cu¼Residu
, &
aio_tiMv_l0
[
iMb_x
 * 8 + 
iMb_y
 * (
N®
 -> 
b_¡ride
 << 2)],

170 &
aio_tiRef_l0
[
iMb_x
 * 4 + 
iMb_y
 * (
N®
 -> 
b_¡ride
 << 1)], iMb_x, iMb_y);

175 ià(
	`IS_BL
(
Cu¼Residu
 [
iCu¼MbAddr
] . 
MbTy³
)){

176 
	`Decode_P_BL
(
Pps
, 
Sps
, 
N®
, &
Cu¼Residu
[
iCu¼MbAddr
], 
Ba£Residu
, 
ba£lše_veùÜ
,

177 
Quªtif
, 
ai_p¡RefPicLi¡L0
, 
iMb_x
, 
iMb_y
, 
x_ba£
, 
y_ba£
, 
x_mbP¬tIdx
, 
y_mbP¬tIdx
,

178 
PicWidthInMbs
 << 4, 
RefP¬t™iÚ
, 
»f_ÿche_l0
, 
mv_ÿche_l0
, 
mv
, 
»f_ba£
,

179 
DpbLuma
, 
DpbCb
, 
DpbCr
, &
Y
[((
iMb_x
 + ( 
iMb_y
 * 
PicWidthInPix
)) << 4)],

180 &
U
[((
iMb_x
 + ( 
iMb_y
 * 
PicWidthInPix
 >> 1)è<< 3)], &
V
[((iMb_x + ( iMb_y * PicWidthInPix >> 1)) << 3)],

181 &
Residu_Luma
[((
iMb_x
 + ( 
iMb_y
 * 
PicWidthInPix
)è<< 4)], &
Residu_Cb
[((iMb_x + ( iMb_y * PicWidthInPix >> 1)) << 3)] ,

182 &
Residu_Cr
[((
iMb_x
 + ( 
iMb_y
 * 
PicWidthInPix
 >> 1)) << 3)]);

188 
svc_veùÜs
 -> 
P_veùÜs
 [
Cu¼Residu
 [
iCu¼MbAddr
] . 
Mode
](
mv_ÿche_l0
, 
»f_ÿche_l0
, &CurrResidu [iCurrMbAddr],

189 &
TabBlock
 [
iCu¼MbAddr
], 
svc_veùÜs
 -> 
P_sub_veùÜs
, &
DpbLuma
[
off£t_L
],

190 &
DpbCb
[
off£t_C
], &
DpbCr
[off£t_C], &
Y
[((
iMb_x
 + (
iMb_y
 * 
PicWidthInPix
)) << 4)],

191 &
U
[((
iMb_x
 + (
iMb_y
 * 
PicWidthInMbs
 << 3)è<< 3)], &
V
[((iMb_x + (iMb_y * PicWidthInMbs << 3)) << 3)],

192 
iMb_x
 << 4 , 
iMb_y
 << 4, 
PicWidthInMbs
 << 4, 
PicHeightInMbs
 << 4, 
N®
,

193 
ai_p¡RefPicLi¡L0
, 
mv
, 
»f_ba£
, 
ba£lše_veùÜ
, 
RefP¬t™iÚ
);

197 
	`AddResidu®
 (
N®
, 
Pps
, &
Cu¼Residu
[
iCu¼MbAddr
], &
Ba£Residu
[
mbBa£Addr
], 
PicWidthInMbs
 << 4, 
Quªtif
,

198 &
Y
[((
iMb_x
 + (
iMb_y
 * 
PicWidthInPix
)è<< 4)], &
U
[((iMb_x + (iMb_y * 
PicWidthInMbs
 << 3)) << 3)],

199 &
V
[((
iMb_x
 + (
iMb_y
 * 
PicWidthInMbs
 << 3)è<< 3)], &
Residu_Luma
[((iMb_x + (iMb_y * 
PicWidthInPix
)) << 4)],

200 &
Residu_Cb
[((
iMb_x
 + (
iMb_y
 * 
PicWidthInMbs
 << 3)è<< 3)], &
Residu_Cr
[((iMb_x + (iMb_y * PicWidthInMbs << 3)) << 3)]);

205 
	`wr™e_back_mÙiÚ_fuÎ_»f
(
N®
 -> 
b_¡ride
, N® -> 
b8_¡ride
,

206 &
aio_tiMv_l0
[
iMb_x
 * 8 + 
iMb_y
 * (
N®
 -> 
b_¡ride
 << 2)], 
mv_ÿche_l0
,

207 &
aio_tiRef_l0
[
iMb_x
 * 4 + 
iMb_y
 * (
N®
 -> 
b_¡ride
 << 1)], 
»f_ÿche_l0
 );

210 
iCu¼MbAddr
 = 
	`Next_MbAdd»ss
(iCu¼MbAddr, 
PicSizeInMbs
,
PicWiInMbs
, 
SliûTabË
, &
iMb_x
, &
iMb_y
);

212 iàĞ
SliûTabË
 [
iCu¼MbAddr
] == 255 ) {

213 
iCu¼MbAddr
 = 
PicSizeInMbs
 ;

217 
	}
}

	@lib_svc/slice_data_P_svc.h

35 #iâdeà
SLICE_P_H


36 
	#SLICE_P_H


	)

39 
	~"svc_ty³.h
"

40 
	~"svc_d©a.h
"

44 
Decode_P_svc
 ( cÚ¡ 
size_Mb
, cÚ¡ 
SPS
 *
ai_p¡Sps
, cÚ¡ 
PPS
 *
ai_p¡Pps
,cÚ¡ 
SLICE
 *
Sliû
, cÚ¡ 
NAL
 *
N®
,

45 cÚ¡ *
SliûTabË
, cÚ¡ 
DATA
 *
ai_t¡Tab_Block
, 
RESIDU
 *
®l_»sidu
,

46 cÚ¡ 
STRUCT_PF
 *
ba£lše_veùÜ
, 
LIST_MMO
 *
ai_p¡RefPicLi¡L0
, LIST_MMO *
Cu¼’t_pic
,

47 
W_TABLES
 *
quªtif
, 
SVC_VECTORS
 *
svc_veùÜs
, *
px
, *
py
, *
Up§m¶šg_tmp
, *
xk16
,

48 *
xp16
, *
yk16
, *
yp16
, *
aio_tiMv
, 
aio_tiRef
[ ],

49 *
DpbLuma
, *
DpbCb
, *
DpbCr
,

50 *
luma_»sidu
, *
Cb_»sidu
, *
Cr_»sidu
);

53 
G‘Ba£P»diùiÚ
(cÚ¡ 
NAL
 *
N®
, cÚ¡ 
SLICE
 *
Sliû
, cÚ¡ 
PPS
 *
Pps
, cÚ¡ 
SPS
 *
Sps
, cÚ¡ SPS *
Sps_id
,

54 
RESIDU
 *
Cu¼Residu
, RESIDU *
Ba£Residu
, cÚ¡ 
size_Mb
, 
iCu¼MbAddr
,

55 cÚ¡ *
ai_tiMbToSliûGroupM­
, *
x16
, *
y16
, *
xk16
,

56 *
xp16
, *
yk16
, *
yp16
, *
Up§m¶šg_tmp
,

57 *
Ba£Y
, *
Ba£U
, *
Ba£V
,

58 *
Luma_Residu
, *
Cb_Residu
, *
Cr_Residu
);

	@lib_svc/slice_data_cabac.c

35 
	~"ty³.h
"

36 
	~"d©a.h
"

37 
	~"ş.h
"

38 
	~"ÿbac.h
"

39 
	~"ÿvlc.h
"

40 
	~"»fl.h
"

41 
	~"š™_d©a.h
"

42 
	~"maš_d©a.h
"

43 
	~"vlc_ÿbac.h
"

44 
	~"wr™e_back.h
"

45 
	~"ÿbac_bË.h
"

46 
	~"Wr™eBackSVC.h
"

47 
	~"mb_´ed_maš.h
"

48 
	~"¦iû_h—d”.h
"

49 
	~"SliûGroupM­.h
"

50 
	~"Ãighbourhood.h
"

51 
	~"mÙiÚ_veùÜ.h
"

52 
	~"maüoblock_ÿbac.h
"

53 
	~"¦iû_d©a_ÿbac.h
"

54 
	~"fl_ÿches_ÿbac.h
"

59 
	~"fl_ÿches_svc.h
"

60 
	~"E¼ÜCÚû®m’t.h
"

61 
	~"Çl_un™_h—d”_svc_ex‹nsiÚ.h
"

72 
	$P_ÿbac
 (
RESIDU
 *
piùu»_»sidu
, *
d©a
,*
N®By‹sInN®un™
, 
SPS
 *
¥s
, 
PPS
 *
µs
, 
DATA
 *
block
,

73 
SLICE
 *
¦iû
, *
aio_piPos™iÚ
, *
SliûTabË
, *
MbToSliûGroupM­
, *
mv_ÿbac_l0
,

74 *
»f_ÿbac_l0
, *
EndOfSliû
, *
mvl0_io
, *
»æ0_io
)

79 
	`__deş¥ec
(
	`®ign
(64)è
nÚ_z”o_couÁ_ÿche
 [48];

80 
	`__deş¥ec
(
	`®ign
(64)è
mv_ÿche_l0
[48][2];

81 
	`__deş¥ec
(
	`®ign
(64)è
»f_ÿche_l0
[48];

82 
	`__deş¥ec
(
	`®ign
(64)è
mvl0_ÿche
[48][2];

83 
	`__deş¥ec
(
	`®ign
(64)è
»æ0_ÿche
[48];

86 
CABAC_NEIGH
 
·¿m_Ãigh
[1];

87 
CABACCÚ‹xt
 
ÿbac
[1];

90 vŞ©
mÜeD©aFÏg
 = 1 ;

91 
¦iû_QP
 = 
¦iû
 -> 
¦iû_qp_d–
 ;

92 
mb_sk_æag
 = 0 ;

93 
diff_qp
 = 0;

95 
iCu¼MbAddr
 = 
¦iû
 -> 
fœ¡_mb_š_¦iû
;

96 cÚ¡ 
PicSizeInMbs
 = 
¥s
 -> PicSizeInMbs ;

97 cÚ¡ 
PicWidthInMbs
 = 
¥s
 -> 
pic_width_š_mbs
;

98 cÚ¡ 
PicHeightInMbs
 = 
¥s
 -> 
pic_height_š_m­_un™s
;

101 
iMb_x
;

102 
iMb_y
;

103 
La¡_Qp
 = 
¦iû
 -> 
¦iû_qp_d–
 ;

104 
E¼ÜD‘eùiÚ
 = 0;

107 
	`G‘MbPos™iÚ
(
iCu¼MbAddr
, 
PicWidthInMbs
, &
iMb_x
, &
iMb_y
);

110 
	`CabacDecod”In™AVC
(
ÿbac
, 
d©a
, 
N®By‹sInN®un™
, *
aio_piPos™iÚ
, 
¦iû_QP
, &
ÿbac_cÚ‹xt_š™_PB
[
¦iû
 -> 
ÿbac_š™_idc
][0]);

116 
	`š™_block
(&
block
[
iCu¼MbAddr
]);

117 
	`š™_»sidu
(&
piùu»_»sidu
[
iCu¼MbAddr
]);

118 
SliûTabË
 [
iCu¼MbAddr
] = 
¦iû
 -> 
¦iû_num
 ;

119 
	`G‘Neighbour
(
iCu¼MbAddr
, 
iMb_x
, 
PicWidthInMbs
, 
PicSizeInMbs
, 
SliûTabË
, 
piùu»_»sidu
, 0);

122 
mb_sk_æag
 = 
	`decode_ÿbac_mb_sk
Ğ
ÿbac
, 
ÿbac_¡©e
, 
piùu»_»sidu
[
iCu¼MbAddr
] . 
AvaMask
,

123 
SliûTabË
, 
piùu»_»sidu
, 
¦iû
 -> 
¦iû_ty³
, 
iCu¼MbAddr
, 
PicWidthInMbs
);

124 ià(
mb_sk_æag
){

125 
diff_qp
 = 0;

127 
SliûTabË
 [
iCu¼MbAddr
] = 
¦iû
 -> 
¦iû_num
 ;

128 
	`š™_P_sk_mb
(&
piùu»_»sidu
[
iCu¼MbAddr
], 
La¡_Qp
, 
¦iû
);

131 
	`š™_mb_sk_mv_»f
(&
mv_ÿbac_l0
[
iMb_x
 * 8 + 
iMb_y
 * (
PicWidthInMbs
 << 5)],

132 &
»f_ÿbac_l0
[
iMb_x
 * 2 + 
iMb_y
 * (
PicWidthInMbs
 << 2)], PicWidthInMbs << 3, PicWidthInMbs << 1);

133 
	`š™_sk_nÚ_z”o_couÁ
(
iMb_x
, 
iMb_y
, 
¦iû
 -> 
mb_¡ride
, 
PicSizeInMbs
,
block
 );

138 
	`š™_»f_ÿche
(
»æ0_ÿche
);

139 
	`š™_mv_ÿche
(
mvl0_ÿche
);

140 
	`fl_ÿches_mÙiÚ_veùÜ_fuÎ_»f
(
¦iû
, sliû -> 
b_¡ride
, sliû -> 
b8_¡ride
,

141 
»æ0_ÿche
, 
mvl0_ÿche
, 
SliûTabË
 , 
piùu»_»sidu
,

142 &
mvl0_io
[(
iMb_x
 << 3è+ 
iMb_y
 * (
¦iû
 -> 
b_¡ride
 << 2)],

143 &
»æ0_io
[(
iMb_x
 << 2è+ 
iMb_y
 * (
¦iû
 -> 
b_¡ride
 << 1)], iMb_x, iMb_y);

147 
	`mÙiÚ_veùÜ_sk
Ğ
mvl0_ÿche
, 
»æ0_ÿche
);

148 
	`wr™e_back_P_sk_mÙiÚ_fuÎ_»f
Ğ
¦iû
 -> 
b_¡ride
, sliû -> 
b8_¡ride
,

149 &
mvl0_io
 [(
iMb_x
 << 3è+ 
iMb_y
 * (
¦iû
 -> 
b_¡ride
 << 2)], 
mvl0_ÿche
[12],

150 &
»æ0_io
[(
iMb_x
 << 2è+ 
iMb_y
 * (
¦iû
 -> 
b_¡ride
 << 1)]);

155 
	`š™_»f_ÿche
(
»f_ÿche_l0
);

156 
	`š™_»f_ÿche
(
»æ0_ÿche
);

157 
	`š™_mv_ÿche
(
mvl0_ÿche
);

158 
	`š™_mv_ÿche
(
mv_ÿche_l0
);

160 
	`fl_ÿches_mÙiÚ_veùÜ
Ğ
¦iû
, 
PicWidthInMbs
 << 3, PicWidthInMb << 1, 
»f_ÿche_l0
,

161 
mv_ÿche_l0
, 
SliûTabË
, &
piùu»_»sidu
[
iCu¼MbAddr
],

162 &
mv_ÿbac_l0
[
iMb_x
 * 8 + 
iMb_y
 * (
PicWidthInMbs
 << 5)],

163 &
»f_ÿbac_l0
[
iMb_x
 * 2 + 
iMb_y
 * (
PicWidthInMbs
 << 2)], iMb_x,iMb_y);

165 
	`fl_ÿches_mÙiÚ_veùÜ_fuÎ_»f
(
¦iû
, sliû -> 
b_¡ride
, sliû -> 
b8_¡ride
, 
»æ0_ÿche
,

166 
mvl0_ÿche
, 
SliûTabË
 , 
piùu»_»sidu
, &
mvl0_io
[(
iMb_x
 << 3è+ 
iMb_y
 * (
¦iû
 -> 
b_¡ride
 << 2)],

167 &
»æ0_io
[(
iMb_x
 << 2è+ 
iMb_y
 * (
¦iû
 -> 
b_¡ride
 << 1)], iMb_x, iMb_y);

171 
E¼ÜD‘eùiÚ
 = 
	`maüoblock_Ïy”_P_ÿbac
(&
piùu»_»sidu
[
iCu¼MbAddr
], 
¦iû
, 
block
, 
nÚ_z”o_couÁ_ÿche
, 
SliûTabË
,

172 
iCu¼MbAddr
, 
ÿbac
, 
ÿbac_¡©e
, 
·¿m_Ãigh
, 
mv_ÿche_l0
, 
»f_ÿche_l0
, 
iMb_x
, 
iMb_y
,

173 
µs
 -> 
cÚ¡¿šed_šŒa_´ed_æag
,…p -> 
ŒªsfÜm_8x8_mode_æag
, &
La¡_Qp
, &
diff_qp
, 
mvl0_ÿche
, 
»æ0_ÿche
);

176 
	`NÚZ”oCouÁMªagem’t
(
nÚ_z”o_couÁ_ÿche
, 
iMb_x
, 
iMb_y
, 
PicWidthInMbs
, 
PicHeightInMbs
, &
block
[
iCu¼MbAddr
], &
piùu»_»sidu
[iCurrMbAddr]);

178 
	`wr™e_back_mÙiÚ
(
PicWidthInMbs
 << 3, PicWidthInMbs << 1,

179 &
mv_ÿbac_l0
[
iMb_x
 * 8 + 
iMb_y
 * (
PicWidthInMbs
 << 5)], 
mv_ÿche_l0
,

180 &
»f_ÿbac_l0
[
iMb_x
 * 2 + 
iMb_y
 * (
PicWidthInMbs
 << 2)], 
»f_ÿche_l0
);

183 
	`wr™e_back_mÙiÚ_fuÎ_»f
Ğ
¦iû
 -> 
b_¡ride
, sliû -> 
b8_¡ride
,

184 &
mvl0_io
 [(
iMb_x
 << 3è+ 
iMb_y
 * (
¦iû
 -> 
b_¡ride
 << 2)], 
mvl0_ÿche
,

185 &
»æ0_io
[(
iMb_x
 << 2è+ 
iMb_y
 * (
¦iû
 -> 
b_¡ride
 << 1)], 
»æ0_ÿche
 );

188 
¦iû
 -> 
mb_xy
++;

191 
iCu¼MbAddr
 = 
	`Next_MbAdd»ss
(iCu¼MbAddr, 
PicSizeInMbs
, 
PicWidthInMbs
, 
MbToSliûGroupM­
, &
iMb_x
, &
iMb_y
);

192 
mÜeD©aFÏg
 = !
	`g‘_ÿbac_‹rmš©e
(
ÿbac
, 
¦iû
 -> 
mb_xy
, 
PicSizeInMbs
);

194 }  
mÜeD©aFÏg
 && !
E¼ÜD‘eùiÚ
);

196 *
EndOfSliû
 = 
	`EndOfSliûMªagem’t
(
¦iû
, 
PicSizeInMbs
, 
E¼ÜD‘eùiÚ
);

198  
E¼ÜD‘eùiÚ
;

199 
	}
}

210 
	$B_ÿbac
 ( 
RESIDU
 *
piùu»_»sidu
, *
d©a
,*
N®By‹sInN®un™
, 
SPS
 *
¥s
, 
PPS
 *
µs
, 
DATA
 *
block
,

211 
SLICE
 *
¦iû
, *
aio_piPos™iÚ
, *
SliûTabË
, *
MbToSliûGroupM­
, *
mv_ÿbac_l0
,

212 *
mv_ÿbac_l1
, *
»f_ÿbac_l0
, *
»f_ÿbac_l1
, *
EndOfSliû
, 
LIST_MMO
 * 
ai_pRefPicLi¡L1
,

213 *
mvl0_io
, *
mvl1_io
, *
»æ0_io
, *
»æ1_io
, 
lÚg_‹rm
,

214 
¦iû_ty³
, *
mvl1_l0
, *
mvl1_l1
, *
»æ1_l0
, *
»æ1_l1
)

218 
	`__deş¥ec
(
	`®ign
(64)è
nÚ_z”o_couÁ_ÿche
 [48];

219 
	`__deş¥ec
(
	`®ign
(64)è
mv_ÿche_l0
[48][2];

220 
	`__deş¥ec
(
	`®ign
(64)è
mv_ÿche_l1
[48][2];

221 
	`__deş¥ec
(
	`®ign
(64)è
»f_ÿche_l0
[48];

222 
	`__deş¥ec
(
	`®ign
(64)è
»f_ÿche_l1
[48];

223 
	`__deş¥ec
(
	`®ign
(64)è
mvl0_ÿche
[48][2];

224 
	`__deş¥ec
(
	`®ign
(64)è
mvl1_ÿche
[48][2];

225 
	`__deş¥ec
(
	`®ign
(64)è
»æ0_ÿche
[48];

226 
	`__deş¥ec
(
	`®ign
(64)è
»æ1_ÿche
[48];

229 
CABAC_NEIGH
 
·¿m_Ãigh
[1];

230 
CABACCÚ‹xt
 
ÿbac
[1];

232 vŞ©
mÜeD©aFÏg
 = 1 ;

233 
mb_sk_æag
 = 0 ;

234 
diff_qp
 = 0;

235 
¦iû_QP
 = 
¦iû
 -> 
¦iû_qp_d–
 ;

238 cÚ¡ 
PicSizeInMbs
 = 
¥s
 -> PicSizeInMbs ;

239 cÚ¡ 
PicWidthInMbs
 = 
¥s
 -> 
pic_width_š_mbs
;

240 cÚ¡ 
PicHeightInMbs
 = 
¥s
 -> 
pic_height_š_m­_un™s
;

241 
iCu¼MbAddr
 = 
¦iû
 -> 
fœ¡_mb_š_¦iû
;

242 
iMb_x
;

243 
iMb_y
;

245 
La¡_Qp
 = 
¦iû
 -> 
¦iû_qp_d–
;

246 
E¼ÜD‘eùiÚ
 = 0;

249 
	`G‘MbPos™iÚ
(
iCu¼MbAddr
, 
PicWidthInMbs
, &
iMb_x
, &
iMb_y
);

252 
	`CabacDecod”In™AVC
(
ÿbac
, 
d©a
, 
N®By‹sInN®un™
, *
aio_piPos™iÚ
, 
¦iû_QP
, &
ÿbac_cÚ‹xt_š™_PB
[
¦iû
 -> 
ÿbac_š™_idc
][0]);

256 
	`š™_block
(&
block
[
iCu¼MbAddr
]);

257 
	`š™_»sidu
(&
piùu»_»sidu
[
iCu¼MbAddr
]);

258 
piùu»_»sidu
[
iCu¼MbAddr
] . 
SliûNum
 = 
SliûTabË
 [iCu¼MbAddr] = 
¦iû
 -> 
¦iû_num
 ;

259 
	`G‘Neighbour
(
iCu¼MbAddr
, 
iMb_x
, 
PicWidthInMbs
, 
PicSizeInMbs
, 
SliûTabË
, 
piùu»_»sidu
, 0);

262 
mb_sk_æag
 = 
	`decode_ÿbac_mb_sk
Ğ
ÿbac
, 
ÿbac_¡©e
, 
piùu»_»sidu
[
iCu¼MbAddr
] . 
AvaMask
,

263 
SliûTabË
, 
piùu»_»sidu
, 
¦iû
 -> 
¦iû_ty³
, 
iCu¼MbAddr
, 
PicWidthInMbs
);

265 ià(
mb_sk_æag
){

267 
	`š™_B_sk_mb
(&
piùu»_»sidu
[
iCu¼MbAddr
], 
La¡_Qp
, 
¦iû
);

270 
diff_qp
 = 0;

272 
	`š™_mb_sk_mv_»f
(&
mv_ÿbac_l0
[
iMb_x
 * 8 + 
iMb_y
 * (
PicWidthInMbs
 << 5)] ,

273 &
»f_ÿbac_l0
[
iMb_x
 * 2 + 
iMb_y
 * (
PicWidthInMbs
 << 2)], PicWidthInMbs << 3, PicWidthInMbs << 1);

274 
	`š™_mb_sk_mv_»f
(&
mv_ÿbac_l1
[
iMb_x
 * 8 + 
iMb_y
 * (
PicWidthInMbs
 << 5)] ,

275 &
»f_ÿbac_l1
[
iMb_x
 * 2 + 
iMb_y
 * (
PicWidthInMbs
 << 2)], PicWidthInMbs << 3, PicWidthInMbs << 1);

276 
	`š™_sk_nÚ_z”o_couÁ
(
iMb_x
, 
iMb_y
, 
¦iû
 -> 
mb_¡ride
, 
PicSizeInMbs
, 
block
);

280 
	`š™_»f_ÿche
(
»æ0_ÿche
);

281 
	`š™_»f_ÿche
(
»æ1_ÿche
);

282 
	`š™_mv_ÿche
(
mvl0_ÿche
);

283 
	`š™_mv_ÿche
(
mvl1_ÿche
);

286 
	`fl_ÿches_mÙiÚ_veùÜ_B_fuÎ_»f
(
¦iû
, sliû -> 
b_¡ride
, sliû -> 
b8_¡ride
,

287 
»æ0_ÿche
, 
»æ1_ÿche
, 
mvl0_ÿche
, 
mvl1_ÿche
, 
SliûTabË
 , 
piùu»_»sidu
,

288 &
mvl0_io
 [(
iMb_x
 << 3è+ 
iMb_y
 * (
¦iû
 -> 
b_¡ride
 << 2)],

289 &
mvl1_io
 [(
iMb_x
 << 3è+ 
iMb_y
 * (
¦iû
 -> 
b_¡ride
 << 2)],

290 &
»æ0_io
[(
iMb_x
 << 2è+ 
iMb_y
 * (
¦iû
 -> 
b_¡ride
 << 1)],

291 &
»æ1_io
[(
iMb_x
 << 2è+ 
iMb_y
 * (
¦iû
 -> 
b_¡ride
 << 1)], 
iCu¼MbAddr
, iMb_x);

294 
	`mÙiÚ_veùÜ_B_sk
(
mvl0_ÿche
, 
mvl1_ÿche
, 
»æ0_ÿche
, 
»æ1_ÿche
,

295 &
mvl1_l0
[(
iMb_x
 << 3è+ 
iMb_y
 * (
¦iû
 -> 
b_¡ride
 << 2)],

296 &
mvl1_l1
[(
iMb_x
 << 3è+ 
iMb_y
 * (
¦iû
 -> 
b_¡ride
 << 2)],

297 &
»æ1_l0
[(
iMb_x
 << 2è+ 
iMb_y
 * (
¦iû
 -> 
b_¡ride
 << 1)],

298 &
»æ1_l1
[(
iMb_x
 << 2è+ 
iMb_y
 * (
¦iû
 -> 
b_¡ride
 << 1)],

299 
¦iû
, 
¥s
 -> 
dœeù_8x8_šã»nû_æag
, 
ai_pRefPicLi¡L1
 -> 
lÚg_‹rm
,‡i_pRefPicLi¡L1 -> 
¦iû_ty³
, 1);

303 
	`wr™e_back_mÙiÚ_fuÎ_»f
Ğ
¦iû
 -> 
b_¡ride
, sliû -> 
b8_¡ride
,

304 &
mvl0_io
[(
iMb_x
 << 3è+ 
iMb_y
 * (
¦iû
 -> 
b_¡ride
 << 2)], 
mvl0_ÿche
,

305 &
»æ0_io
[(
iMb_x
 << 2è+ 
iMb_y
 * (
¦iû
 -> 
b_¡ride
 << 1)], 
»æ0_ÿche
);

306 
	`wr™e_back_mÙiÚ_fuÎ_»f
Ğ
¦iû
 -> 
b_¡ride
, sliû -> 
b8_¡ride
,

307 &
mvl1_io
[(
iMb_x
 << 3è+ 
iMb_y
 * (
¦iû
 -> 
b_¡ride
 << 2)], 
mvl1_ÿche
,

308 &
»æ1_io
[(
iMb_x
 << 2è+ 
iMb_y
 * (
¦iû
 -> 
b_¡ride
 << 1)], 
»æ1_ÿche
);

312 
	`š™_»f_ÿche
(
»f_ÿche_l0
);

313 
	`š™_»f_ÿche
(
»f_ÿche_l1
);

314 
	`š™_»f_ÿche
(
»æ0_ÿche
);

315 
	`š™_»f_ÿche
(
»æ1_ÿche
);

316 
	`š™_mv_ÿche
Ğ
mv_ÿche_l0
);

317 
	`š™_mv_ÿche
Ğ
mv_ÿche_l1
);

318 
	`š™_mv_ÿche
Ğ
mvl0_ÿche
);

319 
	`š™_mv_ÿche
Ğ
mvl1_ÿche
);

322 
	`fl_ÿches_mÙiÚ_veùÜ_B
Ğ
¦iû
, 
PicWidthInMbs
 << 3, PicWidthInMbs << 1,

323 
»f_ÿche_l0
, 
»f_ÿche_l1
, 
mv_ÿche_l0
, 
mv_ÿche_l1
, 
SliûTabË
, &
piùu»_»sidu
[
iCu¼MbAddr
],

324 &
mv_ÿbac_l0
[
iMb_x
 * 8 + 
iMb_y
 * (
PicWidthInMbs
 << 5)], &
mv_ÿbac_l1
[iMb_x * 8 + iMb_y * (PicWidthInMbs << 5)],

325 &
»f_ÿbac_l0
[
iMb_x
 * 2 + 
iMb_y
 * (
PicWidthInMbs
 << 2)], &
»f_ÿbac_l1
[iMb_x * 2 + iMb_y * (PicWidthInMbs << 2)],

326 
iCu¼MbAddr
,
iMb_x
);

330 
	`fl_ÿches_mÙiÚ_veùÜ_B_fuÎ_»f
(
¦iû
, sliû -> 
b_¡ride
, sliû -> 
b8_¡ride
,

331 
»æ0_ÿche
, 
»æ1_ÿche
, 
mvl0_ÿche
, 
mvl1_ÿche
, 
SliûTabË
 , 
piùu»_»sidu
,

332 &
mvl0_io
 [(
iMb_x
 << 3è+ 
iMb_y
 * (
¦iû
 -> 
b_¡ride
 << 2)],

333 &
mvl1_io
 [(
iMb_x
 << 3è+ 
iMb_y
 * (
¦iû
 -> 
b_¡ride
 << 2)],

334 &
»æ0_io
[(
iMb_x
 << 2è+ 
iMb_y
 * (
¦iû
 -> 
b_¡ride
 << 1)],

335 &
»æ1_io
[(
iMb_x
 << 2è+ 
iMb_y
 * (
¦iû
 -> 
b_¡ride
 << 1)], 
iCu¼MbAddr
, iMb_x);

340 
E¼ÜD‘eùiÚ
 = 
	`maüoblock_Ïy”_B_ÿbac
(&
piùu»_»sidu
[
iCu¼MbAddr
], 
¦iû
, 
block
, 
nÚ_z”o_couÁ_ÿche
,

341 
SliûTabË
, 
iCu¼MbAddr
, 
ÿbac
, 
ÿbac_¡©e
, 
·¿m_Ãigh
, 
mv_ÿche_l0
, 
mv_ÿche_l1
, 
»f_ÿche_l0
,

342 
»f_ÿche_l1
, 
iMb_x
, 
iMb_y
, 
µs
 -> 
cÚ¡¿šed_šŒa_´ed_æag
 , 
¥s
 -> 
dœeù_8x8_šã»nû_æag
,

343 
µs
 -> 
ŒªsfÜm_8x8_mode_æag
, &
La¡_Qp
, &
diff_qp
, 1, 
mvl0_ÿche
, 
mvl1_ÿche
, 
»æ0_ÿche
,

344 
»æ1_ÿche
, 
lÚg_‹rm
, 
¦iû_ty³
, &
mvl1_l0
[(
iMb_x
 << 3è+ 
iMb_y
 * (
¦iû
 -> 
b_¡ride
 << 2)],

345 &
mvl1_l1
[(
iMb_x
 << 3è+ 
iMb_y
 * (
¦iû
 -> 
b_¡ride
 << 2)], &
»æ1_l0
[(iMb_x << 2) + iMb_y * (slice -> b_stride << 1)],

346 &
»æ1_l1
[(
iMb_x
 << 2è+ 
iMb_y
 * (
¦iû
 -> 
b_¡ride
 << 1)]);

350 
	`NÚZ”oCouÁMªagem’t
(
nÚ_z”o_couÁ_ÿche
, 
iMb_x
, 
iMb_y
, 
PicWidthInMbs
, 
PicHeightInMbs
, &
block
[
iCu¼MbAddr
], &
piùu»_»sidu
[iCurrMbAddr]);

352 
	`wr™e_back_mÙiÚ
(
PicWidthInMbs
 << 3, PicWidthInMb << 1, &
mv_ÿbac_l0
[
iMb_x
 * 8 + 
iMb_y
 * (PicWidthInMbs << 5)],

353 
mv_ÿche_l0
, &
»f_ÿbac_l0
[
iMb_x
 * 2 + 
iMb_y
 * (
PicWidthInMbs
 << 2)], 
»f_ÿche_l0
);

354 
	`wr™e_back_mÙiÚ
(
PicWidthInMbs
 << 3, PicWidthInMb << 1, &
mv_ÿbac_l1
[
iMb_x
 * 8 + 
iMb_y
 * (PicWidthInMbs << 5)],

355 
mv_ÿche_l1
, &
»f_ÿbac_l1
[
iMb_x
 * 2 + 
iMb_y
 * (
PicWidthInMbs
 << 2)], 
»f_ÿche_l1
);

358 
	`wr™e_back_mÙiÚ_fuÎ_»f
Ğ
¦iû
 -> 
b_¡ride
, sliû -> 
b8_¡ride
,

359 &
mvl0_io
[(
iMb_x
 << 3è+ 
iMb_y
 * (
¦iû
 -> 
b_¡ride
 << 2)], 
mvl0_ÿche
,

360 &
»æ0_io
[(
iMb_x
 << 2è+ 
iMb_y
 * (
¦iû
 -> 
b_¡ride
 << 1)], 
»æ0_ÿche
 );

361 
	`wr™e_back_mÙiÚ_fuÎ_»f
Ğ
¦iû
 -> 
b_¡ride
, sliû -> 
b8_¡ride
,

362 &
mvl1_io
[(
iMb_x
 << 3è+ 
iMb_y
 * (
¦iû
 -> 
b_¡ride
 << 2)], 
mvl1_ÿche
,

363 &
»æ1_io
[(
iMb_x
 << 2è+ 
iMb_y
 * (
¦iû
 -> 
b_¡ride
 << 1)], 
»æ1_ÿche
 );

366 
¦iû
 -> 
mb_xy
++;

368 
iCu¼MbAddr
 = 
	`Next_MbAdd»ss
(iCu¼MbAddr, 
PicSizeInMbs
, 
PicWidthInMbs
, 
MbToSliûGroupM­
, &
iMb_x
, &
iMb_y
);

369 
mÜeD©aFÏg
 = !
	`g‘_ÿbac_‹rmš©e
(
ÿbac
, 
¦iû
 -> 
mb_xy
, 
PicSizeInMbs
);

372 }  
mÜeD©aFÏg
 && !
E¼ÜD‘eùiÚ
);

374 *
EndOfSliû
 = 
	`EndOfSliûMªagem’t
(
¦iû
, 
PicSizeInMbs
, 
E¼ÜD‘eùiÚ
);

376  
E¼ÜD‘eùiÚ
;

377 
	}
}

385 
	$¦iû_ba£_Ïy”_ÿbac
 (*
d©a
, *
N®By‹sInN®un™
, *
aio_piPos™iÚ
, 
SPS
 *
¥s
, 
PPS
 *
µs
,

386 *
ai_¦iû_group_id
, 
LIST_MMO
 *
Cu¼’t_pic
, LIST_MMO *
ai_pRefPicLi¡L1
, 
NAL
 *
N®
,

387 *
mv_ÿbac_l0
, *
mv_ÿbac_l1
, *
»f_ÿbac_l0
, *
»f_ÿbac_l1
,

388 
SLICE
 *
¦iû
, *
MbToSliûGroupM­
, *
SliûTabË
, 
DATA
 *
Tab_block
, 
RESIDU
 *
piùu»_»sidu
,

389 *
’d_of_¦iû
, *
mvl0_io
, *
mvl1_io
, *
»æ0_io
, *
»æ1_io
)

394 ià(!
N®
 -> 
N®ToSk
){

395 
pos
 = *
aio_piPos™iÚ
;

398 iàĞ*
’d_of_¦iû
 == 0 ) {

399 
	`»š™_¦iû
(
¦iû
);

400 
¦iû
 -> 
mb_¡ride
 = 
¥s
 -> 
pic_width_š_mbs
;

401 
¦iû
 -> 
b_¡ride
 = 
¥s
 -> b_stride;

402 
¦iû
 -> 
b8_¡ride
 = 
¥s
 -> b8_stride;

403 
	`m­Un™ToSliû
(
¥s
, 
µs
, 
MbToSliûGroupM­
, 
¦iû
 -> 
¦iû_group_chªge_cyşe
, 
ai_¦iû_group_id
);

404 
	`In™Uch¬Tab
(
¥s
 -> 
PicSizeInMbs
, 
SliûTabË
);

406 
	`SliûMªagem’t
(
µs
, 
¦iû
);

412 if(Ğ
pos
 & 7)!= 0) {

413 
pos
 =((pos >> 3) + 1) << 3;

416 iàĞ
¦iû
 -> 
¦iû_ty³
 =ğ
SLICE_TYPE_B
){

417 
N®
 -> 
E¼ÜD‘eùiÚ
 = 
	`B_ÿbac
 (
piùu»_»sidu
, 
d©a
, 
N®By‹sInN®un™
, 
¥s
, 
µs
, 
Tab_block
, 
¦iû
, &
pos
, 
SliûTabË
,

418 
MbToSliûGroupM­
, 
mv_ÿbac_l0
, 
mv_ÿbac_l1
, 
»f_ÿbac_l0
, 
»f_ÿbac_l1
, 
’d_of_¦iû
, 
ai_pRefPicLi¡L1
,

419 &
mvl0_io
[
Cu¼’t_pic
 -> 
MvMemÜyAdd»ss
], &
mvl1_io
[Current_pic -> MvMemoryAddress],

420 &
»æ0_io
[
Cu¼’t_pic
 -> 
MvMemÜyAdd»ss
 >> 1], &
»æ1_io
[Current_pic -> MvMemoryAddress >> 1],

421 
ai_pRefPicLi¡L1
[0] . 
lÚg_‹rm
,‡i_pRefPicLi¡L1[0] . 
¦iû_ty³
, &
mvl0_io
[ai_pRefPicLi¡L1[0] . 
MvMemÜyAdd»ss
],

422 &
mvl1_io
[
ai_pRefPicLi¡L1
[0] . 
MvMemÜyAdd»ss
], &
»æ0_io
[ai_pRefPicListL1[0] . MvMemoryAddress >> 1],

423 &
»æ1_io
[
ai_pRefPicLi¡L1
[0] . 
MvMemÜyAdd»ss
 >> 1]);

425 }iàĞ
¦iû
 -> 
¦iû_ty³
 =ğ
SLICE_TYPE_P
){

426 
N®
 -> 
E¼ÜD‘eùiÚ
 = 
	`P_ÿbac
(
piùu»_»sidu
, 
d©a
, 
N®By‹sInN®un™
, 
¥s
, 
µs
, 
Tab_block
, 
¦iû
, &
pos
,

427 
SliûTabË
, 
MbToSliûGroupM­
, 
mv_ÿbac_l0
, 
»f_ÿbac_l0
, 
’d_of_¦iû
,

428 &
mvl0_io
[
Cu¼’t_pic
 -> 
MvMemÜyAdd»ss
], &
»æ0_io
[Current_pic -> MvMemoryAddress >> 1]);

430 
N®
 -> 
E¼ÜD‘eùiÚ
 = 
	`¦iû_d©a_I_ÿbac
 (
piùu»_»sidu
, 
d©a
, 
N®By‹sInN®un™
, 
¥s
, 
µs
, 
Tab_block
, 
¦iû
,

431 &
pos
, 
SliûTabË
, 
MbToSliûGroupM­
, 
’d_of_¦iû
);

435 #ifdeà
ERROR_CONCEALMENT


437 
	`AVCE¼ÜCÚû®m’t
(
N®
, 
¥s
, 
¦iû
, 
SliûTabË
, 
piùu»_»sidu
, 
Tab_block
,

438 &
mvl0_io
[
Cu¼’t_pic
 -> 
MvMemÜyAdd»ss
], &
mvl1_io
[Current_pic -> MvMemoryAddress],

439 &
»æ0_io
[
Cu¼’t_pic
 -> 
MvMemÜyAdd»ss
 >> 1], &
»æ1_io
[Current_pic -> MvMemoryAddress >> 1]);

441 
	}
}

	@lib_svc/slice_data_cavlc.c

36 
	~"ty³.h
"

37 
	~"ÿvlc.h
"

38 
	~"š™_d©a.h
"

39 
	~"wr™e_back.h
"

40 
	~"mb_´ed_maš.h
"

41 
	~"Wr™eBackSVC.h
"

42 
	~"¦iû_h—d”.h
"

43 
	~"SliûGroupM­.h
"

44 
	~"mÙiÚ_veùÜ.h
"

45 
	~"¦iû_d©a_vlc.h
"

46 
	~"fl_ÿches_svc.h
"

47 
	~"maüoblock_Ïy”.h
"

48 
	~"fl_ÿches_ÿbac.h
"

49 
	~"maüoblock_Ïy”_maš.h
"

52 
	~"E¼ÜCÚû®m’t.h
"

53 
	~"Çl_un™_h—d”_svc_ex‹nsiÚ.h
"

63 
	$P_ÿvlc
(cÚ¡ 
PPS
 *
µs
, 
RESIDU
 *
piùu»_»sidu
, cÚ¡ *
ai_pcD©a
, cÚ¡ *
ai_piN®By‹sInN®un™
,

64 cÚ¡ 
SPS
 *
Sps
, 
DATA
 *
aio_t¡Block
, 
SLICE
 *
Sliû
, *
aio_piPos™iÚ
, cÚ¡ 
VLC_TABLES
 *
Vlc
,

65 *
SliûTabË
, cÚ¡ *
SliûGroupM­
, *
EndOfSliû
, *
mvl0_io
, *
»æ0_io
)

69 
i
;

72 cÚ¡ 
PicSizeInMbs
 = 
Sps
 -> PicSizeInMbs;

73 cÚ¡ 
PicWidthInMbs
 = 
Sps
 -> 
pic_width_š_mbs
;

74 cÚ¡ 
PicHeightInMbs
 = 
Sps
 -> 
pic_height_š_m­_un™s
;

75 vŞ©
mÜeD©aFÏg
 = 1;

77 
	`__deş¥ec
(
	`®ign
(64)è
NÚZ”oCouÁCache
[48];

78 
	`__deş¥ec
(
	`®ign
(64)è
»f_ÿche_l0
 [48];

79 
	`__deş¥ec
(
	`®ign
(64)è
mv_ÿche_l0
 [48][2];

80 
iCu¼MbAddr
 = 
Sliû
 -> 
fœ¡_mb_š_¦iû
;

82 
iMb_x
;

83 
iMb_y
;

84 
La¡_Qp
 = 
Sliû
 -> 
¦iû_qp_d–
;

85 
E¼ÜD‘eùiÚ
 = 0;

90 
	`G‘MbPos™iÚ
(
iCu¼MbAddr
, 
PicWidthInMbs
, &
iMb_x
, &
iMb_y
);

98 
mb_sk_run
 = 
	`»ad_ue
(
ai_pcD©a
, 
aio_piPos™iÚ
);

99 ià(
mb_sk_run
){

100  
i
 = 0 ; i < 
mb_sk_run
 && 
iCu¼MbAddr
 < 
PicSizeInMbs
; i++ ) {

102 
	`š™_block
(&
aio_t¡Block
[
iCu¼MbAddr
]);

103 
	`š™_»sidu
(&
piùu»_»sidu
[
iCu¼MbAddr
]);

104 
SliûTabË
 [
iCu¼MbAddr
] = 
Sliû
 -> 
¦iû_num
 ;

105 
	`š™_P_sk_mb
(&
piùu»_»sidu
[
iCu¼MbAddr
], 
La¡_Qp
, 
Sliû
);

107 
	`š™_sk_nÚ_z”o_couÁ
(
iMb_x
, 
iMb_y
,
Sps
 -> 
pic_width_š_mbs
 , 
PicSizeInMbs
, 
aio_t¡Block
);

110 
	`š™_»f_ÿche
(
»f_ÿche_l0
);

111 
	`š™_mv_ÿche
(
mv_ÿche_l0
);

113 
	`fl_ÿches_mÙiÚ_veùÜ_fuÎ_»f
(
Sliû
, Sliû -> 
b_¡ride
, Sliû -> 
b8_¡ride
,

114 
»f_ÿche_l0
, 
mv_ÿche_l0
, 
SliûTabË
 , 
piùu»_»sidu
,

115 &
mvl0_io
[(
iMb_x
 << 3è+ 
iMb_y
 * (
Sliû
 -> 
b_¡ride
 << 2)],

116 &
»æ0_io
[(
iMb_x
 << 2è+ 
iMb_y
 * (
Sliû
 -> 
b_¡ride
 << 1)], iMb_x, iMb_y);

120 
	`mÙiÚ_veùÜ_sk
Ğ
mv_ÿche_l0
, 
»f_ÿche_l0
);

121 
	`wr™e_back_P_sk_mÙiÚ_fuÎ_»f
Ğ
Sliû
 -> 
b_¡ride
, Sliû -> 
b8_¡ride
,

122 &
mvl0_io
 [(
iMb_x
 << 3è+ 
iMb_y
 * (
Sliû
 -> 
b_¡ride
 << 2)], 
mv_ÿche_l0
[12],

123 &
»æ0_io
[(
iMb_x
 << 2è+ 
iMb_y
 * (
Sliû
 -> 
b_¡ride
 << 1)]);

126 
iCu¼MbAddr
 = 
	`Next_MbAdd»ss
(iCu¼MbAddr, 
PicSizeInMbs
, 
PicWidthInMbs
, 
SliûGroupM­
, &
iMb_x
, &
iMb_y
);

127 
Sliû
 -> 
mb_xy
 ++;

131 
mÜeD©aFÏg
 = 
	`MÜeRb¥
(
ai_pcD©a
, 
aio_piPos™iÚ
, 
ai_piN®By‹sInN®un™
, 
iCu¼MbAddr
, 
PicSizeInMbs
, &
E¼ÜD‘eùiÚ
);

136 iàĞ
mÜeD©aFÏg
){

137 
	`š™_»f_ÿche
(
»f_ÿche_l0
);

138 
	`š™_mv_ÿche
(
mv_ÿche_l0
);

139 
	`š™_block
(&
aio_t¡Block
[
iCu¼MbAddr
]);

140 
	`š™_»sidu
(&
piùu»_»sidu
[
iCu¼MbAddr
]);

142 
	`fl_ÿches_mÙiÚ_veùÜ_fuÎ_»f
(
Sliû
, Sliû -> 
b_¡ride
, Sliû -> 
b8_¡ride
,

143 
»f_ÿche_l0
, 
mv_ÿche_l0
, 
SliûTabË
 , 
piùu»_»sidu
,

144 &
mvl0_io
[(
iMb_x
 << 3è+ 
iMb_y
 * (
Sliû
 -> 
b_¡ride
 << 2)],

145 &
»æ0_io
[(
iMb_x
 << 2è+ 
iMb_y
 * (
Sliû
 -> 
b_¡ride
 << 1)], iMb_x, iMb_y);

148 
E¼ÜD‘eùiÚ
 = 
	`maüoblock_Ïy”_P
(
µs
, &
piùu»_»sidu
[
iCu¼MbAddr
], 
ai_pcD©a
, 
aio_piPos™iÚ
, 
Sliû
,

149 
aio_t¡Block
, 
Vlc
, 
NÚZ”oCouÁCache
, 
SliûTabË
, 
iMb_x
, 
iMb_y
, &
La¡_Qp
, 
mv_ÿche_l0
, 
»f_ÿche_l0
);

152 
	`NÚZ”oCouÁMªagem’t
(
NÚZ”oCouÁCache
, 
iMb_x
, 
iMb_y
, 
PicWidthInMbs
, 
PicHeightInMbs
,

153 &
aio_t¡Block
[
iCu¼MbAddr
], &
piùu»_»sidu
[iCurrMbAddr]);

156 
	`wr™e_back_mÙiÚ_fuÎ_»f
Ğ
Sliû
 -> 
b_¡ride
, Sliû -> 
b8_¡ride
,

157 &
mvl0_io
 [(
iMb_x
 << 3è+ 
iMb_y
 * (
Sliû
 -> 
b_¡ride
 << 2)], 
mv_ÿche_l0
,

158 &
»æ0_io
[(
iMb_x
 << 2è+ 
iMb_y
 * (
Sliû
 -> 
b_¡ride
 << 1)], 
»f_ÿche_l0
 );

161 
Sliû
 -> 
mb_xy
++;

162 
mÜeD©aFÏg
 = 
	`MÜeRb¥
(
ai_pcD©a
, 
aio_piPos™iÚ
, 
ai_piN®By‹sInN®un™
, 
iCu¼MbAddr
, 
PicSizeInMbs
, &
E¼ÜD‘eùiÚ
);

165 
iCu¼MbAddr
 = 
	`Next_MbAdd»ss
(iCu¼MbAddr, 
PicSizeInMbs
, 
PicWidthInMbs
, 
SliûGroupM­
, &
iMb_x
, &
iMb_y
);

167 }  
mÜeD©aFÏg
);

169 *
EndOfSliû
 = 
	`EndOfSliûMªagem’t
(
Sliû
, 
PicSizeInMbs
, 
E¼ÜD‘eùiÚ
);

170  
E¼ÜD‘eùiÚ
;

171 
	}
}

180 
	$B_ÿvlc
 ( cÚ¡ 
PPS
 *
µs
, 
RESIDU
 *
piùu»_»sidu
, cÚ¡ *
ai_pcD©a
, cÚ¡ *
ai_piN®By‹sInN®un™
,

181 cÚ¡ 
SPS
 *
Sps
 , 
DATA
 *
aio_t¡Block
, 
SLICE
 *
Sliû
, *
aio_piPos™iÚ
, cÚ¡ 
VLC_TABLES
 *
Vlc
,

182 *
SliûTabË
, cÚ¡ *
ai_tiMbToSliûGroupM­
 , *
EndOfSliû
, 
LIST_MMO
 *
RefLi¡l1
,

183 *
mvl0_io
, *
mvl1_io
, *
»æ0_io
, *
»æ1_io
, *
mvl1_l0
, *
mvl1_l1
, *
»æ1_l0
, *
»æ1_l1
)

187 cÚ¡ 
PicSizeInMbs
 = 
Sps
 -> PicSizeInMbs ;

188 cÚ¡ 
PicWidthInMbs
 = 
Sps
 -> 
pic_width_š_mbs
;

189 cÚ¡ 
PicHeightInMbs
 = 
Sps
 -> 
pic_height_š_m­_un™s
;

190 vŞ©
mÜeD©aFÏg
 = 1 ;

192 
	`__deş¥ec
(
	`®ign
(64)è
NÚZ”oCouÁCache
[48];

193 
	`__deş¥ec
(
	`®ign
(64)è
»f_ÿche_l0
 [48];

194 
	`__deş¥ec
(
	`®ign
(64)è
»f_ÿche_l1
 [48];

195 
	`__deş¥ec
(
	`®ign
(64)è
mv_ÿche_l0
 [48][2];

196 
	`__deş¥ec
(
	`®ign
(64)è
mv_ÿche_l1
 [48][2];

197 
mb_sk_run
;

198 
i
;

199 
iCu¼MbAddr
 = 
Sliû
 -> 
fœ¡_mb_š_¦iû
;

201 
iMb_x
;

202 
iMb_y
;

203 
E¼ÜD‘eùiÚ
 = 0;

204 
La¡_Qp
 = 
Sliû
 -> 
¦iû_qp_d–
;

207 
	`G‘MbPos™iÚ
(
iCu¼MbAddr
, 
PicWidthInMbs
, &
iMb_x
, &
iMb_y
);

214 
mb_sk_run
 = 
	`»ad_ue
(
ai_pcD©a
, 
aio_piPos™iÚ
);

215 ià(
mb_sk_run
){

216  
i
 = 0 ; i < 
mb_sk_run
 && 
iCu¼MbAddr
 < 
PicSizeInMbs
; i++ ) {

219 
	`š™_block
(&
aio_t¡Block
[
iCu¼MbAddr
]);

220 
	`š™_»sidu
(&
piùu»_»sidu
[
iCu¼MbAddr
]);

221 
SliûTabË
 [
iCu¼MbAddr
] = 
Sliû
 -> 
¦iû_num
 ;

222 
	`š™_B_sk_mb
(&
piùu»_»sidu
[
iCu¼MbAddr
], 
La¡_Qp
, 
Sliû
);

224 
	`š™_sk_nÚ_z”o_couÁ
(
iMb_x
, 
iMb_y
, 
Sliû
 -> 
mb_¡ride
, 
PicSizeInMbs
,
aio_t¡Block
 );

226 
	`š™_»f_ÿche
(
»f_ÿche_l0
);

227 
	`š™_»f_ÿche
(
»f_ÿche_l1
);

228 
	`š™_mv_ÿche
(
mv_ÿche_l0
);

229 
	`š™_mv_ÿche
(
mv_ÿche_l1
);

231 
	`fl_ÿches_mÙiÚ_veùÜ_B_fuÎ_»f
(
Sliû
, Sliû -> 
b_¡ride
, Sliû -> 
b8_¡ride
,

232 
»f_ÿche_l0
, 
»f_ÿche_l1
, 
mv_ÿche_l0
, 
mv_ÿche_l1
, 
SliûTabË
 , 
piùu»_»sidu
,

233 &
mvl0_io
 [(
iMb_x
 << 3è+ 
iMb_y
 * (
Sliû
 -> 
b_¡ride
 << 2)],

234 &
mvl1_io
 [(
iMb_x
 << 3è+ 
iMb_y
 * (
Sliû
 -> 
b_¡ride
 << 2)],

235 &
»æ0_io
[(
iMb_x
 << 2è+ 
iMb_y
 * (
Sliû
 -> 
b_¡ride
 << 1)],

236 &
»æ1_io
[(
iMb_x
 << 2è+ 
iMb_y
 * (
Sliû
 -> 
b_¡ride
 << 1)], 
iCu¼MbAddr
, iMb_x);

238 
	`mÙiÚ_veùÜ_B_sk
(
mv_ÿche_l0
, 
mv_ÿche_l1
, 
»f_ÿche_l0
, 
»f_ÿche_l1
,

239 &
mvl1_l0
[(
iMb_x
 << 3è+ 
iMb_y
 * (
Sliû
 -> 
b_¡ride
 << 2)],

240 &
mvl1_l1
[(
iMb_x
 << 3è+ 
iMb_y
 * (
Sliû
 -> 
b_¡ride
 << 2)],

241 &
»æ1_l0
[(
iMb_x
 << 2è+ 
iMb_y
 * (
Sliû
 -> 
b_¡ride
 << 1)],

242 &
»æ1_l1
[(
iMb_x
 << 2è+ 
iMb_y
 * (
Sliû
 -> 
b_¡ride
 << 1)],

243 
Sliû
, 
Sps
 -> 
dœeù_8x8_šã»nû_æag
, 
RefLi¡l1
 -> 
lÚg_‹rm
, RefLi¡l1 -> 
¦iû_ty³
, 1);

248 
	`wr™e_back_mÙiÚ_fuÎ_»f
Ğ
Sliû
 -> 
b_¡ride
, Sliû -> 
b8_¡ride
,

249 &
mvl0_io
[(
iMb_x
 << 3è+ 
iMb_y
 * (
Sliû
 -> 
b_¡ride
 << 2)], 
mv_ÿche_l0
,

250 &
»æ0_io
[(
iMb_x
 << 2è+ 
iMb_y
 * (
Sliû
 -> 
b_¡ride
 << 1)], 
»f_ÿche_l0
 );

251 
	`wr™e_back_mÙiÚ_fuÎ_»f
Ğ
Sliû
 -> 
b_¡ride
, Sliû -> 
b8_¡ride
,

252 &
mvl1_io
[(
iMb_x
 << 3è+ 
iMb_y
 * (
Sliû
 -> 
b_¡ride
 << 2)], 
mv_ÿche_l1
,

253 &
»æ1_io
[(
iMb_x
 << 2è+ 
iMb_y
 * (
Sliû
 -> 
b_¡ride
 << 1)], 
»f_ÿche_l1
 );

256 
iCu¼MbAddr
 = 
	`Next_MbAdd»ss
(iCu¼MbAddr, 
PicSizeInMbs
, 
PicWidthInMbs
, 
ai_tiMbToSliûGroupM­
, &
iMb_x
, &
iMb_y
);

257 
Sliû
 -> 
mb_xy
 ++;

261 
mÜeD©aFÏg
 = 
	`MÜeRb¥
(
ai_pcD©a
, 
aio_piPos™iÚ
, 
ai_piN®By‹sInN®un™
, 
iCu¼MbAddr
, 
PicSizeInMbs
, &
E¼ÜD‘eùiÚ
);

266 iàĞ
mÜeD©aFÏg
 ) {

267 
	`š™_»f_ÿche
(
»f_ÿche_l0
);

268 
	`š™_»f_ÿche
(
»f_ÿche_l1
);

269 
	`š™_mv_ÿche
(
mv_ÿche_l0
);

270 
	`š™_mv_ÿche
(
mv_ÿche_l1
);

271 
	`š™_block
(&
aio_t¡Block
[
iCu¼MbAddr
]);

272 
	`š™_»sidu
(&
piùu»_»sidu
[
iCu¼MbAddr
]);

275 
	`fl_ÿches_mÙiÚ_veùÜ_B_fuÎ_»f
(
Sliû
, Sliû -> 
b_¡ride
, Sliû -> 
b8_¡ride
,

276 
»f_ÿche_l0
, 
»f_ÿche_l1
, 
mv_ÿche_l0
, 
mv_ÿche_l1
, 
SliûTabË
, 
piùu»_»sidu
,

277 &
mvl0_io
 [(
iMb_x
 << 3è+ 
iMb_y
 * (
Sliû
 -> 
b_¡ride
 << 2)],

278 &
mvl1_io
 [(
iMb_x
 << 3è+ 
iMb_y
 * (
Sliû
 -> 
b_¡ride
 << 2)],

279 &
»æ0_io
[(
iMb_x
 << 2è+ 
iMb_y
 * (
Sliû
 -> 
b_¡ride
 << 1)],

280 &
»æ1_io
[(
iMb_x
 << 2è+ 
iMb_y
 * (
Sliû
 -> 
b_¡ride
 << 1)], 
iCu¼MbAddr
, iMb_x);

284 
E¼ÜD‘eùiÚ
 = 
	`maüoblock_Ïy”_B
(
µs
, &
piùu»_»sidu
[
iCu¼MbAddr
], 
ai_pcD©a
, 
aio_piPos™iÚ
, 
Sliû
, 
aio_t¡Block
,

285 
Vlc
, 
NÚZ”oCouÁCache
, 
SliûTabË
, 
iMb_x
, 
iMb_y
, 
Sps
 -> 
dœeù_8x8_šã»nû_æag
,

286 
RefLi¡l1
[0] . 
lÚg_‹rm
, RefLi¡l1[0] . 
¦iû_ty³
, 1, &
La¡_Qp
, 
mv_ÿche_l0
, 
mv_ÿche_l1
, 
»f_ÿche_l0
, 
»f_ÿche_l1
,

287 &
mvl1_l0
[(
iMb_x
 << 3è+ 
iMb_y
 * (
Sliû
 -> 
b_¡ride
 << 2)], &
mvl1_l1
[(iMb_x << 3) + iMb_y * (Slice -> b_stride << 2)],

288 &
»æ1_l0
[(
iMb_x
 << 2è+ 
iMb_y
 * (
Sliû
 -> 
b_¡ride
 << 1)], &
»æ1_l1
[(iMb_x << 2) + iMb_y * (Slice -> b_stride << 1)]);

291 
	`NÚZ”oCouÁMªagem’t
(
NÚZ”oCouÁCache
, 
iMb_x
, 
iMb_y
, 
PicWidthInMbs
, 
PicHeightInMbs
,

292 &
aio_t¡Block
[
iCu¼MbAddr
], &
piùu»_»sidu
[iCurrMbAddr]);

295 
	`wr™e_back_mÙiÚ_fuÎ_»f
Ğ
Sliû
 -> 
b_¡ride
, Sliû -> 
b8_¡ride
,

296 &
mvl0_io
[(
iMb_x
 << 3è+ 
iMb_y
 * (
Sliû
 -> 
b_¡ride
 << 2)], 
mv_ÿche_l0
,

297 &
»æ0_io
[(
iMb_x
 << 2è+ 
iMb_y
 * (
Sliû
 -> 
b_¡ride
 << 1)], 
»f_ÿche_l0
 );

299 
	`wr™e_back_mÙiÚ_fuÎ_»f
Ğ
Sliû
 -> 
b_¡ride
, Sliû -> 
b8_¡ride
,

300 &
mvl1_io
[(
iMb_x
 << 3è+ 
iMb_y
 * (
Sliû
 -> 
b_¡ride
 << 2)], 
mv_ÿche_l1
,

301 &
»æ1_io
[(
iMb_x
 << 2è+ 
iMb_y
 * (
Sliû
 -> 
b_¡ride
 << 1)], 
»f_ÿche_l1
 );

305 
Sliû
 -> 
mb_xy
++;

306 
mÜeD©aFÏg
 = 
	`MÜeRb¥
(
ai_pcD©a
, 
aio_piPos™iÚ
, 
ai_piN®By‹sInN®un™
, 
iCu¼MbAddr
, 
PicSizeInMbs
, &
E¼ÜD‘eùiÚ
);

309 
iCu¼MbAddr
 = 
	`Next_MbAdd»ss
(iCu¼MbAddr, 
PicSizeInMbs
, 
PicWidthInMbs
, 
ai_tiMbToSliûGroupM­
, &
iMb_x
, &
iMb_y
);

311 }  
mÜeD©aFÏg
);

313 *
EndOfSliû
 = 
	`EndOfSliûMªagem’t
(
Sliû
, 
PicSizeInMbs
, 
E¼ÜD‘eùiÚ
);

314  
E¼ÜD‘eùiÚ
;

315 
	}
}

321 
	$¦iû_ba£_Ïy”_ÿvlc
 ( *
ai_pcD©a
, cÚ¡ *
ai_piN®By‹sInN®un™
, cÚ¡ *
aio_piPos™iÚ
, cÚ¡ 
SPS
 *
Sps
,

322 
PPS
 *
Pps
, 
VLC_TABLES
 *
Vlc
, *
ai_Sliû_group_id
, 
LIST_MMO
 *
Cu¼’t_pic
, LIST_MMO *
ai_pRefPicLi¡L1
,

323 
NAL
 *
N®
, 
SLICE
 *
Sliû
, *
aio_tiMbToSliûGroupM­
, *
SliûTabË
, 
DATA
 *
Block
,

324 
RESIDU
 *
piùu»_»sidu
, *
EndOfSliû
, *
mvl0_io
, *
mvl1_io
, *
»æ0_io
, *
»æ1_io
)

328 ià(!
N®
 -> 
N®ToSk
){

329 
pos
 = *
aio_piPos™iÚ
;

333 iàĞ*
EndOfSliû
 == 0 ) {

334 
	`»š™_¦iû
(
Sliû
);

335 
Sliû
 -> 
b_¡ride
 = 
Sps
 -> b_stride;

336 
Sliû
 -> 
b8_¡ride
 = 
Sps
 -> b8_stride;

337 
Sliû
 -> 
mb_¡ride
 = 
Sps
 -> 
pic_width_š_mbs
;

338 
	`m­Un™ToSliû
(
Sps
, 
Pps
, 
aio_tiMbToSliûGroupM­
, 
Sliû
 -> 
¦iû_group_chªge_cyşe
, 
ai_Sliû_group_id
);

339 
	`In™Uch¬Tab
(
Sps
 -> 
PicSizeInMbs
, 
SliûTabË
);

341 
	`SliûMªagem’t
(
Pps
, 
Sliû
);

346 if(
Sliû
 -> 
¦iû_ty³
 =ğ
SLICE_TYPE_B
){

347 
N®
 -> 
E¼ÜD‘eùiÚ
 = 
	`B_ÿvlc
 (
Pps
, 
piùu»_»sidu
, 
ai_pcD©a
, 
ai_piN®By‹sInN®un™
, 
Sps
, 
Block
,

348 
Sliû
, &
pos
, 
Vlc
, 
SliûTabË
, 
aio_tiMbToSliûGroupM­
, 
EndOfSliû
, 
ai_pRefPicLi¡L1
,

349 &
mvl0_io
[
Cu¼’t_pic
 -> 
MvMemÜyAdd»ss
], &
mvl1_io
[Current_pic -> MvMemoryAddress],

350 &
»æ0_io
[
Cu¼’t_pic
 -> 
MvMemÜyAdd»ss
 >> 1], &
»æ1_io
[Current_pic -> MvMemoryAddress >> 1],

351 &
mvl0_io
[
ai_pRefPicLi¡L1
[0] . 
MvMemÜyAdd»ss
], &
mvl1_io
[ai_pRefPicListL1[0] . MvMemoryAddress],

352 &
»æ0_io
[
ai_pRefPicLi¡L1
[0] . 
MvMemÜyAdd»ss
 >> 1], &
»æ1_io
[ai_pRefPicListL1[0] . MvMemoryAddress >> 1]);

354 }if(
Sliû
 -> 
¦iû_ty³
 =ğ
SLICE_TYPE_P
){

355 
N®
 -> 
E¼ÜD‘eùiÚ
 = 
	`P_ÿvlc
 (
Pps
, 
piùu»_»sidu
, 
ai_pcD©a
, 
ai_piN®By‹sInN®un™
, 
Sps
, 
Block
,

356 
Sliû
, &
pos
, 
Vlc
, 
SliûTabË
, 
aio_tiMbToSliûGroupM­
, 
EndOfSliû
,

357 &
mvl0_io
[
Cu¼’t_pic
 -> 
MvMemÜyAdd»ss
], &
»æ0_io
[Current_pic -> MvMemoryAddress >> 1]);

359 }ià(
Sliû
 -> 
¦iû_ty³
 =ğ
SLICE_TYPE_I
){

360 
N®
 -> 
E¼ÜD‘eùiÚ
 = 
	`¦iû_d©a_I_ÿvlc
 (
piùu»_»sidu
, 
ai_pcD©a
, 
ai_piN®By‹sInN®un™
, 
Sps
, 
Pps
, 
Block
,

361 
Sliû
, &
pos
, 
Vlc
, 
SliûTabË
, 
aio_tiMbToSliûGroupM­
, 
EndOfSliû
);

365 #ifdeà
ERROR_CONCEALMENT


367 
	`AVCE¼ÜCÚû®m’t
(
N®
, 
Sps
, 
Sliû
, 
SliûTabË
, 
piùu»_»sidu
, 
Block
,

368 &
mvl0_io
[
Cu¼’t_pic
 -> 
MvMemÜyAdd»ss
], &
mvl1_io
[Current_pic -> MvMemoryAddress],

369 &
»æ0_io
[
Cu¼’t_pic
 -> 
MvMemÜyAdd»ss
 >> 1], &
»æ1_io
[Current_pic -> MvMemoryAddress >> 1]);

371 
	}
}

	@lib_svc/slice_data_svc.c

35 
	~"ty³.h
"

36 
	~"d©a.h
"

37 
	~"ÿvlc.h
"

38 
	~"ÿbac.h
"

39 
	~"maš_d©a.h
"

40 
	~"š™_d©a.h
"

41 
	~"vlc_ÿbac.h
"

42 
	~"b™¡»am.h
"

43 
	~"wr™e_back.h
"

44 
	~"ÿbac_bË.h
"

45 
	~"¦iû_h—d”.h
"

46 
	~"quªtiz©iÚ.h
"

47 
	~"SliûGroupM­.h
"

48 
	~"Ãighbourhood.h
"

49 
	~"¦iû_d©a_vlc.h
"

50 
	~"fl_ÿches_ÿbac.h
"

55 
	~"svc_d©a.h
"

56 
	~"blk4x4.h
"

57 
	~"ÿvlc_svc.h
"

58 
	~"ÿbac_svc.h
"

59 
	~"CoÜdÚ©es.h
"

60 
	~"¦iû_d©a_svc.h
"

67 
	$¦iû_d©a_ÿvlc_svc
(cÚ¡ 
NAL
 *
N®
, 
RESIDU
 *
Cu¼’t_»sidu
, RESIDU *
Ba£Residu
, cÚ¡ *
ai_pcD©a
,

68 cÚ¡ *
ai_piN®By‹sInN®un™
, cÚ¡ 
SPS
 *
Sps
, cÚ¡ 
PPS
 *
Pps
, 
DATA
 *
aio_t¡Block
,

69 
SLICE
 *
Sliû
, *
pos™iÚ
, cÚ¡ 
VLC_TABLES
 *
vlc
, *
SliûTabË
,

70 cÚ¡ *
MbToSliûGroupM­
, *
EndOfSliû
)

76 vŞ©
mÜeD©aFÏg
 = 1;

77 
i
;

78 cÚ¡ 
PicSizeInMbs
 = 
Sps
 -> PicSizeInMbs;

79 cÚ¡ 
PicWidthInMbs
 = 
Sps
 -> 
pic_width_š_mbs
;

80 cÚ¡ 
PicHeightInMbs
 = 
Sps
 -> 
pic_height_š_m­_un™s
;

81 
iCu¼MbAddr
 = 
Sliû
 -> 
fœ¡_mb_š_¦iû
;

82 
La¡_Qp
 = 
Sliû
 -> 
¦iû_qp_d–
;

83 
E¼ÜD‘eùiÚ
 = 0;

86 
	`__deş¥ec
(
	`®ign
(64)è
NÚZ”oCouÁCache
 [48];

88 
iMb_x
;

89 
iMb_y
;

92 
	`G‘MbPos™iÚ
(
iCu¼MbAddr
, 
PicWidthInMbs
, &
iMb_x
, &
iMb_y
);

98 ifĞ
Sliû
 -> 
¦iû_ty³
 !ğ
EI
 ){

100 
mb_sk_run
 = (è
	`»ad_ue
(
ai_pcD©a
, 
pos™iÚ
);

102 ià(
mb_sk_run
){

103  
i
 = 0 ; i < 
mb_sk_run
 && 
iCu¼MbAddr
 < 
PicSizeInMbs
; i++ ){

105 
SliûTabË
 [
iCu¼MbAddr
] = 
Sliû
 -> 
¦iû_num
 ;

106 
	`š™_block
(&
aio_t¡Block
[
iCu¼MbAddr
]);

107 
	`š™_»sidu
(&
Cu¼’t_»sidu
[
iCu¼MbAddr
]);

108 iàĞ
Sliû
 -> 
¦iû_ty³
 =ğ
SLICE_TYPE_P
){

109 
	`š™_P_sk_mb
(&
Cu¼’t_»sidu
[
iCu¼MbAddr
], 
La¡_Qp
, 
Sliû
);

111 
	`š™_B_sk_mb
(&
Cu¼’t_»sidu
[
iCu¼MbAddr
], 
La¡_Qp
, 
Sliû
);

112 
Cu¼’t_»sidu
[
iCu¼MbAddr
] . 
Mode
 = 4;

114 
Cu¼’t_»sidu
[
iCu¼MbAddr
] . 
InCrİWšdow
 = 
	`is_üİ_š_wšdow
(
Sps
, 
iMb_x
, 
iMb_y
);

116 
	`G‘Ba£MbAddr
(
N®
, &
aio_t¡Block
[
iCu¼MbAddr
], 
iMb_x
 << 4, 
iMb_y
 << 4);

118 
	`š™_mb_sk
(
NÚZ”oCouÁCache
);

119 
	`wr™e_back_nÚ_z”o_couÁ
(
NÚZ”oCouÁCache
, 
iMb_x
, 
iMb_y
, 
PicWidthInMbs
, 
PicSizeInMbs
, &
aio_t¡Block
[
iCu¼MbAddr
]);

122 
iCu¼MbAddr
 = 
	`Next_MbAdd»ss
(iCu¼MbAddr, 
PicSizeInMbs
, 
PicWidthInMbs
, 
MbToSliûGroupM­
, &
iMb_x
, &
iMb_y
);

123 
Sliû
 -> 
mb_xy
 ++;

127 
mÜeD©aFÏg
 = 
	`MÜeRb¥
(
ai_pcD©a
, 
pos™iÚ
, 
ai_piN®By‹sInN®un™
, 
iCu¼MbAddr
, 
PicSizeInMbs
, &
E¼ÜD‘eùiÚ
);

133 iàĞ
mÜeD©aFÏg
 ) {

134 
	`š™_block
(&
aio_t¡Block
[
iCu¼MbAddr
]);

135 
	`š™_»sidu
(&
Cu¼’t_»sidu
[
iCu¼MbAddr
]);

136 
Cu¼’t_»sidu
[
iCu¼MbAddr
] . 
InCrİWšdow
 = 
	`is_üİ_š_wšdow
(
Sps
, 
iMb_x
, 
iMb_y
);

139 
E¼ÜD‘eùiÚ
 = 
	`maüoblock_Ïy”_š_sÿÏbË_ex‹nsiÚ
(
N®
, 
Pps
, &
Cu¼’t_»sidu
[
iCu¼MbAddr
], 
Ba£Residu
, 
ai_pcD©a
,

140 
pos™iÚ
, 
Sliû
, 
aio_t¡Block
, 
vlc
, 
NÚZ”oCouÁCache
, 
SliûTabË
, 
iMb_x
, 
iMb_y
,

141 
Sps
 -> 
dœeù_8x8_šã»nû_æag
, &
La¡_Qp
);

144 
	`NÚZ”oCouÁMªagem’t
(
NÚZ”oCouÁCache
, 
iMb_x
, 
iMb_y
, 
PicWidthInMbs
, 
PicHeightInMbs
, &
aio_t¡Block
[
iCu¼MbAddr
], &
Cu¼’t_»sidu
[iCurrMbAddr]);

147 
Sliû
 -> 
mb_xy
++;

148 
mÜeD©aFÏg
 = 
	`MÜeRb¥
(
ai_pcD©a
, 
pos™iÚ
, 
ai_piN®By‹sInN®un™
, 
iCu¼MbAddr
, 
PicSizeInMbs
, &
E¼ÜD‘eùiÚ
);

151 
iCu¼MbAddr
 = 
	`Next_MbAdd»ss
(iCu¼MbAddr, 
PicSizeInMbs
, 
PicWidthInMbs
, 
MbToSliûGroupM­
, &
iMb_x
, &
iMb_y
);

153 }  
mÜeD©aFÏg
);

155 *
EndOfSliû
 = 
	`EndOfSliûMªagem’t
(
Sliû
, 
PicSizeInMbs
, 
E¼ÜD‘eùiÚ
);

157  
E¼ÜD‘eùiÚ
;

158 
	}
}

165 
	$CabacDecod”In™SVC
(
CABACCÚ‹xt
 *
ÿbac
, *
D©a
, cÚ¡ *
N®By‹sInN®un™
, 
Pos
, 
¦iû_QP
, 
CabacCÚ‹xt
[][2]){

167 
i
;

170 
	`š™_ÿbac_¡©es
(
ÿbac
, 
Ís_¿nge
, 
mps_¡©e
, 
Ís_¡©e
, 64);

171 
	`š™_ÿbac_decod”
(
ÿbac
, 
D©a
 +(
Pos
 >> 3), *
N®By‹sInN®un™
 - ((Pos + 7) >> 3));

172  
i
 = 0; i < 467; i++ ) {

173 
´e
 = ((
CabacCÚ‹xt
[
i
][0] * 
¦iû_QP
) >> 4) + CabacContext[i][1];

174 
´e
 = 
	`CLIP3
(1, 126,…re);

176 ifĞ
´e
 <= 63 ){

177 
ÿbac_¡©e
[
i
] = (è(Ğ63 - 
´e
 ) << 1);

179 
ÿbac_¡©e
[
i
] = (è((Ğ
´e
 - 64 ) << 1) + 1);

182 
	}
}

192 
	$SliûD©aICabacSvc
(*
D©a
, cÚ¡ *
N®By‹sInN®un™
, 
Pos
, cÚ¡ 
NAL
 *
N®
, cÚ¡ 
SPS
 *
Sps
,

193 cÚ¡ 
PPS
 *
Pps
, 
SLICE
 *
Sliû
, 
RESIDU
 *
Cu¼Residu
, RESIDU *
Ba£Residu
, 
DATA
 *
Block
,

194 *
SliûTabË
, *
MbToSliûGroupM­
, *
EndOfSliû
)

200 
	`__deş¥ec
(
	`®ign
(64)è
NÚZ”oCouÁCache
 [48];

202 
CABAC_NEIGH
 
·¿m_Ãigh
[1];

203 
CABACCÚ‹xt
 
ÿbac
[1];

204 vŞ©
mÜeD©aFÏg
 = 1 ;

205 
diff_qp
 = 0;

207 cÚ¡ 
PicSizeInMbs
 = 
Sps
 -> PicSizeInMbs ;

208 cÚ¡ 
PicWidthInMbs
 = 
Sps
 -> 
pic_width_š_mbs
;

209 cÚ¡ 
PicHeightInMbs
 = 
Sps
 -> 
pic_height_š_m­_un™s
;

210 cÚ¡ 
¦iû_QP
 = 
Sliû
 -> 
¦iû_qp_d–
 ;

211 
iCu¼MbAddr
 = 
Sliû
 -> 
fœ¡_mb_š_¦iû
;

213 
iMb_x
;

214 
iMb_y
;

215 
E¼ÜD‘eùiÚ
 = 0;

216 
La¡_Qp
 = 
Sliû
 -> 
¦iû_qp_d–
;

219 
	`G‘MbPos™iÚ
(
iCu¼MbAddr
, 
PicWidthInMbs
, &
iMb_x
, &
iMb_y
);

222 
	`CabacDecod”In™SVC
(
ÿbac
, 
D©a
, 
N®By‹sInN®un™
, 
Pos
, 
¦iû_QP
, 
ÿbac_cÚ‹xt_š™_I
);

227 
	`š™_block
(&
Block
[
iCu¼MbAddr
]);

228 
	`š™_»sidu
(&
Cu¼Residu
[
iCu¼MbAddr
]);

229 
Cu¼Residu
[
iCu¼MbAddr
] . 
SliûNum
 = 
SliûTabË
 [iCu¼MbAddr] = 
Sliû
 -> 
¦iû_num
 ;

230 
	`G‘Neighbour
(
iCu¼MbAddr
, 
iMb_x
, 
PicWidthInMbs
, 
PicSizeInMbs
, 
SliûTabË
, 
Cu¼Residu
, 0);

231 
Cu¼Residu
[
iCu¼MbAddr
] . 
InCrİWšdow
 = 
	`is_üİ_š_wšdow
(
Sps
, 
iMb_x
, 
iMb_y
);

233 
E¼ÜD‘eùiÚ
 = 
	`CabacIMaüoblockLay”
(
ÿbac
, 
ÿbac_¡©e
, 
N®
, 
Sliû
, 
Cu¼Residu
, 
Ba£Residu
, 
Block
, 
·¿m_Ãigh
, 
SliûTabË
, 
NÚZ”oCouÁCache
,

234 
iMb_x
, 
iMb_y
, 
Pps
 -> 
cÚ¡¿šed_šŒa_´ed_æag
, Pp -> 
ŒªsfÜm_8x8_mode_æag
, &
La¡_Qp
, &
diff_qp
);

237 
	`NÚZ”oCouÁMªagem’t
(
NÚZ”oCouÁCache
, 
iMb_x
, 
iMb_y
, 
PicWidthInMbs
, 
PicHeightInMbs
, &
Block
[
iCu¼MbAddr
], &
Cu¼Residu
[iCurrMbAddr]);

240 
Sliû
 -> 
mb_xy
++;

241 
mÜeD©aFÏg
 = !
	`g‘_ÿbac_‹rmš©e
(
ÿbac
, 
Sliû
 -> 
mb_xy
, 
PicSizeInMbs
);

244 
iCu¼MbAddr
 = 
	`Next_MbAdd»ss
(iCu¼MbAddr, 
PicSizeInMbs
, 
PicWidthInMbs
, 
MbToSliûGroupM­
, &
iMb_x
, &
iMb_y
);

246 }  
mÜeD©aFÏg
 && !
E¼ÜD‘eùiÚ
);

248 *
EndOfSliû
 = 
	`EndOfSliûMªagem’t
(
Sliû
, 
PicSizeInMbs
, 
E¼ÜD‘eùiÚ
);

249  
E¼ÜD‘eùiÚ
;

250 
	}
}

259 
	$SliûD©aPCabacSvc
(*
D©a
, cÚ¡ *
N®By‹sInN®un™
, 
Pos
, cÚ¡ 
NAL
 *
N®
, cÚ¡ 
SPS
 *
Sps
,

260 cÚ¡ 
PPS
 *
Pps
, 
SLICE
 *
Sliû
, 
RESIDU
 *
Cu¼Residu
, RESIDU *
Ba£Residu
, 
DATA
 *
Block
,

261 *
SliûTabË
, *
MbToSliûGroupM­
, *
EndOfSliû
, *
MvCabacL0
, *
RefCabacL0
)

265 
	`__deş¥ec
(
	`®ign
(64)è
NÚZ”oCouÁCache
 [48];

266 
	`__deş¥ec
(
	`®ign
(64)è
mv_ÿche_l0
[48][2];

267 
	`__deş¥ec
(
	`®ign
(64)è
»f_ÿche_l0
[48];

270 
CABAC_NEIGH
 
Neigh
[1];

271 
CABACCÚ‹xt
 
ÿbac
[1];

272 vŞ©
mÜeD©aFÏg
 = 1 ;

273 
diff_qp
 = 0;

274 
MbSkFÏg
;

276 cÚ¡ 
PicSizeInMbs
 = 
Sps
 -> PicSizeInMbs ;

277 cÚ¡ 
PicWidthInMbs
 = 
Sps
 -> 
pic_width_š_mbs
;

278 cÚ¡ 
PicHeightInMbs
 = 
Sps
 -> 
pic_height_š_m­_un™s
;

279 cÚ¡ 
¦iû_QP
 = 
Sliû
 -> 
¦iû_qp_d–
 ;

281 
iCu¼MbAddr
 = 
Sliû
 -> 
fœ¡_mb_š_¦iû
;

283 
iMb_x
;

284 
iMb_y
;

285 
E¼ÜD‘eùiÚ
 = 0;

286 
La¡_Qp
 = 
Sliû
 -> 
¦iû_qp_d–
;

290 
	`G‘MbPos™iÚ
(
iCu¼MbAddr
, 
PicWidthInMbs
, &
iMb_x
, &
iMb_y
);

294 
	`CabacDecod”In™SVC
(
ÿbac
, 
D©a
, 
N®By‹sInN®un™
, 
Pos
, 
¦iû_QP
, &
ÿbac_cÚ‹xt_š™_PB
[
Sliû
 -> 
ÿbac_š™_idc
][0]);

300 
	`š™_block
(&
Block
[
iCu¼MbAddr
]);

301 
	`š™_»sidu
(&
Cu¼Residu
[
iCu¼MbAddr
]);

302 
SliûTabË
 [
iCu¼MbAddr
] = 
Sliû
 -> 
¦iû_num
 ;

303 
	`G‘Neighbour
(
iCu¼MbAddr
, 
iMb_x
, 
PicWidthInMbs
, 
PicSizeInMbs
, 
SliûTabË
, 
Cu¼Residu
, 0);

304 
Cu¼Residu
[
iCu¼MbAddr
] . 
InCrİWšdow
 = 
	`is_üİ_š_wšdow
(
Sps
, 
iMb_x
, 
iMb_y
);

308 
MbSkFÏg
 = 
	`decode_ÿbac_mb_sk
Ğ
ÿbac
, 
ÿbac_¡©e
, 
Cu¼Residu
[
iCu¼MbAddr
] . 
AvaMask
, 
SliûTabË
,

309 
Cu¼Residu
, 
Sliû
 -> 
¦iû_ty³
, 
iCu¼MbAddr
, 
PicWidthInMbs
);

310 ià(
MbSkFÏg
){

311 
diff_qp
 = 0;

313 
SliûTabË
 [
iCu¼MbAddr
] = 
Sliû
 -> 
¦iû_num
 ;

314 
	`š™_P_sk_mb
(&
Cu¼Residu
[
iCu¼MbAddr
], 
La¡_Qp
, 
Sliû
);

316 
	`š™_mb_sk_mv_»f
(&
MvCabacL0
[
iMb_x
 * 8 + 
iMb_y
 * (
PicWidthInMbs
 << 5)],

317 &
RefCabacL0
[
iMb_x
 * 2 + 
iMb_y
 * (
PicWidthInMbs
 << 2)], PicWidthInMbs << 3, PicWidthInMbs << 1);

318 
	`š™_sk_nÚ_z”o_couÁ
(
iMb_x
, 
iMb_y
, 
Sliû
 -> 
mb_¡ride
, 
PicSizeInMbs
, 
Block
 );

320 
	`G‘Ba£MbAddr
(
N®
, &
Block
[
iCu¼MbAddr
], 
iMb_x
 << 4, 
iMb_y
 << 4);

324 
	`š™_»f_ÿche
(
»f_ÿche_l0
);

325 
	`š™_mv_ÿche
(
mv_ÿche_l0
);

327 
	`fl_ÿches_mÙiÚ_veùÜ
Ğ
Sliû
, 
PicWidthInMbs
 << 3, PicWidthInMb << 1, 
»f_ÿche_l0
, 
mv_ÿche_l0
,

328 
SliûTabË
, &
Cu¼Residu
[
iCu¼MbAddr
], &
MvCabacL0
[
iMb_x
 * 8 + 
iMb_y
 * (
PicWidthInMbs
 << 5)],

329 &
RefCabacL0
[
iMb_x
 * 2 + 
iMb_y
 * (
PicWidthInMbs
 << 2)], iMb_x, iMb_y);

332 
E¼ÜD‘eùiÚ
 = 
	`CabacPMaüoblockLay”
(
ÿbac
, 
ÿbac_¡©e
, 
N®
, 
Sliû
, 
Cu¼Residu
, 
Ba£Residu
, 
Block
, 
Neigh
,

333 
SliûTabË
, 
NÚZ”oCouÁCache
, 
mv_ÿche_l0
, 
»f_ÿche_l0
, 
iMb_x
, 
iMb_y
,

334 
Pps
 -> 
cÚ¡¿šed_šŒa_´ed_æag
, Pp -> 
ŒªsfÜm_8x8_mode_æag
, &
La¡_Qp
, &
diff_qp
);

337 
	`NÚZ”oCouÁMªagem’t
(
NÚZ”oCouÁCache
, 
iMb_x
, 
iMb_y
, 
PicWidthInMbs
, 
PicHeightInMbs
, &
Block
[
iCu¼MbAddr
], &
Cu¼Residu
[iCurrMbAddr]);

339 
	`wr™e_back_mÙiÚ
(
PicWidthInMbs
 << 3, PicWidthInMbs << 1,

340 &
MvCabacL0
[
iMb_x
 * 8 + 
iMb_y
 * (
PicWidthInMbs
 << 5)], 
mv_ÿche_l0
,

341 &
RefCabacL0
[
iMb_x
 * 2 + 
iMb_y
 * (
PicWidthInMbs
 << 2)], 
»f_ÿche_l0
);

344 
Sliû
 -> 
mb_xy
++;

347 
iCu¼MbAddr
 = 
	`Next_MbAdd»ss
(iCu¼MbAddr, 
PicSizeInMbs
, 
PicWidthInMbs
, 
MbToSliûGroupM­
, &
iMb_x
, &
iMb_y
);

348 
mÜeD©aFÏg
 = !
	`g‘_ÿbac_‹rmš©e
(
ÿbac
, 
Sliû
 -> 
mb_xy
, 
PicSizeInMbs
);

350 }  
mÜeD©aFÏg
 && !
E¼ÜD‘eùiÚ
);

352 *
EndOfSliû
 = 
	`EndOfSliûMªagem’t
(
Sliû
, 
PicSizeInMbs
, 
E¼ÜD‘eùiÚ
);

353  
E¼ÜD‘eùiÚ
;

354 
	}
}

363 
	$SliûD©aBCabacSvc
(*
D©a
, cÚ¡ *
N®By‹sInN®un™
, 
Pos
, cÚ¡ 
NAL
 *
N®
, cÚ¡ 
SPS
 *
Sps
,

364 cÚ¡ 
PPS
 *
Pps
, 
SLICE
 *
Sliû
, 
RESIDU
 *
Cu¼Residu
, RESIDU *
Ba£Residu
, 
DATA
 *
Block
,

365 *
SliûTabË
, *
MbToSliûGroupM­
, *
EndOfSliû
, *
MvCabacL0
,

366 *
RefCabacL0
, *
MvCabacL1
, *
RefCabacL1
)

370 
	`__deş¥ec
(
	`®ign
(64)è
NÚZ”oCouÁCache
 [48];

371 
	`__deş¥ec
(
	`®ign
(64)è
mv_ÿche_l0
[48][2];

372 
	`__deş¥ec
(
	`®ign
(64)è
mv_ÿche_l1
[48][2];

373 
	`__deş¥ec
(
	`®ign
(64)è
»f_ÿche_l0
[48];

374 
	`__deş¥ec
(
	`®ign
(64)è
»f_ÿche_l1
[48];

377 
CABAC_NEIGH
 
Neigh
[1];

378 
CABACCÚ‹xt
 
ÿbac
[1];

379 vŞ©
mÜeD©aFÏg
 = 1 ;

380 
diff_qp
 = 0;

381 
MbSkFÏg
;

383 cÚ¡ 
PicSizeInMbs
 = 
Sps
 -> PicSizeInMbs ;

384 cÚ¡ 
PicWidthInMbs
 = 
Sps
 -> 
pic_width_š_mbs
;

385 cÚ¡ 
PicHeightInMbs
 = 
Sps
 -> 
pic_height_š_m­_un™s
;

386 cÚ¡ 
¦iû_QP
 = 
Sliû
 -> 
¦iû_qp_d–
 ;

387 
iCu¼MbAddr
 = 
Sliû
 -> 
fœ¡_mb_š_¦iû
;

390 
iMb_x
;

391 
iMb_y
;

392 
E¼ÜD‘eùiÚ
 = 0;

393 
La¡_Qp
 = 
Sliû
 -> 
¦iû_qp_d–
;

397 
	`G‘MbPos™iÚ
(
iCu¼MbAddr
, 
PicWidthInMbs
, &
iMb_x
, &
iMb_y
);

401 
	`CabacDecod”In™SVC
(
ÿbac
, 
D©a
, 
N®By‹sInN®un™
, 
Pos
, 
¦iû_QP
, &
ÿbac_cÚ‹xt_š™_PB
[
Sliû
 -> 
ÿbac_š™_idc
][0]);

406 
	`š™_block
(&
Block
[
iCu¼MbAddr
]);

407 
	`š™_»sidu
(&
Cu¼Residu
[
iCu¼MbAddr
]);

408 
SliûTabË
 [
iCu¼MbAddr
] = 
Sliû
 -> 
¦iû_num
 ;

409 
	`G‘Neighbour
(
iCu¼MbAddr
, 
iMb_x
, 
PicWidthInMbs
, 
PicSizeInMbs
, 
SliûTabË
, 
Cu¼Residu
, 0);

410 
Cu¼Residu
[
iCu¼MbAddr
] . 
InCrİWšdow
 = 
	`is_üİ_š_wšdow
(
Sps
, 
iMb_x
, 
iMb_y
);

413 
MbSkFÏg
 = 
	`decode_ÿbac_mb_sk
Ğ
ÿbac
, 
ÿbac_¡©e
, 
Cu¼Residu
[
iCu¼MbAddr
] . 
AvaMask
, 
SliûTabË
, Cu¼Residu, 
Sliû
 -> 
¦iû_ty³
, iCu¼MbAddr, 
PicWidthInMbs
);

414 ià(
MbSkFÏg
){

415 
diff_qp
 = 0;

417 
SliûTabË
 [
iCu¼MbAddr
] = 
Sliû
 -> 
¦iû_num
 ;

418 
	`š™_B_sk_mb
(&
Cu¼Residu
[
iCu¼MbAddr
], 
La¡_Qp
, 
Sliû
);

419 
Cu¼Residu
[
iCu¼MbAddr
] . 
Mode
 = 4;

422 
	`G‘Ba£MbAddr
(
N®
, &
Block
[
iCu¼MbAddr
], 
iMb_x
 << 4, 
iMb_y
 << 4);

424 
	`š™_mb_sk_mv_»f
(&
MvCabacL0
[
iMb_x
 * 8 + 
iMb_y
 * (
PicWidthInMbs
 << 5)],

425 &
RefCabacL0
[
iMb_x
 * 2 + 
iMb_y
 * (
PicWidthInMbs
 << 2)], PicWidthInMbs << 3, PicWidthInMbs << 1);

426 
	`š™_mb_sk_mv_»f
(&
MvCabacL1
[
iMb_x
 * 8 + 
iMb_y
 * (
PicWidthInMbs
 << 5)],

427 &
RefCabacL1
[
iMb_x
 * 2 + 
iMb_y
 * (
PicWidthInMbs
 << 2)], PicWidthInMbs << 3, PicWidthInMbs << 1);

428 
	`š™_sk_nÚ_z”o_couÁ
(
iMb_x
, 
iMb_y
, 
Sliû
 -> 
mb_¡ride
, 
PicSizeInMbs
, 
Block
 );

432 
	`š™_»f_ÿche
(
»f_ÿche_l0
);

433 
	`š™_»f_ÿche
(
»f_ÿche_l1
);

434 
	`š™_mv_ÿche
(
mv_ÿche_l0
);

435 
	`š™_mv_ÿche
(
mv_ÿche_l1
);

437 
	`fl_ÿches_mÙiÚ_veùÜ_B
Ğ
Sliû
, 
PicWidthInMbs
 << 3, PicWidthInMb << 1, 
»f_ÿche_l0
, 
»f_ÿche_l1
,

438 
mv_ÿche_l0
, 
mv_ÿche_l1
, 
SliûTabË
, &
Cu¼Residu
[
iCu¼MbAddr
],

439 &
MvCabacL0
[
iMb_x
 * 8 + 
iMb_y
 * (
PicWidthInMbs
 << 5)], &
MvCabacL1
[iMb_x * 8 + iMb_y * (PicWidthInMbs << 5)],

440 &
RefCabacL0
[
iMb_x
 * 2 + 
iMb_y
 * (
PicWidthInMbs
 << 2)], &
RefCabacL1
[iMb_x * 2 + iMb_y * (PicWidthInMbs << 2)],

441 
iCu¼MbAddr
, 
iMb_x
);

445 
E¼ÜD‘eùiÚ
 = 
	`CabacBMaüoblockLay”
(
ÿbac
, 
ÿbac_¡©e
, 
N®
, 
Sliû
, 
Cu¼Residu
, 
Ba£Residu
, 
Block
, 
Neigh
, 
SliûTabË
,

446 
NÚZ”oCouÁCache
, 
mv_ÿche_l0
, 
»f_ÿche_l0
, 
mv_ÿche_l1
, 
»f_ÿche_l1
, 
iMb_x
, 
iMb_y
,

447 
Pps
 -> 
cÚ¡¿šed_šŒa_´ed_æag
, Pp -> 
ŒªsfÜm_8x8_mode_æag
, 
Sps
 -> 
dœeù_8x8_šã»nû_æag
, &
La¡_Qp
, &
diff_qp
);

450 
	`NÚZ”oCouÁMªagem’t
(
NÚZ”oCouÁCache
, 
iMb_x
, 
iMb_y
, 
PicWidthInMbs
, 
PicHeightInMbs
, &
Block
[
iCu¼MbAddr
], &
Cu¼Residu
[iCurrMbAddr]);

452 
	`wr™e_back_mÙiÚ
(
PicWidthInMbs
 << 3, PicWidthInMbs << 1,

453 &
MvCabacL0
[
iMb_x
 * 8 + 
iMb_y
 * (
PicWidthInMbs
 << 5)], 
mv_ÿche_l0
,

454 &
RefCabacL0
[
iMb_x
 * 2 + 
iMb_y
 * (
PicWidthInMbs
 << 2)], 
»f_ÿche_l0
);

456 
	`wr™e_back_mÙiÚ
(
PicWidthInMbs
 << 3, PicWidthInMbs << 1,

457 &
MvCabacL1
[
iMb_x
 * 8 + 
iMb_y
 * (
PicWidthInMbs
 << 5)], 
mv_ÿche_l1
,

458 &
RefCabacL1
[
iMb_x
 * 2 + 
iMb_y
 * (
PicWidthInMbs
 << 2)], 
»f_ÿche_l1
);

461 
Sliû
 -> 
mb_xy
++;

464 
iCu¼MbAddr
 = 
	`Next_MbAdd»ss
(iCu¼MbAddr, 
PicSizeInMbs
, 
PicWidthInMbs
, 
MbToSliûGroupM­
, &
iMb_x
, &
iMb_y
);

465 
mÜeD©aFÏg
 = !
	`g‘_ÿbac_‹rmš©e
(
ÿbac
, 
Sliû
 -> 
mb_xy
, 
PicSizeInMbs
);

467 }  
mÜeD©aFÏg
 && !
E¼ÜD‘eùiÚ
);

469 *
EndOfSliû
 = 
	`EndOfSliûMªagem’t
(
Sliû
, 
PicSizeInMbs
, 
E¼ÜD‘eùiÚ
);

470  
E¼ÜD‘eùiÚ
;

471 
	}
}

	@lib_svc/slice_data_svc.h

35 #iâdeà
SLICE_DATA_SVC_H


36 
	#SLICE_DATA_SVC_H


	)

37 
	~"svc_ty³.h
"

41 
¦iû_d©a_ÿvlc_svc
(cÚ¡ 
NAL
 *
N®
, 
RESIDU
 *
Cu¼’t_»sidu
, RESIDU *
Ba£Residu
, cÚ¡ *
ai_pcD©a
,

42 cÚ¡ *
ai_piN®By‹sInN®un™
, cÚ¡ 
SPS
 *
Sps
, cÚ¡ 
PPS
 *
Pps
, 
DATA
 *
aio_t¡Block
,

43 
SLICE
 *
Sliû
, *
pos™iÚ
, cÚ¡ 
VLC_TABLES
 *
vlc
, *
SliûTabË
,

44 cÚ¡ *
MbToSliûGroupM­
, *
EndOfSliû
);

47 
SliûD©aICabacSvc
(*
D©a
, cÚ¡ *
N®By‹sInN®un™
, 
Pos
, cÚ¡ 
NAL
 *
N®
, cÚ¡ 
SPS
 *
Sps
,

48 cÚ¡ 
PPS
 *
Pps
, 
SLICE
 *
Sliû
, 
RESIDU
 *
Cu¼Residu
, RESIDU *
Ba£Residu
, 
DATA
 *
Block
,

49 *
SliûTabË
, *
MbToSliûGroupM­
, *
EndOfSliû
);

52 
SliûD©aPCabacSvc
(*
D©a
, cÚ¡ *
N®By‹sInN®un™
, 
Pos
, cÚ¡ 
NAL
 *
N®
, cÚ¡ 
SPS
 *
Sps
,

53 cÚ¡ 
PPS
 *
Pps
, 
SLICE
 *
Sliû
, 
RESIDU
 *
Cu¼Residu
, RESIDU *
Ba£Residu
, 
DATA
 *
Block
,

54 *
SliûTabË
, *
MbToSliûGroupM­
, *
EndOfSliû
, *
MvCabacL0
, *
RefCabacL0
);

56 
SliûD©aBCabacSvc
(*
D©a
, cÚ¡ *
N®By‹sInN®un™
, 
Pos
, cÚ¡ 
NAL
 *
N®
, cÚ¡ 
SPS
 *
Sps
,

57 cÚ¡ 
PPS
 *
Pps
, 
SLICE
 *
Sliû
, 
RESIDU
 *
Cu¼Residu
, RESIDU *
Ba£Residu
, 
DATA
 *
Block
,

58 *
SliûTabË
, *
MbToSliûGroupM­
, *
EndOfSliû
, *
MvCabacL0
,

59 *
RefCabacL0
, *
MvCabacL1
, *
RefCabacL1
);

66 
__šlše
 
	$is_üİ_š_wšdow
(cÚ¡ 
SPS
 *
Sps
, 
iMb_x
, 
iMb_y
 ){

68 
LeáBÜd”
 = 
iMb_x
 >ğ
Sps
 -> 
sÿËd_ba£_Ëá_off£t
 >> 3;

69 
TİBÜd”
 = 
iMb_y
 >ğ
Sps
 -> 
sÿËd_ba£_tİ_off£t
 >> 3;

70 
RightBÜd”
 = 
iMb_x
 < ((
Sps
 -> 
pic_width_š_mbs
 << 3è- Sp -> 
sÿËd_ba£_right_off£t
) >> 3;

71 
BÙtomBÜd”
 = 
iMb_y
 < ((
Sps
 -> 
pic_height_š_m­_un™s
 << 3è- Sp -> 
sÿËd_ba£_bÙtom_off£t
) >> 3;

73  
LeáBÜd”
 && 
TİBÜd”
 && 
RightBÜd”
 && 
BÙtomBÜd”
;

75 
	}
}

	@lib_svc/slice_header_svc.c

35 
	~"ty³.h
"

36 
	~"d©a.h
"

37 
	~"b™¡»am.h
"

38 
	~"ÿvlc.h
"

39 
	~"¦iû_h—d”.h
"

40 
	~"quªtiz©iÚ.h
"

41 
	~"memÜy_mªagem’t.h
"

46 
	~"svc_ty³.h
"

47 
	~"svc_d©a.h
"

48 
	~"£t_Ïy”.h
"

49 
	~"Sw™chAd»ss.h
"

50 
	~"pic_li¡_svc.h
"

51 
	~"E¼ÜD‘eùiÚ.h
"

52 
	~"¦iû_d©a_I_svc.h
"

53 
	~"SliûH—d”Ex‹nsiÚ.h
"

54 
	~"Çl_un™_h—d”_svc_ex‹nsiÚ.h
"

58 #ifdeà
ENABLE_PACKET_LOSS_DETECTION


61 
	$Pack‘DrİInSliû
 (
SLICE
 *
Sliû
, *
EndOfSliû
){

66 if(!
Sliû
 -> 
¦iû_cyşe_»ady
)

68 
i
, 
fœ¡
, 
tmp
;

71 
Sliû
 -> 
fœ¡_mb
[Sliû -> 
fœ¡_mb_šdex
] = Sliû -> 
fœ¡_mb_š_¦iû
;

74 if(
Sliû
 -> 
fœ¡_mb_šdex
 > 0)

76 
fœ¡
 = 
Sliû
 -> 
fœ¡_mb
[0];

77 
i
 = 1; i < (
Sliû
 -> 
fœ¡_mb_šdex
+1); i++)

79 
tmp
 = 
Sliû
 -> 
fœ¡_mb
[
i
];

81 if(
tmp
 =ğ
fœ¡
){

82 
Sliû
 -> 
¦iû_cyşe_»ady
 = 1;

83 
Sliû
 -> 
num_of_¦iûs_³r_äame
 = 
i
;

89 
Sliû
 -> 
fœ¡_mb_šdex
++;

92 ifĞ
Sliû
 -> 
¦iû_cyşe_»ady
 ) {

93 
Sliû
 -> 
fœ¡_mb_šdex
 = 0;

97 if(
Sliû
 -> 
fœ¡_mb_šdex
 =ğ
MAX_SLICES_PER_FRAME
)

99 
Sliû
 -> 
¦iû_cyşe_»ady
 = 1;

103 ià(
Sliû
 -> 
¦iû_cyşe_»ady
 &&

104 (
Sliû
 -> 
num_of_¦iûs_³r_äame
 != 0)) {

106 if(
Sliû
 -> 
fœ¡_mb_šdex
 >ğ(Sliû -> 
num_of_¦iûs_³r_äame
)) {

107 
Sliû
 -> 
fœ¡_mb_šdex
 = 0;

109 
Sliû
 -> 
fœ¡_mb_š_¦iû_ex³ùed
 = Sliû -> 
fœ¡_mb
[Sliû -> 
fœ¡_mb_šdex
];

112 if(
Sliû
 -> 
fœ¡_mb_š_¦iû_ex³ùed
 !ğSliû -> 
fœ¡_mb_š_¦iû
)

115 
	`´štf
("”¸Sliû -> fœ¡_mb_š_¦iû_ex³ùed %i\n", 
Sliû
 -> 
fœ¡_mb_š_¦iû_ex³ùed
);

118 
Sliû
 -> 
fœ¡_mb_šdex
++;

121 *
EndOfSliû
 = 1;

123 
Sliû
 -> 
fœ¡_mb_šdex
++;

125 
	}
}

133 
	$¦iû_h—d”_svc
(
NbLay”s
, *
d©a
, 
SPS
 *
¥s_id
, 
PPS
 *
µs_id
, *
’Œİy_codšg_æag
,

134 
W_TABLES
 *
quªtif
, 
LIST_MMO
 *
Cu¼’t_pic
, 
SPS
 *
¥s
, 
PPS
 *
µs
,

135 *
pos™iÚ
, 
SLICE
 *
Sliû
, 
MMO
 *
Mmo
, 
LIST_MMO
 *
RefPicLi¡L0
,

136 
LIST_MMO
 *
RefPicLi¡L1
, 
NAL
 *
N®
, *
EndOfSliû
, *
ImgToDi¥Ïy
,

137 *
xsize
, *
ysize
, *
Add»ssPic
, *
Crİ
)

143 if(
Mmo
 -> 
MemÜyAÎoÿtiÚ
 && 
N®
 -> 
Lay”Id
 < 
NbLay”s
){

144 
PPS
 *
±_µs_id
 ;

145 
SPS
 *
±_¥s_id
 ;

146 
PicP¬am‘”Id
;

147 
SeqP¬am‘”Id
;

148 
LAYER_MMO
 *
Lay”Mmo
 = &
Mmo
 -> 
Lay”MMO
 [
N®
 -> 
Lay”Id
];

149 
La¡F¿meNum
 = 
Lay”Mmo
 -> 
äame_num
;

150 
P»vEndOfSliû
 = *
EndOfSliû
;

151 
Fœ¡MbInSliû
 = 
Sliû
 -> 
fœ¡_mb_š_¦iû
;

154 #ifdeà
ERROR_DETECTION


156 if((
N®
 -> 
N®Un™Ty³
 =ğ1 || N® -> N®Un™Ty³ =ğ5è&& N® -> 
DqId
){

157 
N®
 -> 
DqId
 = N® -> 
Lay”Id
 = N® -> 
D•’d’cyId
 = N® -> 
Qu®™yId
 =

158 
N®
 -> 
TempÜ®Id
 = N® -> 
U£RefBa£PicFÏg
 = N® -> 
DisÿrdabËFÏg
 = 0;

159 
N®
 -> 
no_š‹r_Ïy”_´ed_æag
 = 1;

165 
Sliû
 -> 
fœ¡_mb_š_¦iû
 = (è
	`»ad_ue
(
d©a
, 
pos™iÚ
);

166 #ifdeà
ENABLE_PACKET_LOSS_DETECTION


167 
	`Pack‘DrİInSliû
(
Sliû
, 
EndOfSliû
);

170 
Cu¼’t_pic
 -> 
¦iû_ty³
 = 
Sliû
 -> sliû_ty³ = (è
	`»ad_ue
(
d©a
, 
pos™iÚ
);

171 iàĞ
Sliû
 -> 
¦iû_ty³
 > 4 ) {

172 
Cu¼’t_pic
 -> 
¦iû_ty³
 = 
Sliû
 -> slice_type -= 5 ;

175 
PicP¬am‘”Id
 = 
	`»ad_ue
(
d©a
, 
pos™iÚ
);

176 
N®
 -> 
pic_·¿m‘”_id
[N® -> 
Lay”Id
] = 
PicP¬am‘”Id
 = 
	`CLIP3
(0, 
PPS_BUF_SIZE
 - 1, PicParameterId);

177 
±_µs_id
 = &
µs
[
PicP¬am‘”Id
];

180 if(
±_µs_id
 -> 
£q_·¿m‘”_£t_id
 > 
¥s
[0] . 
MaxSpsId
){

181 
±_µs_id
 -> 
£q_·¿m‘”_£t_id
 = 
¥s
[0] . 
MaxSpsId
;

184 
SeqP¬am‘”Id
 = 
±_µs_id
 -> 
£q_·¿m‘”_£t_id
 + (
N®
 -> 
Lay”Id
 ? 16: 0);

185 
±_¥s_id
 = &
¥s
[
SeqP¬am‘”Id
];

186 
Lay”Mmo
 -> 
äame_num
 = (è
	`g‘Nb™s
(
d©a
, 
pos™iÚ
, 
±_¥s_id
 -> 
log2_max_äame_num
 );

187 *
’Œİy_codšg_æag
 = 
±_µs_id
 -> 
’Œİy_codšg_mode_æag
;

191 ifĞ
N®
 -> 
DqId
 > N® -> 
DqIdToDi¥Ïy
){

193 *
EndOfSliû
 = (
Lay”Mmo
 -> 
äame_num
 =ğ
La¡F¿meNum
 && 
Fœ¡MbInSliû
 !ğ
Sliû
 -> 
fœ¡_mb_š_¦iû
 && 
N®
 -> 
DqId
 =ğN® -> 
La¡DqId
)? 1: 0;

195 *
EndOfSliû
 = (
P»vEndOfSliû
 && 
Lay”Mmo
 -> 
äame_num
 =ğ
La¡F¿meNum
 && 
Fœ¡MbInSliû
 !ğ
Sliû
 -> 
fœ¡_mb_š_¦iû
 && 
N®
 -> 
DqId
 =ğN® -> 
La¡DqId
)? 1: 0;

198 #ifdeà
ERROR_DETECTION


200 if(!
±_¥s_id
 -> 
PicSizeInMbs
){

201 
N®
 -> 
N®ToSk
 = 1;

202 
N®
 -> 
PicToDecode
 = N® -> 
PicToDi¥Ïy
 = 0;

205 
	`D‘eùSliûE¼Ü
(
N®
, 
¥s
, 
µs
, 
Cu¼’t_pic
, 
Mmo
, *
EndOfSliû
, 
P»vEndOfSliû
, 
Crİ
, 
ImgToDi¥Ïy
, 
Add»ssPic
, 
xsize
, 
ysize
);

206 
	`D‘ecMissšgTİLay”
(
N®
, 
¥s
, 
µs
, 
Cu¼’t_pic
, 
Mmo
, 
Crİ
, 
ImgToDi¥Ïy
, 
Add»ssPic
, 
xsize
, 
ysize
);

209 
Mmo
 -> 
Lay”Id
 = 
N®
 -> LayerId;

212 
	`F¿meH—d”D©a
(
d©a
, 
pos™iÚ
, 
N®
 -> 
N®RefIdc
, N® -> 
IdrFÏg
, N® -> 
Lay”Id
, *
EndOfSliû
,

213 
Cu¼’t_pic
, 
Lay”Mmo
, 
±_¥s_id
, 
±_µs_id
, 
Mmo
, 
RefPicLi¡L0
, 
RefPicLi¡L1
);

217 iàĞ!*
EndOfSliû
){

218 
	`pic_Üd”_´oûss
(
±_¥s_id
, 
N®
 -> 
IdrFÏg
 * 5, N® -> 
N®RefIdc
, 
Mmo
, 
Lay”Mmo
, 
Cu¼’t_pic
, 
RefPicLi¡L0
, 
RefPicLi¡L1
);

219 #ifdeà
ERROR_DETECTION


220 
	`D‘eùPocProbËm
(
N®
, 
Mmo
, 
Cu¼’t_pic
, 
Lay”Mmo
, 
±_¥s_id
);

222 
	`ProvideMemAdd»ss
(
Cu¼’t_pic
, 
Mmo
, 
Lay”Mmo
);

225 ià(!*
EndOfSliû
){

227 
	`sw™ch_Ïy”
(
N®
);

232 
N®
 -> 
La¡MemÜyAdd»ss
 = N® -> 
MemÜyAdd»ss
;

233 
N®
 -> 
MemÜyAdd»ss
 = 
Cu¼’t_pic
 -> MemoryAddress;

234 
N®
 -> 
MvMemÜyAdd»ss
 = 
Cu¼’t_pic
 -> MvMemoryAddress;

237 
	`SvcR—dReã»nûLi¡Proûssšg
(
d©a
, 
pos™iÚ
, 
N®
, 
Sliû
, 
±_¥s_id
, 
±_µs_id
, 
Lay”Mmo
,

238 
Cu¼’t_pic
, 
Mmo
, 
RefPicLi¡L0
, 
RefPicLi¡L1
);

240 ià(!*
EndOfSliû
){

241 
	`dœeù_»f_li¡_š™
(
Sliû
, 
RefPicLi¡L0
, 
RefPicLi¡L1
, 
Cu¼’t_pic
, 
Lay”Mmo
);

245 
	`QpAndDeblockProûssšg
(
d©a
, 
pos™iÚ
, 
Sliû
, 
±_µs_id
, 
±_¥s_id
);

246 
	`SvcR—dLay”P»diùiÚ
(
d©a
, 
pos™iÚ
, 
N®
, 
±_¥s_id
, 
±_µs_id
, 
Sliû
, 
Cu¼’t_pic
, 
Mmo
, *
EndOfSliû
);

249 
	`N®P¬amIn™
(
N®
, 
µs
, 
¥s
, 
±_¥s_id
);

250 if(
N®
 -> 
Lay”Id
 && !*
EndOfSliû
 && N® -> 
U£dS·tŸl
 [N® -> 
Ba£Lay”Id
][0] == -1){

251 
	`S‘S·tŸlU£d
(
N®
);

255 
	`S‘PicToDi¥Ïy
(
N®
);

256 
	`IsPicToDecode
(
N®
);

259 
	`SvcR—dDeçuÉP¬am‘”s
(
d©a
, 
pos™iÚ
, 
N®
, 
Sliû
, 
±_¥s_id
);

262 
N®
 -> 
S·tŸlSÿÏb™yTy³
 = 
	`S·tŸlSÿÏb™yTy³
(
¥s_id
, Nal);

263 
	`š™_quªtiz©iÚ
 (
quªtif
, 
±_¥s_id
 -> 
sÿlšg_m©rix_´e£Á
, 
±_µs_id
 -> 
sÿlšg_m©rix4
,…t_µs_id -> 
sÿlšg_m©rix8
 );

267 ifĞ
N®
 -> 
N®ToSk
){

268 
Cu¼’t_pic
 -> 
di¥Ïyed
 = 255;

271 
N®
 -> 
La¡Lay”Id
 = N® -> 
Lay”Id
;

272 
N®
 -> 
La¡DqId
 = N® -> 
DqId
;

273 
N®
 -> 
La¡TempÜ®Id
 = N® -> 
TempÜ®Id
;

274 
Mmo
 -> 
nb_img_di¥Ïy
 = 
¥s
[
SeqP¬am‘”Id
] . 
nb_img_di¥
;

275 
Sliû
 -> 
¦iû_num
++ ;

276 *
µs_id
 = 
µs
[
PicP¬am‘”Id
];

277 *
¥s_id
 = 
¥s
[
SeqP¬am‘”Id
];

280 
N®
 -> 
N®ToSk
 = 1;

281 
N®
 -> 
PicToDecode
 = N® -> 
PicToDi¥Ïy
 = 0;

284 
Cu¼’t_pic
 -> 
MemÜyAdd»ss
 = 
Mmo
 -> 
F»eMemÜyAdd»ss
 [MmØ-> 
NumF»eAdd»ss
 - 1];

285 
Mmo
 -> 
F»eMemÜyAdd»ss
 [MmØ-> 
NumF»eAdd»ss
 - 1] = -1;

286 
Mmo
 -> 
NumF»eAdd»ss
--;

290 
	}
}

	@lib_svc/slice_layer_in_scalable_extension_rbsp.c

35 
	~"d©a.h
"

36 
	~"ÿvlc.h
"

37 
	~"š™_d©a.h
"

38 
	~"¦iû_h—d”.h
"

39 
	~"SliûGroupM­.h
"

42 
	~"svc_ty³.h
"

43 
	~"svc_d©a.h
"

44 
	~"CoÜdÚ©es.h
"

45 
	~"¦iû_d©a_svc.h
"

46 
	~"fl_ÿches_svc.h
"

47 
	~"E¼ÜCÚû®m’t.h
"

48 
	~"Çl_un™_h—d”_svc_ex‹nsiÚ.h
"

54 
	$SkSliûMaüoIn™
 (
RESIDU
 *
Cu¼Residu
, 
SLICE
 *
Sliû
, 
Ba£MbTy³
)

57 
	`š™_»sidu
(
Cu¼Residu
);

58 ià(
Sliû
 -> 
¦iû_ty³
 =ğ
SLICE_TYPE_P
){

59 
	`š™_P_sk_mb
(
Cu¼Residu
, 
Sliû
 -> 
¦iû_qp_d–
, Slice);

60 if(
	`IS_I_SVC
(
Ba£MbTy³
)){

61 
Cu¼Residu
 -> 
MbTy³
 = 
I_BL
;

63 
Cu¼Residu
 -> 
MbTy³
 = 
P_BL
;

66 
	`š™_B_sk_mb
(
Cu¼Residu
, 
Sliû
 -> 
¦iû_qp_d–
, Slice);

67 if(
	`IS_I_SVC
(
Ba£MbTy³
)){

68 
Cu¼Residu
 -> 
MbTy³
 = 
I_BL
;

70 
Cu¼Residu
 -> 
MbTy³
 = 
P_BL
;

74 
Cu¼Residu
 -> 
InCrİWšdow
 = Cu¼Residu -> 
Ba£ModeFÏg
 = Cu¼Residu -> 
Residu®P»diùiÚFÏg
 = 1;

75 
	}
}

83 
	$SkSliûDecodšg
(
NAL
 *
N®
, cÚ¡ 
SPS
 *
Sps
, 
SLICE
 *
Sliû
, 
RESIDU
 *
Cu¼Residu
, RESIDU *
Ba£Residu
,

84 
DATA
 *
Block
, *
MbToSliûGroupM­
, *
SliûTabË
)

87 
iMb_x
;

88 
iMb_y
;

89 
iCu¼MbAddr
 = 
Sliû
 -> 
fœ¡_mb_š_¦iû
;

90 cÚ¡ 
PicSizeInMbs
 = 
Sps
 -> PicSizeInMbs ;

91 cÚ¡ 
PicWidthInMbs
 = 
Sps
 -> 
pic_width_š_mbs
;

94 
	`G‘MbPos™iÚ
(
iCu¼MbAddr
, 
PicWidthInMbs
, &
iMb_x
, &
iMb_y
);

96 ; 
iCu¼MbAddr
 < 
PicSizeInMbs
 ;) {

98 
Ba£Addr
 = 
	`G‘Ba£MbAddr
(
N®
, &
Block
[
iCu¼MbAddr
], 
iMb_x
 << 4, 
iMb_y
 << 4);

99 
	`SkSliûMaüoIn™
(&
Cu¼Residu
 [
iCu¼MbAddr
], 
Sliû
, 
Ba£Residu
[
Ba£Addr
] . 
MbTy³
);

100 
SliûTabË
[
iCu¼MbAddr
] = 0;

103 
iCu¼MbAddr
 = 
	`Next_MbAdd»ss
(iCu¼MbAddr, 
PicSizeInMbs
, 
PicWidthInMbs
, 
MbToSliûGroupM­
, &
iMb_x
, &
iMb_y
);

105 
	}
}

111 
	$¦iû_d©a_š_sÿÏbË_ex‹nsiÚ_ÿvlc
 ( cÚ¡ 
size_mb
, cÚ¡ *
D©a
, cÚ¡ *
N®By‹sInN®un™
,

112 cÚ¡ *
Pos™iÚ
, 
NAL
 *
N®
, cÚ¡ 
SPS
 *
Sps
, 
PPS
 *
Pps
, cÚ¡ 
VLC_TABLES
 *
vlc
,

113 *
SliûGroupId
, 
SLICE
 *
Sliû
, *
MbToSliûGroupM­
,

114 *
SliûTabË
, 
DATA
 *
TabBlock
, 
RESIDU
 *
TabResidu
, *
EndOfSliû
)

119 ifĞ!
N®
 -> 
N®ToSk
){

120 
pos
 = *
Pos™iÚ
;

121 cÚ¡ 
MbMaüo
 = 
Sps
 -> 
PicSizeInMbs
;

124 iàĞ*
EndOfSliû
 == 0 ) {

125 
	`»š™_¦iû
(
Sliû
);

126 
Sliû
 -> 
mb_¡ride
 = 
Sps
 -> 
pic_width_š_mbs
;

127 
N®
 -> 
b_¡ride
 = 
Sps
 -> b_stride;

128 
N®
 -> 
b8_¡ride
 = 
Sps
 -> b8_stride;

129 
	`m­Un™ToSliû
(
Sps
, 
Pps
, 
MbToSliûGroupM­
, 
Sliû
 -> 
¦iû_group_chªge_cyşe
, 
SliûGroupId
);

130 
	`In™Uch¬Tab
(
MbMaüo
, 
SliûTabË
);

132 
	`SliûMªagem’t
(
Pps
, 
Sliû
);

136 iàĞ
N®
 -> 
SliûSkFÏg
){

137 
	`SkSliûDecodšg
(
N®
, 
Sps
, 
Sliû
, &
TabResidu
[N® -> 
Lay”Id
 * 
size_mb
],

138 &
TabResidu
[
N®
 -> 
Ba£Lay”Id
 * 
size_mb
], 
TabBlock
, 
MbToSliûGroupM­
, 
SliûTabË
);

140 
N®
 -> 
E¼ÜD‘eùiÚ
 = 
	`¦iû_d©a_ÿvlc_svc
(N®, &
TabResidu
[N® -> 
Lay”Id
 * 
size_mb
], &TabResidu[N® -> 
Ba£Lay”Id
 * size_mb],

141 
D©a
, 
N®By‹sInN®un™
, 
Sps
, 
Pps
, 
TabBlock
, 
Sliû
, &
pos
, 
vlc
, 
SliûTabË
,

142 
MbToSliûGroupM­
, 
EndOfSliû
);

146 #ifdeà
ERROR_CONCEALMENT


148 
	`SVCE¼ÜCÚû®m’t
(
N®
, 
Sps
, 
Sliû
, 
SliûTabË
, &
TabResidu
[N® -> 
Lay”Id
 * 
size_mb
], 
TabBlock
);

150 
	}
}

160 
	$SliûCabac
(cÚ¡ 
size_mb
, *
d©a
, *
N®By‹sInN®un™
, *
pos™iÚ
, 
NAL
 *
N®
, cÚ¡ 
SPS
 *
Sps
, 
PPS
 *
Pps
,

161 *
ai_¦iû_group_id
, *
mv_ÿbac_l0
, *
mv_ÿbac_l1
, *
»f_ÿbac_l0
, *
»f_ÿbac_l1
,

162 
SLICE
 *
Sliû
, *
MbToSliûGroupM­
, *
SliûTabË
, 
DATA
 *
Tab_block
, 
RESIDU
 *
TabResidu
, *
EndOfSliû
)

167 ifĞ!
N®
 -> 
N®ToSk
){

169 
pos
 = *
pos™iÚ
;

170 cÚ¡ 
MbMaüo
 = 
Sps
 -> 
PicSizeInMbs
;

173 iàĞ*
EndOfSliû
 == 0 ) {

174 
	`»š™_¦iû
(
Sliû
);

175 
Sliû
 -> 
mb_¡ride
 = 
Sps
 -> 
pic_width_š_mbs
;

176 
N®
 -> 
b_¡ride
 = 
Sps
 -> b_stride;

177 
N®
 -> 
b8_¡ride
 = 
Sps
 -> b8_stride;

178 
	`m­Un™ToSliû
(
Sps
, 
Pps
, 
MbToSliûGroupM­
, 
Sliû
 -> 
¦iû_group_chªge_cyşe
, 
ai_¦iû_group_id
);

179 
	`In™Uch¬Tab
(
MbMaüo
, 
SliûTabË
);

181 
	`SliûMªagem’t
(
Pps
, 
Sliû
);

186 if((
pos
 & 7) != 0) {

187 
pos
 =((pos >> 3) + 1) << 3;

192 iàĞ
N®
 -> 
SliûSkFÏg
){

193 
	`SkSliûDecodšg
(
N®
, 
Sps
, 
Sliû
, &
TabResidu
[N® -> 
Lay”Id
 * 
size_mb
], &TabResidu[N® -> 
Ba£Lay”Id
 * size_mb],

194 
Tab_block
, 
MbToSliûGroupM­
, 
SliûTabË
);

196 iàĞ
Sliû
 -> 
¦iû_ty³
 =ğ
SLICE_TYPE_B
){

197 
N®
 -> 
E¼ÜD‘eùiÚ
 = 
	`SliûD©aBCabacSvc
(
d©a
, 
N®By‹sInN®un™
, 
pos
, N®, 
Sps
, 
Pps
, 
Sliû
, &
TabResidu
[N® -> 
Lay”Id
 * 
size_mb
],

198 &
TabResidu
[
N®
 -> 
Ba£Lay”Id
 * 
size_mb
], 
Tab_block
, 
SliûTabË
, 
MbToSliûGroupM­
, 
EndOfSliû
,

199 
mv_ÿbac_l0
, 
»f_ÿbac_l0
, 
mv_ÿbac_l1
, 
»f_ÿbac_l1
);

201 }iàĞ
Sliû
 -> 
¦iû_ty³
 =ğ
SLICE_TYPE_P
){

202 
N®
 -> 
E¼ÜD‘eùiÚ
 = 
	`SliûD©aPCabacSvc
(
d©a
, 
N®By‹sInN®un™
, 
pos
, N®, 
Sps
, 
Pps
, 
Sliû
, &
TabResidu
[N® -> 
Lay”Id
 * 
size_mb
],

203 &
TabResidu
[
N®
 -> 
Ba£Lay”Id
 * 
size_mb
], 
Tab_block
, 
SliûTabË
, 
MbToSliûGroupM­
, 
EndOfSliû
,

204 
mv_ÿbac_l0
, 
»f_ÿbac_l0
);

207 
N®
 -> 
E¼ÜD‘eùiÚ
 = 
	`SliûD©aICabacSvc
(
d©a
, 
N®By‹sInN®un™
, 
pos
, N®, 
Sps
, 
Pps
, 
Sliû
, &
TabResidu
[N® -> 
Lay”Id
 * 
size_mb
],

208 &
TabResidu
[
N®
 -> 
Ba£Lay”Id
 * 
size_mb
], 
Tab_block
, 
SliûTabË
, 
MbToSliûGroupM­
, 
EndOfSliû
);

213 #ifdeà
ERROR_CONCEALMENT


215 
	`SVCE¼ÜCÚû®m’t
(
N®
, 
Sps
, 
Sliû
, 
SliûTabË
, &
TabResidu
[N® -> 
Lay”Id
 * 
size_mb
], 
Tab_block
);

217 
	}
}

	@lib_svc/svc_data.h

35 
	~"symbŞ.h
"

39 
	#EP
 0

	)

40 
	#EB
 1

	)

41 
	#EI
 2

	)

43 
	#IS_BL
(
X
è(X =ğ
I_BL
 || X =ğ
P_BL
 || X =ğ
B_BL
)

	)

44 
	#IS_INTER_BL
(
X
è(X =ğ
P_BL
 || X =ğ
B_BL
)

	)

45 
	#IS_I_SVC
(
X
è(X > 0 && X < 5 || X =ğ
I_BL
)

	)

46 
	#IS_P_SVC
(
X
è(X > 4 && X < 9 || X =ğ
P_Sk
 || X =ğ
P_BL
)

	)

47 
	#IS_B_SVC
(
X
è(X > 8 && X < 20 || X =ğ
B_Sk
 || X =ğ
P_BL
)

	)

48 
	#IS_B_L0
(
X
,
Y
è(X =ğ10 || X =ğ12 || X =ğ13 || X =ğ15 || X =ğ19 || X =ğ21 || (Y && (X =ğ18 || X =ğ17)è|| (!Y && (X =ğ14 || X =ğ20)))

	)

49 
	#IS_B_L1
(
X
,
Y
è(X =ğ11 || X =ğ12 || X =ğ16 || X =ğ18 || X =ğ20 || X =ğ21 || (Y && (X =ğ14 || X =ğ15)è|| (!Y && (X =ğ17 || X =ğ19)))

	)

51 
	#BLK_4x4
 0

	)

52 
	#BLK_4x8
 1

	)

53 
	#BLK_8x4
 2

	)

54 
	#BLK_8x8
 3

	)

56 
	#MBLK_INTRA_4x4
 4

	)

57 
	#MBLK_16x16
 3

	)

58 
	#MBLK_16x8
 2

	)

59 
	#MBLK_8x16
 1

	)

60 
	#MBLK_8x8
 0

	)

62 
	#RESCALE_POSITION
(
W
,
X
,
Y
,
Z
è(((W * Xè+ Y)/Z)

	)

	@lib_svc/svc_neighbourhood.c

34 
	~"ty³.h
"

35 
	~"d©a.h
"

36 
	~"symbŞ.h
"

37 
	~"Ãighbourhood.h
"

40 
	~"svc_ty³.h
"

41 
	~"svc_d©a.h
"

42 
	~"svc_Ãighbourhood.h
"

54 
	$g‘_ba£_Ãighbourhood
Ğ*
Mask
, 
Addr
, cÚ¡ 
iAddr_x
, cÚ¡ 
PicWidthInMbs
,

55 cÚ¡ 
RESIDU
 *
»sidu
, cÚ¡ 
PicSizeInMbs
, cÚ¡ 
IÁ¿CÚ¡¿šed
){

57 cÚ¡ 
iAddr_xp1
 = (
iAddr_x
 + 1è!ğ
PicWidthInMbs
;

60 
mbAddrA
 = 
Addr
 - 1 ;

61 
mbAddrE
 = 
Addr
 + 1;

62 
mbAddrD
 = 
Addr
 - 
PicWidthInMbs
 - 1;

63 
mbAddrB
 = 
Addr
 - 
PicWidthInMbs
;

64 
mbAddrC
 = 
Addr
 - 
PicWidthInMbs
 + 1;

65 
mbAddrF
 = 
Addr
 + 
PicWidthInMbs
 - 1;

66 
mbAddrG
 = 
Addr
 + 
PicWidthInMbs
;

67 
mbAddrH
 = 
Addr
 + 
PicWidthInMbs
 + 1 ;

69 *
Mask
 = 0;

71 ifĞ
IÁ¿CÚ¡¿šed
){

72 if(
mbAddrA
 >ğ0è*
Mask
 = (è(
	`IS_I_SVC
(
»sidu
[mbAddrA] . 
MbTy³
è&& (
iAddr_x
 !ğ0è&& 
	`NeighbourAva
(mbAddrA, 
PicSizeInMbs
,„esidu[mbAddrA] . 
SliûNum
,„esidu[
Addr
] . SliceNum));

73 if(
mbAddrB
 >ğ0è*
Mask
 +ğ(è(
	`IS_I_SVC
(
»sidu
[mbAddrB] . 
MbTy³
è&& 
	`NeighbourAva
(mbAddrB, 
PicSizeInMbs
,„esidu[mbAddrB] . 
SliûNum
,„esidu[
Addr
] . SliceNum)) << 1;

74 if(
mbAddrC
 >ğ0è*
Mask
 +ğ(è(
	`IS_I_SVC
(
»sidu
[mbAddrC] . 
MbTy³
è&& (
iAddr_xp1
 !ğ0è&& 
	`NeighbourAva
(mbAddrC, 
PicSizeInMbs
,„esidu[mbAddrC] . 
SliûNum
,„esidu[
Addr
] . SliceNum)) << 2;

75 if(
mbAddrD
 >ğ0è*
Mask
 +ğ(è(
	`IS_I_SVC
(
»sidu
[mbAddrD] . 
MbTy³
è&& (
iAddr_x
 !ğ0è&& 
	`NeighbourAva
(mbAddrD, 
PicSizeInMbs
,„esidu[mbAddrD] . 
SliûNum
,„esidu[
Addr
] . SliceNum)) << 3;

76 if(
mbAddrE
 >ğ0è*
Mask
 +ğ(è(
	`IS_I_SVC
(
»sidu
[mbAddrE] . 
MbTy³
è&& (
iAddr_xp1
 !ğ0è&& 
	`NeighbourAva
(mbAddrE, 
PicSizeInMbs
,„esidu[mbAddrE] . 
SliûNum
,„esidu[
Addr
] . SliceNum)) << 4;

77 if(
mbAddrF
 >ğ0è*
Mask
 +ğ(è(
	`IS_I_SVC
(
»sidu
[mbAddrF] . 
MbTy³
è&& (
iAddr_x
 !ğ0è&& 
	`NeighbourAva
(mbAddrF, 
PicSizeInMbs
,„esidu[mbAddrF] . 
SliûNum
,„esidu[
Addr
] . SliceNum)) << 5;

78 if(
mbAddrG
 >ğ0è*
Mask
 +ğ(è(
	`IS_I_SVC
(
»sidu
[mbAddrG] . 
MbTy³
è&& 
	`NeighbourAva
(mbAddrG, 
PicSizeInMbs
,„esidu[mbAddrG] . 
SliûNum
,„esidu[
Addr
] . SliceNum)) << 6;

79 if(
mbAddrH
 >ğ0è*
Mask
 +ğ(è(
	`IS_I_SVC
(
»sidu
[mbAddrH] . 
MbTy³
è&& (
iAddr_xp1
 !ğ0è&& 
	`NeighbourAva
(mbAddrH, 
PicSizeInMbs
,„esidu[mbAddrH] . 
SliûNum
,„esidu[
Addr
] . SliceNum)) << 7;

81 if(
mbAddrA
 >ğ0è*
Mask
 = (è(
	`IS_I_SVC
(
»sidu
[mbAddrA] . 
MbTy³
è&& (
iAddr_x
 !ğ0è&& 
	`svc_Ãighbour_ava
(mbAddrA, 
PicSizeInMbs
));

82 if(
mbAddrB
 >ğ0è*
Mask
 +ğ(è(
	`IS_I_SVC
(
»sidu
[mbAddrB] . 
MbTy³
è&& 
	`svc_Ãighbour_ava
(mbAddrB, 
PicSizeInMbs
)) << 1;

83 if(
mbAddrC
 >ğ0è*
Mask
 +ğ(è(
	`IS_I_SVC
(
»sidu
[mbAddrC] . 
MbTy³
è&& (
iAddr_xp1
 !ğ0è&& 
	`svc_Ãighbour_ava
(mbAddrC, 
PicSizeInMbs
)) << 2;

84 if(
mbAddrD
 >ğ0è*
Mask
 +ğ(è(
	`IS_I_SVC
(
»sidu
[mbAddrD] . 
MbTy³
è&& (
iAddr_x
 !ğ0è&& 
	`svc_Ãighbour_ava
(mbAddrD, 
PicSizeInMbs
)) << 3;

85 if(
mbAddrE
 >ğ0è*
Mask
 +ğ(è(
	`IS_I_SVC
(
»sidu
[mbAddrE] . 
MbTy³
è&& (
iAddr_xp1
 !ğ0è&& 
	`svc_Ãighbour_ava
(mbAddrE, 
PicSizeInMbs
)) << 4;

86 if(
mbAddrF
 >ğ0è*
Mask
 +ğ(è(
	`IS_I_SVC
(
»sidu
[mbAddrF] . 
MbTy³
è&& (
iAddr_x
 !ğ0è&& 
	`svc_Ãighbour_ava
(mbAddrF, 
PicSizeInMbs
)) << 5;

87 if(
mbAddrG
 >ğ0è*
Mask
 +ğ(è(
	`IS_I_SVC
(
»sidu
[mbAddrG] . 
MbTy³
è&& 
	`svc_Ãighbour_ava
(mbAddrG, 
PicSizeInMbs
)) << 6;

88 if(
mbAddrH
 >ğ0è*
Mask
 +ğ(è(
	`IS_I_SVC
(
»sidu
[mbAddrH] . 
MbTy³
è&& (
iAddr_xp1
 !ğ0è&& 
	`svc_Ãighbour_ava
(mbAddrH, 
PicSizeInMbs
)) << 7;

90 
	}
}

	@lib_svc/svc_neighbourhood.h

34 #iâdeà
SVC_NEIGHBOUR_H


35 
	#SVC_NEIGHBOUR_H


	)

38 
g‘_ba£_Ãighbourhood
(*
Mask
, 
Addr
, cÚ¡ 
iAddr_x
, cÚ¡ 
PicWidthInMbs
,

39 cÚ¡ 
RESIDU
 *
»sidu
, cÚ¡ 
PicSizeInMbs
, cÚ¡ 
IÁ¿CÚ¡¿šed
);

45 
__šlše
 
	$svc_Ãighbour_ava
 ( cÚ¡ 
ai_iMbAddr
, cÚ¡ 
PicSizeInMbs
)

47 iàĞ
ai_iMbAddr
 < 0 ||‡i_iMbAdd¸>ğ
PicSizeInMbs
 )

51 
	}
}

	@lib_svc/svc_type.h

36 #iâdeà
SVC_TYPE_H


37 
	#SVC_TYPE_H


	)

38 
	~"ty³.h
"

44 
	mDqIdMax
;

45 
	mS‘Lay”
;

46 
	mTempÜ®Com
;

47 
	mTempÜ®Id
;

48 
	mNextDqId
;

49 
	mÏy”_id_bË
[8];

50 
	mU£dS·tŸl
[8][8];

51 
	mNbSliûsLay”
[8];

53 } 
	tCÚfigSVC
;

57 
	mRefIdc
;

60 
	mP¬tIdc
;

61 
	mMvIndex
;

62 
	mRefIndex
;

63 } 
	tREFPART
;

69 
	mTempToDi¥Ïy
;

70 
	mTempWª‹d
;

71 
	mTempÜ®Id
;

72 
	mLa¡TempÜ®Id
;

73 
	mLa¡Lay”Id
;

74 
	mBa£Lay”Id
;

75 
	mLay”Id
;

76 
	mLa¡DecodedId
;

77 
	mD•’d’cyId
;

78 
	mQu®™yId
;

79 
	mDqId
;

80 
	mLa¡DqId
;

82 
	mDqIdToDi¥Ïy
;

83 
	mDqIdWª‹d
;

84 
	mPicToDecode
;

85 
	mPicToDi¥Ïy
;

86 
	mN®ToSk
;

89 
	mMvC®x
[8];

90 
	mMvC®y
[8];

91 
	mpic_·¿m‘”_id
[8];

92 
	mÏy”_id_bË
[8];

93 
	mU£dS·tŸl
[8][8];

94 
	mMaxNumLay”
;

95 
	mD•’d’cyIdMax
;

96 
	mMaxTempÜ®Id
;

97 
	mDqIdMax
;

98 
	mLa¡DqIdMax
;

102 
	mFlushR’d””
;

105 
	mN®RefIdc
;

106 
	mN®Un™Ty³
;

107 
	mIdrFÏg
;

111 
	mÏy”_ba£_æag
;

112 
	mU£RefBa£PicFÏg
;

113 
	mno_š‹r_Ïy”_´ed_æag
;

114 
	mStÜeRefBa£PicFÏg
;

115 
	mDisÿrdabËFÏg
;

116 
	mS·tŸlSÿÏb™yTy³
;

117 
	mnÚ_dŸdic
;

118 
	mSCÛffP»diùiÚ
;

119 
	mTCÛffP»diùiÚ
;

120 
	mSliûSkFÏg
;

124 
	mLa¡MemÜyAdd»ss
;

125 
	mBa£MemÜyAdd»ss
;

126 
	mBa£MvMemÜyAdd»ss
;

127 
	mMemÜyAdd»ss
;

128 
	mMvMemÜyAdd»ss
;

132 
	mb_¡ride
 ;

133 
	mb8_¡ride
 ;

134 
	mis_üİpšg
;

135 
	mËá_off£t
 ;

136 
	mtİ_off£t
;

140 
	mcu¼_Width
;

141 
	mcu¼_Height
;

142 
	mup_Width
;

143 
	mup_Height
;

144 
	mba£_Width
;

145 
	mba£_Height
;

146 
	mdown_Width
;

147 
	mdown_Height
;

151 
	mS·tŸlSÿÏb™y
;

152 
	mLoİF‹rS·tŸlSÿÏb™y
;

153 
	mLoİF‹rFÜûdIdc
;

156 
	mComTempId
;

157 
	mComDqId
;

161 
	mE¼ÜD‘eùed
;

162 
	mE¼ÜD‘eùiÚ
;

163 
	mNbSliûsLay”
[8];

164 } 
	tNAL
 ;

170 (*
	tSub_P_svc
)(
	tmv_ÿche
 [][2], *
	t»f_ÿche
, cÚ¡ 
	tDATA
 *
	tBlock
, 
	tmbP¬tIdx
, *
	tmv_l0
, *
	t»f_bas_l0
, cÚ¡ 
	tNAL
 *
	tN®
, 
	tREFPART
 
	tRefP¬t™iÚ
[16]);

172 (*
	tP_svc
)Ğ
	tmv_ÿche
 [][2], *
	t»f_ÿche
, cÚ¡ 
	tRESIDU
 *
	tCu¼Residu
, cÚ¡ 
	tDATA
 *
	tBlock
, cÚ¡ 
	tSub_P_svc
 
	tdecode_sub
[]

173 , *
	tDpbLuma
, *
	tDpbCb
, *
	tDpbCr


174 , *
	timage
, *
	timage_Cb
, *
	timage_Cr


175 , cÚ¡ 
	tx
, cÚ¡ 
	ty
, cÚ¡ 
	tPicWidthInPix
, cÚ¡ 
	tPicHeightInPix


176 , cÚ¡ 
	tNAL
 *
	tN®
, 
	tLIST_MMO
 *
	tRefPicLi¡L0
, *
	tmv_l0
, *
	t»f_bas_l0
, cÚ¡ 
	tSTRUCT_PF
 *
	tveùÜs
, 
	tREFPART
 
	tRefP¬t™iÚ
[16]);

179 (*
	tSub_B_svc
)Ğ
	taio_tmv_ÿche_l0
 [][2], 
	taio_tmv_ÿche_l1
 [][2], *
	taio_Œef_ÿche_l0
,*
	taio_Œef_ÿche_l1
 , cÚ¡ 
	tDATA
 *
	taio_pBlock


180 , 
	tmbP¬tIdx
, 
	tSubMbTy³
, *
	tmv_bas_l0
, *
	tmv_bas_l1
, *
	t»f_bas_l0
, *
	t»f_bas_l1
, cÚ¡ 
	tNAL
 *
	tN®
, 
	tREFPART
 
	tRefP¬t™iÚ
[16]) ;

182 (*
	tB_svc
)Ğ
	taio_tmv_ÿche_l0
 [][2], 
	taio_tmv_ÿche_l1
 [][2], *
	taio_Œef_ÿche_l0
, *
	taio_Œef_ÿche_l1


183 , cÚ¡ 
	tRESIDU
 *
	tCu¼Residu
, cÚ¡ 
	tDATA
 *
	taio_pBlock
, 
	tSub_B_svc
 
	taio_tdecode_sub
[]

184 , *
	tDpbLuma
, *
	tDpbCb
, *
	tDpbCr


185 , *
	timage
, *
	timage_Cb
, *
	timage_Cr


186 , cÚ¡ 
	tx
, cÚ¡ 
	ty
, cÚ¡ 
	tPicWidthInPix
, cÚ¡ 
	tPicHeightInPix


187 , cÚ¡ 
	tNAL
 *
	tN®
, 
	tLIST_MMO
 * 
	tRefPicLi¡L0
, LIST_MMO * 
	tRefPicLi¡L1


188 , *
	tmv_bas_l0
, *
	tmv_bas_l1
, *
	t»f_bas_l0
, *
	t»f_bas_l1
, cÚ¡ 
	tSTRUCT_PF
 *
	tveùÜs


189 , 
	tREFPART
 
	tRefP¬t™iÚ
[16]) ;

194 
B_svc
 
B_veùÜs
[5];

195 
Sub_B_svc
 
B_sub_veùÜs
[13];

196 
P_svc
 
P_veùÜs
[5];

197 
Sub_P_svc
 
P_sub_veùÜs
[4];

198 }
	tSVC_VECTORS
;

	@lib_svc/upsample_residu.c

34 
	~"¡ršg.h
"

38 
	~"d©a.h
"

39 
	~"ty³.h
"

40 
	~"ş.h
"

41 
	~"SliûGroupM­.h
"

44 
	~"svc_ty³.h
"

45 
	~"up§m¶e_»sidu.h
"

46 
	~"mb_up§m¶e_f‹r.h
"

47 
	~"Residu®Proûssšg.h
"

54 
	$LumaHÜizÚlF‹r
(*
x16
, *
k16
, *
xp16
,*
yp16
, cÚ¡ 
NAL
 *
N®
,

55 cÚ¡ 
RESIDU
 *
ba£_»sidu
, *
luma_tmp
, *
luma_š
){

57 
x
, 
y
;

58 
p2
,
p3
;

61 
y
 = 0; y < 20; y ++){

62 
q
 = 
	`CLIP3
(0, 
N®
 -> 
cu¼_Height
, 
yp16
[
y
 - 2]);

64 *
±r2
 = 
luma_tmp
 + 
q
 * (
N®
 -> 
cu¼_Width
);

65 *
±r1
 = 
luma_š
 + 
q
 * (
N®
 -> 
ba£_Width
 + 32);

67 
x
 = 0; x < 16; x ++){

68 
i1
 = 
x16
[
x
];

69 
k
 = 
k16
[
x
];

70 
p
 = 
xp16
[
x
];

74 ifĞ
ba£_»sidu
[(
p
 >> 4è+ (
q
 >> 4è* (
N®
 -> 
ba£_Width
 >> 4)] . 
T¿nsfÜm8x8
){

75 
p
 =… >> 3;

76 
p2
 = ( 
i1
 / 8 ) =ğ
p
 ? i1 : (… * 8 );

77 
p3
 = ( (
i1
 + 1è/ 8 ) =ğ
p
 ? (i1 + 1) : (… * 8 + (8 - 1) );

79 
p
 =… >> 2;

80 
p2
 = ( 
i1
 / 4 ) =ğ
p
 ? i1 : (… * 4 );

81 
p3
 = ( (
i1
 + 1è/ 4 ) =ğ
p
 ? (i1 + 1) : (… * 4 + (4 - 1) );

84 
±r2
[
x
] = (è((16 - 
k
è* 
±r1
[
p2
] + k *…Œ1[
p3
]);

87 
	}
}

91 
	$LumaV”tiÿlF‹r
(*
y16
, *
k16
, *
xp16
, *
yp16
, cÚ¡ 
NAL
 *
N®
,

92 cÚ¡ 
RESIDU
 *
ba£_»sidu
, *
luma_tmp
, *
luma_out
){

95 
x
,
y
;

96 
p2
,
p3
;

97 
PicWidthInPix
 = 
N®
 -> 
cu¼_Width
 + 32;

99 
x
 = 0; x < 16; x ++){

100 *
±r1
 = 
luma_tmp
 + 
x
;

101 *
±r2
 = 
luma_out
 + 
x
;

103 
y
 = 0; y < 16; y ++){

104 
i1
 = 
y16
[
y
];

105 
k
 = 
k16
[
y
];

106 
p
 = 
yp16
[
y
];

108 ifĞ
ba£_»sidu
[(
xp16
[
x
] >> 4è+ (
yp16
[
y
] >> 4è* (
N®
 -> 
ba£_Width
 >> 4)] . 
T¿nsfÜm8x8
){

109 
p
 =… >> 3;

110 
p2
 = ( 
i1
 >> 3 ) =ğ
p
 ? i1 : (… << 3 );

111 
p3
 = ( (
i1
 + 1è>> 3 ) =ğ
p
 ? (i1 + 1) : ( (p << 3) + 7 );

113 
p
 =… >> 2;

114 
p2
 = ( 
i1
 >> 2 ) =ğ
p
 ? i1 : (… << 2 );

115 
p3
 = ( (
i1
 + 1è>> 2 ) =ğ
p
 ? (i1 + 1) : ((… << 2) + 3);

119 
±r2
[
y
 * 
PicWidthInPix
] = (è(Ğ(16 - 
k
è* 
±r1
[
N®
 -> 
cu¼_Width
 * 
p2
] + k *…Œ1[N® -> cu¼_Width * 
p3
] + 128 ) >> 8);

122 
	}
}

128 
	$ChromaHÜizÚlF‹r
(*
x16
, *
k16
, *
xp16
,*
yp16
, cÚ¡ 
NAL
 *
N®
,

129 *
luma_tmp
, *
luma_š
){

131 
x
, 
y
;

134 
y
 = 0; y < 10; y ++){

135 
q
 = 
	`CLIP3
(0, 
N®
 -> 
cu¼_Height
 >> 1, 
yp16
[
y
 - 1]);

136 *
±r2
 = 
luma_tmp
 + 
q
 * ((
N®
 -> 
cu¼_Width
) >> 1);

137 *
±r1
 = 
luma_š
 + 
q
 * ((
N®
 -> 
ba£_Width
 + 32) >> 1);

139 
x
 = 0; x < 8; x ++){

140 
i1
 = 
x16
[
x
];

141 
k
 = 
k16
[
x
];

142 
p
 = 
xp16
[
x
] >> 2;

144 
p2
 = ( 
i1
 >> 2 ) =ğ
p
 ? i1 : (… << 2 );

145 
p3
 = ( (
i1
 + 1è>> 2 ) =ğ
p
 ? (i1 + 1) : ( (p << 2) + (4 - 1) );

147 
±r2
[
x
] = (è((16 - 
k
è* 
±r1
[
p2
] + k *…Œ1[
p3
]);

150 
	}
}

157 
	$ChromaV”tiÿlF‹r
(*
y16
, *
k16
, *
yp16
, cÚ¡ 
NAL
 *
N®
, *
luma_tmp
, *
luma_out
){

160 
x
,
y
;

161 cÚ¡ 
PicWidthInPix
 = (
N®
 -> 
cu¼_Width
 + 32) >> 1;

162 cÚ¡ 
ResWidthInPix
 = (
N®
 -> 
cu¼_Width
) >> 1;

164 
x
 = 0; x < 8; x ++){

165 *
±r1
 = 
luma_tmp
 + 
x
;

166 *
±r2
 = 
luma_out
 + 
x
;

168 
y
 = 0; y < 8; y ++){

169 
i1
 = 
y16
[
y
];

170 
k
 = 
k16
[
y
];

171 
p
 = 
yp16
[
y
] >> 2;

173 
p2
 = ( 
i1
 >> 2 ) =ğ
p
 ? i1 : (… << 2 );

174 
p3
 = ( (
i1
 + 1è>> 2 ) =ğ
p
 ? (i1 + 1) : ((… << 2) + 3);

176 
±r2
[
y
 * 
PicWidthInPix
] = (è(Ğ(16 - 
k
è* 
±r1
[
ResWidthInPix
 * 
p2
] + k *…Œ1[ResWidthInPix * 
p3
] + 128 ) >> 8);

179 
	}
}

187 
	$Up§m¶e_»sidu
(cÚ¡ 
Ïy”_šc
, 
fœ¡_mb_š_¦iû
, cÚ¡ 
NAL
 *
N®
,cÚ¡ 
SPS
 *
¥s_id
,

188 cÚ¡ 
RESIDU
 *
cu¼’t_»sidu
, cÚ¡ RESIDU *
ba£_»sidu
, *
x16
, *
y16
,

189 *
xk16
, *
xp16
, *
yk16
, *
yp16
, *
luma_tmp
, *
luma_š
,

190 *
Cb_š
, *
Cr_š
, cÚ¡ *
ai_tiMbToSliûGroupM­
)

193 
i
;

194 
iMb_x
, 
iMb_y
, 
CÛff
;

195 cÚ¡ 
PicSizeInMbs
 = (
N®
 -> 
cu¼_Height
 * N® -> 
cu¼_Width
) >> 8;

196 cÚ¡ 
PicWidthInMbs
 = 
N®
 -> 
cu¼_Width
 >> 4;

197 
ba£_PicWidthInPix
 = 
N®
 -> 
down_Width
;

198 
Cu¼_PicWidthInPix
 = 
N®
 -> 
up_Width
;

199 
ba£_PicHeightInPix
 = 
N®
 -> 
down_Height
;

200 
Cu¼_PicHeightInPix
 = 
N®
 -> 
up_Height
;

205 
shiáX
 = 
	`ShiáC®cuÏtiÚ
(
¥s_id
 -> 
Ëv–_idc
, 
ba£_PicWidthInPix
);

206 
SÿË
 = ((
ba£_PicWidthInPix
 << 
shiáX
è+ (
Cu¼_PicWidthInPix
 >> 1)) / Curr_PicWidthInPix;

207 
Add
 = (((
ba£_PicWidthInPix
 * 2è<< (
shiáX
 - 2)è+ (
Cu¼_PicWidthInPix
 >> 1)) / Curr_PicWidthInPix + (1 << (shiftX - 5));

209 
	`š™_»sidu_luma_b
(
Cu¼_PicWidthInPix
, 
SÿË
, 
Add
, 
shiáX
, 8, &
x16
[
¥s_id
 -> 
sÿËd_ba£_Ëá_off£t
 * 2], &
xk16
[¥s_id -> sÿËd_ba£_Ëá_off£ˆ* 2], &
xp16
[sps_id -> scaled_base_left_offset * 2]);

211 
shiáX
 = 
	`ShiáC®cuÏtiÚ
(
¥s_id
 -> 
Ëv–_idc
, 
ba£_PicHeightInPix
);

212 
SÿË
 = ((
ba£_PicHeightInPix
 << 
shiáX
è+ (
Cu¼_PicHeightInPix
 >> 1)) / Curr_PicHeightInPix;

213 
Add
 = (((
ba£_PicHeightInPix
 * 2è<< (
shiáX
 - 2)è+ (
Cu¼_PicHeightInPix
 >> 1)) / Curr_PicHeightInPix + (1 << (shiftX - 5));

215 
	`š™_»sidu_luma_b
(
Cu¼_PicHeightInPix
, 
SÿË
, 
Add
, 
shiáX
, 8, &
y16
[
¥s_id
 -> 
sÿËd_ba£_tİ_off£t
 * 2], &
yk16
[¥s_id -> sÿËd_ba£_tİ_off£ˆ* 2], &
yp16
[sps_id -> scaled_base_top_offset * 2]);

219 
	`G‘MbPos™iÚ
(
fœ¡_mb_š_¦iû
, 
PicWidthInMbs
, &
iMb_x
, &
iMb_y
);

222  
i
 = 
fœ¡_mb_š_¦iû
; i < 
PicSizeInMbs
;){

224 ià(
cu¼’t_»sidu
[
i
] . 
Residu®P»diùiÚFÏg
){

225 
x_pos
 = 
iMb_x
 << 4;

226 
y_pos
 = 
iMb_y
 << 4;

227 
	`LumaHÜizÚlF‹r
(&
x16
[
x_pos
], &
xk16
[x_pos], &
xp16
[x_pos], &
yp16
[
y_pos
], 
N®
, 
ba£_»sidu
, &
luma_tmp
[x_pos], 
luma_š
);

231 
i
 = 
	`Next_MbAdd»ss
(i, 
PicSizeInMbs
, 
PicWidthInMbs
, 
ai_tiMbToSliûGroupM­
, &
iMb_x
, &
iMb_y
);

236 
	`G‘MbPos™iÚ
(
fœ¡_mb_š_¦iû
, 
PicWidthInMbs
, &
iMb_x
, &
iMb_y
);

240  
i
 = 
fœ¡_mb_š_¦iû
; i < 
PicSizeInMbs
;){

241 ià(
cu¼’t_»sidu
[
i
] . 
Residu®P»diùiÚFÏg
){

242 
x_pos
 = 
iMb_x
 << 4;

243 
y_pos
 = 
iMb_y
 << 4;

244 
	`LumaV”tiÿlF‹r
(&
y16
[
y_pos
], &
yk16
[y_pos], &
xp16
[
x_pos
], &
yp16
[y_pos], 
N®
, 
ba£_»sidu
, &
luma_tmp
[x_pos], &
luma_š
[
Ïy”_šc
 + x_po + y_po * (N® -> 
cu¼_Width
 + 32)]);

247 
i
 = 
	`Next_MbAdd»ss
(i, 
PicSizeInMbs
,
PicWidthInMbs
, 
ai_tiMbToSliûGroupM­
, &
iMb_x
, &
iMb_y
);

251 
ba£_PicWidthInPix
 >>= 1;

252 
Cu¼_PicWidthInPix
 >>= 1;

253 
ba£_PicHeightInPix
 >>= 1;

254 
Cu¼_PicHeightInPix
 >>= 1;

258 
shiáX
 = 
	`ShiáC®cuÏtiÚ
(
¥s_id
 -> 
Ëv–_idc
, 
ba£_PicWidthInPix
);

259 
SÿË
 = ((
ba£_PicWidthInPix
 << 
shiáX
è+ (
Cu¼_PicWidthInPix
 >> 1)) / Curr_PicWidthInPix;

260 
CÛff
 = 2 + 
¥s_id
 -> 
chroma_pha£_x
;

261 
Add
 = (((
ba£_PicWidthInPix
 * 
CÛff
è<< (
shiáX
 - 2)è+ (
Cu¼_PicWidthInPix
 >> 1)) / Curr_PicWidthInPix + (1 << (shiftX - 5));

263 
	`š™_»sidu_luma_b
(
Cu¼_PicWidthInPix
, 
SÿË
, 
Add
, 
shiáX
, 
CÛff
 << 2, &
x16
[
¥s_id
 -> 
sÿËd_ba£_Ëá_off£t
], &
xk16
[¥s_id -> sÿËd_ba£_Ëá_off£t], &
xp16
[sps_id -> scaled_base_left_offset]);

265 
shiáX
 = 
	`ShiáC®cuÏtiÚ
(
¥s_id
 -> 
Ëv–_idc
, 
ba£_PicHeightInPix
);

266 
SÿË
 = ((
ba£_PicHeightInPix
 << 
shiáX
è+ (
Cu¼_PicHeightInPix
 >> 1)) / Curr_PicHeightInPix;

267 
CÛff
 = 2 + 
¥s_id
 -> 
chroma_pha£_y
;

268 
Add
 = (((
ba£_PicHeightInPix
 * 
CÛff
è<< (
shiáX
 - 2)è+ (
Cu¼_PicHeightInPix
 >> 1)) / Curr_PicHeightInPix + (1 << (shiftX - 5));

269 
	`š™_»sidu_luma_b
(
Cu¼_PicHeightInPix
, 
SÿË
, 
Add
, 
shiáX
, 
CÛff
 << 2, &
y16
[
¥s_id
 -> 
sÿËd_ba£_tİ_off£t
], &
yk16
[¥s_id -> sÿËd_ba£_tİ_off£t], &
yp16
[sps_id -> scaled_base_top_offset]);

275 
	`G‘MbPos™iÚ
(
fœ¡_mb_š_¦iû
, 
PicWidthInMbs
, &
iMb_x
, &
iMb_y
);

278  
i
 = 
fœ¡_mb_š_¦iû
; i < 
PicSizeInMbs
;){

280 ià(
cu¼’t_»sidu
[
i
] . 
Residu®P»diùiÚFÏg
){

281 
x_pos
 = 
iMb_x
 << 3;

282 
y_pos
 = 
iMb_y
 << 3;

283 
	`ChromaHÜizÚlF‹r
(&
x16
[
x_pos
], &
xk16
[x_pos], &
xp16
[x_pos], &
yp16
[
y_pos
], 
N®
, &
luma_tmp
[x_pos], 
Cb_š
);

287 
i
 = 
	`Next_MbAdd»ss
(i, 
PicSizeInMbs
,
PicWidthInMbs
, 
ai_tiMbToSliûGroupM­
, &
iMb_x
, &
iMb_y
);

292 
	`G‘MbPos™iÚ
(
fœ¡_mb_š_¦iû
, 
PicWidthInMbs
, &
iMb_x
, &
iMb_y
);

295  
i
 = 
fœ¡_mb_š_¦iû
; i < 
PicSizeInMbs
;){

297 ià(
cu¼’t_»sidu
[
i
] . 
Residu®P»diùiÚFÏg
){

298 
x_pos
 = 
iMb_x
 << 3;

299 
y_pos
 = 
iMb_y
 << 3;

300 
	`ChromaV”tiÿlF‹r
(&
y16
[
y_pos
], &
yk16
[y_pos], &
yp16
[y_pos], 
N®
, &
luma_tmp
[
x_pos
], &
Cb_š
[(
Ïy”_šc
 >> 2è+ x_po + y_po * ((N® -> 
cu¼_Width
 + 32) >> 1)]);

304 
i
 = 
	`Next_MbAdd»ss
(i, 
PicSizeInMbs
,
PicWidthInMbs
, 
ai_tiMbToSliûGroupM­
, &
iMb_x
, &
iMb_y
);

310 
	`G‘MbPos™iÚ
(
fœ¡_mb_š_¦iû
, 
PicWidthInMbs
, &
iMb_x
, &
iMb_y
);

314  
i
 = 
fœ¡_mb_š_¦iû
; i < 
PicSizeInMbs
;){

316 ià(
cu¼’t_»sidu
[
i
] . 
Residu®P»diùiÚFÏg
){

317 
x_pos
 = 
iMb_x
 << 3;

318 
y_pos
 = 
iMb_y
 << 3;

319 
	`ChromaHÜizÚlF‹r
(&
x16
[
x_pos
], &
xk16
[x_pos], &
xp16
[x_pos], &
yp16
[
y_pos
],
N®
, &
luma_tmp
[x_pos], 
Cr_š
);

322 
i
 = 
	`Next_MbAdd»ss
(i, 
PicSizeInMbs
,
PicWidthInMbs
, 
ai_tiMbToSliûGroupM­
, &
iMb_x
, &
iMb_y
);

326 
	`G‘MbPos™iÚ
(
fœ¡_mb_š_¦iû
, 
PicWidthInMbs
, &
iMb_x
, &
iMb_y
);

330  
i
 = 
fœ¡_mb_š_¦iû
; i < 
PicSizeInMbs
;){

332 ià(
cu¼’t_»sidu
[
i
] . 
Residu®P»diùiÚFÏg
){

333 
x_pos
 = 
iMb_x
 << 3;

334 
y_pos
 = 
iMb_y
 << 3;

335 
	`ChromaV”tiÿlF‹r
(&
y16
[
y_pos
], &
yk16
[y_pos], &
yp16
[y_pos], 
N®
, &
luma_tmp
[
x_pos
], &
Cr_š
[(
Ïy”_šc
 >> 2è+ x_po + y_po * ((N® -> 
cu¼_Width
 + 32) >> 1)]);

339 
i
 = 
	`Next_MbAdd»ss
(i, 
PicSizeInMbs
,
PicWidthInMbs
, 
ai_tiMbToSliûGroupM­
, &
iMb_x
, &
iMb_y
);

341 
	}
}

	@lib_svc/upsample_residu.h

36 #iâdeà
UPSAMPLE_RES_H


37 
	#UPSAMPLE_RES_H


	)

40 
	~"ty³.h
"

41 
	~"svc_ty³.h
"

44 
Up§m¶e_»sidu
(cÚ¡ 
Ïy”_šc
, 
fœ¡_mb_š_¦iû
, cÚ¡ 
NAL
 *
N®
,cÚ¡ 
SPS
 *
¥s_id
,

45 cÚ¡ 
RESIDU
 *
cu¼’t_»sidu
, cÚ¡ RESIDU *
ba£_»sidu
, *
x16
, *
y16
,

46 *
xk16
, *
xp16
, *
yk16
, *
yp16
, *
luma_tmp
, *
luma_š
,

47 *
Cb_š
, *
Cr_š
, cÚ¡ *
ai_tiMbToSliûGroupM­
);

49 
up§m¶e_luma_»sidu
Ğ*
luma_š
, *
luma_out
, 
ŒªsfÜm_8x8_size
, cÚ¡ 
NAL
 *
N®
);

50 
up§m¶e_chroma_»sidu
Ğ*
luma_š
, *
luma_out
, cÚ¡ 
NAL
 *
N®
);

51 
»size_»sidu
(cÚ¡ 
SPS
 *
¥s
, 
RESIDU
 *
»sidu
, *
luma_»sidu
, *
Cb_»sidu
, *
Cr_»sidu
,

52 
x_mbP¬tIdx
, 
y_mbP¬tIdx
,
ŒªsfÜm_8x8_size
, cÚ¡ 
ba£_Width
,

53 cÚ¡ 
ba£_Height
,cÚ¡ 
cu¼_Width
,cÚ¡ 
cu¼_Height
, *
cbp
);

61 
__šlše
 
	$upd©e_bl4x4_mode
 ( 
RESIDU
 *
cu¼’t_»sidu
, RESIDU *
ba£_»sidu
, 
x_mbP¬tIdx
, 
y_mbP¬tIdx
, *
ba£_šdex
){

65 
i
;

66 
blk_0
[4];

67 
blk_1
[4];

68 
blk_2
[4];

69 
blk_3
[4];

70 
LumaIdx
 = 
x_mbP¬tIdx
 + 4 * 
y_mbP¬tIdx
;

74  
i
 = 0; i < 4; i++){

75 if((
x_mbP¬tIdx
 + (
ba£_šdex
[
i
] >> 1)) > 3){

76 
blk_0
[
i
] = (-((
ba£_»sidu
[1] . 
blk4x4
 & (1 << (
LumaIdx
 + (
ba£_šdex
[i] >> 1)- 4))) >> (LumaIdx + (base_index[i] >> 1) - 4)));

78 
blk_0
[
i
] = (-((
ba£_»sidu
 -> 
blk4x4
 & (1 << (
LumaIdx
 + (
ba£_šdex
[i] >> 1)))) >> (LumaIdx + (base_index[i] >> 1))));

82  
i
 = 0; i < 4; i++){

83 
deÿl
 = 
LumaIdx
 + (
ba£_šdex
[4 + 
i
] >> 2) + (base_index[i] >> 1);

84 if((
x_mbP¬tIdx
 + (
ba£_šdex
[
i
] >> 1)) > 3){

85 
deÿl
 -= 4;

86 
blk_1
[
i
] = (-((
ba£_»sidu
[1] . 
blk4x4
 & (1 << 
deÿl
)) >> decal));

88 
blk_1
[
i
] = (-((
ba£_»sidu
 -> 
blk4x4
 & (1 << 
deÿl
)) >> decal));

93  
i
 = 0; i < 4; i++){

94 
deÿl
 = 
LumaIdx
 + (
ba£_šdex
[8 + 
i
] >> 2) + (base_index[i] >> 1);

95 if((
x_mbP¬tIdx
 + (
ba£_šdex
[
i
] >> 1)) > 3){

96 
deÿl
 -= 4;

97 
blk_2
[
i
] = (-((
ba£_»sidu
[1] . 
blk4x4
 & (1 << 
deÿl
)) >> decal));

99 
blk_2
[
i
] =(-((
ba£_»sidu
 -> 
blk4x4
 & (1 << 
deÿl
)) >> decal));

103  
i
 = 0; i < 4; i++){

104 
deÿl
 = 
LumaIdx
 + (
ba£_šdex
[12 + 
i
] >> 2) + (base_index[i] >> 1);

105 if((
x_mbP¬tIdx
 + (
ba£_šdex
[
i
] >> 1)) > 3){

106 
deÿl
 -= 4;

107 
blk_3
[
i
] = (-((
ba£_»sidu
[1] . 
blk4x4
 & (1 << 
deÿl
)) >> decal));

109 
blk_3
[
i
] =(-((
ba£_»sidu
 -> 
blk4x4
 & (1 << 
deÿl
)) >> decal));

114 
cu¼’t_»sidu
 -> 
blk4x4
 = (
blk_0
[0] & 0x01è+ (blk_0[1] & 0x02è+ (
blk_1
[0] & 0x10) + (blk_1[1] & 0x20) +

115 (
blk_0
[2] & 0x04è+ (blk_0[3] & 0x08è+ (
blk_1
[2] & 0x40) + (blk_1[3] & 0x80) +

116 (
blk_2
[0] & 0x0100è+ (blk_2[1] & 0x0200è+ (
blk_3
[0] & 0x1000) + (blk_3[1] & 0x2000) +

117 (
blk_2
[2] & 0x0400è+ (blk_2[3] & 0x0800è+ (
blk_3
[2] & 0x4000) + (blk_3[3] & 0x8000);

118 
	}
}

125 
__šlše
 
	$š™_»sidu_luma_b
(
cu¼_width
, 
SÿË
, 
Add
, 
shiá
, 
d–X
, *
x16
, *
k16
, *
p16
){

127 
i
, 
p
, 
i1
;

128 
i
 = 0; i < 
cu¼_width
; i++){

129 
k
 = (è(((
i
*
SÿË
 + 
Add
è>> (
shiá
 - 4)è- 
d–X
);

130 if(
k
 < 0)

131 
k
 = 0;

132 
i1
 = 
k
 >> 4;

133 
k
 -ğ
i1
 * 16;

134 
p
 = ( 
k
 > 7 && (
i1
 + 1è< 
cu¼_width
 ) ? ( i1 + 1 ) : i1;

135 
p
 =… < 0 ? 0 :…;

136 
x16
[
i
] = 
i1
; 
k16
[i] = 
k
; 
p16
[i] = 
p
;

138 
	}
}

	@libview/extract_picture.c

35 
	~"¡dio.h
"

37 
	#WRITE_YUV_


	)

40 #ifdeà
WRITE_YUV


41 
	gO³nFe
 = 0;

42 
FILE
 *
	gpf
;

46 
	#ExŒaùPiùu»_C
 
exŒaù_piùu»


	)

48 #ifdeà
MMX


49 #undeà
exŒaù_piùu»


50 #ifdeà
SSE2


51 
	#ExŒaùPiùu»_SSE2
 
exŒaù_piùu»


	)

53 
	#ExŒaùPiùu»_MMX
 
exŒaù_piùu»


	)

55 #ifdeà
POCKET_PC


56 
	~<mmšŒš.h
>

57 
	~<cmnšŒš.h
>

59 
	~<emmšŒš.h
>

60 
	~<mmšŒš.h
>

64 #ifdeà
WRITE_YUV


65 
	$Wr™eOuutVideo
(
xsize
, 
ysize
, *
img_luma_out
, *
img_Cb_out
, *
img_Cr_out
)

67 if(!
O³nFe
){

68 *
¬gv
[3];

69 
¬gv
[1] = "-out";

70 
¬gv
[2] = "out.yuv";

71 
	`Wr™eYUVIn™
(3, 
¬gv
);

72 
O³nFe
 = 1;

74 
	`Wr™eYUVCrİ
(
xsize
, 
ysize
, 
img_luma_out
, 
img_Cb_out
, 
img_Cr_out
, 
pf
);

75 
	}
}

94 #iâdeà
SSE2


95 #iâdeà
MMX


96 
	$ExŒaùPiùu»_C
(
xsize
, 
ysize
, 
edge
, 
Crİ
, 
img_luma_š
[], 
img_Cb_š
[],

97 
img_Cr_š
[], 
add»ss_pic
, 
img_luma_out
[],

98 
img_Cb_out
[], 
img_Cr_out
[])

102 
i
,
j
;

104 
Right
 = 
Crİ
 & 0xff;

105 
Leá
 = (
Crİ
 >> 8) & 0xff;

106 
BÙtom
 = (
Crİ
 >> 16) & 0xff;

107 
Tİ
 = (
Crİ
 >> 24) & 0xff;

108 
Xsize
 = 
xsize
 + 2 * 
edge
 + 
Right
 + 
Leá
;

110 cÚ¡ 
off£t_L
 = (
Xsize
 * (16 + 
Tİ
è+ 
Leá
 + 
edge
 + 
add»ss_pic
);

111 cÚ¡ 
off£t_C
 = 
Xsize
 * (4 + 
Tİ
 / 4è+ (
Leá
 / 2è+ (
edge
 / 2è+ (
add»ss_pic
 >> 2);

113 *
im_š
 = (*è(&
img_luma_š
[
off£t_L
]);

114 *
im_š_Cb
 = (*è(&
img_Cb_š
[
off£t_C
]);

115 *
im_š_Cr
 = (*è(&
img_Cr_š
[
off£t_C
]);

117 
y_lim™
 = 
ysize
;

118 
x_lim™
 = 
xsize
 >> 2;

119 
¡ride
 = (
Xsize
 - 
Right
 - 
Leá
);

120 
Xsize
 = Xsize >> 2;

122 
i
 = 0; i < 
y_lim™
; i++, 
im_š
 +ğ
Xsize
){

123 *
im_out
 = (*è&
img_luma_out
[
i
 * 
¡ride
];

124 
j
 = 0; j < 
x_lim™
; j++){

125 
im_out
[
j
] = 
im_š
[j];

130 
Xsize
 = Xsize >> 1;

131 
¡ride
 = stride >> 1;

132 
y_lim™
 = y_limit >> 1;

133 
x_lim™
 = (x_limit + 1) >> 1;

136 
i
 = 0; i < 
y_lim™
; i++){

137 *
im_out_Cb
 = (*è&
img_Cb_out
[
i
 * 
¡ride
];

138 *
im_out_Cr
 = (*è&
img_Cr_out
[
i
 * 
¡ride
];

139 
j
 = 0; j < 
x_lim™
; j++){

140 
im_out_Cb
[
j
] = 
im_š_Cb
[
i
 * 
Xsize
 + j];

141 
im_out_Cr
[
j
] = 
im_š_Cr
[
i
 * 
Xsize
 + j];

145 #ifdeà
WRITE_YUV


146 
	`Wr™eOuutVideo
(
xsize
, 
ysize
, 
img_luma_out
, 
img_Cb_out
, 
img_Cr_out
);

148 
	}
}

152 #ifdeà
MMX


154 
	$ExŒaùPiùu»_MMX
(
xsize
, 
ysize
, 
edge
, 
Crİ
, 
img_luma_š
[], 
img_Cb_š
[],

155 
img_Cr_š
[], 
add»ss_pic
, 
img_luma_out
[],

156 
img_Cb_out
[], 
img_Cr_out
[])

160 
i
,
j
;

162 
Right
 = 
Crİ
 & 0xff;

163 
Leá
 = (
Crİ
 >> 8) & 0xff;

164 
BÙtom
 = (
Crİ
 >> 16) & 0xff;

165 
Tİ
 = (
Crİ
 >> 24) & 0xff;

166 
Xsize
 = 
xsize
 + 2 * 
edge
 + 
Right
 + 
Leá
;

168 cÚ¡ 
off£t_L
 = (
Xsize
 * (16 + 
Tİ
è+ 
Leá
 + 
edge
 + 
add»ss_pic
);

169 cÚ¡ 
off£t_C
 = 
Xsize
 * (4 + 
Tİ
 / 4è+ (
Leá
 / 2è+ (
edge
 / 2è+ (
add»ss_pic
 >> 2);

171 
__m64
 *
im_š
 = (__m64 *è(&
img_luma_š
[
off£t_L
]);

172 
__m64
 *
im_š_Cb
 = (__m64 *è(&
img_Cb_š
[
off£t_C
]);

173 
__m64
 *
im_š_Cr
 = (__m64 *è(&
img_Cr_š
[
off£t_C
]);

175 
y_lim™
 = 
ysize
;

176 
x_lim™
 = (
xsize
 + 7) >> 3;

177 
¡ride
 = 
Xsize
 - 
Right
 - 
Leá
;

178 
Xsize
 = Xsize >> 3;

180 
i
 = 0; i < 
y_lim™
; i++, 
im_š
 +ğ
Xsize
){

181 
__m64
 *
im_out
 = (__m64 *è&
img_luma_out
[
i
 * 
¡ride
];

182 
	`memıy
(
im_out
, 
im_š
, 
x_lim™
 * (
__m64
));

186 
Xsize
 = (Xsize + 1) >> 1;

187 
¡ride
 = stride >> 1;

188 
y_lim™
 >>= 1;

189 
x_lim™
 = (x_limit + 1) >> 1;

191 
i
 = 0; i < 
y_lim™
; i++){

192 
__m64
 *
im_out_Cb
 = (__m64 *è&
img_Cb_out
[
i
 * 
¡ride
];

193 
__m64
 *
im_out_Cr
 = (__m64 *è&
img_Cr_out
[
i
 * 
¡ride
];

194 
	`memıy
(
im_out_Cb
, &
im_š_Cb
[
i
 * 
Xsize
], 
x_lim™
 * (
__m64
));

195 
	`memıy
(
im_out_Cr
, &
im_š_Cr
[
i
 * 
Xsize
], 
x_lim™
 * (
__m64
));

198 #ifdeà
WRITE_YUV


199 
	`Wr™eOuutVideo
(
xsize
, 
ysize
, 
img_luma_out
, 
img_Cb_out
, 
img_Cr_out
);

201 #iâdeà
POCKET_PC


202 
	`_mm_em±y
();

204 
	}
}

209 
	$exŒaù_piùu»_´“sm
(*
xsize
, *
ysize
, 
edge
, 
Crİ
, 
img_luma_š
[], 
img_Cb_š
[],

210 
img_Cr_š
[], *
add»ss_pic
, *
di¥Ïy_image
)

212 
XDIM
 = ((*è
di¥Ïy_image
)[0] = *
xsize
;

213 
YDIM
 = ((*è
di¥Ïy_image
)[1] = *
ysize
;

214 *
Y
 = 
di¥Ïy_image
 + 8;

215 *
U
 = 
Y
 + (
XDIM
 + 32è* 
YDIM
;

216 *
V
 = 
U
 + (
XDIM
 + 32è* 
YDIM
/4;

218 
	`exŒaù_piùu»
(
XDIM
,
YDIM
, 
edge
, 
Crİ
, 
img_luma_š
, 
img_Cb_š
, 
img_Cr_š
, 
add»ss_pic
[0], 
Y
,
U
,
V
);

219 
	}
}

223 #ifdeà
SSE2


225 
	$ExŒaùPiùu»_SSE2
(
xsize
, 
ysize
, 
edge
, 
Crİ
, 
img_luma_š
[], 
img_Cb_š
[],

226 
img_Cr_š
[], 
add»ss_pic
, 
img_luma_out
[],

227 
img_Cb_out
[], 
img_Cr_out
[])

231 
i
,
j
;

233 
Right
 = 
Crİ
 & 0xff;

234 
Leá
 = (
Crİ
 >> 8) & 0xff;

235 
BÙtom
 = (
Crİ
 >> 16) & 0xff;

236 
Tİ
 = (
Crİ
 >> 24) & 0xff;

237 
Xsize
 = 
xsize
 + 2 * 
edge
 + 
Right
 + 
Leá
;

239 cÚ¡ 
off£t_L
 = (
Xsize
 * (16 + 
Tİ
è+ 
Leá
 + 
edge
 + 
add»ss_pic
);

240 cÚ¡ 
off£t_C
 = 
Xsize
 * (4 + 
Tİ
 / 4è+ (
Leá
 / 2è+ (
edge
 / 2è+ (
add»ss_pic
 >> 2);

245 cÚ¡ 
y_lim™
 = 
ysize
;

246 cÚ¡ 
x_lim™
 = (
xsize
 + 15) >> 4;

247 
¡ride
 = 
Xsize
 - 
Right
 - 
Leá
;

249 
__m128i
 *
im_š
 = (__m128˜*è(&
img_luma_š
[
off£t_L
]);

250 
__m128i
 *
im_š_Cb
 = (__m128˜*è(&
img_Cb_š
[
off£t_C
]);

251 
__m128i
 *
im_š_Cr
 = (__m128˜*è(&
img_Cr_š
[
off£t_C
]);

253 cÚ¡ 
W2
 = 
Xsize
 >> 5;

256 
Xsize
 = Xsize >> 4;

258 
i
 = 0; i < 
y_lim™
; i++, 
im_š
 +ğ
Xsize
){

259 
__m128i
 *
im_out
 = (__m128˜*è&
img_luma_out
[
i
 * 
¡ride
];

260 
j
 = 0; j < 
x_lim™
; j++){

261 
	`_mm_¡Üeu_si128
(&
im_out
[
j
], 
im_š
[j]);

266 
i
 = 0; i < 
y_lim™
 >> 1; i++, 
im_š_Cb
 +ğ
W2
){

267 
__m128i
 *
im_out_Cb
 = (__m128˜*è&
img_Cb_out
[
i
 * 
W2
];

268 
__m128i
 *
im_out_Cr
 = (__m128˜*è&
img_Cr_out
[
i
 * 
W2
];

269 
j
 = 0; j < 
x_lim™
 >> 1; j++){

270 
	`_mm_¡Üeu_si128
(&
im_out_Cb
[
j
], 
im_š_Cb
[j]);

271 
	`_mm_¡Üeu_si128
(&
im_out_Cr
[
j
], 
im_š_Cr
[
i
 * 
W2
 + j]);

276 #ifdeà
WRITE_YUV


277 
	`Wr™eOuutVideo
(
xsize
, 
ysize
, 
img_luma_out
, 
img_Cb_out
, 
img_Cr_out
);

279 
	}
}

	@/usr/include/SDL/SDL_events.h

28 #iâdeà
_SDL_ev’ts_h


29 
	#_SDL_ev’ts_h


	)

31 
	~"SDL_¡dšc.h
"

32 
	~"SDL_”rÜ.h
"

33 
	~"SDL_aùive.h
"

34 
	~"SDL_keybßrd.h
"

35 
	~"SDL_mou£.h
"

36 
	~"SDL_joy¡ick.h
"

37 
	~"SDL_qu™.h
"

39 
	~"begš_code.h
"

41 #ifdeà
__ılu¥lus


47 
	#SDL_RELEASED
 0

	)

48 
	#SDL_PRESSED
 1

	)

53 
SDL_NOEVENT
 = 0,

54 
SDL_ACTIVEEVENT
,

55 
SDL_KEYDOWN
,

56 
SDL_KEYUP
,

57 
SDL_MOUSEMOTION
,

58 
SDL_MOUSEBUTTONDOWN
,

59 
SDL_MOUSEBUTTONUP
,

60 
SDL_JOYAXISMOTION
,

61 
SDL_JOYBALLMOTION
,

62 
SDL_JOYHATMOTION
,

63 
SDL_JOYBUTTONDOWN
,

64 
SDL_JOYBUTTONUP
,

65 
SDL_QUIT
,

66 
SDL_SYSWMEVENT
,

67 
SDL_EVENT_RESERVEDA
,

68 
SDL_EVENT_RESERVEDB
,

69 
SDL_VIDEORESIZE
,

70 
SDL_VIDEOEXPOSE
,

71 
SDL_EVENT_RESERVED2
,

72 
SDL_EVENT_RESERVED3
,

73 
SDL_EVENT_RESERVED4
,

74 
SDL_EVENT_RESERVED5
,

75 
SDL_EVENT_RESERVED6
,

76 
SDL_EVENT_RESERVED7
,

78 
SDL_USEREVENT
 = 24,

82 
SDL_NUMEVENTS
 = 32

83 } 
	tSDL_Ev’tTy³
;

87 
	#SDL_EVENTMASK
(
X
è(1<<(X))

	)

89 
SDL_ACTIVEEVENTMASK
 = 
SDL_EVENTMASK
(
SDL_ACTIVEEVENT
),

90 
SDL_KEYDOWNMASK
 = 
SDL_EVENTMASK
(
SDL_KEYDOWN
),

91 
SDL_KEYUPMASK
 = 
SDL_EVENTMASK
(
SDL_KEYUP
),

92 
SDL_KEYEVENTMASK
 = 
SDL_EVENTMASK
(
SDL_KEYDOWN
)|

93 
SDL_EVENTMASK
(
SDL_KEYUP
),

94 
SDL_MOUSEMOTIONMASK
 = 
SDL_EVENTMASK
(
SDL_MOUSEMOTION
),

95 
SDL_MOUSEBUTTONDOWNMASK
 = 
SDL_EVENTMASK
(
SDL_MOUSEBUTTONDOWN
),

96 
SDL_MOUSEBUTTONUPMASK
 = 
SDL_EVENTMASK
(
SDL_MOUSEBUTTONUP
),

97 
SDL_MOUSEEVENTMASK
 = 
SDL_EVENTMASK
(
SDL_MOUSEMOTION
)|

98 
SDL_EVENTMASK
(
SDL_MOUSEBUTTONDOWN
)|

99 
SDL_EVENTMASK
(
SDL_MOUSEBUTTONUP
),

100 
SDL_JOYAXISMOTIONMASK
 = 
SDL_EVENTMASK
(
SDL_JOYAXISMOTION
),

101 
SDL_JOYBALLMOTIONMASK
 = 
SDL_EVENTMASK
(
SDL_JOYBALLMOTION
),

102 
SDL_JOYHATMOTIONMASK
 = 
SDL_EVENTMASK
(
SDL_JOYHATMOTION
),

103 
SDL_JOYBUTTONDOWNMASK
 = 
SDL_EVENTMASK
(
SDL_JOYBUTTONDOWN
),

104 
SDL_JOYBUTTONUPMASK
 = 
SDL_EVENTMASK
(
SDL_JOYBUTTONUP
),

105 
SDL_JOYEVENTMASK
 = 
SDL_EVENTMASK
(
SDL_JOYAXISMOTION
)|

106 
SDL_EVENTMASK
(
SDL_JOYBALLMOTION
)|

107 
SDL_EVENTMASK
(
SDL_JOYHATMOTION
)|

108 
SDL_EVENTMASK
(
SDL_JOYBUTTONDOWN
)|

109 
SDL_EVENTMASK
(
SDL_JOYBUTTONUP
),

110 
SDL_VIDEORESIZEMASK
 = 
SDL_EVENTMASK
(
SDL_VIDEORESIZE
),

111 
SDL_VIDEOEXPOSEMASK
 = 
SDL_EVENTMASK
(
SDL_VIDEOEXPOSE
),

112 
SDL_QUITMASK
 = 
SDL_EVENTMASK
(
SDL_QUIT
),

113 
SDL_SYSWMEVENTMASK
 = 
SDL_EVENTMASK
(
SDL_SYSWMEVENT
)

114 } 
	tSDL_Ev’tMask
 ;

115 
	#SDL_ALLEVENTS
 0xFFFFFFFF

	)

119 
	sSDL_AùiveEv’t
 {

120 
Ušt8
 
ty³
;

121 
Ušt8
 
gaš
;

122 
Ušt8
 
¡©e
;

123 } 
	tSDL_AùiveEv’t
;

126 
	sSDL_KeybßrdEv’t
 {

127 
Ušt8
 
ty³
;

128 
Ušt8
 
which
;

129 
Ušt8
 
¡©e
;

130 
SDL_keysym
 
keysym
;

131 } 
	tSDL_KeybßrdEv’t
;

134 
	sSDL_Mou£MÙiÚEv’t
 {

135 
Ušt8
 
ty³
;

136 
Ušt8
 
which
;

137 
Ušt8
 
¡©e
;

138 
Ušt16
 
x
, 
y
;

139 
Sšt16
 
x»l
;

140 
Sšt16
 
y»l
;

141 } 
	tSDL_Mou£MÙiÚEv’t
;

144 
	sSDL_Mou£Bu‰ÚEv’t
 {

145 
Ušt8
 
ty³
;

146 
Ušt8
 
which
;

147 
Ušt8
 
bu‰Ú
;

148 
Ušt8
 
¡©e
;

149 
Ušt16
 
x
, 
y
;

150 } 
	tSDL_Mou£Bu‰ÚEv’t
;

153 
	sSDL_JoyAxisEv’t
 {

154 
Ušt8
 
ty³
;

155 
Ušt8
 
which
;

156 
Ušt8
 
axis
;

157 
Sšt16
 
v®ue
;

158 } 
	tSDL_JoyAxisEv’t
;

161 
	sSDL_JoyB®lEv’t
 {

162 
Ušt8
 
ty³
;

163 
Ušt8
 
which
;

164 
Ušt8
 
b®l
;

165 
Sšt16
 
x»l
;

166 
Sšt16
 
y»l
;

167 } 
	tSDL_JoyB®lEv’t
;

170 
	sSDL_JoyH©Ev’t
 {

171 
Ušt8
 
ty³
;

172 
Ušt8
 
which
;

173 
Ušt8
 
h©
;

174 
Ušt8
 
v®ue
;

180 } 
	tSDL_JoyH©Ev’t
;

183 
	sSDL_JoyBu‰ÚEv’t
 {

184 
Ušt8
 
ty³
;

185 
Ušt8
 
which
;

186 
Ušt8
 
bu‰Ú
;

187 
Ušt8
 
¡©e
;

188 } 
	tSDL_JoyBu‰ÚEv’t
;

194 
	sSDL_ResizeEv’t
 {

195 
Ušt8
 
ty³
;

196 
w
;

197 
h
;

198 } 
	tSDL_ResizeEv’t
;

201 
	sSDL_Expo£Ev’t
 {

202 
Ušt8
 
ty³
;

203 } 
	tSDL_Expo£Ev’t
;

206 
	sSDL_Qu™Ev’t
 {

207 
Ušt8
 
ty³
;

208 } 
	tSDL_Qu™Ev’t
;

211 
	sSDL_U£rEv’t
 {

212 
Ušt8
 
ty³
;

213 
code
;

214 *
d©a1
;

215 *
d©a2
;

216 } 
	tSDL_U£rEv’t
;

219 
SDL_SysWMmsg
;

220 
SDL_SysWMmsg
 
	tSDL_SysWMmsg
;

221 
	sSDL_SysWMEv’t
 {

222 
Ušt8
 
ty³
;

223 
SDL_SysWMmsg
 *
msg
;

224 } 
	tSDL_SysWMEv’t
;

227 
	uSDL_Ev’t
 {

228 
Ušt8
 
ty³
;

229 
SDL_AùiveEv’t
 
aùive
;

230 
SDL_KeybßrdEv’t
 
key
;

231 
SDL_Mou£MÙiÚEv’t
 
mÙiÚ
;

232 
SDL_Mou£Bu‰ÚEv’t
 
bu‰Ú
;

233 
SDL_JoyAxisEv’t
 
jaxis
;

234 
SDL_JoyB®lEv’t
 
jb®l
;

235 
SDL_JoyH©Ev’t
 
jh©
;

236 
SDL_JoyBu‰ÚEv’t
 
jbu‰Ú
;

237 
SDL_ResizeEv’t
 
»size
;

238 
SDL_Expo£Ev’t
 
expo£
;

239 
SDL_Qu™Ev’t
 
qu™
;

240 
SDL_U£rEv’t
 
u£r
;

241 
SDL_SysWMEv’t
 
syswm
;

242 } 
	tSDL_Ev’t
;

251 
DECLSPEC
 
SDLCALL
 
SDL_PumpEv’ts
();

254 
	gSDL_ADDEVENT
,

255 
	gSDL_PEEKEVENT
,

256 
	gSDL_GETEVENT


257 } 
	tSDL_ev’ùiÚ
;

277 
DECLSPEC
 
SDLCALL
 
SDL_P“pEv’ts
(
SDL_Ev’t
 *
ev’ts
, 
numev’ts
,

278 
SDL_ev’ùiÚ
 
aùiÚ
, 
Ušt32
 
mask
);

284 
DECLSPEC
 
SDLCALL
 
SDL_PŞlEv’t
(
SDL_Ev’t
 *
ev’t
);

290 
DECLSPEC
 
SDLCALL
 
SDL_Wa™Ev’t
(
SDL_Ev’t
 *
ev’t
);

296 
DECLSPEC
 
SDLCALL
 
SDL_PushEv’t
(
SDL_Ev’t
 *
ev’t
);

300 (
SDLCALL
 *
	tSDL_Ev’tF‹r
)(cÚ¡ 
	tSDL_Ev’t
 *
	tev’t
);

323 
DECLSPEC
 
SDLCALL
 
SDL_S‘Ev’tF‹r
(
SDL_Ev’tF‹r
 
f‹r
);

329 
DECLSPEC
 
SDL_Ev’tF‹r
 
SDLCALL
 
SDL_G‘Ev’tF‹r
();

334 
	#SDL_QUERY
 -1

	)

335 
	#SDL_IGNORE
 0

	)

336 
	#SDL_DISABLE
 0

	)

337 
	#SDL_ENABLE
 1

	)

348 
DECLSPEC
 
Ušt8
 
SDLCALL
 
SDL_Ev’tS‹
(Ušt8 
ty³
, 
¡©e
);

351 #ifdeà
__ılu¥lus


354 
	~"şo£_code.h
"

	@/usr/include/math.h

25 #iâdef 
_MATH_H


26 
	#_MATH_H
 1

	)

28 
	~<ã©u»s.h
>

30 
	g__BEGIN_DECLS


34 
	~<b™s/huge_v®.h
>

35 #ifdeà
__USE_ISOC99


36 
	~<b™s/huge_v®f.h
>

37 
	~<b™s/huge_v®l.h
>

40 
	~<b™s/šf.h
>

43 
	~<b™s/Çn.h
>

47 
	~<b™s/m©hdef.h
>

54 
	#__MATHCALL
(
funùiÚ
,
suffix
, 
¬gs
) \

55 
	`__MATHDECL
 (
_MdoubË_
,
funùiÚ
,
suffix
, 
¬gs
)

	)

56 
	#__MATHDECL
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
) \

57 
	`__MATHDECL_1
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
); \

58 
	`__MATHDECL_1
(
ty³
, 
	`__CONCAT
(
__
,
funùiÚ
),
suffix
, 
¬gs
)

	)

59 
	#__MATHCALLX
(
funùiÚ
,
suffix
, 
¬gs
, 
©Œib
) \

60 
	`__MATHDECLX
 (
_MdoubË_
,
funùiÚ
,
suffix
, 
¬gs
, 
©Œib
)

	)

61 
	#__MATHDECLX
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
, 
©Œib
) \

62 
	`__MATHDECL_1
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
è
	`__©Œibu‹__
 (
©Œib
); \

63 
	`__MATHDECL_1
(
ty³
, 
	`__CONCAT
(
__
,
funùiÚ
),
suffix
, 
¬gs
è
	`__©Œibu‹__
 (
©Œib
)

	)

64 
	#__MATHDECL_1
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
) \

65 
ty³
 
	`__MATH_PRECNAME
(
funùiÚ
,
suffix
è
¬gs
 
__THROW


	)

67 
	#_MdoubË_
 

	)

68 
	#__MATH_PRECNAME
(
Çme
,
r
è
	`__CONCAT
Òame,r)

	)

69 
	#_MdoubË_BEGIN_NAMESPACE
 
__BEGIN_NAMESPACE_STD


	)

70 
	#_MdoubË_END_NAMESPACE
 
__END_NAMESPACE_STD


	)

71 
	~<b™s/m©hÿÎs.h
>

72 #undeà
_MdoubË_


73 #undeà
_MdoubË_BEGIN_NAMESPACE


74 #undeà
_MdoubË_END_NAMESPACE


75 #undeà
__MATH_PRECNAME


77 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_ISOC99


83 #iâdeà
_Mæßt_


84 
	#_Mæßt_
 

	)

86 
	#_MdoubË_
 
_Mæßt_


	)

87 #ifdeà
__STDC__


88 
	#__MATH_PRECNAME
(
Çme
,
r
èÇme##
f
##
	)
r

90 
	#__MATH_PRECNAME
(
Çme
,
r
èÇm
f
 
	)
r

92 
	#_MdoubË_BEGIN_NAMESPACE
 
__BEGIN_NAMESPACE_C99


	)

93 
	#_MdoubË_END_NAMESPACE
 
__END_NAMESPACE_C99


	)

94 
	~<b™s/m©hÿÎs.h
>

95 #undeà
_MdoubË_


96 #undeà
_MdoubË_BEGIN_NAMESPACE


97 #undeà
_MdoubË_END_NAMESPACE


98 #undeà
__MATH_PRECNAME


100 #ià(
__STDC__
 - 0 || 
__GNUC__
 - 0) \

101 && (!(
defšed
 
__NO_LONG_DOUBLE_MATH
 && defšed 
_LIBC
) \

102 || 
defšed
 
__LDBL_COMPAT
)

103 #ifdeà
__LDBL_COMPAT


105 #ifdeà
__USE_ISOC99


106 
	$__Ædbl_Ãx‰ow¬df
 (
__x
, 
__y
)

107 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

108 #ifdeà
__REDIRECT_NTH


109 
	`__REDIRECT_NTH
 (
Ãx‰ow¬df
, (
__x
, 
__y
),

110 
__Ædbl_Ãx‰ow¬df
)

111 
	`__©Œibu‹__
 ((
__cÚ¡__
));

112 
	`__REDIRECT_NTH
 (
Ãx‰ow¬d
, (
__x
, 
__y
),

113 
Ãxá”
è
	`__©Œibu‹__
 ((
__cÚ¡__
));

114 
	`__REDIRECT_NTH
 (
Ãx‰ow¬dl
,

115 (
__x
, 
__y
),

116 
Ãxá”
è
	`__©Œibu‹__
 ((
__cÚ¡__
));

121 #ià
defšed
 
__LDBL_COMPAT
 || defšed 
__NO_LONG_DOUBLE_MATH


123 #undeà
__MATHDECL_1


124 
	#__MATHDECL_2
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
, 
®Ÿs
) \

125 
ty³
 
	`__REDIRECT_NTH
(
	`__MATH_PRECNAME
(
funùiÚ
,
suffix
), \

126 
¬gs
, 
®Ÿs
)

	)

127 
	#__MATHDECL_1
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
) \

128 
	`__MATHDECL_2
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
, 
	`__CONCAT
(funùiÚ,suffix))

	)

134 #iâdeà
_MlÚg_doubË_


135 
	#_MlÚg_doubË_
 

	)

137 
	#_MdoubË_
 
_MlÚg_doubË_


	)

138 #ifdeà
__STDC__


139 
	#__MATH_PRECNAME
(
Çme
,
r
èÇme##
l
##
	)
r

141 
	#__MATH_PRECNAME
(
Çme
,
r
èÇm
l
 
	)
r

143 
	#_MdoubË_BEGIN_NAMESPACE
 
__BEGIN_NAMESPACE_C99


	)

144 
	#_MdoubË_END_NAMESPACE
 
__END_NAMESPACE_C99


	)

145 
	#__MATH_DECLARE_LDOUBLE
 1

	)

146 
	~<b™s/m©hÿÎs.h
>

147 #undeà
_MdoubË_


148 #undeà
_MdoubË_BEGIN_NAMESPACE


149 #undeà
_MdoubË_END_NAMESPACE


150 #undeà
__MATH_PRECNAME


155 #undeà
__MATHDECL_1


156 #undeà
__MATHDECL


157 #undeà
__MATHCALL


160 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


162 
signgam
;

167 #ifdeà
__USE_ISOC99


205 
FP_NAN
,

206 
	#FP_NAN
 
FP_NAN


	)

207 
FP_INFINITE
,

208 
	#FP_INFINITE
 
FP_INFINITE


	)

209 
FP_ZERO
,

210 
	#FP_ZERO
 
FP_ZERO


	)

211 
FP_SUBNORMAL
,

212 
	#FP_SUBNORMAL
 
FP_SUBNORMAL


	)

213 
FP_NORMAL


214 
	#FP_NORMAL
 
FP_NORMAL


	)

218 #ifdeà
__NO_LONG_DOUBLE_MATH


219 
	#åşassify
(
x
) \

220 ( (
x
è=ğ (è? 
	`__åşassifyf
 (xè: 
	`__åşassify
 (x))

	)

222 
	#åşassify
(
x
) \

223 ( (
x
) ==  () \

224 ? 
	`__åşassifyf
 (
x
) \

225 :  (
x
) ==  () \

226 ? 
	`__åşassify
 (
x
è: 
	`__åşassifyl
 (x))

	)

230 #ifdeà
__NO_LONG_DOUBLE_MATH


231 
	#signb™
(
x
) \

232 ( (
x
è=ğ (è? 
	`__signb™f
 (xè: 
	`__signb™
 (x))

	)

234 
	#signb™
(
x
) \

235 ( (
x
) ==  () \

236 ? 
	`__signb™f
 (
x
) \

237 :  (
x
) ==  () \

238 ? 
	`__signb™
 (
x
è: 
	`__signb™l
 (x))

	)

242 #ifdeà
__NO_LONG_DOUBLE_MATH


243 
	#isfš™e
(
x
) \

244 ( (
x
è=ğ (è? 
	`__fš™ef
 (xè: 
	`__fš™e
 (x))

	)

246 
	#isfš™e
(
x
) \

247 ( (
x
) ==  () \

248 ? 
	`__fš™ef
 (
x
) \

249 :  (
x
) ==  () \

250 ? 
	`__fš™e
 (
x
è: 
	`__fš™–
 (x))

	)

254 
	#i¢Üm®
(
x
è(
	`åşassify
 (xè=ğ
FP_NORMAL
)

	)

258 #ifdeà
__NO_LONG_DOUBLE_MATH


259 
	#i¢ª
(
x
) \

260 ( (
x
è=ğ (è? 
	`__i¢ªf
 (xè: 
	`__i¢ª
 (x))

	)

262 
	#i¢ª
(
x
) \

263 ( (
x
) ==  () \

264 ? 
	`__i¢ªf
 (
x
) \

265 :  (
x
) ==  () \

266 ? 
	`__i¢ª
 (
x
è: 
	`__i¢ªl
 (x))

	)

270 #ifdeà
__NO_LONG_DOUBLE_MATH


271 
	#isšf
(
x
) \

272 ( (
x
è=ğ (è? 
	`__isšff
 (xè: 
	`__isšf
 (x))

	)

274 
	#isšf
(
x
) \

275 ( (
x
) ==  () \

276 ? 
	`__isšff
 (
x
) \

277 :  (
x
) ==  () \

278 ? 
	`__isšf
 (
x
è: 
	`__isšæ
 (x))

	)

282 
	#MATH_ERRNO
 1

	)

283 
	#MATH_ERREXCEPT
 2

	)

288 #iâdeà
__FAST_MATH__


289 
	#m©h_”rhªdlšg
 (
MATH_ERRNO
 | 
MATH_ERREXCEPT
)

	)

294 #ifdef 
__USE_MISC


298 
_IEEE_
 = -1,

299 
_SVID_
,

300 
_XOPEN_
,

301 
_POSIX_
,

302 
_ISOC_


303 } 
	t_LIB_VERSION_TYPE
;

308 
_LIB_VERSION_TYPE
 
_LIB_VERSION
;

312 #ifdeà
__USE_SVID


318 #ifdeà
__ılu¥lus


319 
__exû±iÚ


321 
exû±iÚ


324 
ty³
;

325 *
Çme
;

326 
¬g1
;

327 
¬g2
;

328 
»tv®
;

329 
	}
};

331 #ifdeà
__ılu¥lus


332 
	$m©h”r
 (
__exû±iÚ
 *
__exc
è
	`throw
 ();

334 
	`m©h”r
 (
exû±iÚ
 *
__exc
);

337 
	#X_TLOSS
 1.41484755040568800000e+16

	)

340 
	#DOMAIN
 1

	)

341 
	#SING
 2

	)

342 
	#OVERFLOW
 3

	)

343 
	#UNDERFLOW
 4

	)

344 
	#TLOSS
 5

	)

345 
	#PLOSS
 6

	)

348 
	#HUGE
 3.40282347e+38F

	)

352 #ifdeà
__USE_XOPEN


354 
	#MAXFLOAT
 3.40282347e+38F

	)

361 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN


362 
	#M_E
 2.7182818284590452354

	)

363 
	#M_LOG2E
 1.4426950408889634074

	)

364 
	#M_LOG10E
 0.43429448190325182765

	)

365 
	#M_LN2
 0.69314718055994530942

	)

366 
	#M_LN10
 2.30258509299404568402

	)

367 
	#M_PI
 3.14159265358979323846

	)

368 
	#M_PI_2
 1.57079632679489661923

	)

369 
	#M_PI_4
 0.78539816339744830962

	)

370 
	#M_1_PI
 0.31830988618379067154

	)

371 
	#M_2_PI
 0.63661977236758134308

	)

372 
	#M_2_SQRTPI
 1.12837916709551257390

	)

373 
	#M_SQRT2
 1.41421356237309504880

	)

374 
	#M_SQRT1_2
 0.70710678118654752440

	)

380 #ifdeà
__USE_GNU


381 
	#M_El
 2.7182818284590452353602874713526625L

	)

382 
	#M_LOG2El
 1.4426950408889634073599246810018921L

	)

383 
	#M_LOG10El
 0.4342944819032518276511289189166051L

	)

384 
	#M_LN2l
 0.6931471805599453094172321214581766L

	)

385 
	#M_LN10l
 2.3025850929940456840179914546843642L

	)

386 
	#M_PIl
 3.1415926535897932384626433832795029L

	)

387 
	#M_PI_2l
 1.5707963267948966192313216916397514L

	)

388 
	#M_PI_4l
 0.7853981633974483096156608458198757L

	)

389 
	#M_1_PIl
 0.3183098861837906715377675267450287L

	)

390 
	#M_2_PIl
 0.6366197723675813430755350534900574L

	)

391 
	#M_2_SQRTPIl
 1.1283791670955125738961589031215452L

	)

392 
	#M_SQRT2l
 1.4142135623730950488016887242096981L

	)

393 
	#M_SQRT1_2l
 0.7071067811865475244008443621048490L

	)

400 #ià
defšed
 
__STRICT_ANSI__
 && !defšed 
__NO_MATH_INLINES


401 
	#__NO_MATH_INLINES
 1

	)

404 #ià
defšed
 
__USE_ISOC99
 && 
	`__GNUC_PREREQ
(2,97)

411 
	#isg»©”
(
x
, 
y
è
	`__butš_isg»©”
(x, y)

	)

412 
	#isg»©”equ®
(
x
, 
y
è
	`__butš_isg»©”equ®
(x, y)

	)

413 
	#i¦ess
(
x
, 
y
è
	`__butš_i¦ess
(x, y)

	)

414 
	#i¦es£qu®
(
x
, 
y
è
	`__butš_i¦es£qu®
(x, y)

	)

415 
	#i¦essg»©”
(
x
, 
y
è
	`__butš_i¦essg»©”
(x, y)

	)

416 
	#isunÜd”ed
(
u
, 
v
è
	`__butš_isunÜd”ed
(u, v)

	)

420 #ifdeà
__USE_EXTERN_INLINES


421 
	~<b™s/m©hšlše.h
>

426 #ià
defšed
 
__FINITE_MATH_ONLY__
 && __FINITE_MATH_ONLY__ > 0

427 
	~<b™s/m©h-fš™e.h
>

430 #ifdeà
__USE_ISOC99


434 #iâdeà
isg»©”


435 
	#isg»©”
(
x
, 
y
) \

436 (
__ex‹nsiÚ__
 \

437 ({ 
	`__ty³of__
(
x
è
__x
 = (x); __ty³of__(
y
è
__y
 = (y); \

438 !
	`isunÜd”ed
 (
__x
, 
__y
è&& __x > __y; 
	}
}))

	)

442 #iâdeà
isg»©”equ®


443 
	#isg»©”equ®
(
x
, 
y
) \

444 (
__ex‹nsiÚ__
 \

445 ({ 
	`__ty³of__
(
x
è
__x
 = (x); __ty³of__(
y
è
__y
 = (y); \

446 !
	`isunÜd”ed
 (
__x
, 
__y
è&& __x >ğ__y; }))

	)

450 #iâdeà
i¦ess


451 
	#i¦ess
(
x
, 
y
) \

452 (
__ex‹nsiÚ__
 \

453 ({ 
	`__ty³of__
(
x
è
__x
 = (x); __ty³of__(
y
è
__y
 = (y); \

454 !
	`isunÜd”ed
 (
__x
, 
__y
è&& __x < __y; }))

	)

458 #iâdeà
i¦es£qu®


459 
	#i¦es£qu®
(
x
, 
y
) \

460 (
__ex‹nsiÚ__
 \

461 ({ 
	`__ty³of__
(
x
è
__x
 = (x); __ty³of__(
y
è
__y
 = (y); \

462 !
	`isunÜd”ed
 (
__x
, 
__y
è&& __x <ğ__y; }))

	)

466 #iâdeà
i¦essg»©”


467 
	#i¦essg»©”
(
x
, 
y
) \

468 (
__ex‹nsiÚ__
 \

469 ({ 
	`__ty³of__
(
x
è
__x
 = (x); __ty³of__(
y
è
__y
 = (y); \

470 !
	`isunÜd”ed
 (
__x
, 
__y
è&& (__x < __y || __y < __x); }))

	)

474 #iâdeà
isunÜd”ed


475 
	#isunÜd”ed
(
u
, 
v
) \

476 (
__ex‹nsiÚ__
 \

477 ({ 
	`__ty³of__
(
u
è
__u
 = (u); __ty³of__(
v
è
__v
 = (v); \

478 
	`åşassify
 (
__u
è=ğ
FP_NAN
 || fpşassify (
__v
è=ğFP_NAN; }))

	)

483 
	g__END_DECLS


	@/usr/include/stdio.h

24 #iâdeà
_STDIO_H


26 #ià!
defšed
 
__Ãed_FILE
 && !defšed 
__Ãed___FILE


27 
	#_STDIO_H
 1

	)

28 
	~<ã©u»s.h
>

30 
	g__BEGIN_DECLS


32 
	#__Ãed_size_t


	)

33 
	#__Ãed_NULL


	)

34 
	~<¡ddef.h
>

36 
	~<b™s/ty³s.h
>

37 
	#__Ãed_FILE


	)

38 
	#__Ãed___FILE


	)

42 #ià!
defšed
 
__FILE_defšed
 && defšed 
__Ãed_FILE


45 
	g_IO_FILE
;

47 
__BEGIN_NAMESPACE_STD


49 
_IO_FILE
 
	tFILE
;

50 
	g__END_NAMESPACE_STD


51 #ià
defšed
 
__USE_LARGEFILE64
 || defšed 
__USE_SVID
 || defšed 
__USE_POSIX
 \

52 || 
defšed
 
	g__USE_BSD
 || defšed 
	g__USE_ISOC99
 || defšed 
	g__USE_XOPEN
 \

53 || 
defšed
 
__USE_POSIX2


54 
	$__USING_NAMESPACE_STD
(
FILE
)

57 
	#__FILE_defšed
 1

	)

59 #undeà
__Ãed_FILE


62 #ià!
defšed
 
____FILE_defšed
 && defšed 
__Ãed___FILE


65 
_IO_FILE
 
	t__FILE
;

67 
	#____FILE_defšed
 1

	)

69 #undeà
__Ãed___FILE


72 #ifdef 
_STDIO_H


73 
	#_STDIO_USES_IOSTREAM


	)

75 
	~<libio.h
>

77 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K8


78 #ifdeà
__GNUC__


79 #iâdeà
_VA_LIST_DEFINED


80 
_G_va_li¡
 
	tva_li¡
;

81 
	#_VA_LIST_DEFINED


	)

84 
	~<¡d¬g.h
>

88 #ifdeà
__USE_XOPEN2K8


89 #iâdeà
__off_t_defšed


90 #iâdeà
__USE_FILE_OFFSET64


91 
__off_t
 
	toff_t
;

93 
__off64_t
 
	toff_t
;

95 
	#__off_t_defšed


	)

97 #ià
defšed
 
__USE_LARGEFILE64
 && !defšed 
__off64_t_defšed


98 
__off64_t
 
	toff64_t
;

99 
	#__off64_t_defšed


	)

102 #iâdeà
__ssize_t_defšed


103 
__ssize_t
 
	tssize_t
;

104 
	#__ssize_t_defšed


	)

109 
__BEGIN_NAMESPACE_STD


110 #iâdeà
__USE_FILE_OFFSET64


111 
_G_åos_t
 
	tåos_t
;

113 
_G_åos64_t
 
	tåos_t
;

115 
__END_NAMESPACE_STD


116 #ifdeà
__USE_LARGEFILE64


117 
_G_åos64_t
 
	tåos64_t
;

121 
	#_IOFBF
 0

	)

122 
	#_IOLBF
 1

	)

123 
	#_IONBF
 2

	)

127 #iâdeà
BUFSIZ


128 
	#BUFSIZ
 
_IO_BUFSIZ


	)

134 #iâdeà
EOF


135 
	#EOF
 (-1)

	)

141 
	#SEEK_SET
 0

	)

142 
	#SEEK_CUR
 1

	)

143 
	#SEEK_END
 2

	)

144 #ifdeà
__USE_GNU


145 
	#SEEK_DATA
 3

	)

146 
	#SEEK_HOLE
 4

	)

150 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN


152 
	#P_tmpdœ
 "/tmp"

	)

165 
	~<b™s/¡dio_lim.h
>

169 
_IO_FILE
 *
¡dš
;

170 
_IO_FILE
 *
¡dout
;

171 
_IO_FILE
 *
¡d”r
;

173 
	#¡dš
 
¡dš


	)

174 
	#¡dout
 
¡dout


	)

175 
	#¡d”r
 
¡d”r


	)

177 
__BEGIN_NAMESPACE_STD


179 
	$»move
 (
__cÚ¡
 *
__f’ame
è
__THROW
;

181 
	$»Çme
 (
__cÚ¡
 *
__Şd
, __cÚ¡ *
__Ãw
è
__THROW
;

182 
__END_NAMESPACE_STD


184 #ifdeà
__USE_ATFILE


186 
	$»Çm—t
 (
__Şdfd
, 
__cÚ¡
 *
__Şd
, 
__Ãwfd
,

187 
__cÚ¡
 *
__Ãw
è
__THROW
;

190 
__BEGIN_NAMESPACE_STD


195 #iâdeà
__USE_FILE_OFFSET64


196 
FILE
 *
	$tmpfe
 (è
__wur
;

198 #ifdeà
__REDIRECT


199 
FILE
 *
	`__REDIRECT
 (
tmpfe
, (), 
tmpfe64
è
__wur
;

201 
	#tmpfe
 
tmpfe64


	)

205 #ifdeà
__USE_LARGEFILE64


206 
FILE
 *
	$tmpfe64
 (è
__wur
;

210 *
	$tm²am
 (*
__s
è
__THROW
 
__wur
;

211 
__END_NAMESPACE_STD


213 #ifdeà
__USE_MISC


216 *
	$tm²am_r
 (*
__s
è
__THROW
 
__wur
;

220 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN


228 *
	$‹m²am
 (
__cÚ¡
 *
__dœ
, __cÚ¡ *
__pfx
)

229 
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

233 
__BEGIN_NAMESPACE_STD


238 
	`fşo£
 (
FILE
 *
__¡»am
);

243 
	`fæush
 (
FILE
 *
__¡»am
);

244 
__END_NAMESPACE_STD


246 #ifdeà
__USE_MISC


253 
	`fæush_uÆocked
 (
FILE
 *
__¡»am
);

256 #ifdeà
__USE_GNU


263 
	`fşo£®l
 ();

267 
__BEGIN_NAMESPACE_STD


268 #iâdeà
__USE_FILE_OFFSET64


273 
FILE
 *
	$fİ’
 (
__cÚ¡
 *
__»¡riù
 
__f’ame
,

274 
__cÚ¡
 *
__»¡riù
 
__modes
è
__wur
;

279 
FILE
 *
	$äeİ’
 (
__cÚ¡
 *
__»¡riù
 
__f’ame
,

280 
__cÚ¡
 *
__»¡riù
 
__modes
,

281 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

283 #ifdeà
__REDIRECT


284 
FILE
 *
	`__REDIRECT
 (
fİ’
, (
__cÚ¡
 *
__»¡riù
 
__f’ame
,

285 
__cÚ¡
 *
__»¡riù
 
__modes
), 
fİ’64
)

286 
__wur
;

287 
FILE
 *
	`__REDIRECT
 (
äeİ’
, (
__cÚ¡
 *
__»¡riù
 
__f’ame
,

288 
__cÚ¡
 *
__»¡riù
 
__modes
,

289 
FILE
 *
__»¡riù
 
__¡»am
), 
äeİ’64
)

290 
__wur
;

292 
	#fİ’
 
fİ’64


	)

293 
	#äeİ’
 
äeİ’64


	)

296 
__END_NAMESPACE_STD


297 #ifdeà
__USE_LARGEFILE64


298 
FILE
 *
	$fİ’64
 (
__cÚ¡
 *
__»¡riù
 
__f’ame
,

299 
__cÚ¡
 *
__»¡riù
 
__modes
è
__wur
;

300 
FILE
 *
	$äeİ’64
 (
__cÚ¡
 *
__»¡riù
 
__f’ame
,

301 
__cÚ¡
 *
__»¡riù
 
__modes
,

302 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

305 #ifdef 
__USE_POSIX


307 
FILE
 *
	$fdİ’
 (
__fd
, 
__cÚ¡
 *
__modes
è
__THROW
 
__wur
;

310 #ifdef 
__USE_GNU


313 
FILE
 *
	$fİ’cook›
 (*
__»¡riù
 
__magic_cook›
,

314 
__cÚ¡
 *
__»¡riù
 
__modes
,

315 
_IO_cook›_io_funùiÚs_t
 
__io_funcs
è
__THROW
 
__wur
;

318 #ifdeà
__USE_XOPEN2K8


320 
FILE
 *
	$fmemİ’
 (*
__s
, 
size_t
 
__Ën
, 
__cÚ¡
 *
__modes
)

321 
__THROW
 
__wur
;

326 
FILE
 *
	$İ’_mem¡»am
 (**
__buæoc
, 
size_t
 *
__siz–oc
è
__THROW
 
__wur
;

330 
__BEGIN_NAMESPACE_STD


333 
	$£tbuf
 (
FILE
 *
__»¡riù
 
__¡»am
, *__»¡riù 
__buf
è
__THROW
;

337 
	$£tvbuf
 (
FILE
 *
__»¡riù
 
__¡»am
, *__»¡riù 
__buf
,

338 
__modes
, 
size_t
 
__n
è
__THROW
;

339 
__END_NAMESPACE_STD


341 #ifdef 
__USE_BSD


344 
	$£tbufãr
 (
FILE
 *
__»¡riù
 
__¡»am
, *__»¡riù 
__buf
,

345 
size_t
 
__size
è
__THROW
;

348 
	$£šebuf
 (
FILE
 *
__¡»am
è
__THROW
;

352 
__BEGIN_NAMESPACE_STD


357 
	`årštf
 (
FILE
 *
__»¡riù
 
__¡»am
,

358 
__cÚ¡
 *
__»¡riù
 
__fÜm©
, ...);

363 
	`´štf
 (
__cÚ¡
 *
__»¡riù
 
__fÜm©
, ...);

365 
	$¥rštf
 (*
__»¡riù
 
__s
,

366 
__cÚ¡
 *
__»¡riù
 
__fÜm©
, ...è
__THROWNL
;

372 
	`vårštf
 (
FILE
 *
__»¡riù
 
__s
, 
__cÚ¡
 *__»¡riù 
__fÜm©
,

373 
_G_va_li¡
 
__¬g
);

378 
	`v´štf
 (
__cÚ¡
 *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__¬g
);

380 
	$v¥rštf
 (*
__»¡riù
 
__s
, 
__cÚ¡
 *__»¡riù 
__fÜm©
,

381 
_G_va_li¡
 
__¬g
è
__THROWNL
;

382 
__END_NAMESPACE_STD


384 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_ISOC99
 || defšed 
__USE_UNIX98


385 
__BEGIN_NAMESPACE_C99


387 
	$¢´štf
 (*
__»¡riù
 
__s
, 
size_t
 
__maxËn
,

388 
__cÚ¡
 *
__»¡riù
 
__fÜm©
, ...)

389 
__THROWNL
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 3, 4)));

391 
	$v¢´štf
 (*
__»¡riù
 
__s
, 
size_t
 
__maxËn
,

392 
__cÚ¡
 *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__¬g
)

393 
__THROWNL
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 3, 0)));

394 
__END_NAMESPACE_C99


397 #ifdeà
__USE_GNU


400 
	$va¥rštf
 (**
__»¡riù
 
__±r
, 
__cÚ¡
 *__»¡riù 
__f
,

401 
_G_va_li¡
 
__¬g
)

402 
__THROWNL
 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__´štf__
, 2, 0))è
__wur
;

403 
	$__a¥rštf
 (**
__»¡riù
 
__±r
,

404 
__cÚ¡
 *
__»¡riù
 
__fmt
, ...)

405 
__THROWNL
 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__´štf__
, 2, 3))è
__wur
;

406 
	$a¥rštf
 (**
__»¡riù
 
__±r
,

407 
__cÚ¡
 *
__»¡riù
 
__fmt
, ...)

408 
__THROWNL
 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__´štf__
, 2, 3))è
__wur
;

411 #ifdeà
__USE_XOPEN2K8


418 
	$vd´štf
 (
__fd
, 
__cÚ¡
 *
__»¡riù
 
__fmt
,

419 
_G_va_li¡
 
__¬g
)

420 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 2, 0)));

421 
	$d´štf
 (
__fd
, 
__cÚ¡
 *
__»¡riù
 
__fmt
, ...)

422 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 2, 3)));

426 
__BEGIN_NAMESPACE_STD


431 
	$fsÿnf
 (
FILE
 *
__»¡riù
 
__¡»am
,

432 
__cÚ¡
 *
__»¡riù
 
__fÜm©
, ...è
__wur
;

437 
	$sÿnf
 (
__cÚ¡
 *
__»¡riù
 
__fÜm©
, ...è
__wur
;

439 
	$ssÿnf
 (
__cÚ¡
 *
__»¡riù
 
__s
,

440 
__cÚ¡
 *
__»¡riù
 
__fÜm©
, ...è
__THROW
;

442 #ià
defšed
 
__USE_ISOC99
 && !defšed 
__USE_GNU
 \

443 && (!
defšed
 
__LDBL_COMPAT
 || !defšed 
__REDIRECT
) \

444 && (
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_XOPEN2K
)

445 #ifdeà
__REDIRECT


449 
	`__REDIRECT
 (
fsÿnf
, (
FILE
 *
__»¡riù
 
__¡»am
,

450 
__cÚ¡
 *
__»¡riù
 
__fÜm©
, ...),

451 
__isoc99_fsÿnf
è
__wur
;

452 
	`__REDIRECT
 (
sÿnf
, (
__cÚ¡
 *
__»¡riù
 
__fÜm©
, ...),

453 
__isoc99_sÿnf
è
__wur
;

454 
	`__REDIRECT_NTH
 (
ssÿnf
, (
__cÚ¡
 *
__»¡riù
 
__s
,

455 
__cÚ¡
 *
__»¡riù
 
__fÜm©
, ...),

456 
__isoc99_ssÿnf
);

458 
	$__isoc99_fsÿnf
 (
FILE
 *
__»¡riù
 
__¡»am
,

459 
__cÚ¡
 *
__»¡riù
 
__fÜm©
, ...è
__wur
;

460 
	$__isoc99_sÿnf
 (
__cÚ¡
 *
__»¡riù
 
__fÜm©
, ...è
__wur
;

461 
	$__isoc99_ssÿnf
 (
__cÚ¡
 *
__»¡riù
 
__s
,

462 
__cÚ¡
 *
__»¡riù
 
__fÜm©
, ...è
__THROW
;

463 
	#fsÿnf
 
__isoc99_fsÿnf


	)

464 
	#sÿnf
 
__isoc99_sÿnf


	)

465 
	#ssÿnf
 
__isoc99_ssÿnf


	)

469 
__END_NAMESPACE_STD


471 #ifdef 
__USE_ISOC99


472 
__BEGIN_NAMESPACE_C99


477 
	$vfsÿnf
 (
FILE
 *
__»¡riù
 
__s
, 
__cÚ¡
 *__»¡riù 
__fÜm©
,

478 
_G_va_li¡
 
__¬g
)

479 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__sÿnf__
, 2, 0))è
__wur
;

485 
	$vsÿnf
 (
__cÚ¡
 *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__¬g
)

486 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__sÿnf__
, 1, 0))è
__wur
;

489 
	$vssÿnf
 (
__cÚ¡
 *
__»¡riù
 
__s
,

490 
__cÚ¡
 *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__¬g
)

491 
__THROW
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__sÿnf__
, 2, 0)));

493 #ià!
defšed
 
__USE_GNU
 \

494 && (!
defšed
 
__LDBL_COMPAT
 || !defšed 
__REDIRECT
) \

495 && (
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_XOPEN2K
)

496 #ifdeà
__REDIRECT


500 
	`__REDIRECT
 (
vfsÿnf
,

501 (
FILE
 *
__»¡riù
 
__s
,

502 
__cÚ¡
 *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__¬g
),

503 
__isoc99_vfsÿnf
)

504 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__sÿnf__
, 2, 0))è
__wur
;

505 
	`__REDIRECT
 (
vsÿnf
, (
__cÚ¡
 *
__»¡riù
 
__fÜm©
,

506 
_G_va_li¡
 
__¬g
), 
__isoc99_vsÿnf
)

507 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__sÿnf__
, 1, 0))è
__wur
;

508 
	`__REDIRECT_NTH
 (
vssÿnf
,

509 (
__cÚ¡
 *
__»¡riù
 
__s
,

510 
__cÚ¡
 *
__»¡riù
 
__fÜm©
,

511 
_G_va_li¡
 
__¬g
), 
__isoc99_vssÿnf
)

512 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__sÿnf__
, 2, 0)));

514 
	$__isoc99_vfsÿnf
 (
FILE
 *
__»¡riù
 
__s
,

515 
__cÚ¡
 *
__»¡riù
 
__fÜm©
,

516 
_G_va_li¡
 
__¬g
è
__wur
;

517 
	$__isoc99_vsÿnf
 (
__cÚ¡
 *
__»¡riù
 
__fÜm©
,

518 
_G_va_li¡
 
__¬g
è
__wur
;

519 
	$__isoc99_vssÿnf
 (
__cÚ¡
 *
__»¡riù
 
__s
,

520 
__cÚ¡
 *
__»¡riù
 
__fÜm©
,

521 
_G_va_li¡
 
__¬g
è
__THROW
;

522 
	#vfsÿnf
 
__isoc99_vfsÿnf


	)

523 
	#vsÿnf
 
__isoc99_vsÿnf


	)

524 
	#vssÿnf
 
__isoc99_vssÿnf


	)

528 
__END_NAMESPACE_C99


532 
__BEGIN_NAMESPACE_STD


537 
	`fg‘c
 (
FILE
 *
__¡»am
);

538 
	`g‘c
 (
FILE
 *
__¡»am
);

544 
	`g‘ch¬
 ();

545 
__END_NAMESPACE_STD


549 
	#g‘c
(
_å
è
	`_IO_g‘c
 (_å)

	)

551 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


556 
	`g‘c_uÆocked
 (
FILE
 *
__¡»am
);

557 
	`g‘ch¬_uÆocked
 ();

560 #ifdeà
__USE_MISC


567 
	`fg‘c_uÆocked
 (
FILE
 *
__¡»am
);

571 
__BEGIN_NAMESPACE_STD


579 
	`åutc
 (
__c
, 
FILE
 *
__¡»am
);

580 
	`putc
 (
__c
, 
FILE
 *
__¡»am
);

586 
	`putch¬
 (
__c
);

587 
__END_NAMESPACE_STD


591 
	#putc
(
_ch
, 
_å
è
	`_IO_putc
 (_ch, _å)

	)

593 #ifdeà
__USE_MISC


600 
	`åutc_uÆocked
 (
__c
, 
FILE
 *
__¡»am
);

603 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


608 
	`putc_uÆocked
 (
__c
, 
FILE
 *
__¡»am
);

609 
	`putch¬_uÆocked
 (
__c
);

613 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_MISC
 \

614 || (
defšed
 
__USE_XOPEN
 && !defšed 
__USE_XOPEN2K
)

616 
	`g‘w
 (
FILE
 *
__¡»am
);

619 
	`putw
 (
__w
, 
FILE
 *
__¡»am
);

623 
__BEGIN_NAMESPACE_STD


628 *
	$fg‘s
 (*
__»¡riù
 
__s
, 
__n
, 
FILE
 *__»¡riù 
__¡»am
)

629 
__wur
;

636 *
	$g‘s
 (*
__s
è
__wur
;

637 
__END_NAMESPACE_STD


639 #ifdeà
__USE_GNU


646 *
	$fg‘s_uÆocked
 (*
__»¡riù
 
__s
, 
__n
,

647 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

651 #ifdef 
__USE_XOPEN2K8


662 
_IO_ssize_t
 
	$__g‘d–im
 (**
__»¡riù
 
__lš•Œ
,

663 
size_t
 *
__»¡riù
 
__n
, 
__d–im™”
,

664 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

665 
_IO_ssize_t
 
	$g‘d–im
 (**
__»¡riù
 
__lš•Œ
,

666 
size_t
 *
__»¡riù
 
__n
, 
__d–im™”
,

667 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

675 
_IO_ssize_t
 
	$g‘lše
 (**
__»¡riù
 
__lš•Œ
,

676 
size_t
 *
__»¡riù
 
__n
,

677 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

681 
__BEGIN_NAMESPACE_STD


686 
	`åuts
 (
__cÚ¡
 *
__»¡riù
 
__s
, 
FILE
 *__»¡riù 
__¡»am
);

692 
	`puts
 (
__cÚ¡
 *
__s
);

699 
	`ung‘c
 (
__c
, 
FILE
 *
__¡»am
);

706 
size_t
 
	$ä—d
 (*
__»¡riù
 
__±r
, 
size_t
 
__size
,

707 
size_t
 
__n
, 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

712 
size_t
 
	`fwr™e
 (
__cÚ¡
 *
__»¡riù
 
__±r
, size_ˆ
__size
,

713 
size_t
 
__n
, 
FILE
 *
__»¡riù
 
__s
);

714 
__END_NAMESPACE_STD


716 #ifdeà
__USE_GNU


723 
	`åuts_uÆocked
 (
__cÚ¡
 *
__»¡riù
 
__s
,

724 
FILE
 *
__»¡riù
 
__¡»am
);

727 #ifdeà
__USE_MISC


734 
size_t
 
	$ä—d_uÆocked
 (*
__»¡riù
 
__±r
, 
size_t
 
__size
,

735 
size_t
 
__n
, 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

736 
size_t
 
	`fwr™e_uÆocked
 (
__cÚ¡
 *
__»¡riù
 
__±r
, size_ˆ
__size
,

737 
size_t
 
__n
, 
FILE
 *
__»¡riù
 
__¡»am
);

741 
__BEGIN_NAMESPACE_STD


746 
	`f£ek
 (
FILE
 *
__¡»am
, 
__off
, 
__wh’û
);

751 
	$á–l
 (
FILE
 *
__¡»am
è
__wur
;

756 
	`»wšd
 (
FILE
 *
__¡»am
);

757 
__END_NAMESPACE_STD


764 #ià
defšed
 
__USE_LARGEFILE
 || defšed 
__USE_XOPEN2K


765 #iâdeà
__USE_FILE_OFFSET64


770 
	`f£eko
 (
FILE
 *
__¡»am
, 
__off_t
 
__off
, 
__wh’û
);

775 
__off_t
 
	$á–lo
 (
FILE
 *
__¡»am
è
__wur
;

777 #ifdeà
__REDIRECT


778 
	`__REDIRECT
 (
f£eko
,

779 (
FILE
 *
__¡»am
, 
__off64_t
 
__off
, 
__wh’û
),

780 
f£eko64
);

781 
__off64_t
 
	`__REDIRECT
 (
á–lo
, (
FILE
 *
__¡»am
), 
á–lo64
);

783 
	#f£eko
 
f£eko64


	)

784 
	#á–lo
 
á–lo64


	)

789 
__BEGIN_NAMESPACE_STD


790 #iâdeà
__USE_FILE_OFFSET64


795 
	`fg‘pos
 (
FILE
 *
__»¡riù
 
__¡»am
, 
åos_t
 *__»¡riù 
__pos
);

800 
	`f£os
 (
FILE
 *
__¡»am
, 
__cÚ¡
 
åos_t
 *
__pos
);

802 #ifdeà
__REDIRECT


803 
	`__REDIRECT
 (
fg‘pos
, (
FILE
 *
__»¡riù
 
__¡»am
,

804 
åos_t
 *
__»¡riù
 
__pos
), 
fg‘pos64
);

805 
	`__REDIRECT
 (
f£os
,

806 (
FILE
 *
__¡»am
, 
__cÚ¡
 
åos_t
 *
__pos
), 
f£os64
);

808 
	#fg‘pos
 
fg‘pos64


	)

809 
	#f£os
 
f£os64


	)

812 
__END_NAMESPACE_STD


814 #ifdeà
__USE_LARGEFILE64


815 
	`f£eko64
 (
FILE
 *
__¡»am
, 
__off64_t
 
__off
, 
__wh’û
);

816 
__off64_t
 
	$á–lo64
 (
FILE
 *
__¡»am
è
__wur
;

817 
	`fg‘pos64
 (
FILE
 *
__»¡riù
 
__¡»am
, 
åos64_t
 *__»¡riù 
__pos
);

818 
	`f£os64
 (
FILE
 *
__¡»am
, 
__cÚ¡
 
åos64_t
 *
__pos
);

821 
__BEGIN_NAMESPACE_STD


823 
	$ş—»¼
 (
FILE
 *
__¡»am
è
__THROW
;

825 
	$ãof
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

827 
	$ã¼Ü
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

828 
__END_NAMESPACE_STD


830 #ifdeà
__USE_MISC


832 
	$ş—»¼_uÆocked
 (
FILE
 *
__¡»am
è
__THROW
;

833 
	$ãof_uÆocked
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

834 
	$ã¼Ü_uÆocked
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

838 
__BEGIN_NAMESPACE_STD


843 
	`³¼Ü
 (
__cÚ¡
 *
__s
);

844 
__END_NAMESPACE_STD


850 
	~<b™s/sys_”¾i¡.h
>

853 #ifdef 
__USE_POSIX


855 
	$f’o
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

858 #ifdeà
__USE_MISC


860 
	$f’o_uÆocked
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

864 #ià(
defšed
 
__USE_POSIX2
 || defšed 
__USE_SVID
 || defšed 
__USE_BSD
 || \

865 
defšed
 
__USE_MISC
)

870 
FILE
 *
	$pİ’
 (
__cÚ¡
 *
__commªd
, __cÚ¡ *
__modes
è
__wur
;

876 
	`pşo£
 (
FILE
 *
__¡»am
);

880 #ifdef 
__USE_POSIX


882 *
	$ù”mid
 (*
__s
è
__THROW
;

886 #ifdeà
__USE_XOPEN


888 *
	`cu£rid
 (*
__s
);

892 #ifdef 
__USE_GNU


893 
ob¡ack
;

896 
	$ob¡ack_´štf
 (
ob¡ack
 *
__»¡riù
 
__ob¡ack
,

897 
__cÚ¡
 *
__»¡riù
 
__fÜm©
, ...)

898 
__THROWNL
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 2, 3)));

899 
	$ob¡ack_v´štf
 (
ob¡ack
 *
__»¡riù
 
__ob¡ack
,

900 
__cÚ¡
 *
__»¡riù
 
__fÜm©
,

901 
_G_va_li¡
 
__¬gs
)

902 
__THROWNL
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 2, 0)));

906 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


910 
	$æockfe
 (
FILE
 *
__¡»am
è
__THROW
;

914 
	$árylockfe
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

917 
	$fuÆockfe
 (
FILE
 *
__¡»am
è
__THROW
;

920 #ià
defšed
 
__USE_XOPEN
 && !defšed 
__USE_XOPEN2K
 && !defšed 
__USE_GNU


924 
	#__Ãed_g‘İt


	)

925 
	~<g‘İt.h
>

930 #ifdeà
__USE_EXTERN_INLINES


931 
	~<b™s/¡dio.h
>

933 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__ex‹º_®ways_šlše


934 
	~<b™s/¡dio2.h
>

936 #ifdeà
__LDBL_COMPAT


937 
	~<b™s/¡dio-ldbl.h
>

940 
__END_DECLS


	@/usr/include/stdlib.h

23 #iâdef 
_STDLIB_H


25 
	~<ã©u»s.h
>

28 
	#__Ãed_size_t


	)

29 #iâdeà
__Ãed_m®loc_ªd_ÿÎoc


30 
	#__Ãed_wch¬_t


	)

31 
	#__Ãed_NULL


	)

33 
	~<¡ddef.h
>

35 
	g__BEGIN_DECLS


37 #iâdeà
__Ãed_m®loc_ªd_ÿÎoc


38 
	#_STDLIB_H
 1

	)

40 #ià(
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K8
è&& !defšed 
_SYS_WAIT_H


42 
	~<b™s/wa™æags.h
>

43 
	~<b™s/wa™¡©us.h
>

45 #ifdeà
__USE_BSD


50 #ià
defšed
 
__GNUC__
 && !defšed 
__ılu¥lus


51 
	#__WAIT_INT
(
¡©us
) \

52 (
	`__ex‹nsiÚ__
 (((uniÚ { 
	`__ty³of
(
¡©us
è
__š
; 
__i
; }) \

53 { .
__š
 = (
¡©us
è}).
__i
))

	)

55 
	#__WAIT_INT
(
¡©us
è(*(*è&(¡©us))

	)

63 #ià!
defšed
 
__GNUC__
 || __GNUC__ < 2 || defšed 
__ılu¥lus


64 
	#__WAIT_STATUS
 *

	)

65 
	#__WAIT_STATUS_DEFN
 *

	)

70 
wa™
 *
	m__u±r
;

71 *
	m__Œ
;

72 } 
	t__WAIT_STATUS
 
	t__©Œibu‹__
 ((
	t__Œª¥¬’t_uniÚ__
));

73 
	#__WAIT_STATUS_DEFN
 *

	)

78 
	#__WAIT_INT
(
¡©us
è(¡©us)

	)

79 
	#__WAIT_STATUS
 *

	)

80 
	#__WAIT_STATUS_DEFN
 *

	)

85 
	#WEXITSTATUS
(
¡©us
è
	`__WEXITSTATUS
 (
	`__WAIT_INT
 (¡©us))

	)

86 
	#WTERMSIG
(
¡©us
è
	`__WTERMSIG
 (
	`__WAIT_INT
 (¡©us))

	)

87 
	#WSTOPSIG
(
¡©us
è
	`__WSTOPSIG
 (
	`__WAIT_INT
 (¡©us))

	)

88 
	#WIFEXITED
(
¡©us
è
	`__WIFEXITED
 (
	`__WAIT_INT
 (¡©us))

	)

89 
	#WIFSIGNALED
(
¡©us
è
	`__WIFSIGNALED
 (
	`__WAIT_INT
 (¡©us))

	)

90 
	#WIFSTOPPED
(
¡©us
è
	`__WIFSTOPPED
 (
	`__WAIT_INT
 (¡©us))

	)

91 #ifdeà
__WIFCONTINUED


92 
	#WIFCONTINUED
(
¡©us
è
	`__WIFCONTINUED
 (
	`__WAIT_INT
 (¡©us))

	)

96 
__BEGIN_NAMESPACE_STD


100 
	mquÙ
;

101 
	m»m
;

102 } 
	tdiv_t
;

105 #iâdeà
__ldiv_t_defšed


108 
	mquÙ
;

109 
	m»m
;

110 } 
	tldiv_t
;

111 
	#__ldiv_t_defšed
 1

	)

113 
	g__END_NAMESPACE_STD


115 #ià
defšed
 
__USE_ISOC99
 && !defšed 
__Îdiv_t_defšed


116 
__BEGIN_NAMESPACE_C99


118 
__ex‹nsiÚ__
 struct

120 
	mquÙ
;

121 
	m»m
;

122 } 
	tÎdiv_t
;

123 
	#__Îdiv_t_defšed
 1

	)

124 
	g__END_NAMESPACE_C99


129 
	#RAND_MAX
 2147483647

	)

134 
	#EXIT_FAILURE
 1

	)

135 
	#EXIT_SUCCESS
 0

	)

139 
	#MB_CUR_MAX
 (
	`__ùy³_g‘_mb_cur_max
 ())

	)

140 
size_t
 
	$__ùy³_g‘_mb_cur_max
 (è
__THROW
 
__wur
;

143 
__BEGIN_NAMESPACE_STD


145 
	$©of
 (
__cÚ¡
 *
__ÅŒ
)

146 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

148 
	$©oi
 (
__cÚ¡
 *
__ÅŒ
)

149 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

151 
	$©Ş
 (
__cÚ¡
 *
__ÅŒ
)

152 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

153 
__END_NAMESPACE_STD


155 #ià
defšed
 
__USE_ISOC99
 || (defšed 
__GLIBC_HAVE_LONG_LONG
 && defšed 
__USE_MISC
)

156 
__BEGIN_NAMESPACE_C99


158 
__ex‹nsiÚ__
 
	$©Şl
 (
__cÚ¡
 *
__ÅŒ
)

159 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

160 
__END_NAMESPACE_C99


163 
__BEGIN_NAMESPACE_STD


165 
	$¡¹od
 (
__cÚ¡
 *
__»¡riù
 
__ÅŒ
,

166 **
__»¡riù
 
__’d±r
)

167 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

168 
__END_NAMESPACE_STD


170 #ifdef 
__USE_ISOC99


171 
__BEGIN_NAMESPACE_C99


173 
	$¡¹of
 (
__cÚ¡
 *
__»¡riù
 
__ÅŒ
,

174 **
__»¡riù
 
__’d±r
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

176 
	$¡¹Şd
 (
__cÚ¡
 *
__»¡riù
 
__ÅŒ
,

177 **
__»¡riù
 
__’d±r
)

178 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

179 
__END_NAMESPACE_C99


182 
__BEGIN_NAMESPACE_STD


184 
	$¡¹Ş
 (
__cÚ¡
 *
__»¡riù
 
__ÅŒ
,

185 **
__»¡riù
 
__’d±r
, 
__ba£
)

186 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

188 
	$¡¹oul
 (
__cÚ¡
 *
__»¡riù
 
__ÅŒ
,

189 **
__»¡riù
 
__’d±r
, 
__ba£
)

190 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

191 
__END_NAMESPACE_STD


193 #ià
defšed
 
__GLIBC_HAVE_LONG_LONG
 && defšed 
__USE_BSD


195 
__ex‹nsiÚ__


196 
	$¡¹oq
 (
__cÚ¡
 *
__»¡riù
 
__ÅŒ
,

197 **
__»¡riù
 
__’d±r
, 
__ba£
)

198 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

200 
__ex‹nsiÚ__


201 
	$¡¹ouq
 (
__cÚ¡
 *
__»¡riù
 
__ÅŒ
,

202 **
__»¡riù
 
__’d±r
, 
__ba£
)

203 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

206 #ià
defšed
 
__USE_ISOC99
 || (defšed 
__GLIBC_HAVE_LONG_LONG
 && defšed 
__USE_MISC
)

207 
__BEGIN_NAMESPACE_C99


209 
__ex‹nsiÚ__


210 
	$¡¹Şl
 (
__cÚ¡
 *
__»¡riù
 
__ÅŒ
,

211 **
__»¡riù
 
__’d±r
, 
__ba£
)

212 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

214 
__ex‹nsiÚ__


215 
	$¡¹ouÎ
 (
__cÚ¡
 *
__»¡riù
 
__ÅŒ
,

216 **
__»¡riù
 
__’d±r
, 
__ba£
)

217 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

218 
__END_NAMESPACE_C99


222 #ifdeà
__USE_GNU


236 
	~<xloÿË.h
>

240 
	$¡¹Ş_l
 (
__cÚ¡
 *
__»¡riù
 
__ÅŒ
,

241 **
__»¡riù
 
__’d±r
, 
__ba£
,

242 
__loÿË_t
 
__loc
è
__THROW
 
	`__nÚnuÎ
 ((1, 4)è
__wur
;

244 
	$¡¹oul_l
 (
__cÚ¡
 *
__»¡riù
 
__ÅŒ
,

245 **
__»¡riù
 
__’d±r
,

246 
__ba£
, 
__loÿË_t
 
__loc
)

247 
__THROW
 
	`__nÚnuÎ
 ((1, 4)è
__wur
;

249 
__ex‹nsiÚ__


250 
	$¡¹Şl_l
 (
__cÚ¡
 *
__»¡riù
 
__ÅŒ
,

251 **
__»¡riù
 
__’d±r
, 
__ba£
,

252 
__loÿË_t
 
__loc
)

253 
__THROW
 
	`__nÚnuÎ
 ((1, 4)è
__wur
;

255 
__ex‹nsiÚ__


256 
	$¡¹ouÎ_l
 (
__cÚ¡
 *
__»¡riù
 
__ÅŒ
,

257 **
__»¡riù
 
__’d±r
,

258 
__ba£
, 
__loÿË_t
 
__loc
)

259 
__THROW
 
	`__nÚnuÎ
 ((1, 4)è
__wur
;

261 
	$¡¹od_l
 (
__cÚ¡
 *
__»¡riù
 
__ÅŒ
,

262 **
__»¡riù
 
__’d±r
, 
__loÿË_t
 
__loc
)

263 
__THROW
 
	`__nÚnuÎ
 ((1, 3)è
__wur
;

265 
	$¡¹of_l
 (
__cÚ¡
 *
__»¡riù
 
__ÅŒ
,

266 **
__»¡riù
 
__’d±r
, 
__loÿË_t
 
__loc
)

267 
__THROW
 
	`__nÚnuÎ
 ((1, 3)è
__wur
;

269 
	$¡¹Şd_l
 (
__cÚ¡
 *
__»¡riù
 
__ÅŒ
,

270 **
__»¡riù
 
__’d±r
,

271 
__loÿË_t
 
__loc
)

272 
__THROW
 
	`__nÚnuÎ
 ((1, 3)è
__wur
;

276 #ifdeà
__USE_EXTERN_INLINES


277 
__BEGIN_NAMESPACE_STD


278 
__ex‹º_šlše
 

279 
	`__NTH
 (
	$©of
 (
__cÚ¡
 *
__ÅŒ
))

281  
	`¡¹od
 (
__ÅŒ
, (**è
NULL
);

282 
	}
}

283 
__ex‹º_šlše
 

284 
__NTH
 (
	$©oi
 (
__cÚ¡
 *
__ÅŒ
))

286  (è
	`¡¹Ş
 (
__ÅŒ
, (**è
NULL
, 10);

287 
	}
}

288 
__ex‹º_šlše
 

289 
__NTH
 (
	$©Ş
 (
__cÚ¡
 *
__ÅŒ
))

291  
	`¡¹Ş
 (
__ÅŒ
, (**è
NULL
, 10);

292 
	}
}

293 
	g__END_NAMESPACE_STD


295 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_ISOC99


296 
__BEGIN_NAMESPACE_C99


297 
__ex‹nsiÚ__
 
__ex‹º_šlše
 

298 
__NTH
 (
	$©Şl
 (
__cÚ¡
 *
__ÅŒ
))

300  
	`¡¹Şl
 (
__ÅŒ
, (**è
NULL
, 10);

301 
	}
}

302 
	g__END_NAMESPACE_C99


307 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN_EXTENDED


311 *
	$l64a
 (
__n
è
__THROW
 
__wur
;

314 
	$a64l
 (
__cÚ¡
 *
__s
)

315 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

319 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_BSD


320 
	~<sys/ty³s.h
>

327 
	$¿ndom
 (è
__THROW
;

330 
	$¤ªdom
 (
__£ed
è
__THROW
;

336 *
	$š™¡©e
 (
__£ed
, *
__¡©ebuf
,

337 
size_t
 
__¡©–’
è
__THROW
 
	`__nÚnuÎ
 ((2));

341 *
	$£t¡©e
 (*
__¡©ebuf
è
__THROW
 
	`__nÚnuÎ
 ((1));

344 #ifdeà
__USE_MISC


349 
	s¿ndom_d©a


351 
št32_t
 *
åŒ
;

352 
št32_t
 *
½Œ
;

353 
št32_t
 *
¡©e
;

354 
¿nd_ty³
;

355 
¿nd_deg
;

356 
¿nd_£p
;

357 
št32_t
 *
’d_±r
;

360 
	$¿ndom_r
 (
¿ndom_d©a
 *
__»¡riù
 
__buf
,

361 
št32_t
 *
__»¡riù
 
__»suÉ
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

363 
	$¤ªdom_r
 (
__£ed
, 
¿ndom_d©a
 *
__buf
)

364 
__THROW
 
	`__nÚnuÎ
 ((2));

366 
	$š™¡©e_r
 (
__£ed
, *
__»¡riù
 
__¡©ebuf
,

367 
size_t
 
__¡©–’
,

368 
¿ndom_d©a
 *
__»¡riù
 
__buf
)

369 
__THROW
 
	`__nÚnuÎ
 ((2, 4));

371 
	$£t¡©e_r
 (*
__»¡riù
 
__¡©ebuf
,

372 
¿ndom_d©a
 *
__»¡riù
 
__buf
)

373 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

378 
__BEGIN_NAMESPACE_STD


380 
	$¿nd
 (è
__THROW
;

382 
	$¤ªd
 (
__£ed
è
__THROW
;

383 
__END_NAMESPACE_STD


385 #ifdeà
__USE_POSIX


387 
	$¿nd_r
 (*
__£ed
è
__THROW
;

391 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN


395 
	$d¿nd48
 (è
__THROW
;

396 
	$”ªd48
 (
__xsubi
[3]è
__THROW
 
	`__nÚnuÎ
 ((1));

399 
	$Ìªd48
 (è
__THROW
;

400 
	$Äªd48
 (
__xsubi
[3])

401 
__THROW
 
	`__nÚnuÎ
 ((1));

404 
	$m¿nd48
 (è
__THROW
;

405 
	$j¿nd48
 (
__xsubi
[3])

406 
__THROW
 
	`__nÚnuÎ
 ((1));

409 
	$¤ªd48
 (
__£edv®
è
__THROW
;

410 *
	$£ed48
 (
__£ed16v
[3])

411 
__THROW
 
	`__nÚnuÎ
 ((1));

412 
	$lcÚg48
 (
__·¿m
[7]è
__THROW
 
	`__nÚnuÎ
 ((1));

414 #ifdeà
__USE_MISC


418 
	sd¿nd48_d©a


420 
__x
[3];

421 
__Şd_x
[3];

422 
__c
;

423 
__š™
;

424 
__a
;

428 
	$d¿nd48_r
 (
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

429 *
__»¡riù
 
__»suÉ
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

430 
	$”ªd48_r
 (
__xsubi
[3],

431 
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

432 *
__»¡riù
 
__»suÉ
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

435 
	$Ìªd48_r
 (
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

436 *
__»¡riù
 
__»suÉ
)

437 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

438 
	$Äªd48_r
 (
__xsubi
[3],

439 
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

440 *
__»¡riù
 
__»suÉ
)

441 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

444 
	$m¿nd48_r
 (
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

445 *
__»¡riù
 
__»suÉ
)

446 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

447 
	$j¿nd48_r
 (
__xsubi
[3],

448 
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

449 *
__»¡riù
 
__»suÉ
)

450 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

453 
	$¤ªd48_r
 (
__£edv®
, 
d¿nd48_d©a
 *
__bufãr
)

454 
__THROW
 
	`__nÚnuÎ
 ((2));

456 
	$£ed48_r
 (
__£ed16v
[3],

457 
d¿nd48_d©a
 *
__bufãr
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

459 
	$lcÚg48_r
 (
__·¿m
[7],

460 
d¿nd48_d©a
 *
__bufãr
)

461 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

467 #iâdeà
__m®loc_ªd_ÿÎoc_defšed


468 
	#__m®loc_ªd_ÿÎoc_defšed


	)

469 
__BEGIN_NAMESPACE_STD


471 *
	$m®loc
 (
size_t
 
__size
è
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

473 *
	$ÿÎoc
 (
size_t
 
__nmemb
, size_ˆ
__size
)

474 
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

475 
__END_NAMESPACE_STD


478 #iâdeà
__Ãed_m®loc_ªd_ÿÎoc


479 
__BEGIN_NAMESPACE_STD


485 *
	$»®loc
 (*
__±r
, 
size_t
 
__size
)

486 
__THROW
 
__©Œibu‹_w¬n_unu£d_»suÉ__
;

488 
	$ä“
 (*
__±r
è
__THROW
;

489 
__END_NAMESPACE_STD


491 #ifdef 
__USE_MISC


493 
	$cä“
 (*
__±r
è
__THROW
;

496 #ià
defšed
 
__USE_GNU
 || defšed 
__USE_BSD
 || defšed 
__USE_MISC


497 
	~<®loÿ.h
>

500 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K
) \

501 || 
defšed
 
__USE_BSD


503 *
	$v®loc
 (
size_t
 
__size
è
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

506 #ifdeà
__USE_XOPEN2K


508 
	$posix_mem®ign
 (**
__mem±r
, 
size_t
 
__®ignm’t
, size_ˆ
__size
)

509 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

512 
__BEGIN_NAMESPACE_STD


514 
	$abÜt
 (è
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

518 
	`©ex™
 ((*
__func
è()è
__THROW
 
	`__nÚnuÎ
 ((1));

520 #ifdeà
__USE_GNU


524 #ifdeà
__ılu¥lus


525 "C++" 
	`©_quick_ex™
 ((*
__func
) ())

526 
__THROW
 
	`__asm
 ("©_quick_ex™"è
	`__nÚnuÎ
 ((1));

528 
	`©_quick_ex™
 ((*
__func
è()è
__THROW
 
	`__nÚnuÎ
 ((1));

531 
__END_NAMESPACE_STD


533 #ifdef 
__USE_MISC


536 
	`Ú_ex™
 ((*
__func
è(
__¡©us
, *
__¬g
), *__arg)

537 
__THROW
 
	`__nÚnuÎ
 ((1));

540 
__BEGIN_NAMESPACE_STD


544 
	$ex™
 (
__¡©us
è
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

546 #ifdeà
__USE_GNU


552 
	$quick_ex™
 (
__¡©us
è
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

554 
__END_NAMESPACE_STD


556 #ifdeà
__USE_ISOC99


557 
__BEGIN_NAMESPACE_C99


560 
	$_Ex™
 (
__¡©us
è
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

561 
__END_NAMESPACE_C99


565 
__BEGIN_NAMESPACE_STD


567 *
	$g‘’v
 (
__cÚ¡
 *
__Çme
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

568 
__END_NAMESPACE_STD


572 *
	$__£cu»_g‘’v
 (
__cÚ¡
 *
__Çme
)

573 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

575 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN


579 
	$pu‹nv
 (*
__¡ršg
è
__THROW
 
	`__nÚnuÎ
 ((1));

582 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN2K


585 
	$£‹nv
 (
__cÚ¡
 *
__Çme
, __cÚ¡ *
__v®ue
, 
__»¶aû
)

586 
__THROW
 
	`__nÚnuÎ
 ((2));

589 
	$un£‹nv
 (
__cÚ¡
 *
__Çme
è
__THROW
 
	`__nÚnuÎ
 ((1));

592 #ifdef 
__USE_MISC


596 
	$ş—»nv
 (è
__THROW
;

600 #ià
defšed
 
__USE_MISC
 \

601 || (
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K
)

606 *
	$mk‹mp
 (*
__‹m¶©e
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

609 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED
 \

610 || 
defšed
 
__USE_XOPEN2K8


619 #iâdeà
__USE_FILE_OFFSET64


620 
	$mk¡emp
 (*
__‹m¶©e
è
	`__nÚnuÎ
 ((1)è
__wur
;

622 #ifdeà
__REDIRECT


623 
	`__REDIRECT
 (
mk¡emp
, (*
__‹m¶©e
), 
mk¡emp64
)

624 
	`__nÚnuÎ
 ((1)è
__wur
;

626 
	#mk¡emp
 
mk¡emp64


	)

629 #ifdeà
__USE_LARGEFILE64


630 
	$mk¡emp64
 (*
__‹m¶©e
è
	`__nÚnuÎ
 ((1)è
__wur
;

634 #ifdeà
__USE_MISC


641 #iâdeà
__USE_FILE_OFFSET64


642 
	$mk¡emps
 (*
__‹m¶©e
, 
__suffixËn
è
	`__nÚnuÎ
 ((1)è
__wur
;

644 #ifdeà
__REDIRECT


645 
	`__REDIRECT
 (
mk¡emps
, (*
__‹m¶©e
, 
__suffixËn
),

646 
mk¡emps64
è
	`__nÚnuÎ
 ((1)è
__wur
;

648 
	#mk¡emps
 
mk¡emps64


	)

651 #ifdeà
__USE_LARGEFILE64


652 
	$mk¡emps64
 (*
__‹m¶©e
, 
__suffixËn
)

653 
	`__nÚnuÎ
 ((1)è
__wur
;

657 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN2K8


663 *
	$mkd‹mp
 (*
__‹m¶©e
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

666 #ifdeà
__USE_GNU


673 #iâdeà
__USE_FILE_OFFSET64


674 
	$mko¡emp
 (*
__‹m¶©e
, 
__æags
è
	`__nÚnuÎ
 ((1)è
__wur
;

676 #ifdeà
__REDIRECT


677 
	`__REDIRECT
 (
mko¡emp
, (*
__‹m¶©e
, 
__æags
), 
mko¡emp64
)

678 
	`__nÚnuÎ
 ((1)è
__wur
;

680 
	#mko¡emp
 
mko¡emp64


	)

683 #ifdeà
__USE_LARGEFILE64


684 
	$mko¡emp64
 (*
__‹m¶©e
, 
__æags
è
	`__nÚnuÎ
 ((1)è
__wur
;

693 #iâdeà
__USE_FILE_OFFSET64


694 
	$mko¡emps
 (*
__‹m¶©e
, 
__suffixËn
, 
__æags
)

695 
	`__nÚnuÎ
 ((1)è
__wur
;

697 #ifdeà
__REDIRECT


698 
	`__REDIRECT
 (
mko¡emps
, (*
__‹m¶©e
, 
__suffixËn
,

699 
__æags
), 
mko¡emps64
)

700 
	`__nÚnuÎ
 ((1)è
__wur
;

702 
	#mko¡emps
 
mko¡emps64


	)

705 #ifdeà
__USE_LARGEFILE64


706 
	$mko¡emps64
 (*
__‹m¶©e
, 
__suffixËn
, 
__æags
)

707 
	`__nÚnuÎ
 ((1)è
__wur
;

712 
__BEGIN_NAMESPACE_STD


717 
	$sy¡em
 (
__cÚ¡
 *
__commªd
è
__wur
;

718 
__END_NAMESPACE_STD


721 #ifdef 
__USE_GNU


724 *
	$ÿnÚiÿlize_fe_Çme
 (
__cÚ¡
 *
__Çme
)

725 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

728 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


734 *
	$»®·th
 (
__cÚ¡
 *
__»¡riù
 
__Çme
,

735 *
__»¡riù
 
__»sŞved
è
__THROW
 
__wur
;

740 #iâdeà
__COMPAR_FN_T


741 
	#__COMPAR_FN_T


	)

742 (*
	t__com·r_â_t
è(
	t__cÚ¡
 *, __const *);

744 #ifdef 
__USE_GNU


745 
__com·r_â_t
 
	tcom·risÚ_â_t
;

748 #ifdeà
__USE_GNU


749 (*
	t__com·r_d_â_t
è(
	t__cÚ¡
 *, __const *, *);

752 
__BEGIN_NAMESPACE_STD


755 *
	$b£¬ch
 (
__cÚ¡
 *
__key
, __cÚ¡ *
__ba£
,

756 
size_t
 
__nmemb
, size_ˆ
__size
, 
__com·r_â_t
 
__com·r
)

757 
	`__nÚnuÎ
 ((1, 2, 5)è
__wur
;

761 
	$qsÜt
 (*
__ba£
, 
size_t
 
__nmemb
, size_ˆ
__size
,

762 
__com·r_â_t
 
__com·r
è
	`__nÚnuÎ
 ((1, 4));

763 #ifdeà
__USE_GNU


764 
	$qsÜt_r
 (*
__ba£
, 
size_t
 
__nmemb
, size_ˆ
__size
,

765 
__com·r_d_â_t
 
__com·r
, *
__¬g
)

766 
	`__nÚnuÎ
 ((1, 4));

771 
	$abs
 (
__x
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

772 
	$Ïbs
 (
__x
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

773 
__END_NAMESPACE_STD


775 #ifdeà
__USE_ISOC99


776 
__ex‹nsiÚ__
 
	$Îabs
 (
__x
)

777 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

781 
__BEGIN_NAMESPACE_STD


785 
div_t
 
	$div
 (
__num”
, 
__d’om
)

786 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

787 
ldiv_t
 
	$ldiv
 (
__num”
, 
__d’om
)

788 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

789 
__END_NAMESPACE_STD


791 #ifdeà
__USE_ISOC99


792 
__BEGIN_NAMESPACE_C99


793 
__ex‹nsiÚ__
 
Îdiv_t
 
	$Îdiv
 (
__num”
,

794 
__d’om
)

795 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

796 
__END_NAMESPACE_C99


800 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K
) \

801 || 
defšed
 
__USE_SVID


808 *
	$ecvt
 (
__v®ue
, 
__ndig™
, *
__»¡riù
 
__deıt
,

809 *
__»¡riù
 
__sign
è
__THROW
 
	`__nÚnuÎ
 ((3, 4)è
__wur
;

814 *
	$fcvt
 (
__v®ue
, 
__ndig™
, *
__»¡riù
 
__deıt
,

815 *
__»¡riù
 
__sign
è
__THROW
 
	`__nÚnuÎ
 ((3, 4)è
__wur
;

820 *
	$gcvt
 (
__v®ue
, 
__ndig™
, *
__buf
)

821 
__THROW
 
	`__nÚnuÎ
 ((3)è
__wur
;

824 #ifdeà
__USE_MISC


826 *
	$qecvt
 (
__v®ue
, 
__ndig™
,

827 *
__»¡riù
 
__deıt
, *__»¡riù 
__sign
)

828 
__THROW
 
	`__nÚnuÎ
 ((3, 4)è
__wur
;

829 *
	$qfcvt
 (
__v®ue
, 
__ndig™
,

830 *
__»¡riù
 
__deıt
, *__»¡riù 
__sign
)

831 
__THROW
 
	`__nÚnuÎ
 ((3, 4)è
__wur
;

832 *
	$qgcvt
 (
__v®ue
, 
__ndig™
, *
__buf
)

833 
__THROW
 
	`__nÚnuÎ
 ((3)è
__wur
;

838 
	$ecvt_r
 (
__v®ue
, 
__ndig™
, *
__»¡riù
 
__deıt
,

839 *
__»¡riù
 
__sign
, *__»¡riù 
__buf
,

840 
size_t
 
__Ën
è
__THROW
 
	`__nÚnuÎ
 ((3, 4, 5));

841 
	$fcvt_r
 (
__v®ue
, 
__ndig™
, *
__»¡riù
 
__deıt
,

842 *
__»¡riù
 
__sign
, *__»¡riù 
__buf
,

843 
size_t
 
__Ën
è
__THROW
 
	`__nÚnuÎ
 ((3, 4, 5));

845 
	$qecvt_r
 (
__v®ue
, 
__ndig™
,

846 *
__»¡riù
 
__deıt
, *__»¡riù 
__sign
,

847 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
)

848 
__THROW
 
	`__nÚnuÎ
 ((3, 4, 5));

849 
	$qfcvt_r
 (
__v®ue
, 
__ndig™
,

850 *
__»¡riù
 
__deıt
, *__»¡riù 
__sign
,

851 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
)

852 
__THROW
 
	`__nÚnuÎ
 ((3, 4, 5));

857 
__BEGIN_NAMESPACE_STD


860 
	$mbËn
 (
__cÚ¡
 *
__s
, 
size_t
 
__n
è
__THROW
 
__wur
;

863 
	$mbtowc
 (
wch¬_t
 *
__»¡riù
 
__pwc
,

864 
__cÚ¡
 *
__»¡riù
 
__s
, 
size_t
 
__n
è
__THROW
 
__wur
;

867 
	$wùomb
 (*
__s
, 
wch¬_t
 
__wch¬
è
__THROW
 
__wur
;

871 
size_t
 
	$mb¡owcs
 (
wch¬_t
 *
__»¡riù
 
__pwcs
,

872 
__cÚ¡
 *
__»¡riù
 
__s
, 
size_t
 
__n
è
__THROW
;

874 
size_t
 
	$wc¡ombs
 (*
__»¡riù
 
__s
,

875 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__pwcs
, 
size_t
 
__n
)

876 
__THROW
;

877 
__END_NAMESPACE_STD


880 #ifdeà
__USE_SVID


885 
	$½m©ch
 (
__cÚ¡
 *
__»¥Ú£
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

889 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


896 
	$g‘subİt
 (**
__»¡riù
 
__İtiÚp
,

897 *
__cÚ¡
 *
__»¡riù
 
__tok’s
,

898 **
__»¡riù
 
__v®u•
)

899 
__THROW
 
	`__nÚnuÎ
 ((1, 2, 3)è
__wur
;

903 #ifdeà
__USE_XOPEN


905 
	$£tkey
 (
__cÚ¡
 *
__key
è
__THROW
 
	`__nÚnuÎ
 ((1));

911 #ifdeà
__USE_XOPEN2KXSI


913 
	$posix_İ’±
 (
__oæag
è
__wur
;

916 #ifdeà
__USE_XOPEN


921 
	$g¿Á±
 (
__fd
è
__THROW
;

925 
	$uÆock±
 (
__fd
è
__THROW
;

930 *
	$±¢ame
 (
__fd
è
__THROW
 
__wur
;

933 #ifdeà
__USE_GNU


937 
	$±¢ame_r
 (
__fd
, *
__buf
, 
size_t
 
__buæ’
)

938 
__THROW
 
	`__nÚnuÎ
 ((2));

941 
	`g‘±
 ();

944 #ifdeà
__USE_BSD


948 
	$g‘lßdavg
 (
__lßdavg
[], 
__ÃËm
)

949 
__THROW
 
	`__nÚnuÎ
 ((1));

954 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__ex‹º_®ways_šlše


955 
	~<b™s/¡dlib.h
>

957 #ifdeà
__LDBL_COMPAT


958 
	~<b™s/¡dlib-ldbl.h
>

962 #undeà
__Ãed_m®loc_ªd_ÿÎoc


964 
__END_DECLS


	@/usr/include/string.h

24 #iâdef 
_STRING_H


25 
	#_STRING_H
 1

	)

27 
	~<ã©u»s.h
>

29 
	g__BEGIN_DECLS


32 
	#__Ãed_size_t


	)

33 
	#__Ãed_NULL


	)

34 
	~<¡ddef.h
>

37 #ià
defšed
 
__ılu¥lus
 && 
__GNUC_PREREQ
 (4, 4)

38 
	#__CORRECT_ISO_CPP_STRING_H_PROTO


	)

42 
__BEGIN_NAMESPACE_STD


44 *
	$memıy
 (*
__»¡riù
 
__de¡
,

45 
__cÚ¡
 *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

46 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

49 *
	$memmove
 (*
__de¡
, 
__cÚ¡
 *
__¤c
, 
size_t
 
__n
)

50 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

51 
__END_NAMESPACE_STD


56 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_BSD
 || defšed 
__USE_XOPEN


57 *
	$memcıy
 (*
__»¡riù
 
__de¡
, 
__cÚ¡
 *__»¡riù 
__¤c
,

58 
__c
, 
size_t
 
__n
)

59 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

63 
__BEGIN_NAMESPACE_STD


65 *
	$mem£t
 (*
__s
, 
__c
, 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1));

68 
	$memcmp
 (
__cÚ¡
 *
__s1
, __cÚ¡ *
__s2
, 
size_t
 
__n
)

69 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

72 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


75 *
	`memchr
 (*
__s
, 
__c
, 
size_t
 
__n
)

76 
__THROW
 
	`__asm
 ("memchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

77 
__cÚ¡
 *
	`memchr
 (__cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
)

78 
__THROW
 
	`__asm
 ("memchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

80 #ifdeà
__OPTIMIZE__


81 
__ex‹º_®ways_šlše
 *

82 
	`memchr
 (*
__s
, 
__c
, 
size_t
 
__n
è
__THROW


84  
	`__butš_memchr
 (
__s
, 
__c
, 
__n
);

87 
__ex‹º_®ways_šlše
 
__cÚ¡
 *

88 
	`memchr
 (
__cÚ¡
 *
__s
, 
__c
, 
size_t
 
__n
è
__THROW


90  
	`__butš_memchr
 (
__s
, 
__c
, 
__n
);

93 
	}
}

95 *
	$memchr
 (
__cÚ¡
 *
__s
, 
__c
, 
size_t
 
__n
)

96 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

98 
__END_NAMESPACE_STD


100 #ifdeà
__USE_GNU


103 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


104 "C++" *
	$¿wmemchr
 (*
__s
, 
__c
)

105 
__THROW
 
	`__asm
 ("¿wmemchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

106 "C++" 
__cÚ¡
 *
	$¿wmemchr
 (
__cÚ¡
 *
__s
, 
__c
)

107 
__THROW
 
	`__asm
 ("¿wmemchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

109 *
	$¿wmemchr
 (
__cÚ¡
 *
__s
, 
__c
)

110 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

114 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


115 "C++" *
	$memrchr
 (*
__s
, 
__c
, 
size_t
 
__n
)

116 
__THROW
 
	`__asm
 ("memrchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

117 "C++" 
__cÚ¡
 *
	$memrchr
 (
__cÚ¡
 *
__s
, 
__c
, 
size_t
 
__n
)

118 
__THROW
 
	`__asm
 ("memrchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

120 *
	$memrchr
 (
__cÚ¡
 *
__s
, 
__c
, 
size_t
 
__n
)

121 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

126 
__BEGIN_NAMESPACE_STD


128 *
	$¡rıy
 (*
__»¡riù
 
__de¡
, 
__cÚ¡
 *__»¡riù 
__¤c
)

129 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

131 *
	$¡ºıy
 (*
__»¡riù
 
__de¡
,

132 
__cÚ¡
 *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

133 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

136 *
	$¡rÿt
 (*
__»¡riù
 
__de¡
, 
__cÚ¡
 *__»¡riù 
__¤c
)

137 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

139 *
	$¡ºÿt
 (*
__»¡riù
 
__de¡
, 
__cÚ¡
 *__»¡riù 
__¤c
,

140 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

143 
	$¡rcmp
 (
__cÚ¡
 *
__s1
, __cÚ¡ *
__s2
)

144 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

146 
	$¡ºcmp
 (
__cÚ¡
 *
__s1
, __cÚ¡ *
__s2
, 
size_t
 
__n
)

147 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

150 
	$¡rcŞl
 (
__cÚ¡
 *
__s1
, __cÚ¡ *
__s2
)

151 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

153 
size_t
 
	$¡rxäm
 (*
__»¡riù
 
__de¡
,

154 
__cÚ¡
 *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

155 
__THROW
 
	`__nÚnuÎ
 ((2));

156 
__END_NAMESPACE_STD


158 #ifdeà
__USE_XOPEN2K8


162 
	~<xloÿË.h
>

165 
	$¡rcŞl_l
 (
__cÚ¡
 *
__s1
, __cÚ¡ *
__s2
, 
__loÿË_t
 
__l
)

166 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2, 3));

168 
size_t
 
	$¡rxäm_l
 (*
__de¡
, 
__cÚ¡
 *
__¤c
, 
size_t
 
__n
,

169 
__loÿË_t
 
__l
è
__THROW
 
	`__nÚnuÎ
 ((2, 4));

172 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED
 \

173 || 
defšed
 
__USE_XOPEN2K8


175 *
	$¡rdup
 (
__cÚ¡
 *
__s
)

176 
__THROW
 
__©Œibu‹_m®loc__
 
	`__nÚnuÎ
 ((1));

182 #ià
defšed
 
__USE_XOPEN2K8


183 *
	$¡ºdup
 (
__cÚ¡
 *
__¡ršg
, 
size_t
 
__n
)

184 
__THROW
 
__©Œibu‹_m®loc__
 
	`__nÚnuÎ
 ((1));

187 #ià
defšed
 
__USE_GNU
 && defšed 
__GNUC__


189 
	#¡rdu·
(
s
) \

190 (
__ex‹nsiÚ__
 \

192 
__cÚ¡
 *
__Şd
 = (
s
); \

193 
size_t
 
__Ën
 = 
	`¡¾’
 (
__Şd
) + 1; \

194 *
__Ãw
 = (*è
	`__butš_®loÿ
 (
__Ën
); \

195 (*è
	`memıy
 (
__Ãw
, 
__Şd
, 
__Ën
); \

196 
	}
}))

	)

199 
	#¡ºdu·
(
s
, 
n
) \

200 (
__ex‹nsiÚ__
 \

202 
__cÚ¡
 *
__Şd
 = (
s
); \

203 
size_t
 
__Ën
 = 
	`¡ºËn
 (
__Şd
, (
n
)); \

204 *
__Ãw
 = (*è
	`__butš_®loÿ
 (
__Ën
 + 1); \

205 
__Ãw
[
__Ën
] = '\0'; \

206 (*è
	`memıy
 (
__Ãw
, 
__Şd
, 
__Ën
); \

207 }))

	)

210 
	g__BEGIN_NAMESPACE_STD


212 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


215 *
¡rchr
 (*
__s
, 
__c
)

216 
__THROW
 
__asm
 ("¡rchr"è
__©Œibu‹_pu»__
 
__nÚnuÎ
 ((1));

217 
__cÚ¡
 *
¡rchr
 (__cÚ¡ *
__s
, 
__c
)

218 
__THROW
 
__asm
 ("¡rchr"è
__©Œibu‹_pu»__
 
__nÚnuÎ
 ((1));

220 #ifdeà
__OPTIMIZE__


221 
__ex‹º_®ways_šlše
 *

222 
¡rchr
 (*
__s
, 
__c
è
	g__THROW


224  
__butš_¡rchr
 (
__s
, 
__c
);

227 
__ex‹º_®ways_šlše
 
__cÚ¡
 *

228 
¡rchr
 (
__cÚ¡
 *
__s
, 
__c
è
	g__THROW


230  
__butš_¡rchr
 (
__s
, 
__c
);

235 *
	$¡rchr
 (
__cÚ¡
 *
__s
, 
__c
)

236 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

239 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


242 *
	`¡¼chr
 (*
__s
, 
__c
)

243 
__THROW
 
	`__asm
 ("¡¼chr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

244 
__cÚ¡
 *
	`¡¼chr
 (__cÚ¡ *
__s
, 
__c
)

245 
__THROW
 
	`__asm
 ("¡¼chr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

247 #ifdeà
__OPTIMIZE__


248 
__ex‹º_®ways_šlše
 *

249 
	`¡¼chr
 (*
__s
, 
__c
è
__THROW


251  
	`__butš_¡¼chr
 (
__s
, 
__c
);

254 
__ex‹º_®ways_šlše
 
__cÚ¡
 *

255 
	`¡¼chr
 (
__cÚ¡
 *
__s
, 
__c
è
__THROW


257  
	`__butš_¡¼chr
 (
__s
, 
__c
);

260 
	}
}

262 *
	$¡¼chr
 (
__cÚ¡
 *
__s
, 
__c
)

263 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

265 
__END_NAMESPACE_STD


267 #ifdeà
__USE_GNU


270 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


271 "C++" *
	$¡rchºul
 (*
__s
, 
__c
)

272 
__THROW
 
	`__asm
 ("¡rchºul"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

273 "C++" 
__cÚ¡
 *
	$¡rchºul
 (
__cÚ¡
 *
__s
, 
__c
)

274 
__THROW
 
	`__asm
 ("¡rchºul"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

276 *
	$¡rchºul
 (
__cÚ¡
 *
__s
, 
__c
)

277 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

281 
__BEGIN_NAMESPACE_STD


284 
size_t
 
	$¡rc¥n
 (
__cÚ¡
 *
__s
, __cÚ¡ *
__»jeù
)

285 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

288 
size_t
 
	$¡r¥n
 (
__cÚ¡
 *
__s
, __cÚ¡ *
__acû±
)

289 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

291 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


294 *
	`¡½brk
 (*
__s
, 
__cÚ¡
 *
__acû±
)

295 
__THROW
 
	`__asm
 ("¡½brk"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

296 
__cÚ¡
 *
	`¡½brk
 (__cÚ¡ *
__s
, __cÚ¡ *
__acû±
)

297 
__THROW
 
	`__asm
 ("¡½brk"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

299 #ifdeà
__OPTIMIZE__


300 
__ex‹º_®ways_šlše
 *

301 
	`¡½brk
 (*
__s
, 
__cÚ¡
 *
__acû±
è
__THROW


303  
	`__butš_¡½brk
 (
__s
, 
__acû±
);

306 
__ex‹º_®ways_šlše
 
__cÚ¡
 *

307 
	`¡½brk
 (
__cÚ¡
 *
__s
, __cÚ¡ *
__acû±
è
__THROW


309  
	`__butš_¡½brk
 (
__s
, 
__acû±
);

312 
	}
}

314 *
	$¡½brk
 (
__cÚ¡
 *
__s
, __cÚ¡ *
__acû±
)

315 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

318 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


321 *
	`¡r¡r
 (*
__hay¡ack
, 
__cÚ¡
 *
__ÃedË
)

322 
__THROW
 
	`__asm
 ("¡r¡r"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

323 
__cÚ¡
 *
	`¡r¡r
 (__cÚ¡ *
__hay¡ack
,

324 
__cÚ¡
 *
__ÃedË
)

325 
__THROW
 
	`__asm
 ("¡r¡r"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

327 #ifdeà
__OPTIMIZE__


328 
__ex‹º_®ways_šlše
 *

329 
	`¡r¡r
 (*
__hay¡ack
, 
__cÚ¡
 *
__ÃedË
è
__THROW


331  
	`__butš_¡r¡r
 (
__hay¡ack
, 
__ÃedË
);

334 
__ex‹º_®ways_šlše
 
__cÚ¡
 *

335 
	`¡r¡r
 (
__cÚ¡
 *
__hay¡ack
, __cÚ¡ *
__ÃedË
è
__THROW


337  
	`__butš_¡r¡r
 (
__hay¡ack
, 
__ÃedË
);

340 
	}
}

342 *
	$¡r¡r
 (
__cÚ¡
 *
__hay¡ack
, __cÚ¡ *
__ÃedË
)

343 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

348 *
	$¡¹ok
 (*
__»¡riù
 
__s
, 
__cÚ¡
 *__»¡riù 
__d–im
)

349 
__THROW
 
	`__nÚnuÎ
 ((2));

350 
__END_NAMESPACE_STD


354 *
	$__¡¹ok_r
 (*
__»¡riù
 
__s
,

355 
__cÚ¡
 *
__»¡riù
 
__d–im
,

356 **
__»¡riù
 
__§ve_±r
)

357 
__THROW
 
	`__nÚnuÎ
 ((2, 3));

358 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


359 *
	$¡¹ok_r
 (*
__»¡riù
 
__s
, 
__cÚ¡
 *__»¡riù 
__d–im
,

360 **
__»¡riù
 
__§ve_±r
)

361 
__THROW
 
	`__nÚnuÎ
 ((2, 3));

364 #ifdeà
__USE_GNU


366 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


367 "C++" *
	$¡rÿ£¡r
 (*
__hay¡ack
, 
__cÚ¡
 *
__ÃedË
)

368 
__THROW
 
	`__asm
 ("¡rÿ£¡r"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

369 "C++" 
__cÚ¡
 *
	$¡rÿ£¡r
 (
__cÚ¡
 *
__hay¡ack
,

370 
__cÚ¡
 *
__ÃedË
)

371 
__THROW
 
	`__asm
 ("¡rÿ£¡r"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

373 *
	$¡rÿ£¡r
 (
__cÚ¡
 *
__hay¡ack
, __cÚ¡ *
__ÃedË
)

374 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

378 #ifdeà
__USE_GNU


382 *
	$memmem
 (
__cÚ¡
 *
__hay¡ack
, 
size_t
 
__hay¡ackËn
,

383 
__cÚ¡
 *
__ÃedË
, 
size_t
 
__ÃedËËn
)

384 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 3));

388 *
	$__mempıy
 (*
__»¡riù
 
__de¡
,

389 
__cÚ¡
 *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

390 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

391 *
	$mempıy
 (*
__»¡riù
 
__de¡
,

392 
__cÚ¡
 *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

393 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

397 
__BEGIN_NAMESPACE_STD


399 
size_t
 
	$¡¾’
 (
__cÚ¡
 *
__s
)

400 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

401 
__END_NAMESPACE_STD


403 #ifdef 
__USE_XOPEN2K8


406 
size_t
 
	$¡ºËn
 (
__cÚ¡
 *
__¡ršg
, 
size_t
 
__maxËn
)

407 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

411 
__BEGIN_NAMESPACE_STD


413 *
	$¡»¼Ü
 (
__”ºum
è
__THROW
;

414 
__END_NAMESPACE_STD


415 #ià
defšed
 
__USE_XOPEN2K
 || defšed 
__USE_MISC


423 #ià
defšed
 
__USE_XOPEN2K
 && !defšed 
__USE_GNU


426 #ifdeà
__REDIRECT_NTH


427 
	`__REDIRECT_NTH
 (
¡»¼Ü_r
,

428 (
__”ºum
, *
__buf
, 
size_t
 
__buæ’
),

429 
__xpg_¡»¼Ü_r
è
	`__nÚnuÎ
 ((2));

431 
	$__xpg_¡»¼Ü_r
 (
__”ºum
, *
__buf
, 
size_t
 
__buæ’
)

432 
__THROW
 
	`__nÚnuÎ
 ((2));

433 
	#¡»¼Ü_r
 
__xpg_¡»¼Ü_r


	)

438 *
	$¡»¼Ü_r
 (
__”ºum
, *
__buf
, 
size_t
 
__buæ’
)

439 
__THROW
 
	`__nÚnuÎ
 ((2));

443 #ifdeà
__USE_XOPEN2K8


445 *
	$¡»¼Ü_l
 (
__”ºum
, 
__loÿË_t
 
__l
è
__THROW
;

451 
	$__bz”o
 (*
__s
, 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1));

453 #ifdeà
__USE_BSD


455 
	$bcİy
 (
__cÚ¡
 *
__¤c
, *
__de¡
, 
size_t
 
__n
)

456 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

459 
	$bz”o
 (*
__s
, 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1));

462 
	$bcmp
 (
__cÚ¡
 *
__s1
, __cÚ¡ *
__s2
, 
size_t
 
__n
)

463 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

466 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


469 *
	`šdex
 (*
__s
, 
__c
)

470 
__THROW
 
	`__asm
 ("šdex"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

471 
__cÚ¡
 *
	`šdex
 (__cÚ¡ *
__s
, 
__c
)

472 
__THROW
 
	`__asm
 ("šdex"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

474 #ià
defšed
 
__OPTIMIZE__
 && !defšed 
__CORRECT_ISO_CPP_STRINGS_H_PROTO


475 
__ex‹º_®ways_šlše
 *

476 
	`šdex
 (*
__s
, 
__c
è
__THROW


478  
	`__butš_šdex
 (
__s
, 
__c
);

481 
__ex‹º_®ways_šlše
 
__cÚ¡
 *

482 
	`šdex
 (
__cÚ¡
 *
__s
, 
__c
è
__THROW


484  
	`__butš_šdex
 (
__s
, 
__c
);

487 
	}
}

489 *
	$šdex
 (
__cÚ¡
 *
__s
, 
__c
)

490 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

494 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


497 *
	`ršdex
 (*
__s
, 
__c
)

498 
__THROW
 
	`__asm
 ("ršdex"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

499 
__cÚ¡
 *
	`ršdex
 (__cÚ¡ *
__s
, 
__c
)

500 
__THROW
 
	`__asm
 ("ršdex"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

502 #ià
defšed
 
__OPTIMIZE__
 && !defšed 
__CORRECT_ISO_CPP_STRINGS_H_PROTO


503 
__ex‹º_®ways_šlše
 *

504 
	`ršdex
 (*
__s
, 
__c
è
__THROW


506  
	`__butš_ršdex
 (
__s
, 
__c
);

509 
__ex‹º_®ways_šlše
 
__cÚ¡
 *

510 
	`ršdex
 (
__cÚ¡
 *
__s
, 
__c
è
__THROW


512  
	`__butš_ršdex
 (
__s
, 
__c
);

515 
	}
}

517 *
	$ršdex
 (
__cÚ¡
 *
__s
, 
__c
)

518 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

523 
	$ffs
 (
__i
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

527 #ifdef 
__USE_GNU


528 
	$ff¦
 (
__l
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

529 #ifdeà
__GNUC__


530 
__ex‹nsiÚ__
 
	$ff¦l
 (
__Î
)

531 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

536 
	$¡rÿ£cmp
 (
__cÚ¡
 *
__s1
, __cÚ¡ *
__s2
)

537 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

540 
	$¡ºÿ£cmp
 (
__cÚ¡
 *
__s1
, __cÚ¡ *
__s2
, 
size_t
 
__n
)

541 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

544 #ifdef 
__USE_GNU


547 
	$¡rÿ£cmp_l
 (
__cÚ¡
 *
__s1
, __cÚ¡ *
__s2
,

548 
__loÿË_t
 
__loc
)

549 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2, 3));

551 
	$¡ºÿ£cmp_l
 (
__cÚ¡
 *
__s1
, __cÚ¡ *
__s2
,

552 
size_t
 
__n
, 
__loÿË_t
 
__loc
)

553 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2, 4));

556 #ifdef 
__USE_BSD


559 *
	$¡r£p
 (**
__»¡riù
 
__¡ršgp
,

560 
__cÚ¡
 *
__»¡riù
 
__d–im
)

561 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

564 #ifdef 
__USE_XOPEN2K8


566 *
	$¡rsigÇl
 (
__sig
è
__THROW
;

569 *
	$__¡pıy
 (*
__»¡riù
 
__de¡
, 
__cÚ¡
 *__»¡riù 
__¤c
)

570 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

571 *
	$¡pıy
 (*
__»¡riù
 
__de¡
, 
__cÚ¡
 *__»¡riù 
__¤c
)

572 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

576 *
	$__¡²ıy
 (*
__»¡riù
 
__de¡
,

577 
__cÚ¡
 *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

578 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

579 *
	$¡²ıy
 (*
__»¡riù
 
__de¡
,

580 
__cÚ¡
 *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

581 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

584 #ifdef 
__USE_GNU


586 
	$¡rv”scmp
 (
__cÚ¡
 *
__s1
, __cÚ¡ *
__s2
)

587 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

590 *
	$¡räy
 (*
__¡ršg
è
__THROW
 
	`__nÚnuÎ
 ((1));

593 *
	$memäob
 (*
__s
, 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1));

595 #iâdeà
ba£Çme


600 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


601 "C++" *
	$ba£Çme
 (*
__f’ame
)

602 
__THROW
 
	`__asm
 ("ba£Çme"è
	`__nÚnuÎ
 ((1));

603 "C++" 
__cÚ¡
 *
	$ba£Çme
 (
__cÚ¡
 *
__f’ame
)

604 
__THROW
 
	`__asm
 ("ba£Çme"è
	`__nÚnuÎ
 ((1));

606 *
	$ba£Çme
 (
__cÚ¡
 *
__f’ame
è
__THROW
 
	`__nÚnuÎ
 ((1));

612 #ià
defšed
 
__GNUC__
 && __GNUC__ >= 2

613 #ià
defšed
 
__OPTIMIZE__
 && !defšed 
__OPTIMIZE_SIZE__
 \

614 && !
defšed
 
__NO_INLINE__
 && !defšed 
__ılu¥lus


634 
	~<b™s/¡ršg.h
>

637 
	~<b™s/¡ršg2.h
>

640 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__ex‹º_®ways_šlše


642 
	~<b™s/¡ršg3.h
>

646 
__END_DECLS


	@/usr/include/alloca.h

19 #iâdef 
_ALLOCA_H


20 
	#_ALLOCA_H
 1

	)

22 
	~<ã©u»s.h
>

24 
	#__Ãed_size_t


	)

25 
	~<¡ddef.h
>

27 
	g__BEGIN_DECLS


30 #undeà
®loÿ


33 *
	$®loÿ
 (
size_t
 
__size
è
__THROW
;

35 #ifdef 
__GNUC__


36 
	#®loÿ
(
size
è
	`__butš_®loÿ
 (size)

	)

39 
__END_DECLS


	@/usr/include/features.h

20 #iâdef 
_FEATURES_H


21 
	#_FEATURES_H
 1

	)

98 #undeà
__USE_ISOC99


99 #undeà
__USE_ISOC95


100 #undeà
__USE_POSIX


101 #undeà
__USE_POSIX2


102 #undeà
__USE_POSIX199309


103 #undeà
__USE_POSIX199506


104 #undeà
__USE_XOPEN


105 #undeà
__USE_XOPEN_EXTENDED


106 #undeà
__USE_UNIX98


107 #undeà
__USE_XOPEN2K


108 #undeà
__USE_XOPEN2KXSI


109 #undeà
__USE_XOPEN2K8


110 #undeà
__USE_XOPEN2K8XSI


111 #undeà
__USE_LARGEFILE


112 #undeà
__USE_LARGEFILE64


113 #undeà
__USE_FILE_OFFSET64


114 #undeà
__USE_BSD


115 #undeà
__USE_SVID


116 #undeà
__USE_MISC


117 #undeà
__USE_ATFILE


118 #undeà
__USE_GNU


119 #undeà
__USE_REENTRANT


120 #undeà
__USE_FORTIFY_LEVEL


121 #undeà
__FAVOR_BSD


122 #undeà
__KERNEL_STRICT_NAMES


126 #iâdeà
_LOOSE_KERNEL_NAMES


127 
	#__KERNEL_STRICT_NAMES


	)

131 
	#__USE_ANSI
 1

	)

140 #ià
defšed
 
__GNUC__
 && defšed 
__GNUC_MINOR__


141 
	#__GNUC_PREREQ
(
maj
, 
mš
) \

142 ((
__GNUC__
 << 16è+ 
__GNUC_MINOR__
 >ğ((
maj
è<< 16è+ (
mš
))

	)

144 
	#__GNUC_PREREQ
(
maj
, 
mš
è0

	)

149 #ià
defšed
 
_BSD_SOURCE
 && \

150 !(
defšed
 
	g_POSIX_SOURCE
 || defšed 
	g_POSIX_C_SOURCE
 || \

151 
defšed
 
	g_XOPEN_SOURCE
 || defšed 
	g_GNU_SOURCE
 || defšed 
	g_SVID_SOURCE
)

152 
	#__FAVOR_BSD
 1

	)

156 #ifdeà
_GNU_SOURCE


157 #undeà
_ISOC95_SOURCE


158 
	#_ISOC95_SOURCE
 1

	)

159 #undeà
_ISOC99_SOURCE


160 
	#_ISOC99_SOURCE
 1

	)

161 #undeà
_POSIX_SOURCE


162 
	#_POSIX_SOURCE
 1

	)

163 #undeà
_POSIX_C_SOURCE


164 
	#_POSIX_C_SOURCE
 200809L

	)

165 #undeà
_XOPEN_SOURCE


166 
	#_XOPEN_SOURCE
 700

	)

167 #undeà
_XOPEN_SOURCE_EXTENDED


168 
	#_XOPEN_SOURCE_EXTENDED
 1

	)

169 #undeà
_LARGEFILE64_SOURCE


170 
	#_LARGEFILE64_SOURCE
 1

	)

171 #undeà
_BSD_SOURCE


172 
	#_BSD_SOURCE
 1

	)

173 #undeà
_SVID_SOURCE


174 
	#_SVID_SOURCE
 1

	)

175 #undeà
_ATFILE_SOURCE


176 
	#_ATFILE_SOURCE
 1

	)

181 #ià(!
defšed
 
__STRICT_ANSI__
 && !defšed 
_ISOC99_SOURCE
 && \

182 !
defšed
 
	g_POSIX_SOURCE
 && !defšed 
	g_POSIX_C_SOURCE
 && \

183 !
defšed
 
	g_XOPEN_SOURCE
 && !defšed 
	g_BSD_SOURCE
 && !defšed 
	g_SVID_SOURCE
)

184 
	#_BSD_SOURCE
 1

	)

185 
	#_SVID_SOURCE
 1

	)

192 #ià(
defšed
 
_ISOC99_SOURCE
 || defšed 
_ISOC9X_SOURCE
 \

193 || (
defšed
 
	g__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L))

194 
	#__USE_ISOC99
 1

	)

198 #ià(
defšed
 
_ISOC99_SOURCE
 || defšed 
_ISOC9X_SOURCE
 \

199 || (
defšed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199409L))

200 
	#__USE_ISOC95
 1

	)

205 #ià((!
defšed
 
__STRICT_ANSI__
 || (
_XOPEN_SOURCE
 - 0) >= 500) && \

206 !
defšed
 
_POSIX_SOURCE
 && !defšed 
_POSIX_C_SOURCE
)

207 
	#_POSIX_SOURCE
 1

	)

208 #ià
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 500

209 
	#_POSIX_C_SOURCE
 2

	)

210 #–ià
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 600

211 
	#_POSIX_C_SOURCE
 199506L

	)

212 #–ià
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 700

213 
	#_POSIX_C_SOURCE
 200112L

	)

215 
	#_POSIX_C_SOURCE
 200809L

	)

217 
	#__USE_POSIX_IMPLICITLY
 1

	)

220 #ià
defšed
 
_POSIX_SOURCE
 || 
_POSIX_C_SOURCE
 >ğ1 || defšed 
_XOPEN_SOURCE


221 
	#__USE_POSIX
 1

	)

224 #ià
defšed
 
_POSIX_C_SOURCE
 && _POSIX_C_SOURCE >ğ2 || defšed 
_XOPEN_SOURCE


225 
	#__USE_POSIX2
 1

	)

228 #ià(
_POSIX_C_SOURCE
 - 0) >= 199309L

229 
	#__USE_POSIX199309
 1

	)

232 #ià(
_POSIX_C_SOURCE
 - 0) >= 199506L

233 
	#__USE_POSIX199506
 1

	)

236 #ià(
_POSIX_C_SOURCE
 - 0) >= 200112L

237 
	#__USE_XOPEN2K
 1

	)

238 #undeà
__USE_ISOC95


239 
	#__USE_ISOC95
 1

	)

240 #undeà
__USE_ISOC99


241 
	#__USE_ISOC99
 1

	)

244 #ià(
_POSIX_C_SOURCE
 - 0) >= 200809L

245 
	#__USE_XOPEN2K8
 1

	)

246 #undeà
_ATFILE_SOURCE


247 
	#_ATFILE_SOURCE
 1

	)

250 #ifdef 
_XOPEN_SOURCE


251 
	#__USE_XOPEN
 1

	)

252 #ià(
_XOPEN_SOURCE
 - 0) >= 500

253 
	#__USE_XOPEN_EXTENDED
 1

	)

254 
	#__USE_UNIX98
 1

	)

255 #undeà
_LARGEFILE_SOURCE


256 
	#_LARGEFILE_SOURCE
 1

	)

257 #ià(
_XOPEN_SOURCE
 - 0) >= 600

258 #ià(
_XOPEN_SOURCE
 - 0) >= 700

259 
	#__USE_XOPEN2K8
 1

	)

260 
	#__USE_XOPEN2K8XSI
 1

	)

262 
	#__USE_XOPEN2K
 1

	)

263 
	#__USE_XOPEN2KXSI
 1

	)

264 #undeà
__USE_ISOC95


265 
	#__USE_ISOC95
 1

	)

266 #undeà
__USE_ISOC99


267 
	#__USE_ISOC99
 1

	)

270 #ifdeà
_XOPEN_SOURCE_EXTENDED


271 
	#__USE_XOPEN_EXTENDED
 1

	)

276 #ifdeà
_LARGEFILE_SOURCE


277 
	#__USE_LARGEFILE
 1

	)

280 #ifdeà
_LARGEFILE64_SOURCE


281 
	#__USE_LARGEFILE64
 1

	)

284 #ià
defšed
 
_FILE_OFFSET_BITS
 && _FILE_OFFSET_BITS == 64

285 
	#__USE_FILE_OFFSET64
 1

	)

288 #ià
defšed
 
_BSD_SOURCE
 || defšed 
_SVID_SOURCE


289 
	#__USE_MISC
 1

	)

292 #ifdef 
_BSD_SOURCE


293 
	#__USE_BSD
 1

	)

296 #ifdef 
_SVID_SOURCE


297 
	#__USE_SVID
 1

	)

300 #ifdef 
_ATFILE_SOURCE


301 
	#__USE_ATFILE
 1

	)

304 #ifdef 
_GNU_SOURCE


305 
	#__USE_GNU
 1

	)

308 #ià
defšed
 
_REENTRANT
 || defšed 
_THREAD_SAFE


309 
	#__USE_REENTRANT
 1

	)

312 #ià
defšed
 
_FORTIFY_SOURCE
 && _FORTIFY_SOURCE > 0 \

313 && 
__GNUC_PREREQ
 (4, 1è&& 
defšed
 
	g__OPTIMIZE__
 && __OPTIMIZE__ > 0

314 #ià
_FORTIFY_SOURCE
 > 1

315 
	#__USE_FORTIFY_LEVEL
 2

	)

317 
	#__USE_FORTIFY_LEVEL
 1

	)

320 
	#__USE_FORTIFY_LEVEL
 0

	)

324 
	~<b™s/´edefs.h
>

327 
	#__STDC_ISO_10646__
 200009L

	)

335 #undeà
__GNU_LIBRARY__


336 
	#__GNU_LIBRARY__
 6

	)

340 
	#__GLIBC__
 2

	)

341 
	#__GLIBC_MINOR__
 15

	)

343 
	#__GLIBC_PREREQ
(
maj
, 
mš
) \

344 ((
__GLIBC__
 << 16è+ 
__GLIBC_MINOR__
 >ğ((
maj
è<< 16è+ (
mš
))

	)

347 #ià
defšed
 
__GNUC__
 \

348 || (
defšed
 
	g__PGI
 && defšed 
	g__i386__
 ) \

349 || (
defšed
 
	g__INTEL_COMPILER
 && (defšed 
	g__i386__
 || defšed 
	g__Ÿ64__
)) \

350 || (
defšed
 
	g__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L)

351 
	#__GLIBC_HAVE_LONG_LONG
 1

	)

355 #iâdeà
__ASSEMBLER__


356 #iâdeà
_SYS_CDEFS_H


357 
	~<sys/cdefs.h
>

362 #ià
defšed
 
__USE_FILE_OFFSET64
 && !defšed 
__REDIRECT


363 
	#__USE_LARGEFILE
 1

	)

364 
	#__USE_LARGEFILE64
 1

	)

370 #ià
__GNUC_PREREQ
 (2, 7è&& 
defšed
 
__OPTIMIZE__
 \

371 && !
defšed
 
	g__OPTIMIZE_SIZE__
 && !defšed 
	g__NO_INLINE__
 \

372 && 
defšed
 
	g__ex‹º_šlše


373 
	#__USE_EXTERN_INLINES
 1

	)

378 #ià
__GNUC_PREREQ
 (2, 7è&& 
defšed
 
__OPTIMIZE__
 \

379 && (
defšed
 
	g_LIBC
 || !defšed 
	g__OPTIMIZE_SIZE__
è&& !defšed 
	g__NO_INLINE__
 \

380 && 
defšed
 
	g__ex‹º_šlše


381 
	#__USE_EXTERN_INLINES_IN_LIBC
 1

	)

389 
	~<gnu/¡ubs.h
>

	@/usr/include/getopt.h

21 #iâdeà
_GETOPT_H


23 #iâdeà
__Ãed_g‘İt


24 
	#_GETOPT_H
 1

	)

34 #ià!
defšed
 
__GNU_LIBRARY__


35 
	~<ùy³.h
>

38 #iâdeà
__THROW


39 #iâdeà
__GNUC_PREREQ


40 
	#__GNUC_PREREQ
(
maj
, 
mš
è(0)

	)

42 #ià
defšed
 
__ılu¥lus
 && 
__GNUC_PREREQ
 (2,8)

43 
	#__THROW
 
	`throw
 ()

	)

45 
	#__THROW


	)

49 #ifdef 
__ılu¥lus


59 *
İrg
;

73 
İtšd
;

78 
İ‹¼
;

82 
İtİt
;

84 #iâdeà
__Ãed_g‘İt


106 
	sİtiÚ


108 cÚ¡ *
	gÇme
;

111 
	ghas_¬g
;

112 *
	gæag
;

113 
	gv®
;

118 
	#no_¬gum’t
 0

	)

119 
	#»quœed_¬gum’t
 1

	)

120 
	#İtiÚ®_¬gum’t
 2

	)

148 #ifdeà
__GNU_LIBRARY__


152 
g‘İt
 (
___¬gc
, *cÚ¡ *
___¬gv
, cÚ¡ *
__shÜtİts
)

153 
__THROW
;

155 #ià
defšed
 
__Ãed_g‘İt
 && defšed 
__USE_POSIX2
 \

156 && !
defšed
 
	g__USE_POSIX_IMPLICITLY
 && !defšed 
	g__USE_GNU


160 #ifdeà
__REDIRECT


161 
__REDIRECT_NTH
 (
g‘İt
, (
___¬gc
, *cÚ¡ *
___¬gv
,

162 cÚ¡ *
__shÜtİts
),

163 
__posix_g‘İt
);

165 
__posix_g‘İt
 (
___¬gc
, *cÚ¡ *
___¬gv
,

166 cÚ¡ *
__shÜtİts
è
__THROW
;

167 
	#g‘İt
 
__posix_g‘İt


	)

171 
g‘İt
 ();

174 #iâdeà
__Ãed_g‘İt


175 
g‘İt_lÚg
 (
___¬gc
, *cÚ¡ *
___¬gv
,

176 cÚ¡ *
__shÜtİts
,

177 cÚ¡ 
İtiÚ
 *
__lÚgİts
, *
__lÚgšd
)

178 
__THROW
;

179 
g‘İt_lÚg_Úly
 (
___¬gc
, *cÚ¡ *
___¬gv
,

180 cÚ¡ *
__shÜtİts
,

181 cÚ¡ 
İtiÚ
 *
__lÚgİts
, *
__lÚgšd
)

182 
__THROW
;

186 #ifdef 
__ılu¥lus


191 #undeà
__Ãed_g‘İt


	@/usr/include/libio.h

29 #iâdeà
_IO_STDIO_H


30 
	#_IO_STDIO_H


	)

32 
	~<_G_cÚfig.h
>

34 
	#_IO_pos_t
 
_G_åos_t


	)

35 
	#_IO_åos_t
 
_G_åos_t


	)

36 
	#_IO_åos64_t
 
_G_åos64_t


	)

37 
	#_IO_size_t
 
_G_size_t


	)

38 
	#_IO_ssize_t
 
_G_ssize_t


	)

39 
	#_IO_off_t
 
_G_off_t


	)

40 
	#_IO_off64_t
 
_G_off64_t


	)

41 
	#_IO_pid_t
 
_G_pid_t


	)

42 
	#_IO_uid_t
 
_G_uid_t


	)

43 
	#_IO_icÚv_t
 
_G_icÚv_t


	)

44 
	#_IO_HAVE_SYS_WAIT
 
_G_HAVE_SYS_WAIT


	)

45 
	#_IO_HAVE_ST_BLKSIZE
 
_G_HAVE_ST_BLKSIZE


	)

46 
	#_IO_BUFSIZ
 
_G_BUFSIZ


	)

47 
	#_IO_va_li¡
 
_G_va_li¡


	)

48 
	#_IO_wšt_t
 
_G_wšt_t


	)

50 #ifdeà
_G_NEED_STDARG_H


52 
	#__Ãed___va_li¡


	)

53 
	~<¡d¬g.h
>

54 #ifdeà
__GNUC_VA_LIST


55 #undeà
_IO_va_li¡


56 
	#_IO_va_li¡
 
__gnuc_va_li¡


	)

60 #iâdeà
__P


61 #ià
_G_HAVE_SYS_CDEFS


62 
	~<sys/cdefs.h
>

64 #ifdeà
__STDC__


65 
	#__P
(
p
è
	)
p

66 
	#__PMT
(
p
è
	)
p

68 
	#__P
(
p
è()

	)

69 
	#__PMT
(
p
è()

	)

75 #iâdeà
_PARAMS


76 
	#_PARAMS
(
´Ùos
è
	`__P
ÕrÙos)

	)

79 #iâdeà
__STDC__


81 cÚ¡

	)

84 
	#_IO_UNIFIED_JUMPTABLES
 1

	)

85 #iâdeà
_G_HAVE_PRINTF_FP


86 
	#_IO_USE_DTOA
 1

	)

89 #iâdeà
EOF


90 
	#EOF
 (-1)

	)

92 #iâdeà
NULL


93 #ià
defšed
 
__GNUG__
 && \

94 (
	g__GNUC__
 > 2 || (__GNUC__ =ğ2 && 
__GNUC_MINOR__
 >= 8))

95 
	#NULL
 (
__nuÎ
)

	)

97 #ià!
defšed
(
__ılu¥lus
)

98 
	#NULL
 ((*)0)

	)

100 
	#NULL
 (0)

	)

105 
	#_IOS_INPUT
 1

	)

106 
	#_IOS_OUTPUT
 2

	)

107 
	#_IOS_ATEND
 4

	)

108 
	#_IOS_APPEND
 8

	)

109 
	#_IOS_TRUNC
 16

	)

110 
	#_IOS_NOCREATE
 32

	)

111 
	#_IOS_NOREPLACE
 64

	)

112 
	#_IOS_BIN
 128

	)

120 
	#_IO_MAGIC
 0xFBAD0000

	)

121 
	#_OLD_STDIO_MAGIC
 0xFABC0000

	)

122 
	#_IO_MAGIC_MASK
 0xFFFF0000

	)

123 
	#_IO_USER_BUF
 1

	)

124 
	#_IO_UNBUFFERED
 2

	)

125 
	#_IO_NO_READS
 4

	)

126 
	#_IO_NO_WRITES
 8

	)

127 
	#_IO_EOF_SEEN
 0x10

	)

128 
	#_IO_ERR_SEEN
 0x20

	)

129 
	#_IO_DELETE_DONT_CLOSE
 0x40

	)

130 
	#_IO_LINKED
 0x80

	)

131 
	#_IO_IN_BACKUP
 0x100

	)

132 
	#_IO_LINE_BUF
 0x200

	)

133 
	#_IO_TIED_PUT_GET
 0x400

	)

134 
	#_IO_CURRENTLY_PUTTING
 0x800

	)

135 
	#_IO_IS_APPENDING
 0x1000

	)

136 
	#_IO_IS_FILEBUF
 0x2000

	)

137 
	#_IO_BAD_SEEN
 0x4000

	)

138 
	#_IO_USER_LOCK
 0x8000

	)

140 
	#_IO_FLAGS2_MMAP
 1

	)

141 
	#_IO_FLAGS2_NOTCANCEL
 2

	)

142 #ifdeà
_LIBC


143 
	#_IO_FLAGS2_FORTIFY
 4

	)

145 
	#_IO_FLAGS2_USER_WBUF
 8

	)

146 #ifdeà
_LIBC


147 
	#_IO_FLAGS2_SCANF_STD
 16

	)

148 
	#_IO_FLAGS2_NOCLOSE
 32

	)

149 
	#_IO_FLAGS2_CLOEXEC
 64

	)

153 
	#_IO_SKIPWS
 01

	)

154 
	#_IO_LEFT
 02

	)

155 
	#_IO_RIGHT
 04

	)

156 
	#_IO_INTERNAL
 010

	)

157 
	#_IO_DEC
 020

	)

158 
	#_IO_OCT
 040

	)

159 
	#_IO_HEX
 0100

	)

160 
	#_IO_SHOWBASE
 0200

	)

161 
	#_IO_SHOWPOINT
 0400

	)

162 
	#_IO_UPPERCASE
 01000

	)

163 
	#_IO_SHOWPOS
 02000

	)

164 
	#_IO_SCIENTIFIC
 04000

	)

165 
	#_IO_FIXED
 010000

	)

166 
	#_IO_UNITBUF
 020000

	)

167 
	#_IO_STDIO
 040000

	)

168 
	#_IO_DONT_CLOSE
 0100000

	)

169 
	#_IO_BOOLALPHA
 0200000

	)

172 
_IO_jump_t
; 
	g_IO_FILE
;

175 #ifdeà
_IO_MTSAFE_IO


176 #ià
defšed
 
__GLIBC__
 && __GLIBC__ >= 2

177 
	~<b™s/¡dio-lock.h
>

182 
	t_IO_lock_t
;

188 
	s_IO_m¬k”
 {

189 
_IO_m¬k”
 *
	m_Ãxt
;

190 
_IO_FILE
 *
	m_sbuf
;

194 
	m_pos
;

196 
£t_¡»ampos
(
¡»ampos
 
¥
è{ 
	m_¥os
 = sp; }

197 
£t_off£t
(
off£t
è{ 
	m_pos
 = off£t; 
	m_¥os
 = (
¡»ampos
)(-2); }

198 
	mpublic
:

199 
¡»amm¬k”
(
¡»ambuf
 *
sb
);

200 ~
¡»amm¬k”
();

201 
§všg
(è{  
	m_¥os
 == -2; }

202 
d–
(
¡»amm¬k”
&);

203 
d–
();

208 
	e__codecvt_»suÉ


210 
	m__codecvt_ok
,

211 
	m__codecvt_·¹Ÿl
,

212 
	m__codecvt_”rÜ
,

213 
	m__codecvt_nocÚv


216 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


219 
	s_IO_codecvt


221 (*
	m__codecvt_de¡r
è(
	m_IO_codecvt
 *);

222 
__codecvt_»suÉ
 (*
__codecvt_do_out
è(
	m_IO_codecvt
 *,

223 
	m__mb¡©e_t
 *,

224 cÚ¡ 
	mwch¬_t
 *,

225 cÚ¡ 
	mwch¬_t
 *,

226 cÚ¡ 
	mwch¬_t
 **, *,

228 
__codecvt_»suÉ
 (*
__codecvt_do_unshiá
è(
	m_IO_codecvt
 *,

229 
	m__mb¡©e_t
 *, *,

231 
__codecvt_»suÉ
 (*
__codecvt_do_š
è(
	m_IO_codecvt
 *,

232 
	m__mb¡©e_t
 *,

234 cÚ¡ **, 
	mwch¬_t
 *,

235 
	mwch¬_t
 *, wchar_t **);

236 (*
	m__codecvt_do_’codšg
è(
	m_IO_codecvt
 *);

237 (*
	m__codecvt_do_®ways_nocÚv
è(
	m_IO_codecvt
 *);

238 (*
	m__codecvt_do_Ëngth
è(
	m_IO_codecvt
 *, 
	m__mb¡©e_t
 *,

239 cÚ¡ *, cÚ¡ *, 
	m_IO_size_t
);

240 (*
	m__codecvt_do_max_Ëngth
è(
	m_IO_codecvt
 *);

242 
_IO_icÚv_t
 
	m__cd_š
;

243 
_IO_icÚv_t
 
	m__cd_out
;

247 
	s_IO_wide_d©a


249 
wch¬_t
 *
	m_IO_»ad_±r
;

250 
wch¬_t
 *
	m_IO_»ad_’d
;

251 
wch¬_t
 *
	m_IO_»ad_ba£
;

252 
wch¬_t
 *
	m_IO_wr™e_ba£
;

253 
wch¬_t
 *
	m_IO_wr™e_±r
;

254 
wch¬_t
 *
	m_IO_wr™e_’d
;

255 
wch¬_t
 *
	m_IO_buf_ba£
;

256 
wch¬_t
 *
	m_IO_buf_’d
;

258 
wch¬_t
 *
	m_IO_§ve_ba£
;

259 
wch¬_t
 *
	m_IO_backup_ba£
;

261 
wch¬_t
 *
	m_IO_§ve_’d
;

263 
__mb¡©e_t
 
	m_IO_¡©e
;

264 
__mb¡©e_t
 
	m_IO_Ï¡_¡©e
;

265 
_IO_codecvt
 
	m_codecvt
;

267 
wch¬_t
 
	m_shÜtbuf
[1];

269 cÚ¡ 
_IO_jump_t
 *
	m_wide_vbË
;

273 
	s_IO_FILE
 {

274 
	m_æags
;

275 
	#_IO_fe_æags
 
_æags


	)

279 * 
	m_IO_»ad_±r
;

280 * 
	m_IO_»ad_’d
;

281 * 
	m_IO_»ad_ba£
;

282 * 
	m_IO_wr™e_ba£
;

283 * 
	m_IO_wr™e_±r
;

284 * 
	m_IO_wr™e_’d
;

285 * 
	m_IO_buf_ba£
;

286 * 
	m_IO_buf_’d
;

288 *
	m_IO_§ve_ba£
;

289 *
	m_IO_backup_ba£
;

290 *
	m_IO_§ve_’d
;

292 
_IO_m¬k”
 *
	m_m¬k”s
;

294 
_IO_FILE
 *
	m_chaš
;

296 
	m_f’o
;

298 
	m_blksize
;

300 
	m_æags2
;

302 
_IO_off_t
 
	m_Şd_off£t
;

304 
	#__HAVE_COLUMN


	)

306 
	m_cur_cŞumn
;

307 sigÃd 
	m_vbË_off£t
;

308 
	m_shÜtbuf
[1];

312 
_IO_lock_t
 *
	m_lock
;

313 #ifdeà
_IO_USE_OLD_IO_FILE


316 
	s_IO_FILE_com¶‘e


318 
_IO_FILE
 
	m_fe
;

320 #ià
defšed
 
_G_IO_IO_FILE_VERSION
 && _G_IO_IO_FILE_VERSION == 0x20001

321 
_IO_off64_t
 
	m_off£t
;

322 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


324 
_IO_codecvt
 *
	m_codecvt
;

325 
_IO_wide_d©a
 *
	m_wide_d©a
;

326 
_IO_FILE
 *
	m_ä“»s_li¡
;

327 *
	m_ä“»s_buf
;

328 
size_t
 
	m_ä“»s_size
;

330 *
	m__·d1
;

331 *
	m__·d2
;

332 *
	m__·d3
;

333 *
	m__·d4
;

334 
size_t
 
	m__·d5
;

336 
	m_mode
;

338 
	m_unu£d2
[15 *  (è- 4 *  (*è-  (
size_t
)];

342 #iâdeà
__ılu¥lus


343 
_IO_FILE
 
	t_IO_FILE
;

346 
	g_IO_FILE_¶us
;

348 
_IO_FILE_¶us
 
_IO_2_1_¡dš_
;

349 
_IO_FILE_¶us
 
_IO_2_1_¡dout_
;

350 
_IO_FILE_¶us
 
_IO_2_1_¡d”r_
;

351 #iâdeà
_LIBC


352 
	#_IO_¡dš
 ((
_IO_FILE
*)(&
_IO_2_1_¡dš_
))

	)

353 
	#_IO_¡dout
 ((
_IO_FILE
*)(&
_IO_2_1_¡dout_
))

	)

354 
	#_IO_¡d”r
 ((
_IO_FILE
*)(&
_IO_2_1_¡d”r_
))

	)

356 
_IO_FILE
 *
_IO_¡dš
 
©Œibu‹_hidd’
;

357 
_IO_FILE
 *
_IO_¡dout
 
©Œibu‹_hidd’
;

358 
_IO_FILE
 *
_IO_¡d”r
 
©Œibu‹_hidd’
;

366 
__ssize_t
 
	t__io_»ad_â
 (*
	t__cook›
, *
	t__buf
, 
	tsize_t
 
	t__nby‹s
);

374 
__ssize_t
 
	t__io_wr™e_â
 (*
	t__cook›
, 
	t__cÚ¡
 *
	t__buf
,

375 
	tsize_t
 
	t__n
);

383 
	t__io_£ek_â
 (*
	t__cook›
, 
	t_IO_off64_t
 *
	t__pos
, 
	t__w
);

386 
	t__io_şo£_â
 (*
	t__cook›
);

389 #ifdeà
_GNU_SOURCE


391 
__io_»ad_â
 
	tcook›_»ad_funùiÚ_t
;

392 
__io_wr™e_â
 
	tcook›_wr™e_funùiÚ_t
;

393 
__io_£ek_â
 
	tcook›_£ek_funùiÚ_t
;

394 
__io_şo£_â
 
	tcook›_şo£_funùiÚ_t
;

399 
__io_»ad_â
 *
	m»ad
;

400 
__io_wr™e_â
 *
	mwr™e
;

401 
__io_£ek_â
 *
	m£ek
;

402 
__io_şo£_â
 *
	mşo£
;

403 } 
	t_IO_cook›_io_funùiÚs_t
;

404 
_IO_cook›_io_funùiÚs_t
 
	tcook›_io_funùiÚs_t
;

406 
	g_IO_cook›_fe
;

409 
_IO_cook›_š™
 (
_IO_cook›_fe
 *
__cfe
, 
__»ad_wr™e
,

410 *
__cook›
, 
_IO_cook›_io_funùiÚs_t
 
__âs
);

414 #ifdeà
__ılu¥lus


418 
__und”æow
 (
_IO_FILE
 *);

419 
__uæow
 (
_IO_FILE
 *);

420 
__ov”æow
 (
_IO_FILE
 *, );

421 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


422 
_IO_wšt_t
 
__wund”æow
 (
_IO_FILE
 *);

423 
_IO_wšt_t
 
__wuæow
 (
_IO_FILE
 *);

424 
_IO_wšt_t
 
__wov”æow
 (
_IO_FILE
 *, _IO_wint_t);

427 #ià 
__GNUC__
 >= 3

428 
	#_IO_BE
(
ex´
, 
»s
è
	`__butš_ex³ù
 (Óx´),„es)

	)

430 
	#_IO_BE
(
ex´
, 
»s
èÓx´)

	)

433 
	#_IO_g‘c_uÆocked
(
_å
) \

434 (
	`_IO_BE
 ((
_å
)->
_IO_»ad_±r
 >ğ(_å)->
_IO_»ad_’d
, 0) \

435 ? 
	`__uæow
 (
_å
è: *(*è(_å)->
_IO_»ad_±r
++)

	)

436 
	#_IO_³ekc_uÆocked
(
_å
) \

437 (
	`_IO_BE
 ((
_å
)->
_IO_»ad_±r
 >ğ(_å)->
_IO_»ad_’d
, 0) \

438 && 
	`__und”æow
 (
_å
è=ğ
EOF
 ? EOF \

439 : *(*è(
_å
)->
_IO_»ad_±r
)

	)

440 
	#_IO_putc_uÆocked
(
_ch
, 
_å
) \

441 (
	`_IO_BE
 ((
_å
)->
_IO_wr™e_±r
 >ğ(_å)->
_IO_wr™e_’d
, 0) \

442 ? 
	`__ov”æow
 (
_å
, (è(
_ch
)) \

443 : (è(*(
_å
)->
_IO_wr™e_±r
++ = (
_ch
)))

	)

445 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


446 
	#_IO_g‘wc_uÆocked
(
_å
) \

447 (
	`_IO_BE
 ((
_å
)->
_wide_d©a
 =ğ
NULL
 \

448 || ((
_å
)->
_wide_d©a
->
_IO_»ad_±r
 \

449 >ğ(
_å
)->
_wide_d©a
->
_IO_»ad_’d
), 0) \

450 ? 
	`__wuæow
 (
_å
è: (
_IO_wšt_t
è*(_å)->
_wide_d©a
->
_IO_»ad_±r
++)

	)

451 
	#_IO_putwc_uÆocked
(
_wch
, 
_å
) \

452 (
	`_IO_BE
 ((
_å
)->
_wide_d©a
 =ğ
NULL
 \

453 || ((
_å
)->
_wide_d©a
->
_IO_wr™e_±r
 \

454 >ğ(
_å
)->
_wide_d©a
->
_IO_wr™e_’d
), 0) \

455 ? 
	`__wov”æow
 (
_å
, 
_wch
) \

456 : (
_IO_wšt_t
è(*(
_å
)->
_wide_d©a
->
_IO_wr™e_±r
++ = (
_wch
)))

	)

459 
	#_IO_ãof_uÆocked
(
__å
è(((__å)->
_æags
 & 
_IO_EOF_SEEN
è!ğ0)

	)

460 
	#_IO_ã¼Ü_uÆocked
(
__å
è(((__å)->
_æags
 & 
_IO_ERR_SEEN
è!ğ0)

	)

462 
_IO_g‘c
 (
_IO_FILE
 *
__å
);

463 
_IO_putc
 (
__c
, 
_IO_FILE
 *
__å
);

464 
_IO_ãof
 (
_IO_FILE
 *
__å
è
__THROW
;

465 
_IO_ã¼Ü
 (
_IO_FILE
 *
__å
è
__THROW
;

467 
_IO_³ekc_locked
 (
_IO_FILE
 *
__å
);

470 
	#_IO_PENDING_OUTPUT_COUNT
(
_å
) \

471 ((
_å
)->
_IO_wr™e_±r
 - (_å)->
_IO_wr™e_ba£
)

	)

473 
_IO_æockfe
 (
_IO_FILE
 *è
__THROW
;

474 
_IO_fuÆockfe
 (
_IO_FILE
 *è
__THROW
;

475 
_IO_árylockfe
 (
_IO_FILE
 *è
__THROW
;

477 #ifdeà
_IO_MTSAFE_IO


478 
	#_IO_³ekc
(
_å
è
	`_IO_³ekc_locked
 (_å)

	)

479 
	#_IO_æockfe
(
_å
) \

480 ià(((
_å
)->
_æags
 & 
_IO_USER_LOCK
è=ğ0è
	`_IO_æockfe
 (_å)

	)

481 
	#_IO_fuÆockfe
(
_å
) \

482 ià(((
_å
)->
_æags
 & 
_IO_USER_LOCK
è=ğ0è
	`_IO_fuÆockfe
 (_å)

	)

484 
	#_IO_³ekc
(
_å
è
	`_IO_³ekc_uÆocked
 (_å)

	)

485 
	#_IO_æockfe
(
_å
è

	)

486 
	#_IO_fuÆockfe
(
_å
è

	)

487 
	#_IO_árylockfe
(
_å
è

	)

488 
	#_IO_ş—nup_»giÚ_¡¬t
(
_fù
, 
_å
è

	)

489 
	#_IO_ş—nup_»giÚ_’d
(
_Do™
è

	)

492 
_IO_vfsÿnf
 (
_IO_FILE
 * 
__»¡riù
, const * __restrict,

493 
_IO_va_li¡
, *
__»¡riù
);

494 
_IO_vårštf
 (
_IO_FILE
 *
__»¡riù
, const *__restrict,

495 
_IO_va_li¡
);

496 
_IO_ssize_t
 
_IO_·dn
 (
_IO_FILE
 *, , _IO_ssize_t);

497 
_IO_size_t
 
_IO_sg‘n
 (
_IO_FILE
 *, *, _IO_size_t);

499 
_IO_off64_t
 
_IO_£ekoff
 (
_IO_FILE
 *, _IO_off64_t, , );

500 
_IO_off64_t
 
_IO_£ekpos
 (
_IO_FILE
 *, _IO_off64_t, );

502 
_IO_ä“_backup_¬—
 (
_IO_FILE
 *è
__THROW
;

504 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


505 
_IO_wšt_t
 
_IO_g‘wc
 (
_IO_FILE
 *
__å
);

506 
_IO_wšt_t
 
_IO_putwc
 (
wch¬_t
 
__wc
, 
_IO_FILE
 *
__å
);

507 
_IO_fwide
 (
_IO_FILE
 *
__å
, 
__mode
è
__THROW
;

508 #ià
__GNUC__
 >= 2

511 #ià
defšed
 
_LIBC
 && defšed 
SHARED


512 
	~<shlib-com·t.h
>

513 #ià
SHLIB_COMPAT
 (
libc
, 
GLIBC_2_0
, 
GLIBC_2_1
)

514 
	#_IO_fwide_maybe_šcom·tibË
 \

515 (
	`__butš_ex³ù
 (&
_IO_¡dš_u£d
 =ğ
NULL
, 0))

	)

516 cÚ¡ 
_IO_¡dš_u£d
;

517 
w—k_ex‹º
 (
_IO_¡dš_u£d
);

520 #iâdeà
_IO_fwide_maybe_šcom·tibË


521 
	#_IO_fwide_maybe_šcom·tibË
 (0)

	)

525 
	#_IO_fwide
(
__å
, 
__mode
) \

526 ({ 
__»suÉ
 = (
__mode
); \

527 ià(
__»suÉ
 < 0 && ! 
_IO_fwide_maybe_šcom·tibË
) \

529 ià((
__å
)->
_mode
 == 0) \

531 (
__å
)->
_mode
 = -1; \

532 
__»suÉ
 = (
__å
)->
_mode
; \

534 ià(
	`__butš_cÚ¡ªt_p
 (
__mode
) && (__mode) == 0) \

535 
__»suÉ
 = 
_IO_fwide_maybe_šcom·tibË
 ? -1 : (
__å
)->
_mode
; \

537 
__»suÉ
 = 
	`_IO_fwide
 (
__å
, __result); \

538 
__»suÉ
; })

	)

541 
_IO_vfwsÿnf
 (
_IO_FILE
 * 
__»¡riù
, cÚ¡ 
wch¬_t
 * __restrict,

542 
_IO_va_li¡
, *
__»¡riù
);

543 
_IO_vfw´štf
 (
_IO_FILE
 *
__»¡riù
, cÚ¡ 
wch¬_t
 *__restrict,

544 
_IO_va_li¡
);

545 
_IO_ssize_t
 
_IO_w·dn
 (
_IO_FILE
 *, 
wšt_t
, _IO_ssize_t);

546 
_IO_ä“_wbackup_¬—
 (
_IO_FILE
 *è
__THROW
;

549 #ifdeà
__LDBL_COMPAT


550 
	~<b™s/libio-ldbl.h
>

553 #ifdeà
__ılu¥lus


	@/usr/include/xlocale.h

21 #iâdeà
_XLOCALE_H


22 
	#_XLOCALE_H
 1

	)

28 
	s__loÿË_¡ruù


31 
__loÿË_d©a
 *
	m__loÿËs
[13];

34 cÚ¡ *
	m__ùy³_b
;

35 cÚ¡ *
	m__ùy³_tŞow”
;

36 cÚ¡ *
	m__ùy³_touµ”
;

39 cÚ¡ *
	m__Çmes
[13];

40 } *
	t__loÿË_t
;

43 
__loÿË_t
 
	tloÿË_t
;

	@/usr/include/_G_config.h

4 #iâdeà
_G_cÚfig_h


5 
	#_G_cÚfig_h
 1

	)

9 
	~<b™s/ty³s.h
>

10 
	#__Ãed_size_t


	)

11 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


12 
	#__Ãed_wch¬_t


	)

14 
	#__Ãed_NULL


	)

15 
	~<¡ddef.h
>

16 
	#__Ãed_mb¡©e_t


	)

17 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


18 
	#__Ãed_wšt_t


	)

20 
	~<wch¬.h
>

21 
	#_G_size_t
 
size_t


	)

24 
__off_t
 
	m__pos
;

25 
__mb¡©e_t
 
	m__¡©e
;

26 } 
	t_G_åos_t
;

29 
__off64_t
 
	m__pos
;

30 
__mb¡©e_t
 
	m__¡©e
;

31 } 
	t_G_åos64_t
;

32 
	#_G_ssize_t
 
__ssize_t


	)

33 
	#_G_off_t
 
__off_t


	)

34 
	#_G_off64_t
 
__off64_t


	)

35 
	#_G_pid_t
 
__pid_t


	)

36 
	#_G_uid_t
 
__uid_t


	)

37 
	#_G_wch¬_t
 
wch¬_t


	)

38 
	#_G_wšt_t
 
wšt_t


	)

39 
	#_G_¡©64
 
¡©64


	)

40 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


41 
	~<gcÚv.h
>

44 
__gcÚv_šfo
 
	m__cd
;

47 
__gcÚv_šfo
 
	m__cd
;

48 
__gcÚv_¡•_d©a
 
	m__d©a
;

49 } 
	m__combšed
;

50 } 
	t_G_icÚv_t
;

53 
	t_G_št16_t
 
	t__©Œibu‹__
 ((
	t__mode__
 (
	t__HI__
)));

54 
	t_G_št32_t
 
	t__©Œibu‹__
 ((
	t__mode__
 (
	t__SI__
)));

55 
	t_G_ušt16_t
 
	t__©Œibu‹__
 ((
	t__mode__
 (
	t__HI__
)));

56 
	t_G_ušt32_t
 
	t__©Œibu‹__
 ((
	t__mode__
 (
	t__SI__
)));

58 
	#_G_HAVE_BOOL
 1

	)

62 
	#_G_HAVE_ATEXIT
 1

	)

63 
	#_G_HAVE_SYS_CDEFS
 1

	)

64 
	#_G_HAVE_SYS_WAIT
 1

	)

65 
	#_G_NEED_STDARG_H
 1

	)

66 
	#_G_va_li¡
 
__gnuc_va_li¡


	)

68 
	#_G_HAVE_PRINTF_FP
 1

	)

69 
	#_G_HAVE_MMAP
 1

	)

70 
	#_G_HAVE_MREMAP
 1

	)

71 
	#_G_HAVE_LONG_DOUBLE_IO
 1

	)

72 
	#_G_HAVE_IO_FILE_OPEN
 1

	)

73 
	#_G_HAVE_IO_GETLINE_INFO
 1

	)

75 
	#_G_IO_IO_FILE_VERSION
 0x20001

	)

77 
	#_G_OPEN64
 
__İ’64


	)

78 
	#_G_LSEEK64
 
__l£ek64


	)

79 
	#_G_MMAP64
 
__mm­64


	)

80 
	#_G_FSTAT64
(
fd
,
buf
è
	`__fx¡©64
 (
_STAT_VER
, fd, buf)

	)

83 
	#_G_HAVE_ST_BLKSIZE
 
	`defšed
 (
_STATBUF_ST_BLKSIZE
)

	)

85 
	#_G_BUFSIZ
 8192

	)

88 
	#_G_NAMES_HAVE_UNDERSCORE
 0

	)

89 
	#_G_VTABLE_LABEL_HAS_LENGTH
 1

	)

90 
	#_G_USING_THUNKS
 1

	)

91 
	#_G_VTABLE_LABEL_PREFIX
 "__vt_"

	)

92 
	#_G_VTABLE_LABEL_PREFIX_ID
 
__vt_


	)

95 #ià
defšed
 
__ılu¥lus
 || defšed 
__STDC__


96 
	#_G_ARGS
(
ARGLIST
è
	)
ARGLIST

98 
	#_G_ARGS
(
ARGLIST
è()

	)

	@/usr/include/ctype.h

24 #iâdef 
_CTYPE_H


25 
	#_CTYPE_H
 1

	)

27 
	~<ã©u»s.h
>

28 
	~<b™s/ty³s.h
>

30 
	g__BEGIN_DECLS


32 #iâdeà
_ISb™


41 
	~<’dŸn.h
>

42 #ià
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


43 
	#_ISb™
(
b™
è(1 << (b™))

	)

45 
	#_ISb™
(
b™
è((b™è< 8 ? ((1 << (b™)è<< 8è: ((1 << (b™)è>> 8))

	)

50 
	m_ISuµ”
 = 
_ISb™
 (0),

51 
	m_ISlow”
 = 
_ISb™
 (1),

52 
	m_IS®pha
 = 
_ISb™
 (2),

53 
	m_ISdig™
 = 
_ISb™
 (3),

54 
	m_ISxdig™
 = 
_ISb™
 (4),

55 
	m_IS¥aû
 = 
_ISb™
 (5),

56 
	m_IS´št
 = 
_ISb™
 (6),

57 
	m_ISg¿ph
 = 
_ISb™
 (7),

58 
	m_ISbÏnk
 = 
_ISb™
 (8),

59 
	m_ISúŒl
 = 
_ISb™
 (9),

60 
	m_ISpunù
 = 
_ISb™
 (10),

61 
	m_IS®num
 = 
_ISb™
 (11)

81 
__cÚ¡
 **
	$__ùy³_b_loc
 ()

82 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡
));

83 
__cÚ¡
 
__št32_t
 **
	$__ùy³_tŞow”_loc
 ()

84 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡
));

85 
__cÚ¡
 
__št32_t
 **
	$__ùy³_touµ”_loc
 ()

86 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡
));

89 #iâdeà
__ılu¥lus


90 
	#__isùy³
(
c
, 
ty³
) \

91 ((*
	`__ùy³_b_loc
 ())[(è(
c
)] & (è
ty³
)

	)

92 #–ià
defšed
 
__USE_EXTERN_INLINES


93 
	#__isùy³_f
(
ty³
) \

94 
__ex‹º_šlše
 \

95 
is
##
	`ty³
 (
__c
è
__THROW
 \

97  (*
	`__ùy³_b_loc
 ())[(è(
__c
)] & (è
_IS
##
ty³
; \

98 
	}

	)
}

101 
	#__i§scii
(
c
è(((cè& ~0x7fè=ğ0è

	)

102 
	#__tßscii
(
c
è((cè& 0x7fè

	)

104 
	#__exùy³
(
Çme
è
	`Çme
 (è
__THROW


	)

106 
__BEGIN_NAMESPACE_STD


112 
__exùy³
 (
i§Êum
);

113 
__exùy³
 (
i§Íha
);

114 
__exùy³
 (
isúŒl
);

115 
__exùy³
 (
isdig™
);

116 
__exùy³
 (
i¦ow”
);

117 
__exùy³
 (
isg¿ph
);

118 
__exùy³
 (
i¥ršt
);

119 
__exùy³
 (
i¥unù
);

120 
__exùy³
 (
is¥aû
);

121 
__exùy³
 (
isuµ”
);

122 
__exùy³
 (
isxdig™
);

126 
	$tŞow”
 (
__c
è
__THROW
;

129 
	$touµ”
 (
__c
è
__THROW
;

131 
__END_NAMESPACE_STD


135 #ifdef 
__USE_ISOC99


136 
__BEGIN_NAMESPACE_C99


138 
	`__exùy³
 (
isbÏnk
);

140 
__END_NAMESPACE_C99


143 #ifdeà
__USE_GNU


145 
	$isùy³
 (
__c
, 
__mask
è
__THROW
;

148 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_MISC
 || defšed 
__USE_XOPEN


152 
	$i§scii
 (
__c
è
__THROW
;

156 
	$tßscii
 (
__c
è
__THROW
;

160 
	`__exùy³
 (
_touµ”
);

161 
	`__exùy³
 (
_tŞow”
);

165 
	#__tobody
(
c
, 
f
, 
a
, 
¬gs
) \

166 (
__ex‹nsiÚ__
 \

167 ({ 
__»s
; \

168 ià( (
c
) > 1) \

170 ià(
	`__butš_cÚ¡ªt_p
 (
c
)) \

172 
__c
 = (
c
); \

173 
__»s
 = 
__c
 < -128 || __ø> 255 ? __ø: (
a
)[__c]; \

176 
__»s
 = 
f
 
¬gs
; \

179 
__»s
 = (
a
)[(è(
c
)]; \

180 
__»s
; 
	}
}))

	)

182 #ià!
defšed
 
__NO_CTYPE


183 #ifdeà
__isùy³_f


184 
	$__isùy³_f
 (
®num
)

185 
	$__isùy³_f
 (
®pha
)

186 
	$__isùy³_f
 (
úŒl
)

187 
	$__isùy³_f
 (
dig™
)

188 
	$__isùy³_f
 (
low”
)

189 
	$__isùy³_f
 (
g¿ph
)

190 
	$__isùy³_f
 (
´št
)

191 
	$__isùy³_f
 (
punù
)

192 
	$__isùy³_f
 (
¥aû
)

193 
	$__isùy³_f
 (
uµ”
)

194 
	$__isùy³_f
 (
xdig™
)

195 #ifdeà
__USE_ISOC99


196 
	$__isùy³_f
 (
bÏnk
)

198 #–ià
defšed
 
__isùy³


199 
	#i§Êum
(
c
è
	`__isùy³
((c), 
_IS®num
)

	)

200 
	#i§Íha
(
c
è
	`__isùy³
((c), 
_IS®pha
)

	)

201 
	#isúŒl
(
c
è
	`__isùy³
((c), 
_ISúŒl
)

	)

202 
	#isdig™
(
c
è
	`__isùy³
((c), 
_ISdig™
)

	)

203 
	#i¦ow”
(
c
è
	`__isùy³
((c), 
_ISlow”
)

	)

204 
	#isg¿ph
(
c
è
	`__isùy³
((c), 
_ISg¿ph
)

	)

205 
	#i¥ršt
(
c
è
	`__isùy³
((c), 
_IS´št
)

	)

206 
	#i¥unù
(
c
è
	`__isùy³
((c), 
_ISpunù
)

	)

207 
	#is¥aû
(
c
è
	`__isùy³
((c), 
_IS¥aû
)

	)

208 
	#isuµ”
(
c
è
	`__isùy³
((c), 
_ISuµ”
)

	)

209 
	#isxdig™
(
c
è
	`__isùy³
((c), 
_ISxdig™
)

	)

210 #ifdeà
__USE_ISOC99


211 
	#isbÏnk
(
c
è
	`__isùy³
((c), 
_ISbÏnk
)

	)

215 #ifdeà
__USE_EXTERN_INLINES


216 
__ex‹º_šlše
 

217 
	`__NTH
 (
	$tŞow”
 (
__c
))

219  
__c
 >ğ-128 && __ø< 256 ? (*
	`__ùy³_tŞow”_loc
 ())[__c] : __c;

220 
	}
}

222 
__ex‹º_šlše
 

223 
__NTH
 (
	$touµ”
 (
__c
))

225  
__c
 >ğ-128 && __ø< 256 ? (*
	`__ùy³_touµ”_loc
 ())[__c] : __c;

226 
	}
}

229 #ià
__GNUC__
 >ğ2 && 
defšed
 
__OPTIMIZE__
 && !defšed 
__ılu¥lus


230 
	#tŞow”
(
c
è
	`__tobody
 (c, 
tŞow”
, *
	`__ùy³_tŞow”_loc
 (), (c))

	)

231 
	#touµ”
(
c
è
	`__tobody
 (c, 
touµ”
, *
	`__ùy³_touµ”_loc
 (), (c))

	)

234 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_MISC
 || defšed 
__USE_XOPEN


235 
	#i§scii
(
c
è
	`__i§scii
 (c)

	)

236 
	#tßscii
(
c
è
	`__tßscii
 (c)

	)

238 
	#_tŞow”
(
c
è((è(*
	`__ùy³_tŞow”_loc
 ())[(è(c)])

	)

239 
	#_touµ”
(
c
è((è(*
	`__ùy³_touµ”_loc
 ())[(è(c)])

	)

245 #ifdeà
__USE_XOPEN2K8


259 
	~<xloÿË.h
>

263 
	#__isùy³_l
(
c
, 
ty³
, 
loÿË
) \

264 ((
loÿË
)->
__ùy³_b
[(è(
c
)] & (è
ty³
)

	)

266 
	#__exùy³_l
(
Çme
) \

267 
	`Çme
 (, 
__loÿË_t
è
__THROW


	)

273 
__exùy³_l
 (
i§Êum_l
);

274 
__exùy³_l
 (
i§Íha_l
);

275 
__exùy³_l
 (
isúŒl_l
);

276 
__exùy³_l
 (
isdig™_l
);

277 
__exùy³_l
 (
i¦ow”_l
);

278 
__exùy³_l
 (
isg¿ph_l
);

279 
__exùy³_l
 (
i¥ršt_l
);

280 
__exùy³_l
 (
i¥unù_l
);

281 
__exùy³_l
 (
is¥aû_l
);

282 
__exùy³_l
 (
isuµ”_l
);

283 
__exùy³_l
 (
isxdig™_l
);

285 
__exùy³_l
 (
isbÏnk_l
);

289 
	$__tŞow”_l
 (
__c
, 
__loÿË_t
 
__l
è
__THROW
;

290 
	$tŞow”_l
 (
__c
, 
__loÿË_t
 
__l
è
__THROW
;

293 
	$__touµ”_l
 (
__c
, 
__loÿË_t
 
__l
è
__THROW
;

294 
	$touµ”_l
 (
__c
, 
__loÿË_t
 
__l
è
__THROW
;

296 #ià
__GNUC__
 >ğ2 && 
defšed
 
__OPTIMIZE__
 && !defšed 
__ılu¥lus


297 
	#__tŞow”_l
(
c
, 
loÿË
) \

298 
	`__tobody
 (
c
, 
__tŞow”_l
, (
loÿË
)->
__ùy³_tŞow”
, (c,†oÿË))

	)

299 
	#__touµ”_l
(
c
, 
loÿË
) \

300 
	`__tobody
 (
c
, 
__touµ”_l
, (
loÿË
)->
__ùy³_touµ”
, (c,†oÿË))

	)

301 
	#tŞow”_l
(
c
, 
loÿË
è
	`__tŞow”_l
 ((c), (loÿË))

	)

302 
	#touµ”_l
(
c
, 
loÿË
è
	`__touµ”_l
 ((c), (loÿË))

	)

306 #iâdeà
__NO_CTYPE


307 
	#__i§Êum_l
(
c
,
l
è
	`__isùy³_l
((c), 
_IS®num
, (l))

	)

308 
	#__i§Íha_l
(
c
,
l
è
	`__isùy³_l
((c), 
_IS®pha
, (l))

	)

309 
	#__isúŒl_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISúŒl
, (l))

	)

310 
	#__isdig™_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISdig™
, (l))

	)

311 
	#__i¦ow”_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISlow”
, (l))

	)

312 
	#__isg¿ph_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISg¿ph
, (l))

	)

313 
	#__i¥ršt_l
(
c
,
l
è
	`__isùy³_l
((c), 
_IS´št
, (l))

	)

314 
	#__i¥unù_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISpunù
, (l))

	)

315 
	#__is¥aû_l
(
c
,
l
è
	`__isùy³_l
((c), 
_IS¥aû
, (l))

	)

316 
	#__isuµ”_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISuµ”
, (l))

	)

317 
	#__isxdig™_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISxdig™
, (l))

	)

319 
	#__isbÏnk_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISbÏnk
, (l))

	)

321 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_MISC


322 
	#__i§scii_l
(
c
,
l
è(Ö), 
	`__i§scii
 (c))

	)

323 
	#__tßscii_l
(
c
,
l
è(Ö), 
	`__tßscii
 (c))

	)

326 
	#i§Êum_l
(
c
,
l
è
	`__i§Êum_l
 ((c), (l))

	)

327 
	#i§Íha_l
(
c
,
l
è
	`__i§Íha_l
 ((c), (l))

	)

328 
	#isúŒl_l
(
c
,
l
è
	`__isúŒl_l
 ((c), (l))

	)

329 
	#isdig™_l
(
c
,
l
è
	`__isdig™_l
 ((c), (l))

	)

330 
	#i¦ow”_l
(
c
,
l
è
	`__i¦ow”_l
 ((c), (l))

	)

331 
	#isg¿ph_l
(
c
,
l
è
	`__isg¿ph_l
 ((c), (l))

	)

332 
	#i¥ršt_l
(
c
,
l
è
	`__i¥ršt_l
 ((c), (l))

	)

333 
	#i¥unù_l
(
c
,
l
è
	`__i¥unù_l
 ((c), (l))

	)

334 
	#is¥aû_l
(
c
,
l
è
	`__is¥aû_l
 ((c), (l))

	)

335 
	#isuµ”_l
(
c
,
l
è
	`__isuµ”_l
 ((c), (l))

	)

336 
	#isxdig™_l
(
c
,
l
è
	`__isxdig™_l
 ((c), (l))

	)

338 
	#isbÏnk_l
(
c
,
l
è
	`__isbÏnk_l
 ((c), (l))

	)

340 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_MISC


341 
	#i§scii_l
(
c
,
l
è
	`__i§scii_l
 ((c), (l))

	)

342 
	#tßscii_l
(
c
,
l
è
	`__tßscii_l
 ((c), (l))

	)

349 
__END_DECLS


	@/usr/include/endian.h

19 #iâdef 
_ENDIAN_H


20 
	#_ENDIAN_H
 1

	)

22 
	~<ã©u»s.h
>

32 
	#__LITTLE_ENDIAN
 1234

	)

33 
	#__BIG_ENDIAN
 4321

	)

34 
	#__PDP_ENDIAN
 3412

	)

37 
	~<b™s/’dŸn.h
>

41 #iâdeà
__FLOAT_WORD_ORDER


42 
	#__FLOAT_WORD_ORDER
 
__BYTE_ORDER


	)

45 #ifdef 
__USE_BSD


46 
	#LITTLE_ENDIAN
 
__LITTLE_ENDIAN


	)

47 
	#BIG_ENDIAN
 
__BIG_ENDIAN


	)

48 
	#PDP_ENDIAN
 
__PDP_ENDIAN


	)

49 
	#BYTE_ORDER
 
__BYTE_ORDER


	)

52 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


53 
	#__LONG_LONG_PAIR
(
HI
, 
LO
èLO, 
	)
HI

54 #–ià
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


55 
	#__LONG_LONG_PAIR
(
HI
, 
LO
èHI, 
	)
LO

59 #ifdeà
__USE_BSD


61 
	~<b™s/by‹sw­.h
>

63 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


64 
	#htobe16
(
x
è
	`__bsw­_16
 (x)

	)

65 
	#htŞe16
(
x
è(x)

	)

66 
	#be16toh
(
x
è
	`__bsw­_16
 (x)

	)

67 
	#Ë16toh
(
x
è(x)

	)

69 
	#htobe32
(
x
è
	`__bsw­_32
 (x)

	)

70 
	#htŞe32
(
x
è(x)

	)

71 
	#be32toh
(
x
è
	`__bsw­_32
 (x)

	)

72 
	#Ë32toh
(
x
è(x)

	)

74 
	#htobe64
(
x
è
	`__bsw­_64
 (x)

	)

75 
	#htŞe64
(
x
è(x)

	)

76 
	#be64toh
(
x
è
	`__bsw­_64
 (x)

	)

77 
	#Ë64toh
(
x
è(x)

	)

79 
	#htobe16
(
x
è(x)

	)

80 
	#htŞe16
(
x
è
	`__bsw­_16
 (x)

	)

81 
	#be16toh
(
x
è(x)

	)

82 
	#Ë16toh
(
x
è
	`__bsw­_16
 (x)

	)

84 
	#htobe32
(
x
è(x)

	)

85 
	#htŞe32
(
x
è
	`__bsw­_32
 (x)

	)

86 
	#be32toh
(
x
è(x)

	)

87 
	#Ë32toh
(
x
è
	`__bsw­_32
 (x)

	)

89 
	#htobe64
(
x
è(x)

	)

90 
	#htŞe64
(
x
è
	`__bsw­_64
 (x)

	)

91 
	#be64toh
(
x
è(x)

	)

92 
	#Ë64toh
(
x
è
	`__bsw­_64
 (x)

	)

	@/usr/include/gconv.h

23 #iâdeà
_GCONV_H


24 
	#_GCONV_H
 1

	)

26 
	~<ã©u»s.h
>

27 
	#__Ãed_mb¡©e_t


	)

28 
	#__Ãed_wšt_t


	)

29 
	~<wch¬.h
>

30 
	#__Ãed_size_t


	)

31 
	#__Ãed_wch¬_t


	)

32 
	~<¡ddef.h
>

35 
	#__UNKNOWN_10646_CHAR
 ((
wch¬_t
è0xfffd)

	)

40 
	m__GCONV_OK
 = 0,

41 
	m__GCONV_NOCONV
,

42 
	m__GCONV_NODB
,

43 
	m__GCONV_NOMEM
,

45 
	m__GCONV_EMPTY_INPUT
,

46 
	m__GCONV_FULL_OUTPUT
,

47 
	m__GCONV_ILLEGAL_INPUT
,

48 
	m__GCONV_INCOMPLETE_INPUT
,

50 
	m__GCONV_ILLEGAL_DESCRIPTOR
,

51 
	m__GCONV_INTERNAL_ERROR


58 
	m__GCONV_IS_LAST
 = 0x0001,

59 
	m__GCONV_IGNORE_ERRORS
 = 0x0002,

60 
	m__GCONV_SWAP
 = 0x0004

65 
	g__gcÚv_¡•
;

66 
	g__gcÚv_¡•_d©a
;

67 
	g__gcÚv_lßded_objeù
;

68 
	g__gcÚv_Œªs_d©a
;

72 (*
	t__gcÚv_fù
è(
	t__gcÚv_¡•
 *, 
	t__gcÚv_¡•_d©a
 *,

73 
	t__cÚ¡
 **, __const *,

74 **, 
	tsize_t
 *, , );

77 
	$wšt_t
 (*
	t__gcÚv_btowc_fù
è(
	t__gcÚv_¡•
 *, );

80 (*
	t__gcÚv_š™_fù
è(
	t__gcÚv_¡•
 *);

81 (*
	t__gcÚv_’d_fù
è(
	t__gcÚv_¡•
 *);

85 (*
	t__gcÚv_Œªs_fù
è(
	t__gcÚv_¡•
 *,

86 
	t__gcÚv_¡•_d©a
 *, *,

87 
	t__cÚ¡
 *,

88 
	t__cÚ¡
 **,

89 
	t__cÚ¡
 *, **,

90 
	tsize_t
 *);

93 (*
	t__gcÚv_Œªs_cÚ‹xt_fù
è(*, 
	t__cÚ¡
 *,

94 
	t__cÚ¡
 *,

98 (*
	t__gcÚv_Œªs_qu”y_fù
è(
	t__cÚ¡
 *, __const ***,

99 
	tsize_t
 *);

102 (*
	t__gcÚv_Œªs_š™_fù
) (**, const *);

103 (*
	t__gcÚv_Œªs_’d_fù
) (*);

105 
	s__gcÚv_Œªs_d©a


108 
__gcÚv_Œªs_fù
 
__Œªs_fù
;

109 
__gcÚv_Œªs_cÚ‹xt_fù
 
__Œªs_cÚ‹xt_fù
;

110 
__gcÚv_Œªs_’d_fù
 
__Œªs_’d_fù
;

111 *
__d©a
;

112 
__gcÚv_Œªs_d©a
 *
__Ãxt
;

117 
	s__gcÚv_¡•


119 
__gcÚv_lßded_objeù
 *
__shlib_hªdË
;

120 
__cÚ¡
 *
__modÇme
;

122 
__couÁ”
;

124 *
__äom_Çme
;

125 *
__to_Çme
;

127 
__gcÚv_fù
 
__fù
;

128 
__gcÚv_btowc_fù
 
__btowc_fù
;

129 
__gcÚv_š™_fù
 
__š™_fù
;

130 
__gcÚv_’d_fù
 
__’d_fù
;

134 
__mš_Ãeded_äom
;

135 
__max_Ãeded_äom
;

136 
__mš_Ãeded_to
;

137 
__max_Ãeded_to
;

140 
__¡©eful
;

142 *
__d©a
;

147 
	s__gcÚv_¡•_d©a


149 *
__outbuf
;

150 *
__outbuãnd
;

154 
__æags
;

158 
__švoÿtiÚ_couÁ”
;

162 
__š‹º®_u£
;

164 
__mb¡©e_t
 *
__¡©•
;

165 
__mb¡©e_t
 
__¡©e
;

169 
__gcÚv_Œªs_d©a
 *
__Œªs
;

174 
	s__gcÚv_šfo


176 
size_t
 
__n¡•s
;

177 
__gcÚv_¡•
 *
__¡•s
;

178 
__ex‹nsiÚ__
 
__gcÚv_¡•_d©a
 
__d©a
 
__æex¬r
;

179 } *
	t__gcÚv_t
;

	@/usr/include/wchar.h

24 #iâdeà
_WCHAR_H


26 #ià!
defšed
 
__Ãed_mb¡©e_t
 && !defšed 
__Ãed_wšt_t


27 
	#_WCHAR_H
 1

	)

28 
	~<ã©u»s.h
>

31 #ifdeà
_WCHAR_H


33 
	#__Ãed___FILE


	)

34 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K


35 
	#__Ãed_FILE


	)

37 
	~<¡dio.h
>

39 
	#__Ãed___va_li¡


	)

40 
	~<¡d¬g.h
>

42 
	~<b™s/wch¬.h
>

45 
	#__Ãed_size_t


	)

46 
	#__Ãed_wch¬_t


	)

47 
	#__Ãed_NULL


	)

49 #ià
defšed
 
_WCHAR_H
 || defšed 
__Ãed_wšt_t
 || !defšed 
__WINT_TYPE__


50 #undeà
__Ãed_wšt_t


51 
	#__Ãed_wšt_t


	)

52 
	~<¡ddef.h
>

56 #iâdeà
_WINT_T


61 
	#_WINT_T


	)

62 
	twšt_t
;

66 #ià
defšed
 
__ılu¥lus
 && defšed 
_GLIBCPP_USE_NAMESPACES
 \

67 && 
defšed
 
__WINT_TYPE__


68 
__BEGIN_NAMESPACE_STD


69 
__WINT_TYPE__
 
	twšt_t
;

70 
	g__END_NAMESPACE_STD


75 #ià
defšed
 
__ılu¥lus
 && 
__GNUC_PREREQ
 (4, 4)

76 
	#__CORRECT_ISO_CPP_WCHAR_H_PROTO


	)

80 #ià(
defšed
 
_WCHAR_H
 || defšed 
__Ãed_mb¡©e_t
è&& !defšed 
__mb¡©e_t_defšed


81 
	#__mb¡©e_t_defšed
 1

	)

85 
	m__couÁ
;

88 #ifdeà
__WINT_TYPE__


89 
__WINT_TYPE__
 
	m__wch
;

91 
wšt_t
 
	m__wch
;

93 
	m__wchb
[4];

94 } 
	m__v®ue
;

95 } 
	t__mb¡©e_t
;

97 #undeà
__Ãed_mb¡©e_t


102 #ifdeà
_WCHAR_H


104 
__BEGIN_NAMESPACE_C99


106 
__mb¡©e_t
 
	tmb¡©e_t
;

107 
	g__END_NAMESPACE_C99


108 #ifdeà
__USE_GNU


109 
	$__USING_NAMESPACE_C99
(
mb¡©e_t
)

112 #iâdeà
WCHAR_MIN


114 
	#WCHAR_MIN
 
__WCHAR_MIN


	)

115 
	#WCHAR_MAX
 
__WCHAR_MAX


	)

118 #iâdeà
WEOF


119 
	#WEOF
 (0xffffffffu)

	)

124 #ià
defšed
 
__USE_XOPEN
 && !defšed 
__USE_UNIX98


125 
	~<wùy³.h
>

129 
__BEGIN_DECLS


131 
__BEGIN_NAMESPACE_STD


134 
tm
;

135 
__END_NAMESPACE_STD


139 
	$__USING_NAMESPACE_STD
(
tm
)

142 
__BEGIN_NAMESPACE_STD


144 
wch¬_t
 *
	$wcsıy
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

145 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__¤c
è
__THROW
;

147 
wch¬_t
 *
	$wc¢ıy
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

148 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

149 
__THROW
;

152 
wch¬_t
 *
	$wcsÿt
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

153 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__¤c
è
__THROW
;

155 
wch¬_t
 *
	$wc¢ÿt
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

156 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

157 
__THROW
;

160 
	$wcscmp
 (
__cÚ¡
 
wch¬_t
 *
__s1
, __cÚ¡ wch¬_ˆ*
__s2
)

161 
__THROW
 
__©Œibu‹_pu»__
;

163 
	$wc¢cmp
 (
__cÚ¡
 
wch¬_t
 *
__s1
, __cÚ¡ wch¬_ˆ*
__s2
, 
size_t
 
__n
)

164 
__THROW
 
__©Œibu‹_pu»__
;

165 
__END_NAMESPACE_STD


167 #ifdeà
__USE_XOPEN2K8


169 
	$wcsÿ£cmp
 (
__cÚ¡
 
wch¬_t
 *
__s1
, __cÚ¡ wch¬_ˆ*
__s2
è
__THROW
;

172 
	$wc¢ÿ£cmp
 (
__cÚ¡
 
wch¬_t
 *
__s1
, __cÚ¡ wch¬_ˆ*
__s2
,

173 
size_t
 
__n
è
__THROW
;

177 
	~<xloÿË.h
>

179 
	$wcsÿ£cmp_l
 (
__cÚ¡
 
wch¬_t
 *
__s1
, __cÚ¡ wch¬_ˆ*
__s2
,

180 
__loÿË_t
 
__loc
è
__THROW
;

182 
	$wc¢ÿ£cmp_l
 (
__cÚ¡
 
wch¬_t
 *
__s1
, __cÚ¡ wch¬_ˆ*
__s2
,

183 
size_t
 
__n
, 
__loÿË_t
 
__loc
è
__THROW
;

186 
__BEGIN_NAMESPACE_STD


189 
	$wcscŞl
 (
__cÚ¡
 
wch¬_t
 *
__s1
, __cÚ¡ wch¬_ˆ*
__s2
è
__THROW
;

193 
size_t
 
	$wcsxäm
 (
wch¬_t
 *
__»¡riù
 
__s1
,

194 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__s2
, 
size_t
 
__n
è
__THROW
;

195 
__END_NAMESPACE_STD


197 #ifdeà
__USE_XOPEN2K8


203 
	$wcscŞl_l
 (
__cÚ¡
 
wch¬_t
 *
__s1
, __cÚ¡ wch¬_ˆ*
__s2
,

204 
__loÿË_t
 
__loc
è
__THROW
;

209 
size_t
 
	$wcsxäm_l
 (
wch¬_t
 *
__s1
, 
__cÚ¡
 wch¬_ˆ*
__s2
,

210 
size_t
 
__n
, 
__loÿË_t
 
__loc
è
__THROW
;

213 
wch¬_t
 *
	$wcsdup
 (
__cÚ¡
 
wch¬_t
 *
__s
è
__THROW
 
__©Œibu‹_m®loc__
;

216 
__BEGIN_NAMESPACE_STD


218 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


219 "C++" 
wch¬_t
 *
	$wcschr
 (
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

220 
__THROW
 
	`__asm
 ("wcschr"è
__©Œibu‹_pu»__
;

221 "C++" 
__cÚ¡
 
wch¬_t
 *
	$wcschr
 (
__cÚ¡
 
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

222 
__THROW
 
	`__asm
 ("wcschr"è
__©Œibu‹_pu»__
;

224 
wch¬_t
 *
	$wcschr
 (
__cÚ¡
 
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

225 
__THROW
 
__©Œibu‹_pu»__
;

228 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


229 "C++" 
wch¬_t
 *
	$wc¤chr
 (
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

230 
__THROW
 
	`__asm
 ("wc¤chr"è
__©Œibu‹_pu»__
;

231 "C++" 
__cÚ¡
 
wch¬_t
 *
	$wc¤chr
 (
__cÚ¡
 
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

232 
__THROW
 
	`__asm
 ("wc¤chr"è
__©Œibu‹_pu»__
;

234 
wch¬_t
 *
	$wc¤chr
 (
__cÚ¡
 
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

235 
__THROW
 
__©Œibu‹_pu»__
;

237 
__END_NAMESPACE_STD


239 #ifdeà
__USE_GNU


242 
wch¬_t
 *
	$wcschºul
 (
__cÚ¡
 
wch¬_t
 *
__s
, wch¬_ˆ
__wc
)

243 
__THROW
 
__©Œibu‹_pu»__
;

246 
__BEGIN_NAMESPACE_STD


249 
size_t
 
	$wcsc¥n
 (
__cÚ¡
 
wch¬_t
 *
__wcs
, __cÚ¡ wch¬_ˆ*
__»jeù
)

250 
__THROW
 
__©Œibu‹_pu»__
;

253 
size_t
 
	$wcs¥n
 (
__cÚ¡
 
wch¬_t
 *
__wcs
, __cÚ¡ wch¬_ˆ*
__acû±
)

254 
__THROW
 
__©Œibu‹_pu»__
;

256 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


257 "C++" 
wch¬_t
 *
	$wc¥brk
 (
wch¬_t
 *
__wcs
, 
__cÚ¡
 wch¬_ˆ*
__acû±
)

258 
__THROW
 
	`__asm
 ("wc¥brk"è
__©Œibu‹_pu»__
;

259 "C++" 
__cÚ¡
 
wch¬_t
 *
	$wc¥brk
 (
__cÚ¡
 
wch¬_t
 *
__wcs
,

260 
__cÚ¡
 
wch¬_t
 *
__acû±
)

261 
__THROW
 
	`__asm
 ("wc¥brk"è
__©Œibu‹_pu»__
;

263 
wch¬_t
 *
	$wc¥brk
 (
__cÚ¡
 
wch¬_t
 *
__wcs
, __cÚ¡ wch¬_ˆ*
__acû±
)

264 
__THROW
 
__©Œibu‹_pu»__
;

267 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


268 "C++" 
wch¬_t
 *
	$wcs¡r
 (
wch¬_t
 *
__hay¡ack
, 
__cÚ¡
 wch¬_ˆ*
__ÃedË
)

269 
__THROW
 
	`__asm
 ("wcs¡r"è
__©Œibu‹_pu»__
;

270 "C++" 
__cÚ¡
 
wch¬_t
 *
	$wcs¡r
 (
__cÚ¡
 
wch¬_t
 *
__hay¡ack
,

271 
__cÚ¡
 
wch¬_t
 *
__ÃedË
)

272 
__THROW
 
	`__asm
 ("wcs¡r"è
__©Œibu‹_pu»__
;

274 
wch¬_t
 *
	$wcs¡r
 (
__cÚ¡
 
wch¬_t
 *
__hay¡ack
, __cÚ¡ wch¬_ˆ*
__ÃedË
)

275 
__THROW
 
__©Œibu‹_pu»__
;

279 
wch¬_t
 *
	$wc¡ok
 (
wch¬_t
 *
__»¡riù
 
__s
,

280 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__d–im
,

281 
wch¬_t
 **
__»¡riù
 
__±r
è
__THROW
;

284 
size_t
 
	$wc¦’
 (
__cÚ¡
 
wch¬_t
 *
__s
è
__THROW
 
__©Œibu‹_pu»__
;

285 
__END_NAMESPACE_STD


287 #ifdeà
__USE_XOPEN


289 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


290 "C++" 
wch¬_t
 *
	$wcswcs
 (
wch¬_t
 *
__hay¡ack
, 
__cÚ¡
 wch¬_ˆ*
__ÃedË
)

291 
__THROW
 
	`__asm
 ("wcswcs"è
__©Œibu‹_pu»__
;

292 "C++" 
__cÚ¡
 
wch¬_t
 *
	$wcswcs
 (
__cÚ¡
 
wch¬_t
 *
__hay¡ack
,

293 
__cÚ¡
 
wch¬_t
 *
__ÃedË
)

294 
__THROW
 
	`__asm
 ("wcswcs"è
__©Œibu‹_pu»__
;

296 
wch¬_t
 *
	$wcswcs
 (
__cÚ¡
 
wch¬_t
 *
__hay¡ack
, __cÚ¡ wch¬_ˆ*
__ÃedË
)

297 
__THROW
 
__©Œibu‹_pu»__
;

301 #ifdeà
__USE_XOPEN2K8


303 
size_t
 
	$wc¢Ën
 (
__cÚ¡
 
wch¬_t
 *
__s
, 
size_t
 
__maxËn
)

304 
__THROW
 
__©Œibu‹_pu»__
;

308 
__BEGIN_NAMESPACE_STD


310 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


311 "C++" 
wch¬_t
 *
	$wmemchr
 (
wch¬_t
 *
__s
, wch¬_ˆ
__c
, 
size_t
 
__n
)

312 
__THROW
 
	`__asm
 ("wmemchr"è
__©Œibu‹_pu»__
;

313 "C++" 
__cÚ¡
 
wch¬_t
 *
	$wmemchr
 (
__cÚ¡
 
wch¬_t
 *
__s
, wch¬_ˆ
__c
,

314 
size_t
 
__n
)

315 
__THROW
 
	`__asm
 ("wmemchr"è
__©Œibu‹_pu»__
;

317 
wch¬_t
 *
	$wmemchr
 (
__cÚ¡
 
wch¬_t
 *
__s
, wch¬_ˆ
__c
, 
size_t
 
__n
)

318 
__THROW
 
__©Œibu‹_pu»__
;

322 
	$wmemcmp
 (
__cÚ¡
 
wch¬_t
 *
__s1
, __cÚ¡ wch¬_ˆ*
__s2
, 
size_t
 
__n
)

323 
__THROW
 
__©Œibu‹_pu»__
;

326 
wch¬_t
 *
	$wmemıy
 (
wch¬_t
 *
__»¡riù
 
__s1
,

327 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__s2
, 
size_t
 
__n
è
__THROW
;

331 
wch¬_t
 *
	$wmemmove
 (
wch¬_t
 *
__s1
, 
__cÚ¡
 wch¬_ˆ*
__s2
, 
size_t
 
__n
)

332 
__THROW
;

335 
wch¬_t
 *
	$wmem£t
 (
wch¬_t
 *
__s
, wch¬_ˆ
__c
, 
size_t
 
__n
è
__THROW
;

336 
__END_NAMESPACE_STD


338 #ifdeà
__USE_GNU


341 
wch¬_t
 *
	$wmempıy
 (
wch¬_t
 *
__»¡riù
 
__s1
,

342 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__s2
, 
size_t
 
__n
)

343 
__THROW
;

347 
__BEGIN_NAMESPACE_STD


350 
wšt_t
 
	$btowc
 (
__c
è
__THROW
;

354 
	$wùob
 (
wšt_t
 
__c
è
__THROW
;

358 
	$mbsš™
 (
__cÚ¡
 
mb¡©e_t
 *
__ps
è
__THROW
 
__©Œibu‹_pu»__
;

362 
size_t
 
	$mb¹owc
 (
wch¬_t
 *
__»¡riù
 
__pwc
,

363 
__cÚ¡
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

364 
mb¡©e_t
 *
__p
è
__THROW
;

367 
size_t
 
	$wütomb
 (*
__»¡riù
 
__s
, 
wch¬_t
 
__wc
,

368 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

371 
size_t
 
	$__mb¾’
 (
__cÚ¡
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

372 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

373 
size_t
 
	$mb¾’
 (
__cÚ¡
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

374 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

375 
__END_NAMESPACE_STD


377 #ifdeà
__USE_EXTERN_INLINES


383 
wšt_t
 
	$__btowc_®Ÿs
 (
__c
è
	`__asm
 ("btowc");

384 
__ex‹º_šlše
 
wšt_t


385 
	`__NTH
 (
	$btowc
 (
__c
))

386 {  (
	`__butš_cÚ¡ªt_p
 (
__c
) && __c >= '\0' && __c <= '\x7f'

387 ? (
wšt_t
è
__c
 : 
	`__btowc_®Ÿs
 (__c)); 
	}
}

389 
	$__wùob_®Ÿs
 (
wšt_t
 
__c
è
	`__asm
 ("wctob");

390 
__ex‹º_šlše
 

391 
	`__NTH
 (
	$wùob
 (
wšt_t
 
__wc
))

392 {  (
	`__butš_cÚ¡ªt_p
 (
__wc
è&& __wø>ğ
L
'\0' && __wc <= L'\x7f'

393 ? (è
__wc
 : 
	`__wùob_®Ÿs
 (__wc)); 
	}
}

395 
__ex‹º_šlše
 
size_t


396 
__NTH
 (
	$mb¾’
 (
__cÚ¡
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

397 
mb¡©e_t
 *
__»¡riù
 
__ps
))

398 {  (
__ps
 !ğ
NULL


399 ? 
	`mb¹owc
 (
NULL
, 
__s
, 
__n
, 
__ps
è: 
	`__mb¾’
 (__s, __n, NULL)); 
	}
}

402 
__BEGIN_NAMESPACE_STD


405 
size_t
 
	$mb¤towcs
 (
wch¬_t
 *
__»¡riù
 
__d¡
,

406 
__cÚ¡
 **
__»¡riù
 
__¤c
, 
size_t
 
__Ën
,

407 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

411 
size_t
 
	$wc¤tombs
 (*
__»¡riù
 
__d¡
,

412 
__cÚ¡
 
wch¬_t
 **
__»¡riù
 
__¤c
, 
size_t
 
__Ën
,

413 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

414 
__END_NAMESPACE_STD


417 #ifdef 
__USE_XOPEN2K8


420 
size_t
 
	$mb¢¹owcs
 (
wch¬_t
 *
__»¡riù
 
__d¡
,

421 
__cÚ¡
 **
__»¡riù
 
__¤c
, 
size_t
 
__nmc
,

422 
size_t
 
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

426 
size_t
 
	$wc¢¹ombs
 (*
__»¡riù
 
__d¡
,

427 
__cÚ¡
 
wch¬_t
 **
__»¡riù
 
__¤c
,

428 
size_t
 
__nwc
, size_ˆ
__Ën
,

429 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

434 #ifdeà
__USE_XOPEN


436 
	$wcwidth
 (
wch¬_t
 
__c
è
__THROW
;

440 
	$wcswidth
 (
__cÚ¡
 
wch¬_t
 *
__s
, 
size_t
 
__n
è
__THROW
;

444 
__BEGIN_NAMESPACE_STD


447 
	$wc¡od
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

448 
wch¬_t
 **
__»¡riù
 
__’d±r
è
__THROW
;

449 
__END_NAMESPACE_STD


451 #ifdeà
__USE_ISOC99


452 
__BEGIN_NAMESPACE_C99


454 
	$wc¡of
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

455 
wch¬_t
 **
__»¡riù
 
__’d±r
è
__THROW
;

456 
	$wc¡Şd
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

457 
wch¬_t
 **
__»¡riù
 
__’d±r
è
__THROW
;

458 
__END_NAMESPACE_C99


462 
__BEGIN_NAMESPACE_STD


465 
	$wc¡Ş
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

466 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
è
__THROW
;

470 
	$wc¡oul
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

471 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
)

472 
__THROW
;

473 
__END_NAMESPACE_STD


475 #ià
defšed
 
__USE_ISOC99
 || (defšed 
__GNUC__
 && defšed 
__USE_GNU
)

476 
__BEGIN_NAMESPACE_C99


479 
__ex‹nsiÚ__


480 
	$wc¡Şl
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

481 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
)

482 
__THROW
;

486 
__ex‹nsiÚ__


487 
	$wc¡ouÎ
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

488 
wch¬_t
 **
__»¡riù
 
__’d±r
,

489 
__ba£
è
__THROW
;

490 
__END_NAMESPACE_C99


493 #ià
defšed
 
__GNUC__
 && defšed 
__USE_GNU


496 
__ex‹nsiÚ__


497 
	$wc¡oq
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

498 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
)

499 
__THROW
;

503 
__ex‹nsiÚ__


504 
	$wc¡ouq
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

505 
wch¬_t
 **
__»¡riù
 
__’d±r
,

506 
__ba£
è
__THROW
;

509 #ifdeà
__USE_GNU


523 
	~<xloÿË.h
>

527 
	$wc¡Ş_l
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

528 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
,

529 
__loÿË_t
 
__loc
è
__THROW
;

531 
	$wc¡oul_l
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

532 
wch¬_t
 **
__»¡riù
 
__’d±r
,

533 
__ba£
, 
__loÿË_t
 
__loc
è
__THROW
;

535 
__ex‹nsiÚ__


536 
	$wc¡Şl_l
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

537 
wch¬_t
 **
__»¡riù
 
__’d±r
,

538 
__ba£
, 
__loÿË_t
 
__loc
è
__THROW
;

540 
__ex‹nsiÚ__


541 
	$wc¡ouÎ_l
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

542 
wch¬_t
 **
__»¡riù
 
__’d±r
,

543 
__ba£
, 
__loÿË_t
 
__loc
)

544 
__THROW
;

546 
	$wc¡od_l
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

547 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__loÿË_t
 
__loc
)

548 
__THROW
;

550 
	$wc¡of_l
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

551 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__loÿË_t
 
__loc
)

552 
__THROW
;

554 
	$wc¡Şd_l
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

555 
wch¬_t
 **
__»¡riù
 
__’d±r
,

556 
__loÿË_t
 
__loc
è
__THROW
;

560 #ifdeà
__USE_XOPEN2K8


563 
wch¬_t
 *
	$wııy
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

564 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__¤c
è
__THROW
;

568 
wch¬_t
 *
	$wınıy
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

569 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

570 
__THROW
;

577 
__FILE
 *
	$İ’_wmem¡»am
 (
wch¬_t
 **
__buæoc
, 
size_t
 *
__siz–oc
è
__THROW
;

580 #ià
defšed
 
__USE_ISOC95
 || defšed 
__USE_UNIX98


581 
__BEGIN_NAMESPACE_STD


584 
	$fwide
 (
__FILE
 *
__å
, 
__mode
è
__THROW
;

591 
	`fw´štf
 (
__FILE
 *
__»¡riù
 
__¡»am
,

592 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

598 
	`w´štf
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

601 
	$sw´štf
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

602 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

603 
__THROW
 ;

609 
	`vfw´štf
 (
__FILE
 *
__»¡riù
 
__s
,

610 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

611 
__gnuc_va_li¡
 
__¬g
)

617 
	`vw´štf
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

618 
__gnuc_va_li¡
 
__¬g
)

622 
	$vsw´štf
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

623 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

624 
__gnuc_va_li¡
 
__¬g
)

625 
__THROW
 ;

632 
	`fwsÿnf
 (
__FILE
 *
__»¡riù
 
__¡»am
,

633 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

639 
	`wsÿnf
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

642 
	$swsÿnf
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__s
,

643 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

644 
__THROW
 ;

646 #ià
defšed
 
__USE_ISOC99
 && !defšed 
__USE_GNU
 \

647 && (!
defšed
 
__LDBL_COMPAT
 || !defšed 
__REDIRECT
) \

648 && (
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_XOPEN2K
)

649 #ifdeà
__REDIRECT


653 
	`__REDIRECT
 (
fwsÿnf
, (
__FILE
 *
__»¡riù
 
__¡»am
,

654 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...),

655 
__isoc99_fwsÿnf
)

657 
	`__REDIRECT
 (
wsÿnf
, (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...),

658 
__isoc99_wsÿnf
)

660 
	`__REDIRECT_NTH
 (
swsÿnf
, (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__s
,

661 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

662 ...), 
__isoc99_swsÿnf
)

665 
	`__isoc99_fwsÿnf
 (
__FILE
 *
__»¡riù
 
__¡»am
,

666 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...);

667 
	`__isoc99_wsÿnf
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...);

668 
	$__isoc99_swsÿnf
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__s
,

669 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

670 
__THROW
;

671 
	#fwsÿnf
 
__isoc99_fwsÿnf


	)

672 
	#wsÿnf
 
__isoc99_wsÿnf


	)

673 
	#swsÿnf
 
__isoc99_swsÿnf


	)

677 
__END_NAMESPACE_STD


680 #ifdeà
__USE_ISOC99


681 
__BEGIN_NAMESPACE_C99


686 
	`vfwsÿnf
 (
__FILE
 *
__»¡riù
 
__s
,

687 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

688 
__gnuc_va_li¡
 
__¬g
)

694 
	`vwsÿnf
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

695 
__gnuc_va_li¡
 
__¬g
)

698 
	$vswsÿnf
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__s
,

699 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

700 
__gnuc_va_li¡
 
__¬g
)

701 
__THROW
 ;

703 #ià!
defšed
 
__USE_GNU
 \

704 && (!
defšed
 
__LDBL_COMPAT
 || !defšed 
__REDIRECT
) \

705 && (
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_XOPEN2K
)

706 #ifdeà
__REDIRECT


707 
	`__REDIRECT
 (
vfwsÿnf
, (
__FILE
 *
__»¡riù
 
__s
,

708 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

709 
__gnuc_va_li¡
 
__¬g
), 
__isoc99_vfwsÿnf
)

711 
	`__REDIRECT
 (
vwsÿnf
, (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

712 
__gnuc_va_li¡
 
__¬g
), 
__isoc99_vwsÿnf
)

714 
	`__REDIRECT_NTH
 (
vswsÿnf
, (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__s
,

715 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

716 
__gnuc_va_li¡
 
__¬g
), 
__isoc99_vswsÿnf
)

719 
	`__isoc99_vfwsÿnf
 (
__FILE
 *
__»¡riù
 
__s
,

720 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

721 
__gnuc_va_li¡
 
__¬g
);

722 
	`__isoc99_vwsÿnf
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

723 
__gnuc_va_li¡
 
__¬g
);

724 
	$__isoc99_vswsÿnf
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__s
,

725 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

726 
__gnuc_va_li¡
 
__¬g
è
__THROW
;

727 
	#vfwsÿnf
 
__isoc99_vfwsÿnf


	)

728 
	#vwsÿnf
 
__isoc99_vwsÿnf


	)

729 
	#vswsÿnf
 
__isoc99_vswsÿnf


	)

733 
__END_NAMESPACE_C99


737 
__BEGIN_NAMESPACE_STD


742 
wšt_t
 
	`fg‘wc
 (
__FILE
 *
__¡»am
);

743 
wšt_t
 
	`g‘wc
 (
__FILE
 *
__¡»am
);

749 
wšt_t
 
	`g‘wch¬
 ();

756 
wšt_t
 
	`åutwc
 (
wch¬_t
 
__wc
, 
__FILE
 *
__¡»am
);

757 
wšt_t
 
	`putwc
 (
wch¬_t
 
__wc
, 
__FILE
 *
__¡»am
);

763 
wšt_t
 
	`putwch¬
 (
wch¬_t
 
__wc
);

771 
wch¬_t
 *
	`fg‘ws
 (wch¬_ˆ*
__»¡riù
 
__ws
, 
__n
,

772 
__FILE
 *
__»¡riù
 
__¡»am
);

778 
	`åutws
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__ws
,

779 
__FILE
 *
__»¡riù
 
__¡»am
);

786 
wšt_t
 
	`ung‘wc
 (wšt_ˆ
__wc
, 
__FILE
 *
__¡»am
);

787 
__END_NAMESPACE_STD


790 #ifdeà
__USE_GNU


798 
wšt_t
 
	`g‘wc_uÆocked
 (
__FILE
 *
__¡»am
);

799 
wšt_t
 
	`g‘wch¬_uÆocked
 ();

807 
wšt_t
 
	`fg‘wc_uÆocked
 (
__FILE
 *
__¡»am
);

815 
wšt_t
 
	`åutwc_uÆocked
 (
wch¬_t
 
__wc
, 
__FILE
 *
__¡»am
);

824 
wšt_t
 
	`putwc_uÆocked
 (
wch¬_t
 
__wc
, 
__FILE
 *
__¡»am
);

825 
wšt_t
 
	`putwch¬_uÆocked
 (
wch¬_t
 
__wc
);

834 
wch¬_t
 *
	`fg‘ws_uÆocked
 (wch¬_ˆ*
__»¡riù
 
__ws
, 
__n
,

835 
__FILE
 *
__»¡riù
 
__¡»am
);

843 
	`åutws_uÆocked
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__ws
,

844 
__FILE
 *
__»¡riù
 
__¡»am
);

848 
__BEGIN_NAMESPACE_C99


852 
size_t
 
	$wcsáime
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__maxsize
,

853 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

854 
__cÚ¡
 
tm
 *
__»¡riù
 
__
è
__THROW
;

855 
__END_NAMESPACE_C99


857 #ifdeà
__USE_GNU


858 
	~<xloÿË.h
>

862 
size_t
 
	$wcsáime_l
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__maxsize
,

863 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

864 
__cÚ¡
 
tm
 *
__»¡riù
 
__
,

865 
__loÿË_t
 
__loc
è
__THROW
;

874 #ià
defšed
 
__USE_UNIX98
 && !defšed 
__USE_GNU


875 
	#__Ãed_iswxxx


	)

876 
	~<wùy³.h
>

880 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__ex‹º_®ways_šlše


881 
	~<b™s/wch¬2.h
>

884 #ifdeà
__LDBL_COMPAT


885 
	~<b™s/wch¬-ldbl.h
>

888 
__END_DECLS


896 #undeà
__Ãed_mb¡©e_t


897 #undeà
__Ãed_wšt_t


	@/usr/include/wctype.h

24 #iâdeà
_WCTYPE_H


26 
	~<ã©u»s.h
>

27 
	~<b™s/ty³s.h
>

29 #iâdeà
__Ãed_iswxxx


30 
	#_WCTYPE_H
 1

	)

33 
	#__Ãed_wšt_t


	)

34 
	~<wch¬.h
>

38 #iâdeà
WEOF


39 
	#WEOF
 (0xffffffffu)

	)

42 #undeà
__Ãed_iswxxx


47 #iâdeà
__iswxxx_defšed


48 
	#__iswxxx_defšed
 1

	)

50 
__BEGIN_NAMESPACE_C99


53 
	twùy³_t
;

54 
	g__END_NAMESPACE_C99


56 #iâdeà
_ISwb™


61 
	~<’dŸn.h
>

62 #ià
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


63 
	#_ISwb™
(
b™
è(1 << (b™))

	)

65 
	#_ISwb™
(
b™
) \

66 ((
b™
) < 8 ? () ((1UL << (bit)) << 24) \

67 : ((
b™
) < 16 ? () ((1UL << (bit)) << 8) \

68 : ((
b™
) < 24 ? () ((1UL << (bit)) >> 8) \

69 : (è((1UL << (
b™
)è>> 24))))

	)

74 
	m__ISwuµ”
 = 0,

75 
	m__ISwlow”
 = 1,

76 
	m__ISw®pha
 = 2,

77 
	m__ISwdig™
 = 3,

78 
	m__ISwxdig™
 = 4,

79 
	m__ISw¥aû
 = 5,

80 
	m__ISw´št
 = 6,

81 
	m__ISwg¿ph
 = 7,

82 
	m__ISwbÏnk
 = 8,

83 
	m__ISwúŒl
 = 9,

84 
	m__ISwpunù
 = 10,

85 
	m__ISw®num
 = 11,

87 
	m_ISwuµ”
 = 
_ISwb™
 (
__ISwuµ”
),

88 
	m_ISwlow”
 = 
_ISwb™
 (
__ISwlow”
),

89 
	m_ISw®pha
 = 
_ISwb™
 (
__ISw®pha
),

90 
	m_ISwdig™
 = 
_ISwb™
 (
__ISwdig™
),

91 
	m_ISwxdig™
 = 
_ISwb™
 (
__ISwxdig™
),

92 
	m_ISw¥aû
 = 
_ISwb™
 (
__ISw¥aû
),

93 
	m_ISw´št
 = 
_ISwb™
 (
__ISw´št
),

94 
	m_ISwg¿ph
 = 
_ISwb™
 (
__ISwg¿ph
),

95 
	m_ISwbÏnk
 = 
_ISwb™
 (
__ISwbÏnk
),

96 
	m_ISwúŒl
 = 
_ISwb™
 (
__ISwúŒl
),

97 
	m_ISwpunù
 = 
_ISwb™
 (
__ISwpunù
),

98 
	m_ISw®num
 = 
_ISwb™
 (
__ISw®num
)

103 
__BEGIN_DECLS


105 
__BEGIN_NAMESPACE_C99


112 
	$isw®num
 (
wšt_t
 
__wc
è
__THROW
;

118 
	$isw®pha
 (
wšt_t
 
__wc
è
__THROW
;

121 
	$iswúŒl
 (
wšt_t
 
__wc
è
__THROW
;

125 
	$iswdig™
 (
wšt_t
 
__wc
è
__THROW
;

129 
	$iswg¿ph
 (
wšt_t
 
__wc
è
__THROW
;

134 
	$iswlow”
 (
wšt_t
 
__wc
è
__THROW
;

137 
	$isw´št
 (
wšt_t
 
__wc
è
__THROW
;

142 
	$iswpunù
 (
wšt_t
 
__wc
è
__THROW
;

147 
	$isw¥aû
 (
wšt_t
 
__wc
è
__THROW
;

152 
	$iswuµ”
 (
wšt_t
 
__wc
è
__THROW
;

157 
	$iswxdig™
 (
wšt_t
 
__wc
è
__THROW
;

162 #ifdeà
__USE_ISOC99


163 
	$iswbÏnk
 (
wšt_t
 
__wc
è
__THROW
;

172 
wùy³_t
 
	$wùy³
 (
__cÚ¡
 *
__´İ”ty
è
__THROW
;

176 
	$iswùy³
 (
wšt_t
 
__wc
, 
wùy³_t
 
__desc
è
__THROW
;

177 
__END_NAMESPACE_C99


184 
__BEGIN_NAMESPACE_C99


187 
__cÚ¡
 
	t__št32_t
 *
	twù¿ns_t
;

188 
__END_NAMESPACE_C99


189 #ifdeà
__USE_GNU


190 
	$__USING_NAMESPACE_C99
(
wù¿ns_t
)

193 
__BEGIN_NAMESPACE_C99


195 
wšt_t
 
	$towlow”
 (
wšt_t
 
__wc
è
__THROW
;

198 
wšt_t
 
	$towuµ”
 (
wšt_t
 
__wc
è
__THROW
;

199 
__END_NAMESPACE_C99


201 
__END_DECLS


208 #ifdeà
_WCTYPE_H


214 
__BEGIN_DECLS


216 
__BEGIN_NAMESPACE_C99


219 
wù¿ns_t
 
	$wù¿ns
 (
__cÚ¡
 *
__´İ”ty
è
__THROW
;

222 
wšt_t
 
	$towù¿ns
 (
wšt_t
 
__wc
, 
wù¿ns_t
 
__desc
è
__THROW
;

223 
__END_NAMESPACE_C99


225 #ifdeà
__USE_XOPEN2K8


227 
	~<xloÿË.h
>

231 
	$isw®num_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

237 
	$isw®pha_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

240 
	$iswúŒl_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

244 
	$iswdig™_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

248 
	$iswg¿ph_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

253 
	$iswlow”_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

256 
	$isw´št_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

261 
	$iswpunù_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

266 
	$isw¥aû_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

271 
	$iswuµ”_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

276 
	$iswxdig™_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

281 
	$iswbÏnk_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

285 
wùy³_t
 
	$wùy³_l
 (
__cÚ¡
 *
__´İ”ty
, 
__loÿË_t
 
__loÿË
)

286 
__THROW
;

290 
	$iswùy³_l
 (
wšt_t
 
__wc
, 
wùy³_t
 
__desc
, 
__loÿË_t
 
__loÿË
)

291 
__THROW
;

299 
wšt_t
 
	$towlow”_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

302 
wšt_t
 
	$towuµ”_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

306 
wù¿ns_t
 
	$wù¿ns_l
 (
__cÚ¡
 *
__´İ”ty
, 
__loÿË_t
 
__loÿË
)

307 
__THROW
;

310 
wšt_t
 
	$towù¿ns_l
 (
wšt_t
 
__wc
, 
wù¿ns_t
 
__desc
,

311 
__loÿË_t
 
__loÿË
è
__THROW
;

315 
__END_DECLS


	@
1
.
1
/usr/include
126
3057
lib_svc/BL.c
lib_svc/BL.h
lib_svc/BL_residual.c
lib_svc/BL_residual.h
lib_svc/B_BL.c
lib_svc/B_BL.h
lib_svc/BackEdge.h
lib_svc/CabacBMacroblock.c
lib_svc/CabacBMacroblock.h
lib_svc/CabacIMacroblock.h
lib_svc/CabacIPartionning.c
lib_svc/CabacPMacroblock.c
lib_svc/CabacPMacroblock.h
lib_svc/ChooseLayer.c
lib_svc/CoeffLevelPrediction.c
lib_svc/CoeffLevelPrediction.h
lib_svc/Coordonates.c
lib_svc/Coordonates.h
lib_svc/ErrorConcealment.c
lib_svc/ErrorConcealment.h
lib_svc/ErrorDetection.c
lib_svc/ErrorDetection.h
lib_svc/Fill_caches_svc.c
lib_svc/FinishFrameSVC.c
lib_svc/FinishFrameSVC.h
lib_svc/I_BL.c
lib_svc/I_BL.h
lib_svc/InterLayerPrediction.c
lib_svc/InterLayerPrediction.h
lib_svc/Loop_filter_ext.c
lib_svc/Loop_filter_ext.h
lib_svc/Mb_B_svc.c
lib_svc/Mb_B_svc.h
lib_svc/Mb_I_svc.c
lib_svc/Mb_I_svc.h
lib_svc/Mb_P_svc.c
lib_svc/Mb_P_svc.h
lib_svc/MemoryManagement.c
lib_svc/MergeMvIdx.c
lib_svc/MergeMvIdx.h
lib_svc/P_BL.c
lib_svc/P_BL.h
lib_svc/ParseAUDecoder.c
lib_svc/PartitionType.c
lib_svc/PartitionType.h
lib_svc/ResidualProcessing.c
lib_svc/ResidualProcessing.h
lib_svc/SVCDisplay.h
lib_svc/SVCdisplay.c
lib_svc/SliceHeaderAnnex.c
lib_svc/SliceHeaderExtension.c
lib_svc/SliceHeaderExtension.h
lib_svc/Slice_data_B_avc.c
lib_svc/Slice_data_B_svc.c
lib_svc/Slice_data_I_avc.c
lib_svc/Slice_data_P_avc.c
lib_svc/Slice_data_avc.h
lib_svc/SwitchAdress.c
lib_svc/SwitchAdress.h
lib_svc/VlcCabacSvc.c
lib_svc/VlcCabacSvc.h
lib_svc/WriteBackSVC.c
lib_svc/WriteBackSVC.h
lib_svc/blk4x4.h
lib_svc/cabac_svc.c
lib_svc/cabac_svc.h
lib_svc/cavlc_svc.c
lib_svc/cavlc_svc.h
lib_svc/edge_boundary.h
lib_svc/egde_boundary.c
lib_svc/fill_caches_svc.h
lib_svc/ict_svc.h
lib_svc/macroblock_filter.c
lib_svc/macroblock_filter.h
lib_svc/mb_padding.c
lib_svc/mb_padding.h
lib_svc/mb_upsample_filter.c
lib_svc/mb_upsample_filter.h
lib_svc/motion_vector_svc.c
lib_svc/motion_vector_svc.h
lib_svc/nal_unit_header_svc_extension.c
lib_svc/nal_unit_header_svc_extension.h
lib_svc/pic_list_svc.c
lib_svc/pic_list_svc.h
lib_svc/residual_4x4.c
lib_svc/residual_4x4.h
lib_svc/residual_8x8.c
lib_svc/residual_8x8.h
lib_svc/residual_chroma.c
lib_svc/residual_chroma.h
lib_svc/seq_parameter_set_svc_extension.c
lib_svc/set_layer.h
lib_svc/slice_data_B_svc.h
lib_svc/slice_data_I_svc.c
lib_svc/slice_data_I_svc.h
lib_svc/slice_data_P_svc.c
lib_svc/slice_data_P_svc.h
lib_svc/slice_data_cabac.c
lib_svc/slice_data_cavlc.c
lib_svc/slice_data_svc.c
lib_svc/slice_data_svc.h
lib_svc/slice_header_svc.c
lib_svc/slice_layer_in_scalable_extension_rbsp.c
lib_svc/svc_data.h
lib_svc/svc_neighbourhood.c
lib_svc/svc_neighbourhood.h
lib_svc/svc_type.h
lib_svc/upsample_residu.c
lib_svc/upsample_residu.h
libview/extract_picture.c
/usr/include/SDL/SDL_events.h
/usr/include/math.h
/usr/include/stdio.h
/usr/include/stdlib.h
/usr/include/string.h
/usr/include/alloca.h
/usr/include/features.h
/usr/include/getopt.h
/usr/include/libio.h
/usr/include/xlocale.h
/usr/include/_G_config.h
/usr/include/ctype.h
/usr/include/endian.h
/usr/include/gconv.h
/usr/include/wchar.h
/usr/include/wctype.h
